(self.webpackChunkchat=self.webpackChunkchat||[]).push([[8792],{4712:function(e,t,n){"use strict";n.d(t,{S6:function(){return d},p3:function(){return u}});var a=n(45029),r=n(60510),o=n(95774),i=n(12917),s=n(90438),c=n(52236);function l(e){let{eventKey:t,value:n,isVariable:a,meta:r,customerQuery:o}=e;return c.FH.post("/business_events/track",{event_key:t,value:n,is_variable:a,meta:r,customer_query:o})}const u=(0,i.M)(l,2e3);function d(e,t,n){var i;if(e.hasFeature(r.O.AFM_HANDOFF_EVENTS)&&null!==(i=t.successBusinessEvent)&&void 0!==i&&i.eventKey){const{eventKey:e,value:a,isVariable:r}=t.successBusinessEvent;l({eventKey:e,value:a,isVariable:r,meta:{triggered_by:t.id,event_subtype:"link_block_handoff"},customerQuery:{token:n}})}c.FH.post("/events/",{by:n,type:t.isHandoff&&!e.hasFeature(r.O.AFM_HANDOFF_EVENTS)?a.T:a.k,subtype:t.articleId?o.oC:o.U0,message_id:t.id,article_id:t.articleId,url:t.url}).catch((e=>{if((0,s.JE)(e))throw e;throw new s.eZ('POST request failed for "/events/". Reason: "'.concat(e,'"'))}))}},71466:function(e,t,n){"use strict";n.d(t,{Aw:function(){return g},Kb:function(){return f},Ki:function(){return E},St:function(){return h},fh:function(){return c},in:function(){return u},k8:function(){return l},rX:function(){return m},tN:function(){return d}});var a=n(53847),r=n(8101),o=n(77583),i=n(71934);function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=t;return e.body&&(n=Math.min(Math.round(o.y_*e.body.trim().split(" ").length),o.j3)),"quick_replies"===e.type&&(n=0),n}function c(){return{type:a.zg}}function l(e){return{type:a.UT,error:e}}function u(e){return{type:a.Hf,message:e}}function d(e){return{type:a.um,message:e}}function g(e,t,n){return(a,o)=>{a(function(e){let{conversationId:t,message:n,source:a,client:o,pageState:i}=e;return{type:r.mn,conversationId:t,message:n,source:a,client:o,pageState:i}}({conversationId:t,message:e,source:n,client:o().client,pageState:o().pageState}))}}function p(e,t,n){return g({...e,conversation_id:t,isLinkLoading:!0},t,n)}function m(e){return{type:a.ai,loading:e}}function f(e,t){return"link"===e.type&&e.generate_link_preview?{action:p(e,t.conversation_id,t.source),delay:s(e)}:{action:g(e,t.conversation_id,t.source),delay:s(e)}}function h(e){return(t,n)=>{t(function(e){return{type:r.jR,payload:{message:e}}}({id:e.id,body:e.body||"",by:n().chatter.get("token"),data:e.data||null,type:e.type}))}}function E(){return e=>e((0,i.dequeueAllAtOnceAction)())}},67129:function(e,t,n){"use strict";function a(e){return{type:"SET_CHATTER",payload:e}}n.d(t,{y:function(){return a}})},71471:function(e,t,n){"use strict";n.d(t,{x:function(){return c}});var a=n(53177),r=n(87904),o=n(90438),i=n(52236),s=n(22854);const c=e=>async(t,n)=>{const{enabledLanguages:c}=n().embedState;if((0,s.a)()&&c&&!c.includes(e))return;const l=n().languages.map((e=>e.code)),u={language:e};if(!l.includes(e)){const t=a.qG.getDeprecatedLanguageCode(e);u.language=t||e}const d=n().chatter.get("token");try{await t((0,r.f4)(e)),i.FH.patch("/chatters/chat/".concat(d,"/"),u)}catch(e){(0,o.to)(e),t({type:"SET_LANGUAGE_FAILURE"})}}},10598:function(e,t,n){"use strict";n.d(t,{addMessageReactionAction:function(){return V},dequeueAllMessagesInQueueAtOnceAction:function(){return a.Ki},fetchMoreMessagesAction:function(){return Z},getExistingChatter:function(){return F},getLinkResponse:function(){return W},getPredictiveSuggestionsAction:function(){return ne},handleContentToggle:function(){return H},handleSoundToggle:function(){return K},handleUnlockSAML:function(){return j},initializeApp:function(){return B},resetChatState:function(){return U},resetPredictiveSuggestionsAction:function(){return Y},retryMessageAction:function(){return a.St},setLanguage:function(){return i.x},setLightboxError:function(){return q}});var a=n(71466),r=n(26183),o=n(67129),i=n(71471),s=n(8101),c=n(16665),l=n(74266),u=n(3278),d=n(40046),g=n(7732),p=n(53177),m=n(30924),f=n(99651),h=n(62223),E=n(87904),v=n(1217),y=n(21962),A=n(17936),_=n(90438),S=n(2622),b=n(52236),T=n(4276),C=n(74187),w=n(69734),I=n(11021),x=n(64955),R=n(19574),k=n(74262);let O=null,N=null;const L=(0,T.tZ)("actions");L.setLoggerReady();const M=(0,T.tZ)("RESPONSE_TIMEOUT");function D(e,t){return{type:"SET_".concat(e),payload:t}}M.setLoggerReady();const F=()=>(e,t)=>{const n=new x.k,a=t().chatter.get("token"),r=t().languages.map((e=>e.code));return b.FH.get("/chatters/chat/".concat(a,"/")).then((async t=>{const{chatter:a}=t.data,s=a.language||n.query.language,c={canViewDemoContent:a.can_view_demo_content,clientId:a.client_id,id:a._id,playAlertChime:a.play_alert_chime,created:new Date(a.created).valueOf().toString(),deviceNotificationsEnabled:a.device_notifications_enabled,smsNotificationsEnabled:a.sms_notifications_enabled};e((0,o.y)(c)),a.saml&&e({type:"SAML_GATE_TOGGLE_SUCCESS",saml:a.saml});let l="en";if(Object.keys(m.Pc).includes(s)){l=p.qG.getCleanedLanguageCode(s);const t=r.includes(s)?s:l;e((0,i.x)(t))}else e((0,E.f4)(s))}),(async e=>{e.response&&404===e.response.status&&await(0,S.S)()}))},U=()=>({type:"RESET_CHAT"});function z(){return b.FH.get("")}const P=()=>e=>{e((0,h.bindAllEventHandlers)()),e({type:"NEW_CLIENT_LOADED"}),e({type:"PREVENT_LOADING_MORE_LOGS"})},G=()=>async(e,t)=>{let n;try{n=await async function(){const e=(0,A.E)();let t,n;if(e===u.y.Embed2&&(t=await y.embedStore.get("client"),t))return n={data:{client:t}},n;if(e!==u.y.Embed2||void 0===t)try{const e=await b.FH.get(function(){const{hostname:e}=window.location,t=e.split(".");if(t.length<2){const t="Could not find client handle from host ".concat(e);throw L.error(t),new Error(t)}const n=t[0],a=t.slice(1).join(".");return"development"===window.__env.NODE_ENV?b.JR:"https://rollout.".concat(a,"/").concat(n,"/client.json")}());if(!e||!e.data.cache_version||"v2"!==e.data.cache_version)return L.error("Invalid cache version"),n=await z(),n;n={data:{client:e.data}}}catch(e){L.error("Error fetching client cache",{errorMessage:e.message,errorStack:e.stack}),n=await z()}else n=await z();return n}()}catch(t){if(!(t instanceof Error))throw t;return(0,_.to)(new Error(t.message)),e((0,w.ez)("CHAT_OUTAGE_FULL_PAGE")),void M.error("Failure fetching client settings",{errorMessage:t.message,errorStack:t.stack})}await e((0,v.setClient)(n.data));try{await async function(){try{const e=b.FH.get("/client-config/"),{data:{data:t}}=await e;window.PUSHER_CLUSTER=t.PUSHER_CLUSTER,window.PUSHER_KEY=t.PUSHER_KEY}catch(e){if(e instanceof Error&&e.message===k.b$)throw e;throw new _.eZ('Could not fetch PUSHER_CLUSTER and PUSHER_KEY from "/client-config/", Reason: "'.concat(e,'"'))}}()}catch(t){const n=t;return(0,_.to)(new Error(n.message)),e((0,w.ez)("CHAT_OUTAGE_FULL_PAGE")),void M.error("Failure fetching Pusher credentials",{errorMessage:n.message,errorStack:n.stack})}if(e((e=>(e({type:"GET_ALL_LANGUAGES_REQUEST"}),b.FH.get("/languages/").then((t=>e({type:"GET_ALL_LANGUAGES_SUCCESS",languages:t.data.languages})),(()=>e({type:"GET_ALL_LANGUAGES_FAILURE"})))))),I.I.updateSession(n.data.client.persistence),e((0,l.rE)()),!n.data.client.chat&&!n.data.client.chatEnabled)return;try{await e((0,h.initializeChatter)())}catch(t){if(!(t instanceof Error))throw t;return(0,_.to)(t),e((0,w.ez)("CHAT_OUTAGE_FULL_PAGE")),void M.error("Failure initializing chatter",{errorMessage:t.message,errorStack:t.stack})}if((0,A.E)()===u.y.Embed2&&y.embedStore.subscribe((e=>{const{metaFields:n,sensitiveMetaFields:a,wasCampaignShownButNowClosed:r}=e;if((0,C.S)(t().chatter.token,{metaFields:n,sensitiveMetaFields:a}),r){const e=!t().messages.filter((e=>"ignored"!==e.type)).size;y.embedStore.dispatch("setState",{isChatEmpty:e})}})),t().chatter.isNew)return void e(P());(0,A.E)()===u.y.Embed2&&y.embedStore.getState().then((e=>{const{metaFields:n,sensitiveMetaFields:a,wasIntroShown:r,initialURL:o}=e;(0,C.S)(t().chatter.token,{metaFields:{...n,introShown:r,initialURL:o},sensitiveMetaFields:a})})),await e(F()),await e((0,h.getConversations)());const a=t().pageState.get("currentConversationIndex"),r=t().conversations.get(a);if(await(0,h.updateChatterABTestStorage)((0,A.E)(),t().chatter.token),!r)return e((0,o.y)({isNew:!0})),void e(P());e((0,h.bindAllEventHandlers)()),e((0,h.fetchMessages)()),e((0,g.T7)()),e((0,f.mR)())};const H=()=>(e,t)=>{const n=t().chatter.get("token"),a={can_view_demo_content:!t().chatter.get("canViewDemoContent")};e({type:"UPDATE_CHATTER_CHAT_MODEL_REQUEST"}),b.FH.patch("/chatters/chat/".concat(n,"/"),a).then((t=>{e({type:"UPDATE_CHATTER_CHAT_MODEL_SUCCESS",canViewDemoContent:t.data.chatter.can_view_demo_content})})).catch((t=>{(0,_.to)(new Error(t.message)),e({type:"UPDATE_CHATTER_CHAT_MODEL_FAILURE"})}))},B=()=>async(e,t)=>{e((e=>{var t,n;O&&N&&(t=O,n=N,window.removeEventListener("beforeunload",t),document.removeEventListener("visibilitychange",n)),O=()=>{e(c.Ju())},N=()=>{e(c.Lt(document.visibilityState))},function(e,t){window.addEventListener("beforeunload",e),document.addEventListener("visibilitychange",t)}(O,N)})),await e((0,y.initializeEmbedStateAction)()),e(D("PAGE_STATE",{initializationPhase:"current"}));const n=window.location.href,a=Boolean(n.includes("test_user=1"));e(D("PAGE_STATE",{isTestBot:a})),e((0,R.Tf)(n)),await e(G());const{chatter:o,embedState:i}=t(),s=r.BB.getItem("testBotModality");!i.greeting&&s?i.activeModality=s:i.greeting&&i.activeModality&&r.BB.setItem("testBotModality",i.activeModality),e(D("PAGE_STATE",{testBotModality:"voice"===i.activeModality?w.mv:w.VB})),a&&o.get("isNew")&&e(H()),a&&e(D("PAGE_STATE",{showNavBar:!0}))};function Z(){return e=>e((0,h.fetchMessages)())}function W(e){return t=>t((0,h.getLinkResponseRequest)(e))}function V(e,t,n){return(a,r)=>{const o=r().chatter.token,i={type:"review",review:n,response_message_id:t,by:o};a({type:"ADD_REACTION_REQUEST"}),b.FH.post("/message/review/".concat(e,"/"),i).then((()=>a({type:s.WJ,conversationId:e,messageId:t,reaction:n})),(()=>a({type:"ADD_REACTION_FAILURE"})))}}const K=()=>(e,t)=>{const n=t().chatter.get("token"),a={play_alert_chime:!t().chatter.get("playAlertChime")};e({type:"TOGGLE_MESSAGE_ALERT_SOUND_REQUEST"}),b.FH.patch("/chatters/chat/".concat(n,"/"),a).then((t=>{e({type:"TOGGLE_MESSAGE_ALERT_SOUND_SUCCESS",playAlertChime:t.data.chatter.play_alert_chime})})).catch((t=>{(0,_.to)(new Error(t.message)),e({type:"TOGGLE_MESSAGE_ALERT_SOUND_FAILURE"})}))},j=()=>(e,t)=>{const{chatter:n}=t();e({type:"SAML_GATE_TOGGLE_REQUEST"}),window.open(n.getIn(["saml","url"]))};function q(e,t){return n=>{n({type:d.MZ,payload:{errorKey:e,translationOptions:t}})}}n(95164);var X=n(20181),Q=n.n(X);function Y(){return{type:"PREDICTIVE_SUGGESTIONS_RESET"}}function J(e){return{type:"PREDICTIVE_SUGGESTIONS_CELERY_TASK_FAIL",error:e}}function $(e,t,n){return b.FH.post(t,n).then((t=>e(function(e){return{type:"PREDICTIVE_SUGGESTIONS_CELERY_TASK_SUCCESS",response:e}}(t))),(t=>e(J(t)))).catch((t=>e(J(t))))}const ee=Q()($,200),te=Q()($,500);function ne(e){return(t,n)=>{t({type:"GET_PREDICTIVE_SUGGESTIONS_REQUEST"});const a=n().chatter.get("token"),r="/message/predictive_suggestions/".concat(a,"/"),o=Number(new Date),i={text:e.trim(),request_id:o};return n().chatter.get("language")!==n().client.get("language")?te(t,r,i):ee(t,r,i)}}n(29436)},95164:function(e,t,n){"use strict";n.d(t,{V:function(){return i},b:function(){return o}});var a=n(95774),r=n(62223);function o(e,t,n,o,i){return(s,c)=>{s((0,r.addMessageGenericAction)({messageType:a.vP,mimeType:e,url:t,name:n,inState:o,tempMessageUuid:i,client:c().client,pageState:c().pageState}))}}function i(e,t,n,o){return(i,s)=>{i((0,r.addMessageGenericAction)({messageType:a.gq,mimeType:e,url:t,inState:n,tempMessageUuid:o,client:s().client,pageState:s().pageState}))}}},4731:function(e,t,n){"use strict";n.d(t,{Gg:function(){return r},XR:function(){return o}});const a=(0,n(4276).tZ)("actions");function r(e){return a.info("Notification banner set",{notificationInfo:e}),{type:"SET_NOTIFICATION",payload:{notificationInfo:e}}}function o(){return a.info("Notification banner cleared"),{type:"CLEAR_NOTIFICATION",payload:{}}}a.setLoggerReady()},29436:function(){},53847:function(e,t,n){"use strict";n.d(t,{Hf:function(){return i},UT:function(){return o},ai:function(){return r},um:function(){return s},zg:function(){return a}});const a="TRIGGER_MESSAGE_LOADER",r="SET_RESPONSE_LOADING",o="LAST_MESSAGE_ERROR",i="MESSAGE_ERROR",s="MESSAGE_SUCCESS"},8101:function(e,t,n){"use strict";n.d(t,{E3:function(){return g},Fr:function(){return d},Lw:function(){return u},WD:function(){return h},WJ:function(){return r},d8:function(){return f},dB:function(){return s},fi:function(){return a},fu:function(){return p},jR:function(){return l},mn:function(){return o},qe:function(){return c},sB:function(){return m},tc:function(){return i}});const a="UPDATE_OAUTH_STATUS",r="ADD_REACTION_SUCCESS",o="ADD_RESPONSE_MESSAGE",i="UPDATE_MESSAGE_INFO",s="APPEND_MESSAGE_TO_CONVERSATION",c="ADD_MESSAGE",l="RETRY_ADD_MESSAGE",u="ADD_LOGS_FROM_RESPONSE",d="DELETE_MESSAGES",g="SET_CAPTURE_OPTIONS_DISABLED",p="SET_SELECTABLES_EXPIRED",m="UPDATE_SELECTED_OPTION",f="CANCEL_CALLBACK_REQUEST",h="CANCEL_CALLBACK_FAILURE"},51978:function(e,t,n){"use strict";n.d(t,{KL:function(){return s},NM:function(){return o},_E:function(){return c},_M:function(){return a},b9:function(){return i},d_:function(){return r}});const a="BROWSER_EVENT",r="BROWSER_EVENT_VISIBILITY_CHANGE_EVENT",o="SET_BROWSER_LOG_CONTEXT",i="SET_BROWSER_LOG_CONTEXT_SUCCESS",s="RESET_BROWSER_LOG_CONTEXT",c="BROWSER_LOGGER_READY"},16665:function(e,t,n){"use strict";n.d(t,{Ju:function(){return r},Lt:function(){return o},Q4:function(){return s},nC:function(){return i}});var a=n(51978);function r(){return{type:a._M,payload:{name:"beforeunload"}}}function o(e){return{type:a.d_,payload:{name:"visibilitychange",documentVisibility:e}}}function i(){return{type:a.b9,payload:{}}}function s(e){return{type:a._E,payload:{defaultContext:e}}}},74266:function(e,t,n){"use strict";function a(e){return{type:"SET_CHATTER_STORAGE",payload:e}}function r(e){return{type:"REMOVE_CHATTER_STORAGE",payload:e}}function o(){return{type:"RESET_CHATTER_STORAGE",payload:{}}}function i(){return{type:"LOAD_CHATTER_STORAGE",payload:{}}}n.d(t,{DT:function(){return a},Pq:function(){return r},kE:function(){return o},rE:function(){return i}})},73743:function(e,t,n){"use strict";var a=n(58168),r=n(64467),o=n(32485),i=n.n(o),s=n(96540),c=n(47578),l=n(15841),u=n(26234);class d extends s.Component{get className(){const{block:e,icon:t,light:n,disabled:a,size:r,round:o,text:s,clear:c,clearWithBorder:u,iconLarge:d,disabledStyleFlat:g,customClassName:p,isLoading:m,ignoreDisabledClass:f,muted:h}=this.props;let E="";switch(r){case"x-small":E="Button--x-small";break;case"small":E="Button--small";break;case"large":E="Button--large";break;case"x-large":E="Button--x-large"}return i()(l.aT,E,{"Button--glyph":t,"Button--light":n,"Button--disabled":a&&!f,"Button--round":o,"Button--text":s,"Button--clear":c,"Button--clear-with-border":u,"Button--large-icon":d,"Button--disabled-flat":g,"Button--loading":m,"Button--no-text":!s,"Button--block":e,"Button--muted":h,[p]:p})}getStyle(){const{tint:e,light:t,round:n,small:a,fontFamily:r,stylesOverride:o}=this.props,i={};return e&&(i[t||n&&a?"color":"backgroundColor"]=e),r&&(i.fontFamily=r),o&&Object.assign(i,o),i}renderIcon(){const{icon:e,isLoading:t}=this.props;return t?null:e}renderSpinner(){const{light:e,disabled:t,small:n,isLoading:a}=this.props;return a?s.createElement(c.A,{customClassName:"Button__loader",dark:Boolean(e||t),small:n}):null}renderActiveBackground(){const{showActiveBackground:e}=this.props;return e?s.createElement("span",{className:"Button__active-background"}):null}render(){const{forwardedRef:e,onClick:t,disabled:n,title:r,text:o,left:c,center:d,accessKey:g,id:p,type:m,lang:f}=this.props;return s.createElement("button",(0,a.A)({ref:e,id:p,className:this.className,onClick:t,title:r||o||"","aria-label":r||o||"",style:this.getStyle(),disabled:n,type:m,accessKey:g,lang:f},u.H),this.renderIcon(),this.renderActiveBackground(),this.renderSpinner(),s.createElement("span",{className:i()(l.ux,{"Button__text--left":c,"Button__text--center":d})},o))}}(0,r.A)(d,"defaultProps",{light:!1,round:!1,clear:!1,disabled:!1,iconLarge:!1,isLoading:!1,clearWithBorder:!1,disabledStyleFlat:!1,ignoreDisabledClass:!1,type:"button"}),t.A=s.forwardRef(((e,t)=>s.createElement(d,(0,a.A)({},e,{forwardedRef:t}))))},63823:function(e,t,n){"use strict";n.d(t,{X:function(){return A}});var a,r,o,i,s,c,l,u,d,g,p,m=n(96540),f=n(57528),h=n(67207),E=n(64612),v=n(92430);const y=E.Ay.button(a||(a=(0,f.A)(["\n  margin: 0;\n  border: 1px solid ",";\n  font-size: ",";\n  background-color: ",";\n  color: ",";\n  font-weight: ",";\n  border-radius: ",";\n  line-height: 20px;\n  padding: 10px 17px;\n  box-sizing: border-box;\n  cursor: pointer;\n  transition: background-color 100ms linear, border-color 100ms linear;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  ","\n\n  ","\n  \n  ","\n  \n  ","\n  \n  ","\n  \n  ",";\n\n  ","\n\n  ",";\n\n  ","\n\n  ","\n    \n  ","\n"])),(e=>e.theme.themeColor),(e=>e.theme.mainFontSize),(e=>e.theme.themeColor),(e=>e.theme.themeFgColor),v.v.mediumFontWeight,(e=>e.theme.mainBorderRadius),(e=>"primary"===e.buttonType&&!e.disabled&&(0,E.AH)(r||(r=(0,f.A)(["\n      :hover {\n        background-color: ",";\n      }\n    "])),(0,h.Qw)(.05,e.theme.themeColor))),(e=>"danger"===e.buttonType&&!e.disabled&&(0,E.AH)(o||(o=(0,f.A)(["\n      color: ",";\n      border-color: ",";\n      background-color: ",";\n\n      :hover {\n        background-color: ",";\n      }\n    "])),e.theme.colorTextInverted,e.theme.colorEmbellishmentError,e.theme.colorEmbellishmentError,(0,h.Qw)(.05,e.theme.colorEmbellishmentError))),(e=>e.block&&(0,E.AH)(i||(i=(0,f.A)(["\n      display: block;\n      width: 100%;\n    "])))),(e=>"small"===e.size&&(0,E.AH)(s||(s=(0,f.A)(["\n      padding-top: 7px;\n      padding-bottom: 7px;\n    "])))),(e=>"secondary"===e.buttonType&&!e.disabled&&(0,E.AH)(c||(c=(0,f.A)(["\n      background-color: transparent;\n      color: ",";\n      border-color: ",";\n\n      &:hover,\n      &:focus {\n        border-color: ",";\n      }\n    "])),e.theme.themeOutlineColor,(0,h.No)(.5,e.theme.themeOutlineColor),e.theme.themeOutlineColor)),(e=>e.theme.focusStyle),(e=>e.disabled&&(0,E.AH)(l||(l=(0,f.A)(["\n      color: ",";\n      background-color: ",";\n      cursor: default;\n    "])),e.theme.colorTextDisabled,e.theme.colorSolid2)),(e=>e.disabled&&"primary"===e.buttonType&&(0,E.AH)(u||(u=(0,f.A)(["\n      background-color: ",";\n      border-color: ",";\n    "])),e.theme.colorSolid2,e.theme.colorSolid2)),(e=>e.disabled&&"secondary"===e.buttonType&&(0,E.AH)(d||(d=(0,f.A)(["\n      border-color: ",";\n      background-color: transparent;\n    "])),e.theme.colorOutline2)),(e=>"link"===e.buttonType&&(0,E.AH)(g||(g=(0,f.A)(["\n      background-color: transparent;\n      border-color: transparent;\n      color: ",";\n      transition: all 333ms ease-in-out;\n\n      &:hover,\n      &:active {\n        color: ",";\n      }\n    "])),e.theme.colorTextDefault,e.theme.colorTextEmphasized)),(e=>"link"===e.buttonType&&e.disabled&&(0,E.AH)(p||(p=(0,f.A)(["\n      color: ",";\n      pointer-events: none;\n    "])),e.theme.colorTextDisabled))),A=m.forwardRef(((e,t)=>{let{onClick:n,text:a,block:r=!1,buttonType:o="primary",children:i=null,disabled:s=!1,size:c="small",type:l="button",testid:u=null}=e;return m.createElement(y,{block:r,buttonType:o,disabled:s,onClick:n,ref:t,size:c,type:l,"data-testid":u},i||a)}))},49253:function(e,t,n){"use strict";n.d(t,{p:function(){return b}});var a,r,o,i,s,c,l,u,d=n(96540),g=n(15841),p=n(87904),m=n(90880),f=n(57528),h=n(64612),E=n(92430);const v=h.Ay.div(a||(a=(0,f.A)([""]))),y=h.Ay.textarea(r||(r=(0,f.A)(["\n  padding: 10px 13px;\n  border-radius: ",";\n  background: transparent;\n  line-height: 20px;\n\n  ","\n"])),E.v.mainBorderRadius,(e=>(0,h.AH)(o||(o=(0,f.A)(["\n    font-size: ",";\n    border: 1px solid ",";\n    color: ",";\n\n    &:focus {\n      border: 2px solid ",";\n      padding: 9px 12px;\n    }\n\n    ","\n  "])),e.theme.mainFontSize,e.theme.colorOutline3,e.theme.colorTextEmphasized,e.theme.colorOutline4,e.invalid&&(0,h.AH)(i||(i=(0,f.A)(["\n      &,\n      &:focus {\n        border: 2px solid ",";\n        padding: 9px 12px;\n      }\n    "])),e.theme.colorEmbellishmentError)))),A=h.Ay.div(s||(s=(0,f.A)(["\n  position: absolute;\n  ",";\n  bottom: 6px;\n\n  ","\n"])),(e=>e.isRTL?"left: 7px":"right: 7px"),(e=>(0,h.AH)(c||(c=(0,f.A)(["\n    color: ",";\n\n    ","\n  "])),e.theme.colorTextSubdued,e.isInvalid&&(0,h.AH)(l||(l=(0,f.A)(["\n      color: ",";\n      bottom: 27px;\n    "])),e.theme.colorTextError)))),_=h.Ay.div(u||(u=(0,f.A)(["\n  color: ",";\n  padding-top: ",";\n  font-size: ",";\n  text-align: left;\n\n  &:empty {\n    padding: 0;\n  }\n"])),(e=>e.theme.colorEmbellishmentError),E.v.space1,(e=>e.theme.smallFontSize)),S="Input";function b(e){let{id:t,value:n,label:a,onChange:r,minRows:o=2,isInvalid:i,placeholder:s,maxLength:c,autoFocus:l,disabled:u}=e;const f=(0,p.mR)(),h=(0,d.useRef)(null),E="".concat(a,", ").concat(f("MAX_CHARACTER_COUNT",{maxCharCount:c})),{isRTL:b}=(0,m.Wz)();return(0,d.useEffect)((()=>{const e=h.current;if(!e)return;const{lineHeight:t,paddingTop:n,paddingBottom:a}=getComputedStyle(e);e.rows=o,e.rows=(e.scrollHeight-parseInt(n,10)-parseInt(a,10))/parseInt(t,10)}),[n,o]),d.createElement(v,{className:S},t&&d.createElement("label",{htmlFor:t,className:"".concat(S,"__input-label")},a),d.createElement(y,{id:t,name:t,ref:h,rows:o,invalid:Boolean(i)||n.length>c,className:g.BA,value:n,placeholder:s,onChange:e=>{r&&r(e.target.value)},autoFocus:l,"aria-label":E,disabled:u,"data-testid":"MessageInput"}),null!==c&&d.createElement(A,{isInvalid:n.length>c,className:"".concat(S,"__counter"),isRTL:b},c-n.length),d.createElement(_,{role:"alert"},c&&n.length>c&&f("TEXT_TOO_LONG")))}},9246:function(e,t,n){"use strict";n.d(t,{SB:function(){return l},n2:function(){return i}});var a=n(77583),r=n(86471);function o(e){const t=[];let n="",a=!1;for(let r=0;r<e.length;r+=1){const o=e[r];"<"===o?(n.trim()&&(t.push(n.trim()),n=""),a=!0,n+=o):">"===o?(n+=o,a=!1):a?n+=o:" "===o?n.trim()&&(t.push(n.trim()),n=""):n+=o}n.trim()&&t.push(n.trim());const r=[];let o="";const i=/<[a-zA-Z]+(>|.*?[^?]>)/,s=/<\/[a-zA-Z]+(>|.*?[^?]>)/;return t.forEach(((e,n)=>{i.test(e)?o=e:o?(o+=" ".concat(e),(s.test(e)||t.length===n+1)&&(r.push(o),o="")):r.push(e)})),r}function i(e){return{updatedString:e.replace(/\[([^\]]+)\]\(([^)]+)\)/g,((e,t,n)=>t&&n?'<a target="_blank" href="'.concat(n,'">').concat(t,"</a>"):e))}}const s=e=>{let t=e;return t=t.replace(/&lt;ul&gt;/g,"<ul>"),t=t.replace(/&lt;\/ul&gt;/g,"</ul>"),t=t.replace(/&lt;ol&gt;/g,"<ol>"),t=t.replace(/&lt;\/ol&gt;/g,"</ol>"),t=t.replace(/&lt;li&gt;/g,"<li>"),t=t.replace(/&lt;\/li&gt;/g,"</li>"),t},c=e=>{let t=e;const n=t.match(/- .+\n?/g)||[];for(let e=0;e<n.length;e+=1){var a;const r=n[e]||"",o="".concat(0===e?"<ul>":"","<li>").concat(null===(a=r.match(/- (.+)\n?/))||void 0===a?void 0:a[1],"</li>").concat(e===n.length-1?"</ul>":"");t=t.replace(r,o)}const r=t.match(/\d+. .+\n?/g)||[];for(let e=0;e<r.length;e+=1){var o;const n=r[e]||"",a="".concat(0===e?"<ol>":"","<li>").concat(null===(o=n.match(/\d. (.+)\n?/))||void 0===o?void 0:o[1],"</li>").concat(e===r.length-1?"</ol>":"");t=t.replace(n,a)}return t};function l(e,t,n){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a.Mj;const u=t.current;if(!u)return;if(!n){const t=document.createElement("span"),{updatedString:n}=i(e);return t.innerHTML=s(c(n)),u.innerHTML="",void u.appendChild(t)}const{updatedString:d}=i(e),g=d.replace(/\n/g,"\n\n").split("\n\n");let p=0;async function m(){if(p<g.length){var e;const a=null!==(e=g[p])&&void 0!==e?e:"",i=o(a);let s=!1;const c=a.match(/^- .+/)||a.match(/^1. .+/),d=a.includes("&lt;ul&gt;")||a.includes("&lt;ol&gt;");if(c){const e=/- /,n=/\d+\. /,i=[];s=!0;const c=a.match(e)?"ul":"ol",d=a.match(e)?e:n,m=document.createElement(c);null==u||u.appendChild(m),i.push(a||"");for(let e=1;e<g.length;e+=1){const t=g[p+e],n=g[p+e+1];if(null!=t&&t.match(d)){if(i.push(t||""),!n){p+=e;break}}else if(!(null!=t&&t.match(d)||null!=n&&n.match(d))){p+=e-1;break}}for(let e=0;e<i.length;e+=1){var t;const n=o((null===(t=i[e])||void 0===t?void 0:t.replace(d,""))||""),a=document.createElement("li");m.appendChild(a);for(let e=0;e<n.length;e+=1){const t=document.createElement("span");t.innerHTML="".concat(n[e]," "),a.appendChild(t),requestAnimationFrame((()=>{t.style.animationDelay="0s"})),await(0,r.u)(l)}}}else if(d){const e=[];s=!0;const t=a.includes("&lt;ul&gt;")?"ul":"ol",i=document.createElement(t);null==u||u.appendChild(i);for(let t=1;t<g.length;t+=1){const n=g[p+t];if(null==n||!n.includes("&lt;li&gt;")){p+=t;break}e.push(n||"")}for(let t=0;t<e.length;t+=1){var n;const a=o((null===(n=e[t])||void 0===n?void 0:n.replace("&lt;li&gt;","").replace("&lt;/li&gt;",""))||""),s=document.createElement("li");i.appendChild(s);for(let e=0;e<a.length;e+=1){const t=document.createElement("span");t.innerHTML="".concat(a[e]," "),s.appendChild(t),requestAnimationFrame((()=>{t.style.animationDelay="0s"})),await(0,r.u)(l)}}}if(!s){for(let e=0;e<i.length;e+=1){const t=document.createElement("span");/^\s*$/.test(i[e]||"")||(t.innerHTML="".concat(i[e]," "),t.classList.add("word"),null==u||u.appendChild(t)),requestAnimationFrame((()=>{t.style.animationDelay="0s"})),await(0,r.u)(l)}const e=document.createElement("span");e.innerHTML="",""===a.trim()?e.classList.add("double-line-break"):e.classList.add("line-break"),null==u||u.appendChild(e)}p+=1,m()}}m()}},5056:function(e,t,n){"use strict";n.d(t,{a:function(){return v}});var a,r,o,i,s,c,l,u=n(25858),d=n.n(u),g=n(96540),p=n(57528),m=n(67207),f=n(64612),h=n(92430);const E=f.Ay.button(a||(a=(0,p.A)(["\n  display: inline-block;\n  border: 1px solid ",";\n  font-size: ",";\n  font-weight: ",";\n  border-radius: ",";\n  padding: 9px 13px;\n  margin: 0;\n  box-sizing: border-box;\n  white-space: nowrap;\n  background-color: transparent;\n  color: ",";\n  border-color: ",";\n  cursor: pointer;\n  transition: background-color 50ms ease-in-out, border-color 100ms ease-in-out;\n\n  ","\n\n  ","\n  \n  &:hover {\n    border-color: ",";\n  }\n\n  &:active {\n    color: ",";\n    background-color: ",";\n    border-color: ",";\n  }\n\n  ","\n\n  &:focus-visible {\n    border-color: ",";\n  }\n\n  ","\n\n  ","\n"])),(e=>e.theme.themeColor),(e=>e.theme.mainFontSize),h.v.mediumFontWeight,(e=>e.theme.messageBorderRadius),(e=>e.theme.themeOutlineColor),(e=>(0,m.No)(.55,e.theme.themeOutlineColor)),(e=>e.solid&&(0,f.AH)(r||(r=(0,p.A)(["\n      background-color: ",";\n    "])),e.theme.colorSurfaceDefault)),(e=>e.wrapText&&(0,f.AH)(o||(o=(0,p.A)(["\n      white-space: normal;\n      text-align: left;\n    "])))),(e=>(0,m.No)(.1,e.theme.themeOutlineColor)),(e=>e.theme.themeFgColor),(e=>(0,m.Qw)(.1,e.theme.themeColor)),(e=>(0,m.Qw)(.1,e.theme.themeColor)),(e=>e.active&&(0,f.AH)(i||(i=(0,p.A)(["\n      transition-duration: 0ms, 0ms;\n      color: ",";\n      background-color: ",";\n      border-color: ",";\n    "])),e.theme.themeFgColor,e.theme.themeColor,e.theme.themeColor)),(e=>e.theme.themeOutlineColor),(e=>e.theme.focusStyle),(e=>(0,f.AH)(s||(s=(0,p.A)(["\n    ","\n\n    ","\n  "])),e.noPadding&&(0,f.AH)(c||(c=(0,p.A)(["\n      padding-left: 0;\n      padding-right: 0;\n    "]))),e.flexGrow&&(0,f.AH)(l||(l=(0,p.A)(["\n      flex: 1 1 0;\n    "])))))),v=g.forwardRef(((e,t)=>{let{onClick:n=(()=>{}),text:a,active:r=!1,wrapText:o=!1,isToggle:i=!1,solid:s,noPadding:c=!1,flexGrow:l=!1,disabled:u,setDisabled:p,"aria-label":m}=e;const f=d()((e=>{e.target&&n(),p&&p(!0)}),1e3);return i?g.createElement(E,{"aria-pressed":r,onClick:f,ref:t,wrapText:o,active:r,solid:s,noPadding:c,flexGrow:l,disabled:u,"aria-label":m},a):g.createElement(E,{onClick:f,ref:t,wrapText:o,active:r,solid:s,noPadding:c,flexGrow:l,disabled:u,"aria-label":m},a)}))},47578:function(e,t,n){"use strict";var a=n(64467),r=n(32485),o=n.n(r),i=n(96540);class s extends i.Component{buildCustomKeyframe(){const{tint:e}=this.props;return"@keyframes spinner-fade-custom {\n      0% {background-color: ".concat(e,"}\n      100% {background-color: transparent;}\n    }")}render(){const{tint:e,dark:t,customClassName:n,large:a,small:r}=this.props,s=this.buildCustomKeyframe();let c;c=e?"Spinner--custom":t?"Spinner--dark":"Spinner--light";const l=o()("Spinner",c,{[n]:Boolean(n),"Spinner--large":a,"Spinner--small":r});return i.createElement("div",{className:l},e&&i.createElement("style",null," ",s," "),i.createElement("div",{className:"Spinner__blade"}),i.createElement("div",{className:"Spinner__blade"}),i.createElement("div",{className:"Spinner__blade"}),i.createElement("div",{className:"Spinner__blade"}),i.createElement("div",{className:"Spinner__blade"}),i.createElement("div",{className:"Spinner__blade"}),i.createElement("div",{className:"Spinner__blade"}),i.createElement("div",{className:"Spinner__blade"}))}}(0,a.A)(s,"defaultProps",{customClassName:"",dark:!1,large:!1,small:!1,tint:null}),t.A=s},83689:function(e,t,n){"use strict";n.d(t,{m:function(){return I}});var a,r,o=n(96540),i=n(92430);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s.apply(this,arguments)}var c,l=e=>o.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",width:20,height:9,fill:"none"},e),a||(a=o.createElement("path",{d:"M1.185 6H0v3h20V6h-1.185a4 4 0 0 1-3.01-1.366L13.01 1.44a4 4 0 0 0-6.02 0L4.195 4.634A4 4 0 0 1 1.185 6Z"})),r||(r=o.createElement("path",{d:"M1.185 6H0v3h20V6h-1.185a4 4 0 0 1-3.01-1.366L13.01 1.44a4 4 0 0 0-6.02 0L4.195 4.634A4 4 0 0 1 1.185 6Z"}))),u=n(57528),d=n(64612);const g=d.Ay.div(c||(c=(0,u.A)(["\n  font-size: ",";\n  color: ",";\n  background: ",";\n  padding: ",";\n  border-radius: 10px;\n  max-width: ","px;\n  text-align: center;\n  line-height: 1.3;\n"])),i.v.smallFontSize,i.c.colorTextWhite,(e=>e.theme.colorSurfaceTooltip),i.v.gUnit,175),p=e=>{const{children:t}=e;return o.createElement(g,null,t)};var m,f,h,E,v;const y=d.Ay.div(m||(m=(0,u.A)(["\n  position: absolute;\n  left: 50%;\n  margin-top: ",";\n  margin-bottom: ",";\n  width: 100vh;\n  display: flex;\n  justify-content: center;\n  pointer-events: none;\n  z-index: 1;\n\n  opacity: 0;\n  transform: translate(-50%, -4px);\n  transition: opacity 150ms ease, transform 150ms ease;\n\n  bottom: ",";\n"])),i.L.gUnit,i.L.gUnit,(e=>{let{flipY:t}=e;return t?"100%":"auto"})),A=d.Ay.div(f||(f=(0,u.A)(["\n  width: ",";\n  display: inline-block;\n  font-size: 0;\n  vertical-align: middle;\n  position: relative;\n  ","\n"])),(e=>e.fullWidth?"100%":"auto"),(e=>{let{triggerType:t,disabled:n}=e;return n?"":"\n    > :focus-visible + ".concat(y,",\n    &").concat("force"===t?"":":".concat(t)," ").concat(y," {\n      opacity: 1;\n      transform: translate(-50%, 0);\n      transition: opacity 200ms 200ms ease, transform 200ms 200ms ease;\n    }\n  ")})),_=d.Ay.div(h||(h=(0,u.A)(["\n  position: relative;\n  top: ",";\n  left: ",";\n"])),(e=>{let{offset:t}=e;return t?"".concat(t.y,"px"):"auto"}),(e=>{let{offset:t}=e;return t?"".concat(t.x,"px"):"auto"})),S=d.Ay.div(E||(E=(0,u.A)(["\n  position: relative;\n  transform: ",";\n"])),(e=>{let{offset:t}=e;return"translate(".concat(t.x,"px, ").concat(t.y,"px)")})),b=d.Ay.div(v||(v=(0,u.A)(["\n  position: absolute;\n  top: ",";\n  left: 50%;\n  transform: ",";\n  width: 18px;\n  color: ",";\n\n  & > svg {\n    fill: currentColor;\n  }\n"])),(e=>e.flipY?"calc(100% - 3px)":"3px"),(e=>e.flipY?"translate(-50%, 0) rotate(180deg)":"translate(-50%, -100%)"),(e=>e.theme.colorSurfaceTooltip)),T=A,C=parseInt(i.v.gUnitHalf,10),w={blurbInnerWrapperOffset:{x:0,y:0},blurbOuterWrapperOffset:{x:0,y:0},shouldFlipY:!1},I=e=>{let{children:t,triggerType:n="hover",disabled:a,text:r,offsetX:i=0,offsetY:s=0,showAbove:c=!1,fullWidth:u=!1}=e;const[d,g]=(0,o.useState)(w),m=(0,o.useRef)(null),f=(0,o.useRef)(null),h=(0,o.useRef)(null),E=(0,o.useRef)(null),{shouldFlipY:v,blurbInnerWrapperOffset:A,blurbOuterWrapperOffset:I}=d,x=(0,o.useCallback)((()=>{const e=m.current,t=f.current,n=E.current;if(!e||!t||!n)return;const a=n.getBoundingClientRect(),r=e.getBoundingClientRect(),o=document.body.getBoundingClientRect();let c=0;o.right-r.right<C?c=-(r.right-o.right+C):r.left-o.left<C&&(c=o.left-r.left+C);let l=!1;o.bottom<a.bottom+100?l=!0:a.top<100&&(l=!1),g((e=>({...e,blurbInnerWrapperOffset:{x:c,y:0},blurbOuterWrapperOffset:{x:i,y:s},shouldFlipY:l})))}),[i,s,g]);return(0,o.useEffect)((()=>{x()}),[]),o.createElement(T,{triggerType:n,disabled:a,onMouseEnter:x,ref:E,fullWidth:u},t,o.createElement(y,{flipY:v||c,ref:h,"aria-hidden":a},o.createElement(S,{offset:I},o.createElement(b,{flipY:v||c},o.createElement(l,null)),o.createElement(_,{ref:m},o.createElement(_,{ref:f,offset:A},o.createElement(p,null,r))))))}},84324:function(e,t,n){"use strict";n.d(t,{$n:function(){return g.A},pd:function(){return p.p},$b:function(){return G},m_:function(){return W.m}});var a,r,o,i,s,c,l,u,d,g=n(73743),p=n(49253),m=n(32485),f=n.n(m),h=n(96540),E=n(92430),v=n(60510),y=n(87904),A=n(20969),_=n(1217),S=n(57528),b=n(64612);const T=(0,b.i7)(a||(a=(0,S.A)(["\n  0%,\n  50% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n"]))),C=(0,b.i7)(r||(r=(0,S.A)(["\n  0% {\n    opacity: 0;\n  }\n  50%,\n  70% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n"]))),w=(0,b.i7)(o||(o=(0,S.A)(["\n  0% {\n    opacity: 0;\n  }\n  70%,\n  100% {\n    opacity: 1;\n  }\n"]))),I=(0,b.i7)(i||(i=(0,S.A)(["\n  0% {\n    opacity: 1;\n  }\n\n  50% {\n    opacity: 0.6;\n  }\n\n  100% {\n    opacity: 1;\n  }\n"]))),x=(0,b.AH)(s||(s=(0,S.A)(["\n  position: absolute;\n  background-color: transparent;\n  color: ",";\n  border-radius: 20px;\n  padding: 0 14px;\n  font-weight: normal;\n  line-height: 1.25;\n  font-size: ",";\n  word-break: break-word;\n  white-space: pre-wrap;\n  box-sizing: border-box;\n"])),(e=>e.theme.colorTextLoadingWords),(e=>e.theme.xSmallFontSize)),R=b.Ay.div(c||(c=(0,S.A)(["\n  display: flex;\n  position: relative;\n  width: 100%;\n  flex: 0 1 100%;\n  align-items: center;\n"]))),k=b.Ay.div(l||(l=(0,S.A)(["\n  ","\n  opacity: 0;\n  &:first-child {\n    opacity: 1;\n    animation: "," 1.25s linear 0s forwards;\n  }\n  &:nth-child(2) {\n    animation: "," 2.5s linear 1.5s forwards;\n  }\n  &:nth-child(3) {\n    animation: "," 1.25s linear 4s forwards;\n  }\n  &.pulse {\n    animation: "," 1.5s ease-in-out forwards infinite;\n  }\n"])),x,T,C,w,I),O=(0,b.i7)(u||(u=(0,S.A)(["\n  to {\n    background-position: 200% center;\n  }\n"]))),N=b.Ay.div(d||(d=(0,S.A)(["\n  padding: 0 10px;\n\n  font-weight: normal;\n  line-height: 1.25;\n  font-size: ",";\n\n  background: linear-gradient(to right, #e8e8e8 30%, #999999 60%, #999999 80%, #e8e8e8 100%);\n  background-size: 200% auto;\n\n  color: #000;\n  background-clip: text;\n  text-fill-color: transparent;\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  animation: "," 1s linear infinite;\n  animation-direction: reverse;\n"])),(e=>e.theme.mainFontSize),O);function L(){const e=(0,h.useRef)(null),{client:t}=(0,_.useClient)(),n=(0,y.mR)();return(0,h.useEffect)((()=>{if(!t.hasFeature(_.Features.WS_CHAT_UI_IMPROVEMENTS_ROLLOUT_1)){const t=e.current;if(!t)return;window.setTimeout((()=>{t.classList.add("pulse")}),5250)}})),t.hasFeature(_.Features.WS_CHAT_UI_IMPROVEMENTS_ROLLOUT_1)?h.createElement(R,null,h.createElement(N,null,n("LOADING_THINKING"))):h.createElement(R,null,h.createElement(k,null,n("LOADING_THINKING")),h.createElement(k,null,n("LOADING_ANALYZING")),h.createElement(k,{ref:e},n("LOADING_GENERATING_RESPONSE")))}var M,D,F;const U=(0,b.i7)(M||(M=(0,S.A)(["\n  50% { opacity: 1 }\n"]))),z=b.Ay.div(D||(D=(0,S.A)(["\n  display: inline-flex;\n  padding: 0 12px;\n  column-gap: ",";\n"])),E.v.space1),P=b.Ay.div(F||(F=(0,S.A)(["\n  background-color: ",";\n  height: ",";\n  width: ",";\n  border-radius: 50%;\n  opacity: 0.2;\n  animation-name: ",";\n  animation-duration: 1s;\n  animation-delay: ",";\n  animation-iteration-count: infinite;\n"])),(e=>e.bgColor),(e=>e.isGenerative?"4px":"8px"),(e=>e.isGenerative?"4px":"8px"),U,(e=>"".concat(333*e.index,"ms")));function G(e){let{lastMessageIsUser:t=!1,customClassName:n="",isInHandoff:a}=e;const{client:r,isGenerative:o}=(0,A.t)(),{chatter:i}=(0,y.NC)(),s="en"===i.language||"fr"===i.language,c=o&&t&&s&&!a;let l="";const[u,d]=(0,h.useState)(!1);return(0,h.useEffect)((()=>{c&&r.hasFeature(v.O.WS_CHAT_UI_IMPROVEMENTS_ROLLOUT_1)&&setTimeout((()=>{d(!0)}),3e3)}),[r,c]),n&&(l=f()("LoadingElement",{[n]:Boolean(n)})),c&&!u?h.createElement(L,null):h.createElement("div",{className:l},h.createElement(z,null,(()=>{let e=0,t=[];for(;e<3;)t=[...t,h.createElement(P,{isGenerative:o&&!r.hasFeature(v.O.WS_CHAT_UI_IMPROVEMENTS_ROLLOUT_1),bgColor:E.W.colorGrey3Active,key:e,index:e+1})],e+=1;return t})()))}var H,B,Z;n(64467),n(94708),n(31904),n(15841),b.Ay.div(H||(H=(0,S.A)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 5;\n"]))),b.Ay.div(B||(B=(0,S.A)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 90%;\n  min-width: 304px;\n  max-width: 400px;\n  max-height: 50%;\n  overflow: auto;\n  border-radius: 12px;\n  background-color: ",";\n  font-size: ",";\n  text-align: center;\n  transition: transform 200ms cubic-bezier(0.34, 1.56, 0.64, 1);\n  transform: translate3d(-50%, -50%, 0)\n    ",";\n\n  ","\n"])),E.W.colorWhite,E.L.mainFontSize,(e=>{let{transitionStatus:t}=e;return"entered"===t?"scale(1)":"scale(0.96)"}),(e=>{let{fullScreen:t}=e;return t&&"\n    width: 100%;\n    max-width: 100%;\n    height: 100%;\n    max-height: 100%;\n    border-radius: 0;\n    transition: all 200ms ease-out;\n  "})),b.Ay.div(Z||(Z=(0,S.A)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.8);\n"]))),h.Component;var W=n(83689)},45029:function(e,t,n){"use strict";n.d(t,{T:function(){return a},k:function(){return r}});const a="handoff",r="link_click"},77583:function(e,t,n){"use strict";n.d(t,{Mj:function(){return c},bg:function(){return r},bn:function(){return o},j3:function(){return s},mm:function(){return a},y_:function(){return i}});const a=200,r=500,o=500,i=120,s=2e3,c=30},92430:function(e,t,n){"use strict";n.d(t,{L:function(){return o},W:function(){return a},c:function(){return r},v:function(){return i}});const a={error:"#EF214B",warning:"#FB9804",themeDefault:"#293FFF",colorTextWhite:"rgba(255, 255, 255, 0.95)",colorTextBlack:"rgba(0, 0, 0, 0.95)",colorUIGood:"#39C379",colorGrey0:"#F3F3F3",colorGrey1:"#DBDBDB",colorBlack0:"#171A1E",colorNavigation:"#1C1431",colorWhite0:"#FFFFFF",colorSlate800:"#32394C",colorBorder:"#E8E8EB",colorWhite:"#FFFFFF",colorWhiteTransparent:"rgba(255, 255, 255, 0)",colorBlack:"#101820",colorGrey2:"#E8E8EB",colorGrey2Active:"#D9D9DE",colorGrey3:"#C4C4CA",colorGrey3Active:"#ADADB3",colorGrey4:"#ADADB3",colorGrey4Active:"#535358",colorUiHighlight:"#FFE560",colorUiPrimary:"#0975EF",colorUiPrimaryActive:"#005DC7",colorUiPrimaryLight:"#EBF3FE",colorUiPrimaryLightHover:"#D4E6FC",colorUiPrimaryLightActive:"#BEDAFB",colorUiStressed:"#EB5757",colorUnimportant:"#E8E8EB",colorWarn:"#FB9804",colorUIGoodActive:"#23A45F"},r=a,o={minScreenSize:"320px",space0:"2px",space1:"4px",space2:"8px",space3:"10px",space4:"12px",space5:"16px",space6:"24px",space7:"32px",space8:"48px",space9:"56px",space10:"64px",xSmallFontSize:"0.75rem",smallFontSize:"0.875rem",mainFontSize:"1rem",largeFontSize:"1.063rem",xLargeFontSize:"1.25rem",heading1FontSize:"1.5rem",heading2FontSize:"1.25rem",heading3FontSize:"1.063rem",normalFontWeight:400,mediumFontWeight:500,heavyFontWeight:600,gUnit:"8px",gUnitHalf:"4px",gUnitDouble:"16px",smallBorderRadius:"6px",mainBorderRadius:"8px",messageBorderRadius:"12px",messageBorderRadiusInner:"11px",standardAnimationTime:"180ms",regularFontWeight:400,inputHeight:"32px",topBarHeight:"48px",navBarHeight:"48px",smallIconWidth:"24px",smallIconHeight:"24px",mediumIconWidth:"32px",mediumIconHeight:"32px",uiShadowLevel2:"0px 2px 16px rgba(48, 31, 6, 0.08)",boxShadow1:"0px 1px 2px rgba(0, 0, 0, 0.08)",boxShadow2:"0px 4px 14px rgba(0, 0, 0, 0.06)",boxShadow3:"0px 8px 24px rgba(0, 0, 0, 0.08)",boxShadow4:"0px 12px 48px 4px rgba(0, 0, 0, 0.12)"},i=o},74262:function(e,t,n){"use strict";n.d(t,{Cl:function(){return r},F4:function(){return a},HY:function(){return u},Sx:function(){return c},XM:function(){return s},b$:function(){return d},cg:function(){return i},l2:function(){return l},wm:function(){return o}});const a="FILE_UPLOAD_UNKNOWN_ERROR",r="FILE_UPLOAD_UNSUPPORTED_TYPE",o="FILE_UPLOAD_EXCEED_SIZE_LIMIT",i="ZendeskAuth: Token was undefined - please ensure you are returning a valid token from zdChatterAuthCallback in your Ada Embed Settings",s="ZendeskAuth: Could not complete auth event",c="ZendeskAuth: Token was undefined",l="ZendeskAuth: Chat loaded without Embed - skipping token fetch",u="ZendeskAuth: An error occurred",d="Network Error"},24744:function(e,t,n){"use strict";n.d(t,{DI:function(){return c},HZ:function(){return i},MP:function(){return o},Pd:function(){return E},Sp:function(){return g},T8:function(){return _},Vl:function(){return A},W_:function(){return y},Wd:function(){return p},XI:function(){return r},Xg:function(){return m},Yt:function(){return S},Zj:function(){return a},b8:function(){return T},oF:function(){return s},p8:function(){return C},qR:function(){return f},r6:function(){return h},rI:function(){return u},rY:function(){return d},xM:function(){return l},yk:function(){return b},zm:function(){return v}});const a="GET_WINDOW_ORIGIN",r="SET_WINDOW_ORIGIN",o="ANALYTICS",i="CHATTER",s="LIVE_CHAT_UPDATE",c="CUSTOM_JAVASCRIPT",l="LIVE_HANDOFF",u="ZD_SESSION",d="RESET_FROM_CHAT",g="CREATE_NOTIFICATION",p="REQUEST_NOTIFICATIONS",m="END_CONVERSATION",f="ERROR_EVENT",h="PUBLISH_EVENT",E="ZD_MESSAGING_HANDOFF",v="live_chat_connecting",y="live_chat_connected",A="live_chat_reconnected",_="live_chat_end",S="live_chat_connection_failure",b="live_chat_queue_position",T="live_chat_message",C="api_request_failure"},60510:function(e,t,n){"use strict";let a;n.d(t,{O:function(){return a}}),function(e){e.ADA_GLASS_NUANCE="adaGlassNuance",e.ADA_GLASS_SALESFORCE="adaGlassSalesforce",e.ADA_GLASS_ZENDESK="adaGlassZendesk",e.AFM_PROACTIVE_MESSAGING="afmProactiveMessaging",e.AFM_HANDOFF_EVENTS="afmHandoffEvents",e.CSAT_PRO_POST_CHAT="csatProPostChat",e.CSAT_V2="csatV2",e.DONATED_BOT="donatedBot",e.END_CHAT="endChat",e.END_LIVE_CHAT="endLiveChat",e.PREDICTIVE_SUGGESTIONS="predictiveSuggestions",e.SALESFORCE_FILE_UPLOAD="salesforceFileTransfer",e.QUEUE_BOT_BLOCK="queueBotBlock",e.ZENDESK_CHATTER_AUTH="adaGlassZendeskChatterAuth",e.LOCAL_NOTIFICATIONS="localNotifications",e.ADA_GLASS_ZENDESK_MESSAGING="adaGlassZendeskMessaging",e.DEV_DOWNLOAD_TRANSCRIPT="devDownloadTranscript",e.EXPERIMENT_VOICE="experimentVoice",e.PUSH_NOTIFICATIONS="pushNotifications",e.EXCLUDE_CHAT_SESSION_AUTH="excludeChatSessionAuth",e.WFLW_ADVANCED_LOB="wflwAdvancedLob",e.FORCED_QUICK_REPLIES="forcedQuickReplies",e.FREE_TIER_PLAN="freeTierPlan",e.WS_CHAT_UI_IMPROVEMENTS="wsChatUiImprovements",e.WS_CHAT_UI_IMPROVEMENTS_ROLLOUT_1="wsChatUiImprovementsRollout_1"}(a||(a={}))},68060:function(e,t,n){"use strict";n.d(t,{P:function(){return a}});const a="en"},95774:function(e,t,n){"use strict";n.d(t,{H4:function(){return I},OZ:function(){return _},P3:function(){return o},Qy:function(){return a},SU:function(){return u},TE:function(){return l},Tk:function(){return p},U0:function(){return b},UR:function(){return r},Xn:function(){return C},YM:function(){return s},b:function(){return m},by:function(){return E},dP:function(){return f},fG:function(){return d},gA:function(){return v},gq:function(){return T},jx:function(){return A},mF:function(){return c},mk:function(){return g},n$:function(){return h},oC:function(){return w},p$:function(){return y},qG:function(){return i},vP:function(){return S}});const a="seamless_oauth",r="surfaceable_list_selection",o="agent_arrival",i="agent_file_request",s="agent_file_request_cancelled",c="agent_file_transfer_success",l="agent_file_transfer_failure",u="conversation_ended",d="conversation_timeout",g="signed_in",p="signed_out",m="chatter_secret_sent",f="chatter_timed_out",h="chatter_about_to_time_out",E="chatter_time_out_imminent",v="queue_cap_exceeded",y="chatter_idle_time_out",A="live_chat_disconnected",_="waiting_for_data",S="downloadable",b="link",T="picture",C="video",w="article",I=["text",C,T,b]},8311:function(e,t,n){"use strict";n.d(t,{Ug:function(){return o},ad:function(){return r},m7:function(){return a}});const a="live_agent_connected",r="live_agent_queue",o="waiting_for_data"},82961:function(e,t,n){"use strict";n.d(t,{D_:function(){return r},Nl:function(){return o},Oj:function(){return a},SB:function(){return i}});const a="chatter",r="created",o="sessionToken",i="zdSessionId"},15841:function(e,t,n){"use strict";n.d(t,{BA:function(){return g},G5:function(){return s},NC:function(){return d},Nn:function(){return o},Sv:function(){return i},aT:function(){return a},o_:function(){return l},p4:function(){return u},ux:function(){return r},wU:function(){return p},zz:function(){return c}});const a="Button",r="Button__text",o="PostAgentCsatForm__title",i="proactive-csat-button-close",s="proactive-csat-button-open",c="proactive-csat-bubble",l="CsatScale__item-wrapper",u="ScaleBubbleContent",d="CsatScale__scale",g="Input__input",p="modal"},3278:function(e,t,n){"use strict";let a,r;n.d(t,{w:function(){return r},y:function(){return a}}),function(e){e.Embed1="embed1",e.Embed2="embed2",e.Chaperone="chaperone"}(a||(a={})),function(e){e.a="a",e.b="b",e.c="c",e.d="d",e.e="e",e.f="f",e.g="g",e.h="h",e.i="i",e.j="j",e.k="k",e.l="l",e.m="m",e.n="n",e.o="o",e.p="p",e.q="q",e.r="r",e.s="s",e.t="t",e.u="u",e.v="v",e.w="w",e.x="x",e.y="y",e.z="z"}(r||(r={}))},32035:function(e,t,n){"use strict";n(40590),n(66195),n(83515),n(50624),n(86489),n(48642),n(10557),n(95843),n(79432),n(1772),n(258),n(30959),n(75670),n(19322),n(5880),n(45773),n(83396),n(73719),n(46590),n(17870),n(40173),n(60243),n(68329),n(70825),n(95889),n(14758),n(15679),n(9096),n(47950),n(53746),n(9513),n(46395),n(52357),n(28921),n(36148),n(66609),n(93266),n(82432),n(14602),n(99078),n(75417),n(85183),n(26413),n(30789),n(58565),n(60933),n(43842);var a=n(24744),r=n(3278),o=n(99651),i=n(25054),s=n(21962),c=n(17936),l=n(22854),u=n(4276),d=n(55017),g=n(96540),p=n(40961),m=n(53058),f=n(61417),h=n(88603),E=n(64612),v=n(10598),y=n(64467),A=n(32485),_=n.n(A),S=n(94708),b=n.n(S),T=n(96162),C=n(95081),w=n(73743),I=n(58743);const x="SET_DOCKED_SHEET_CONTENT";function R(e){return{type:x,content:e}}function k(){const e=(0,m.wA)(),t=(0,g.useCallback)((function(){return e(R(...arguments))}),[e]),n=(0,g.useCallback)((()=>e(R(null))),[e]);return{dockedSheet:(0,m.d4)((e=>e.dockedSheet)),setDockedSheetContent:t,closeDockedSheet:n}}const O={content:null};var N,L,M,D,F=n(90880),U=n(69734),z=n(57528);const P=E.Ay.section(N||(N=(0,z.A)(["\n  position: relative;\n  z-index: 1;\n  width: 100vw;\n  ",";\n  box-sizing: border-box;\n"])),(e=>"margin-".concat(e.isRTL?"right":"left",": -100vw"))),G=E.Ay.div(L||(L=(0,z.A)(["\n  transition: ","ms ease-out;\n  transition-property: padding, height, opacity;\n  height: 0;\n  opacity: 0;\n  overflow: hidden;\n  box-sizing: border-box;\n  border: 1px solid ",";\n  border-radius: 16px 16px 0 0;\n  box-shadow: 0px -2px 8px rgba(48, 31, 6, 0.04);\n\n  ","\n"])),(e=>e.animationTime),(e=>e.theme.colorDockedSheetBorder),(e=>(0,E.AH)(M||(M=(0,z.A)(["\n    background: ",";\n\n    ","\n  "])),e.theme.colorSurfaceCardElevated,!e.shouldHide&&(0,E.AH)(D||(D=(0,z.A)(["\n      opacity: 1;\n      height: ","px;\n    "])),e.height))));function H(){const{isRTL:e}=(0,F.Wz)(),{dockedSheet:t}=k(),n=(0,g.useRef)(t.content),[a,r]=(0,g.useState)(!0),[o,i]=(0,g.useState)(0),s=(0,g.useRef)(null),[c,l]=(0,g.useState)(t.content),{pageState:u}=(0,U.Sw)(),{keyboardNavigation:d}=u;return(0,g.useEffect)((()=>{s.current&&(s.current.ontransitionend=()=>{(0,I.hZ)(I.og.SCROLL_MESSAGE_LIST_TO_BOTTOM)})}),[]),(0,g.useEffect)((()=>{n.current=t.content;const e=s.current;e&&t.content&&(l(t.content),r(!1),setTimeout((()=>{i(e.scrollHeight)}),0)),null===t.content&&(r(!0),setTimeout((()=>{l(n.current)}),500))}),[t.content]),g.createElement(b(),{active:!a&&d,focusTrapOptions:{clickOutsideDeactivates:!0}},g.createElement(P,{isRTL:e},g.createElement(G,{animationTime:500,"data-testid":"docked-sheet-content",height:o,ref:s,shouldHide:a},c)))}var B=n(13619),Z=n(62223),W=n(87904),V=n(1217),K=n(79673);function j(e){return{type:"UPDATE_MESSAGE",message:e}}function q(){return e=>e(j(""))}n(54673);var X=n(77583),Q=n(22635);function Y(){const e=(0,m.d4)((e=>e.currentMessage)),t=(0,m.d4)((e=>e.pageState)),n=(0,m.d4)((e=>e.client)).productType===Q.Kj?X.bg:X.mm;return{currentMessage:e,isOverLimit:!t.inState&&e.length>n,maxMessageLength:n}}var J=n(90438),$=n(52236),ee=n(11021),te=n(43219),ne=n(4731),ae=n(63823),re=n(1514),oe=n(23682),ie=n(3228),se=n(46876);const ce=(0,se.bN)();function le(e,t){return $.FH.post("/message/live_chat/retry/",{chatter_token:t,chat_session:e})}function ue(e,t){return $.FH.post("/message/live_chat/cancel/",{chatter_token:t,chat_session:e})}function de(){const{chatter:e}=(0,W.NC)(),t=(0,m.wA)(),{pageState:n}=(0,U.Sw)(),r=(0,m.d4)((e=>e.liveAgent)),o=(0,m.d4)(ie.lD).map((e=>r.agents[e])),{activeConversation:i}=(0,K.VC)(),s=o.slice(-1)[0]||null,c=n.notification,l=r.inPending,u=["live_agent_queue","live_chat_connecting"].includes(n.notificationInfo.get("type")),d=n.notificationInfo.get("unit"),p=n.notificationInfo.get("amount"),f=c&&n.notificationInfo.get("type")===a.p8,h=(0,g.useMemo)((()=>{const e=r.adaGlassEnv===te._Y&&(null==s?void 0:s.isActive);return c&&u&&l&&!s&&!e?{unit:d,amount:p}:null}),[c,u,l,d,p,r.adaGlassEnv,s]);return{inLiveChat:r.inLiveChat,liveChatQueue:h,activeAgent:s,cancelLiveChat:async()=>{t({type:te.C_});try{const t=(0,oe.aJ)(ue);return await t(n.sessionID,e.token),ce.info("Live Chat cancellation was successful"),!0}catch(e){var a;const t=null===(a=e.response)||void 0===a?void 0:a.status;return ce.info("Live Chat cancellation failed",{err_msg:t}),400===t}},retryLiveChat:async()=>{try{const t=(0,oe.aJ)(le);return await t(n.sessionID,e.token),ce.info("Live Chat Retry was successful"),!0}catch(e){return ce.info("Live Chat Retry failed",{err_msg:e.message}),!1}},endLiveChat:()=>{if(!i)throw new Error("No active conversation to end");(0,K.i9)("close_live_agent_conversation",e.token),t((0,U.Dq)(i.id))},setAllAgentsToInactive:()=>t((0,re.a$)()),apiRequestFailureMessage:f?n.notificationInfo:null}}var ge,pe,me,fe,he,Ee,ve,ye,Ae,_e,Se,be,Te,Ce,we=n(92430);const Ie=E.Ay.section(ge||(ge=(0,z.A)(["\n  position: relative;\n  z-index: 1;\n  width: 100vw;\n  ",";\n  box-sizing: border-box;\n"])),(e=>"margin-".concat(e.isRTL?"right":"left",": -100vw"))),xe=E.Ay.div(pe||(pe=(0,z.A)(["\n  transition: 500ms ease-out;\n  transition-property: padding, height, opacity;\n  height: 0;\n  box-sizing: border-box;\n  overflow: hidden;\n  border-radius: 16px 16px 0 0;\n  box-shadow: 0px 12px 48px 4px rgba(0, 0, 0, 0.12);\n\n  ","\n"])),(e=>(0,E.AH)(me||(me=(0,z.A)(["\n    background: ",";\n\n    ","\n  "])),e.theme.colorSurfaceCardElevated,e.isShown&&(0,E.AH)(fe||(fe=(0,z.A)(["\n      transition-duration: 500ms;\n      transition-timing-function: ease-out;\n      opacity: 1;\n      height: ","px;\n    "])),e.height)))),Re=E.Ay.div(he||(he=(0,z.A)(["\n  padding: ",";\n"])),we.v.space4),ke=(0,E.i7)(Ee||(Ee=(0,z.A)(["\n  0% { transform: translateX(0); opacity: 0; }\n  40% { opacity: 1; }\n  100% { transform: translateX(calc(100vw - 80%)) scale(.08, 1); opacity: 0; }\n"]))),Oe=E.Ay.div(ve||(ve=(0,z.A)(['\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  transform-origin: right center;\n\n  &::after {\n    content: "";\n    display: block;\n    width: 57px;\n    height: 3px;\n    animation: 1800ms '," ease-in-out infinite;\n    border-radius: 2px;\n\n    ","\n\n    ",";\n  }\n"])),ke,(e=>(0,E.AH)(ye||(ye=(0,z.A)(["\n      background-color: ",";\n    "])),e.theme.colorEmbellishmentInfo)),(e=>e.isRTL&&(0,E.AH)(Ae||(Ae=(0,z.A)(["\n        position: absolute;\n        left: 0;\n        animation-direction: reverse;\n      "]))))),Ne=E.Ay.h1(_e||(_e=(0,z.A)(["\n  margin: "," 0;\n  padding: 0;\n  font-weight: ",";\n  text-align: center;\n\n  ","\n"])),we.v.space5,we.v.heavyFontWeight,(e=>(0,E.AH)(Se||(Se=(0,z.A)(["\n    font-size: ",";\n    color: ",";\n  "])),e.theme.mainFontSize,e.theme.colorTextEmphasized))),Le=E.Ay.div(be||(be=(0,z.A)(["\n  margin-bottom: ",";\n  text-align: center;\n\n  ","\n"])),we.v.space7,(e=>(0,E.AH)(Te||(Te=(0,z.A)(["\n    font-size: ",";\n    color: ",";\n  "])),e.theme.mainFontSize,e.theme.colorTextDefault))),Me=E.Ay.div(Ce||(Ce=(0,z.A)([""])));function De(){const{liveChatQueue:e,cancelLiveChat:t,apiRequestFailureMessage:n}=de(),a=(0,W.mR)(),r=(0,m.wA)(),{toast:o,showToast:i}=(0,U.dj)(),s=(0,g.useRef)(null),[c,l]=(0,g.useState)(0),[u,d]=(0,g.useState)(e),[p,f]=(0,g.useState)(!1),h=(0,g.useRef)(e),E=(0,g.useRef)(),{isRTL:v}=(0,F.Wz)(),y=!!e||!!n;return(0,g.useEffect)((()=>{const e=s.current;e&&l(y?e.scrollHeight:0)}),[y,u]),(0,g.useEffect)((()=>{e!==h.current&&(h.current=e,e?(clearTimeout(E.current),d(e)):E.current=window.setTimeout((()=>{d(null)}),1e3))}),[e]),g.createElement(Ie,{"aria-hidden":!y,isRTL:v},g.createElement(xe,{isShown:y,height:c,ref:s},y&&g.createElement(Oe,{isRTL:v}),g.createElement(Re,null,null===n?u?g.createElement(g.Fragment,null,g.createElement(Ne,null,a("WAITING_FOR_AN_AGENT")),g.createElement(Le,null,(()=>{if(!u)return"";const{unit:e,amount:t}=u;switch(e){case"time":return a("QUEUE_TIME",{amount:t});case"position":return 0===t?a("QUEUE_GENERIC"):a(t>1?"QUEUE_POSITION_PLURAL":"QUEUE_POSITION_SINGULAR",{amount:t});default:return a("QUEUE_GENERIC")}})())):null:(()=>{if(n){const e=a(n.get("headerTranslationKey")),t=a(n.get("descriptionTranslationKey"));return g.createElement(g.Fragment,null,g.createElement(Ne,null,e),g.createElement(Le,null,t))}return null})(),g.createElement(Me,null,g.createElement(ae.X,{disabled:!y||p,text:a(p?"CANCELLING":"CANCEL"),block:!0,buttonType:"link",onClick:async()=>{f(!0),navigator.onLine?await t()&&r((0,ne.XR)()):(()=>{const e=o.isToastMessageVisible&&"ERROR"===o.toastType,t=o.toastMessage;i({toastMessage:a("END_LIVE_CHAT_WITH_NETWORK_DISRUPTION_MESSAGE"),toastType:"WARNING",autoHide:!0}),e&&t&&i({toastMessage:t,toastType:"ERROR",autoHide:!1})})(),setTimeout((()=>{f(!1)}),0)}})))))}let Fe=null,Ue=!1;function ze(e){return(t,n)=>{const a=e?"chatter_typing_start":"chatter_typing_end",{token:r}=n().chatter,{stateType:o,inState:i}=n().pageState;i&&$.FH.post(Q.wc,{type:a,by:r}).catch((e=>{var n;if(400!==(null===(n=e.response)||void 0===n?void 0:n.status)||o!==te.YR)throw new J.eZ('Failed to make POST request to "'.concat(Q.wc,'" with type "').concat(a,'". Reason: ').concat(e));t({type:"SET_CURRENT_STATE",payload:{inState:!1,stateType:te.YR}}),ee.I.store("inLiveChat",!1),ee.I.store("liveChatPending",!1)}))}}function Pe(){return(e,t)=>{e({type:"HANDLE_CHATTER_TYPING_STATE"});const{stateType:n,inState:a}=t().pageState;a&&n===te.YR&&(Ue||(Ue=!0,e(ze(Ue))),Fe&&clearTimeout(Fe),Fe=window.setTimeout((()=>{Ue=!1,e(ze(Ue))}),1e3))}}var Ge,He=n(58541);function Be(){return Be=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Be.apply(this,arguments)}var Ze,We,Ve,Ke,je,qe,Xe,Qe,Ye,Je,$e,et,tt,nt,at,rt,ot,it,st,ct=e=>g.createElement("svg",Be({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 38 12"},e),Ge||(Ge=g.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M36.488 7.129v-.17h-1.851c-.985 0-1.628.472-1.628 1.246 0 .683.538 1.116 1.378 1.116 1.327 0 2.101-.827 2.101-2.192Zm1.05-1.286v4.265h-1.05V8.966c-.354.762-1.234 1.247-2.258 1.247-1.392 0-2.298-.787-2.298-1.994 0-1.26 1.038-2.061 2.64-2.061h1.496c.29 0 .42-.145.42-.354 0-.906-.643-1.523-1.772-1.523-.972 0-1.733.604-1.786 1.326h-.998c.118-1.273 1.326-2.218 2.81-2.218 1.72 0 2.797.984 2.797 2.454Zm-8.046.958c0-1.496-.867-2.467-2.193-2.467s-2.206.971-2.206 2.467.88 2.467 2.206 2.467 2.193-.97 2.193-2.467Zm-5.475 0c0-1.93 1.129-3.412 3.19-3.412.932 0 1.799.472 2.193 1.18V.778h1.05v9.331H29.4v-1.09c-.394.723-1.26 1.195-2.193 1.195-2.061 0-3.19-1.483-3.19-3.412Zm-2.378.328v-.17h-1.852c-.984 0-1.628.472-1.628 1.246 0 .683.539 1.116 1.38 1.116 1.325 0 2.1-.827 2.1-2.192Zm1.05-1.286v4.265h-1.05V8.966c-.355.762-1.235 1.247-2.259 1.247-1.391 0-2.297-.787-2.297-1.994 0-1.26 1.037-2.061 2.639-2.061h1.496c.29 0 .42-.145.42-.354 0-.906-.642-1.523-1.772-1.523-.971 0-1.733.604-1.785 1.326h-.998c.118-1.273 1.326-2.218 2.81-2.218 1.72 0 2.796.984 2.796 2.454Zm-16.84 2.92a3.156 3.156 0 1 1 3.157-3.156A3.156 3.156 0 0 1 5.85 8.763ZM5.85 0A5.849 5.849 0 0 0 0 5.848v5.774c0 .209.169.378.378.378h1.936c.209 0 .378-.17.378-.378v-1.135c0-.21.17-.379.379-.379h5.557c.209 0 .378.17.378.379v1.135c0 .209.17.378.379.378h1.935c.209 0 .378-.17.378-.378V5.848A5.85 5.85 0 0 0 5.85 0Z",clipRule:"evenodd"})));const lt=(0,E.i7)(Ze||(Ze=(0,z.A)(["\n  from {\n    opacity: 0;\n    transform: translateY(16px);\n  }\n\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n"]))),ut=(0,E.i7)(We||(We=(0,z.A)(["\n  from {\n    overflow: hidden;\n  }\n\n  to {\n    overflow: visible;\n  }\n"]))),dt=E.Ay.div(Ve||(Ve=(0,z.A)(["\n  z-index: 1;\n  color: ",";\n  margin-top: auto;\n  min-height: 90px;\n\n  ","\n\n  ",";\n  ",";\n"])),(e=>e.theme.colorTextDefault),(e=>(0,E.AH)(Ke||(Ke=(0,z.A)(["\n    ","\n  "])),e.appear&&(0,E.AH)(je||(je=(0,z.A)(["\n      overflow: hidden;\n      animation: forwards 1000ms "," linear;\n    "])),ut))),(e=>e.inOutageMode&&"pointer-events: none"),(e=>e.clearMobileKeyboard&&"margin-bottom: 56px")),gt=E.Ay.div(qe||(qe=(0,z.A)(["\n  display: flex;\n  align-items: flex-end;\n  background: ",";\n\n  ",";\n\n  ","\n"])),(e=>e.theme.colorSurfaceDefault),(e=>"start_new_chat"===e.state&&(0,E.AH)(Xe||(Xe=(0,z.A)(["\n      background: ",";\n      box-shadow: 0 12px 48px 4px rgba(0, 0, 0, 0.12);\n    "])),e.theme.colorSurfaceSheet)),(e=>(0,E.AH)(Qe||(Qe=(0,z.A)(["\n    ","\n  "])),e.appear&&(0,E.AH)(Ye||(Ye=(0,z.A)(["\n      opacity: 0;\n      transform: translateY(16px);\n      animation: forwards 300ms "," ease-out 300ms;\n    "])),lt)))),pt=E.Ay.div(Je||(Je=(0,z.A)(["\n  padding: ",";\n  flex: 1 1 auto;\n  width: 100%;\n  box-sizing: border-box;\n"])),we.v.space4),mt=E.Ay.div($e||($e=(0,z.A)(["\n  flex: 0 0 0px;\n  width: 0;\n"]))),ft=E.Ay.div(et||(et=(0,z.A)(["\n  display: flex;\n"]))),ht=E.Ay.div(tt||(tt=(0,z.A)(["\n  padding-top: ",";\n  z-index: 1;\n"])),we.v.space0),Et=E.Ay.span(nt||(nt=(0,z.A)(["\n  display: inline-block;\n  font-size: ",";\n  line-height: 1;\n  text-align: center;\n  padding: 0 "," 0;\n"])),we.v.xSmallFontSize,we.v.space1),vt=E.Ay.a(at||(at=(0,z.A)(["\n  color: ",";\n  text-decoration: none;\n  white-space: nowrap;\n  padding: 0 ",";\n  border-radius: ",";\n  display: flex;\n  align-items: center;\n\n  &:hover {\n    color: ",";\n  }\n\n  > svg {\n    height: 0.85em;\n    width: 100%;\n    max-width: 3.2em;\n    margin-left: 7px;\n  }\n\n  ",";\n"])),(e=>e.theme.colorTextSubdued),we.v.space1,(e=>e.theme.mainBorderRadius),(e=>e.theme.colorTextDefault),(e=>e.theme.focusStyle)),yt=E.Ay.a(rt||(rt=(0,z.A)(["\n  display: inline-block;\n  margin: 0 "," 0;\n  font-size: ",";\n  color: ",";\n  text-decoration: none;\n  white-space: nowrap;\n  padding: 0 ",";\n  border-radius: ",";\n  line-height: 1;\n\n  &:hover {\n    color: ",";\n  }\n\n  ",";\n"])),we.v.space1,we.v.xSmallFontSize,(e=>e.theme.colorTextSubdued),we.v.space1,(e=>e.theme.mainBorderRadius),(e=>e.theme.colorTextDefault),(e=>e.theme.focusStyle)),At=(E.Ay.div(ot||(ot=(0,z.A)(["\n  margin-bottom: -",";\n"])),we.v.space4),E.Ay.div(it||(it=(0,z.A)(["\n  text-align: center;\n  padding: "," 0 0 0;\n\n  ","\n"])),we.v.space3,(e=>(0,E.AH)(st||(st=(0,z.A)(["\n    font-size: ",";\n    color: ",";\n  "])),e.theme.xSmallFontSize,e.theme.colorTextError))));function _t(){const{client:e,isGenerative:t}=(0,V.useClient)(),n=(0,W.mR)(),a=e.getClientPartner();if(!e.showLogo)return null;const r=n(t?"POWERED_BY_GEN":"POWERED_BY");return g.createElement(Et,null,g.createElement(vt,{href:"".concat(e.getAdaUrl(),"&utm_content=user-group-b"),target:"_blank",rel:"noreferrer noopener","aria-label":n("ADA_WEBSITE_LABEL")},g.createElement("span",{"aria-hidden":"true"},e.hasFeature(V.Features.DONATED_BOT)?n("DONATED_BY"):r)," ",g.createElement(ct,{"aria-hidden":"true"}),a?" ".concat("+"," ",a):""))}var St,bt=n(58168),Tt=n(49568),Ct=n(5556),wt=n.n(Ct);function It(){return It=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},It.apply(this,arguments)}var xt,Rt,kt,Ot=e=>g.createElement("svg",It({xmlns:"http://www.w3.org/2000/svg",width:32,height:32,fill:"none"},e),St||(St=g.createElement("path",{fill:"#656568",d:"M13.453 24.456c1.108-.228 2.05-.91 2.552-1.413l7.181-7.181a.813.813 0 0 1 1.15 1.149l-7.182 7.181c-.648.647-1.86 1.544-3.374 1.855-1.572.324-3.395-.006-5.1-1.711-1.697-1.696-2.06-3.49-1.75-5.06.3-1.51 1.202-2.724 1.893-3.414l8.905-8.905c.513-.513 1.422-1.018 2.5-1.112 1.12-.097 2.386.252 3.532 1.399 1.147 1.146 1.496 2.412 1.399 3.532-.094 1.078-.598 1.987-1.111 2.5l-7.469 7.47c-.55.549-1.267.917-2.058.948-.805.03-1.593-.29-2.251-.949-.658-.658-.98-1.446-.948-2.25.03-.792.398-1.51.948-2.059l5.745-5.745a.812.812 0 1 1 1.15 1.149l-5.746 5.745c-.312.312-.461.658-.474.973-.011.3.098.662.474 1.038s.737.485 1.038.474c.315-.013.66-.162.973-.474l7.469-7.469c.253-.253.582-.809.641-1.492.056-.642-.121-1.435-.928-2.242-.807-.807-1.6-.984-2.243-.929-.683.06-1.239.389-1.492.642L9.972 17.01c-.554.554-1.232 1.494-1.447 2.581-.204 1.028-.017 2.275 1.303 3.595 1.311 1.31 2.576 1.484 3.625 1.269Z"}))),Nt=n(53781),Lt=n(60334),Mt=n(26234),Dt=n(16711);const Ft=E.Ay.div(xt||(xt=(0,z.A)([""]))),Ut=E.Ay.button(Rt||(Rt=(0,z.A)(["\n  background: none;\n\n  ",";\n"])),(e=>(0,E.AH)(kt||(kt=(0,z.A)(["\n    border-radius: ",";\n\n    ",";\n  "])),e.theme.mainBorderRadius,e.theme.focusStyle))),zt="FileUploadButton";class Pt extends g.Component{constructor(e){super(e),(0,y.A)(this,"handleFileUpload",(e=>{const t=e.target.files.item(0),{sendFile:n}=this.props;n(t),e.target.value=""})),this.fileUpload=g.createRef(),this.fileUploadButton=g.createRef(),this.addFile=this.addFile.bind(this),this.removeFocusFromButton=this.removeFocusFromButton.bind(this)}addFile(){this.fileUpload.current.click()}removeFocusFromButton(){this.fileUploadButton.current.style.outline="none"}render(){const{client:e,pageState:t,liveAgent:n,t:a}=this.props,r=!(0,Lt.ZP)(e,n,t);return g.createElement(Ft,{className:"".concat(zt,"__button-wrapper")},g.createElement(Ut,(0,bt.A)({tabIndex:0,accessKey:"a",onClick:this.addFile,onMouseLeave:this.removeFocusFromButton,className:"".concat(zt,"__button"),type:"button"},Mt.H,{ref:this.fileUploadButton,title:a("UPLOAD_FILES"),"aria-label":a("UPLOAD_FILES"),disabled:r}),g.createElement(Ot,{className:"".concat(zt,"__svg")})),g.createElement("input",{type:"file",ref:this.fileUpload,style:{display:"none"},onChange:this.handleFileUpload}))}}Pt.propTypes={client:wt().instanceOf(Tt.mS).isRequired,liveAgent:wt().shape({inLiveChat:wt().bool,inPending:wt().bool,isActive:wt().bool,platformData:wt().objectOf(wt().any),adaGlassEnv:wt().string,agents:wt().objectOf(wt().any),zendeskAgents:wt().objectOf(wt().any),fileTransfer:wt().objectOf(wt().any)}).isRequired,pageState:wt().instanceOf(Tt.mS).isRequired,sendFile:wt().func.isRequired,t:wt().func.isRequired};var Gt,Ht=(0,m.Ng)((function(e){const{client:t,pageState:n,currentMessage:a,chatter:r,conversations:o,liveAgent:i}=e;return{client:t,chatter:r,pageState:n,currentMessage:a,conversations:o,liveAgent:i,t:(0,Dt.Nj)(r.language)}}),(function(e){return{addMessage:(0,C.zH)(Z.addMessageAction,e),dispatchUpdateMessage:(0,C.zH)(j,e),sendFile:(0,C.zH)(Nt.TX,e)}}))(Pt),Bt=n(31904),Zt=n(83689),Wt=n(15841);function Vt(){return Vt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Vt.apply(this,arguments)}var Kt,jt,qt=e=>g.createElement("svg",Vt({xmlns:"http://www.w3.org/2000/svg",width:32,height:32,fill:"evenodd"},e),Gt||(Gt=g.createElement("path",{fillRule:"evenodd",d:"M5 10v10a4 4 0 0 0 4 4h3.197c.502 0 .97.25 1.248.668l1.307 1.96a1.5 1.5 0 0 0 2.496 0l1.307-1.96A1.5 1.5 0 0 1 19.803 24H23a4 4 0 0 0 4-4V10a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4Zm11.449-.084a.5.5 0 0 0-.898 0l-1.19 2.43a.5.5 0 0 1-.38.274l-2.678.382a.5.5 0 0 0-.277.854l1.943 1.883a.5.5 0 0 1 .144.445l-.465 2.665a.5.5 0 0 0 .727.528l2.391-1.265a.5.5 0 0 1 .468 0l2.391 1.265a.5.5 0 0 0 .727-.528l-.465-2.665a.5.5 0 0 1 .145-.445l1.942-1.883a.5.5 0 0 0-.277-.854l-2.679-.382a.5.5 0 0 1-.378-.275l-1.191-2.43Z",clipRule:"evenodd"})));function Xt(){return Xt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Xt.apply(this,arguments)}var Qt,Yt,Jt,$t,en=e=>g.createElement("svg",Xt({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 32"},e),Kt||(Kt=g.createElement("rect",{width:28,height:28,x:2,y:2,fill:"#F3F3F5",rx:14})),jt||(jt=g.createElement("path",{fill:"#656568",fillRule:"evenodd",d:"M21.207 12.207a1 1 0 0 0-1.414-1.414L16 14.586l-3.793-3.793a1 1 0 0 0-1.414 1.414L14.586 16l-3.793 3.793a1 1 0 0 0 1.414 1.414L16 17.414l3.793 3.793a1 1 0 0 0 1.414-1.414L17.414 16l3.793-3.793Z",clipRule:"evenodd"}))),tn=n(86226),nn=n(54251),an=n(86471),rn=n(59649),on=n(53965);const sn=150,cn=E.Ay.div(Qt||(Qt=(0,z.A)(["\n  position: relative;\n  outline: none;\n"]))),ln=E.Ay.button(Yt||(Yt=(0,z.A)(["\n  border: none;\n  background: none;\n  padding: 0;\n  cursor: pointer;\n  color: ",";\n  height: ",";\n  width: ",";\n  margin: 0 -3px;\n  border-radius: ",";\n\n  &:active {\n    color: ",";\n  }\n\n  ","\n\n  & > svg {\n    fill: ",";\n    width: ",";\n    height: ",";\n    vertical-align: middle;\n\n    ","\n  }\n\n  ",";\n"])),(e=>e.theme.colorTextSubdued),we.L.mediumIconHeight,we.L.mediumIconWidth,(e=>e.theme.mainBorderRadius),we.W.colorGrey4Active,(e=>{let{close:t}=e;return t&&"\n    position: relative;\n    z-index: 3;\n  "}),(e=>e.disabled?e.theme.colorIconDisabled:"currentColor"),we.L.mediumIconWidth,we.L.mediumIconHeight,(e=>{let{close:t}=e;return t&&"\n      width: 28px;\n      height: 28px;\n    "}),(e=>e.theme.focusStyle)),un=E.Ay.div(Jt||(Jt=(0,z.A)(["\n  position: absolute;\n  bottom: 100%;\n  z-index: 2;\n  margin-left: -",";\n  margin-bottom: 12px;\n"])),we.L.gUnitHalf),dn=E.Ay.div($t||($t=(0,z.A)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: none;\n  opacity: ",";\n  pointer-events: ",";\n  transition: opacity ","ms ease;\n"])),(e=>{let{state:t}=e;return"entered"===t?1:0}),(e=>{let{state:t}=e;return"entered"===t?"all":"none"}),sn);var gn,pn,mn;const fn=E.Ay.section.attrs((()=>({className:Wt.p4})))(gn||(gn=(0,z.A)(["\n  background: ",";\n  border-radius: ",";\n  box-shadow: ",";\n  position: relative;\n  padding: 16px;\n  min-width: 200px;\n\n  transform-origin: bottom left;\n  ","\n\n  ",'\n  \n  &::after {\n    content: "";\n    pointer-events: none;\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    border-radius: inherit;\n    background: ',";\n    opacity: ",";\n    transition: opacity\n      "," ease;\n    transition-delay: ","ms;\n    z-index: 1;\n  }\n"])),(e=>e.theme.colorSurfaceCardElevated),we.L.messageBorderRadius,we.L.boxShadow2,(e=>e.isRTL&&(0,E.AH)(pn||(pn=(0,z.A)(["\n      transform-origin: bottom right;\n    "])))),(e=>{let{transitionStatus:t}=e;return"entered"===t?"\n    opacity: 1;\n    transform: scale(1);\n    transition: border-radius ".concat(75,"ms ease-out, transform ").concat(sn,"ms ease-out, opacity ").concat(75,"ms ease;\n  "):"\n    border-radius: 50%;\n    opacity: 0;\n    transform: scale(.7);\n    transition: border-radius ".concat(75,"ms ease-out ").concat(75,"ms, transform ").concat(136.36363636363635,"ms ease-out, opacity ").concat(75,"ms ease ").concat(60,"ms;\n  ")}),(e=>e.theme.colorSurfaceCardElevated),(e=>{let{transitionStatus:t}=e;return"entered"===t?0:1}),(e=>"entered"===e.transitionStatus?"".concat(sn,"ms"):"".concat(75,"ms")),(e=>"entered"===e.transitionStatus?75:0)),hn=E.Ay.h1(mn||(mn=(0,z.A)(["\n  font-size: ",";\n  line-height: 20px;\n  margin: 0 0 "," 0;\n  padding: 0;\n  text-align: center;\n  font-weight: ",";\n  color: ",";\n"])),we.L.smallFontSize,we.L.gUnitDouble,we.L.mediumFontWeight,(e=>e.theme.colorTextDefault));function En(e){let{conversationId:t,transitionStatus:n,onScoreChange:a}=e;const{withChatterLanguage:r}=(0,W.He)(),o=(0,K.LM)(t),{csatSettings:i}=(0,on.f4)(),{isRTL:s}=(0,F.Wz)();return i&&o?g.createElement(fn,{transitionStatus:n,isRTL:s},g.createElement(hn,null,r(i.satisfactionLabel)),g.createElement(on.QB,{small:!0,conversationId:o.id,onScoreChange:a})):null}class vn extends g.Component{constructor(){super(...arguments),(0,y.A)(this,"onScoreChangeBound",this.onScoreChange.bind(this)),(0,y.A)(this,"dismissTimeoutId",void 0),(0,y.A)(this,"state",{isOpen:!1,shouldShowTooltip:!1})}componentDidMount(){const{didSurfaceCsatTooltip:e,setPageState:t,recentConversations:n}=this.props,{isOpen:a}=this.state;a&&this.fetchRequiredResources(),e||1!==(null==n?void 0:n.length)||setTimeout((()=>{this.setState({shouldShowTooltip:!0}),t({didSurfaceCsatTooltip:!0})}),0),this.dismissTimeoutId=window.setTimeout((()=>this.setState({shouldShowTooltip:!1})),6e3)}componentDidUpdate(e,t){const{isOpen:n}=this.state;t.isOpen&&!n&&(0,I.hZ)("FOCUS_MESSAGE_INPUT")}componentWillUnmount(){clearTimeout(this.dismissTimeoutId)}onKeyDown(e){"Escape"===e.key&&this.close(),e.stopPropagation()}async onScoreChange(e){const{postCsatResult:t,activeConversation:n}=this.props;n&&(await Promise.all([t(n.id,e),(0,an.u)(100)]),this.close())}get isReady(){const{csatSettings:e,activeConversation:t}=this.props;return Boolean(e&&t)}fetchRequiredResources(){const{csatSettings:e,fetchCsatSettings:t,fetchRecentConversations:n}=this.props;e||t(),n()}open(){const{trackCsatShown:e,activeConversation:t}=this.props;t&&(this.setState({isOpen:!0,shouldShowTooltip:!1}),this.fetchRequiredResources(),e(t.id))}close(){this.setState({isOpen:!1})}render(){const{activeConversation:e,t:t,inOutageMode:n}=this.props,{isOpen:a,shouldShowTooltip:o}=this.state;return e?g.createElement(b(),{active:a},g.createElement(cn,{onKeyDown:e=>this.onKeyDown(e)},g.createElement(Zt.m,{text:t("RATE_YOUR_CHAT"),disabled:!o||n,triggerType:"force"},a?g.createElement(ln,(0,bt.A)({id:Wt.Sv,close:!0,accessKey:r.w.c,onClick:()=>this.close(),disabled:n},Mt.H),g.createElement(en,{"aria-label":t("CLOSE")})):g.createElement(ln,(0,bt.A)({id:Wt.G5,accessKey:r.w.c,onClick:()=>this.open(),disabled:n},Mt.H),g.createElement(qt,{"aria-label":t("RATE_YOUR_CHAT")}))),g.createElement(Bt.Ay,{in:Boolean(a&&this.isReady),timeout:{exit:sn},unmountOnExit:!0},(t=>g.createElement(un,{id:Wt.zz},g.createElement(dn,{state:t,onClick:()=>this.close()}),g.createElement(En,{conversationId:e.id,transitionStatus:t,onScoreChange:this.onScoreChangeBound})))))):null}}var yn=(0,m.Ng)((e=>({csatSettings:(0,nn.getResource)(e,nn.ResourceType.CSAT_SETTINGS),didSurfaceCsatTooltip:e.pageState.didSurfaceCsatTooltip,activeConversation:(0,tn.o8)(e),recentConversations:(0,tn.ID)(e),t:(0,Dt.Nj)(e.chatter.get("language")),inOutageMode:"CHAT_OUTAGE_MID_CONVERSATION"===e.pageState.errorType})),(e=>({fetchCsatSettings:()=>e((0,nn.fetchOne)(nn.ResourceType.CSAT_SETTINGS)),fetchRecentConversations:()=>e((0,Z.getConversations)()),postCsatResult:(t,n)=>e((0,nn.postAction)(nn.ResourceType.CONVERSATION,t,"set_csat",{survey_type:rn.C.PROACTIVE,score:n})),setPageState:(0,C.zH)(U.FX,e),trackCsatShown:t=>e((0,nn.postAction)(nn.ResourceType.CONVERSATION,t,"track_csat_shown",{survey_type:rn.C.PROACTIVE}))})))(vn),An=n(60510);function _n(e){if(!(0,tn.ne)(e))return 0;const t=(0,tn.o8)(e);if(!t)return 0;const n=(0,He.getRenderableMessages)(e);if(!n.last())return 0;const a=n.filter((e=>e.conversationId===t.id));let r=0;return a.forEach(((e,t)=>{const n=a.get(t+1);n&&e.isOwnedByUser&&!n.isOwnedByUser&&(r+=1)})),r}class Sn extends g.Component{constructor(){super(...arguments),(0,y.A)(this,"state",{hasMinTurnsForCsat:this.hasMinTurnsForCsat})}componentDidMount(){this.fetchRequiredResources()}componentDidUpdate(){const{actionQueue:e}=this.props,{hasMinTurnsForCsat:t}=this.state;this.fetchRequiredResources(),!this.hasMinTurnsForCsat||e.isDequeuing||t||setTimeout((()=>{this.setState({hasMinTurnsForCsat:!0})}),1e3)}static getDerivedStateFromProps(e){const{numberOfMessageTurns:t}=e;return t<4?{hasMinTurnsForCsat:!1}:null}get hasMinTurnsForCsat(){const{numberOfMessageTurns:e}=this.props;return e>=4}get shouldShowCsat(){const{csatSettings:e,client:t}=this.props,{hasMinTurnsForCsat:n}=this.state;return!!(t.hasFeature(An.O.CSAT_V2)&&e&&e.anytimeSurveyIsEnabled&&n)}fetchRequiredResources(){const{fetchCsatSettingsIfNeeded:e,client:t}=this.props;t.hasFeature(An.O.CSAT_V2)&&this.hasMinTurnsForCsat&&e()}render(){const{children:e}=this.props;return this.shouldShowCsat?e:null}}var bn,Tn=(0,m.Ng)((e=>({client:e.client,csatSettings:(0,nn.getResource)(e,nn.ResourceType.CSAT_SETTINGS),numberOfMessageTurns:_n(e),actionQueue:e.actionQueues.global})),(e=>({fetchCsatSettingsIfNeeded:()=>e((0,nn.fetchOneIfNeeded)(nn.ResourceType.CSAT_SETTINGS))})))(Sn);function Cn(){return Cn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Cn.apply(this,arguments)}var wn,In,xn,Rn,kn,On,Nn,Ln,Mn,Dn,Fn,Un,zn=e=>g.createElement("svg",Cn({xmlns:"http://www.w3.org/2000/svg",width:22,height:22,viewBox:"-2 -6 30 30"},e),bn||(bn=g.createElement("path",{fill:"current",d:"M12 13a1 1 0 0 0-1 1v3a1 1 0 0 0 2 0v-3a1 1 0 0 0-1-1Zm5-4V7A5 5 0 0 0 7 7v2a3 3 0 0 0-3 3v7a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3v-7a3 3 0 0 0-3-3ZM9 7a3 3 0 0 1 6 0v2H9Zm9 12a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1v-7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1Z"}))),Pn=n(67871);const Gn=150,Hn=E.Ay.div(wn||(wn=(0,z.A)(["\n  position: fixed;\n  bottom: 86px;\n  left: 0;\n  z-index: 1;\n\n  ","\n"])),(e=>e.isRTL&&(0,E.AH)(In||(In=(0,z.A)(["\n      left: auto;\n      right: 0;\n    "]))))),Bn=E.Ay.section.attrs((()=>({className:"SecretMessageCard"})))(xn||(xn=(0,z.A)(["\n  background: ",";\n  border-radius: ",";\n  box-shadow: ",";\n  position: relative;\n  padding: 16px;\n  min-width: 200px;\n  max-width: 371px;\n  margin-left: 12px;\n  margin-right: 12px;\n  border: 1px solid ",";\n\n  transform-origin: bottom left;\n  ","\n\n  ",'\n  \n  &::after {\n    content: "";\n    pointer-events: none;\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    border-radius: inherit;\n    background: ',";\n    opacity: ",";\n    transition: opacity\n      "," ease;\n    transition-delay: ","ms;\n    z-index: 1;\n  }\n"])),(e=>e.theme.colorSurfaceCardElevated),we.L.messageBorderRadius,we.L.boxShadow2,(e=>e.theme.colorOutline2),(e=>e.isRTL&&(0,E.AH)(Rn||(Rn=(0,z.A)(["\n      transform-origin: bottom right;\n    "])))),(e=>"entered"===e.transitionStatus?(0,E.AH)(kn||(kn=(0,z.A)(["\n          opacity: 1;\n          transform: scale(1);\n          transition: border-radius ","ms ease-out, transform ","ms ease-out,\n            opacity ","ms ease;\n        "])),75,Gn,75):(0,E.AH)(On||(On=(0,z.A)(["\n          border-radius: 50%;\n          opacity: 0;\n          transform: scale(0.7);\n          transition: border-radius ","ms ease-out ","ms,\n            transform ","ms ease-out,\n            opacity ","ms ease ","ms;\n        "])),75,75,136.36363636363635,75,60)),(e=>e.theme.colorSurfaceCardElevated),(e=>{let{transitionStatus:t}=e;return"entered"===t?0:1}),(e=>"entered"===e.transitionStatus?"".concat(Gn,"ms"):"".concat(75,"ms")),(e=>"entered"===e.transitionStatus?75:0)),Zn=E.Ay.div(Nn||(Nn=(0,z.A)(["\n  & > svg {\n    fill: ",";\n  }\n"])),(e=>e.disabled?e.theme.colorIconDisabled:e.theme.colorIconInverted)),Wn=E.Ay.textarea(Ln||(Ln=(0,z.A)(["\n  background: transparent;\n  border-radius: ",";\n  color: ",";\n  font-size: ",";\n  line-height: 20px;\n  padding: 10px 14px;\n  border: 1px solid ",";\n  box-sizing: border-box;\n  width: 100%;\n  resize: none;\n\n  &::placeholder {\n    color: ",";\n  }\n\n  &:focus {\n    outline: none;\n    border: 1px solid ",";\n  }\n\n  ","\n\n  ","\n"])),(e=>e.theme.mainBorderRadius),(e=>e.theme.colorTextEmphasized),(e=>e.theme.mainFontSize),(e=>e.theme.colorOutline3),(e=>e.theme.colorTextSubdued),(e=>e.theme.colorOutline4),(e=>e.isInvalid&&(0,E.AH)(Mn||(Mn=(0,z.A)(["\n      &,\n      &:focus {\n        border: 2px solid ",";\n      }\n    "])),e.theme.colorOutlineError)),(e=>e.disabled&&"\n    border: none;\n    padding: 11px 14px;\n    background: ".concat(e.theme.colorSolid2,";\n    \n    &::placeholder {\n      color: ").concat(e.theme.colorTextDisabled,";\n    }\n  "))),Vn=E.Ay.h1(Dn||(Dn=(0,z.A)(["\n  font-size: ",";\n  line-height: 20px;\n  margin: "," "," "," ",";\n  padding: 0;\n  text-align: center;\n  font-weight: ",";\n  color: ",";\n"])),we.L.smallFontSize,we.L.gUnitHalf,we.L.gUnit,we.L.gUnitDouble,we.L.gUnit,we.L.mediumFontWeight,(e=>e.theme.colorTextDefault)),Kn=E.Ay.div(Fn||(Fn=(0,z.A)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: none;\n  opacity: ",";\n  pointer-events: ",";\n  transition: opacity ","ms ease;\n"])),(e=>{let{state:t}=e;return"entered"===t?1:0}),(e=>{let{state:t}=e;return"entered"===t?"all":"none"}),Gn),jn=E.Ay.div(Un||(Un=(0,z.A)(["\n  display: flex;\n  flex-direction: column;\n  padding-top: ",";\n"])),we.L.gUnitDouble),qn=(0,u.tZ)("SecretMessage");function Xn(e){let{isOpen:t}=e;const n=(0,g.useRef)(null),{client:a}=(0,V.useClient)(),{inLiveChat:r}=de(),{setPageState:o}=(0,U.Sw)(),{maxMessageLength:i}=Y(),[s,c]=(0,g.useState)(""),[l,u]=(0,g.useState)(!0),{darkMode:d}=(0,Pn.getThemeParams)(a),p=(0,W.mR)(),f=(0,m.wA)(),{isRTL:h}=(0,F.Wz)();(0,g.useEffect)((()=>{if(t){const e=n.current;if(!e)return;const{lineHeight:t,paddingTop:a,paddingBottom:r}=getComputedStyle(e);e.rows=1,e.rows=(e.scrollHeight-parseInt(a,10)-parseInt(r,10))/parseInt(t,10),u(s.length<=i)}}),[s,t,i]);const E=e=>{r&&f(Pe()),c(e.target.value)},v=()=>{l&&(f((0,Z.addMessageAction)({body:s,messageType:"secret"})),c(""),o({openSecretMessage:!1}))},y=e=>{"Enter"===e.key&&(e.preventDefault(),qn.info("Secret message is about to be sent"),v(),qn.info("Secret message has been sent"))};return g.createElement(Bt.Ay,{in:t,timeout:{exit:Gn},unmountOnExit:!0},(e=>g.createElement(Hn,{id:"secret-message-card",isRTL:h},g.createElement(Kn,{state:e}),g.createElement(Bn,{transitionStatus:e,isRTL:h},g.createElement(Vn,null,p("SECRET_MESSAGE_INFO")),g.createElement(Wn,{onChange:E,onKeyPress:y,value:s,ref:n,isInvalid:!l,placeholder:p("SECRET_MESSAGE_PLACEHOLDER"),rows:1,darkMode:d}),g.createElement(jn,null,g.createElement(ae.X,{disabled:0===s.length||!l,size:"large",text:p("SEND"),onClick:v},g.createElement(Zn,{disabled:0===s.length||!l},g.createElement(zn,null)),p("SEND")))))))}var Qn;function Yn(){return Yn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Yn.apply(this,arguments)}qn.setLoggerReady();var Jn,$n,ea=e=>g.createElement("svg",Yn({xmlns:"http://www.w3.org/2000/svg",width:22,height:22,viewBox:"-4 -3 32 32"},e),Qn||(Qn=g.createElement("path",{d:"M18.92 16.13a1 1 0 0 0-1.37.37A7 7 0 0 1 11.5 20H5.91l.64-.63a1 1 0 0 0 0-1.41 7 7 0 0 1 4.07-11.91 1 1 0 1 0-.24-2 9 9 0 0 0-5.91 14.57l-1.68 1.67a1 1 0 0 0-.21 1.09 1 1 0 0 0 .92.62h8a9 9 0 0 0 7.79-4.5 1 1 0 0 0-.37-1.37Zm.58-9.95V5a3 3 0 0 0-6 0v1.18a3 3 0 0 0-2 2.82v2a3 3 0 0 0 3 3h4a3 3 0 0 0 3-3V9a3 3 0 0 0-2-2.82ZM15.5 5a1 1 0 0 1 2 0v1h-2Zm4 6a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1Z"})));const ta=E.Ay.div(Jn||(Jn=(0,z.A)(["\n  position: relative;\n  outline: none;\n"]))),na=E.Ay.button($n||($n=(0,z.A)(["\n  border: none;\n  background: none;\n  padding: 0;\n  cursor: pointer;\n  color: ",";\n  height: ",";\n  width: ",";\n  margin: 0 -3px;\n  border-radius: ",";\n\n  &:active {\n    color: ",";\n  }\n\n  ","\n\n  & > svg {\n    fill: ",";\n    width: ",";\n    height: ",";\n    vertical-align: middle;\n\n    ","\n  }\n\n  ",";\n"])),(e=>e.theme.colorTextSubdued),we.L.mediumIconHeight,we.L.mediumIconWidth,(e=>e.theme.mainBorderRadius),we.W.colorGrey4Active,(e=>{let{close:t}=e;return t&&"\n    position: relative;\n    z-index: 3;\n  "}),(e=>e.disabled?e.theme.colorIconDisabled:"currentColor"),we.L.mediumIconWidth,we.L.mediumIconHeight,(e=>{let{close:t}=e;return t&&"\n      width: 28px;\n      height: 28px;\n    "}),(e=>e.theme.focusStyle));function aa(){const{pageState:e,setPageState:t}=(0,U.Sw)(),[n,a]=(0,g.useState)(!1),o=(0,W.mR)();(0,g.useEffect)((()=>{const e=setTimeout((()=>{a(!0)}),4e4);return()=>clearTimeout(e)}),[]);const i=()=>{t({openSecretMessage:!1})};return g.createElement(b(),{active:e.openSecretMessage},g.createElement(ta,{onKeyDown:e=>{"Escape"===e.key&&i(),e.stopPropagation()}},g.createElement(Zt.m,{text:o("SEND_SECRET"),disabled:n||e.openSecretMessage,triggerType:"force"},e.openSecretMessage?g.createElement(na,(0,bt.A)({id:"secret-message-button-close",close:!0,accessKey:r.w.c,onClick:i,disabled:!1},Mt.H),g.createElement(en,{"aria-label":o("CLOSE")})):g.createElement(na,(0,bt.A)({id:"secret-message-button-open",accessKey:r.w.c,onClick:()=>{a(!0),t({openSecretMessage:!0})},disabled:!1},Mt.H),g.createElement(ea,{"aria-label":o("SEND_SECRET")}))),g.createElement(Xn,{isOpen:e.openSecretMessage})))}var ra,oa,ia,sa;const ca=E.Ay.div(ra||(ra=(0,z.A)(["\n  display: flex;\n  padding-top: 4px;\n  height: 32px;\n  align-items: center;\n  column-gap: ",";\n\n  &:not(:empty) {\n    ","\n  }\n"])),we.v.space1,(e=>e.isRTL?(0,E.AH)(oa||(oa=(0,z.A)(["\n            margin-left: ",";\n          "])),we.v.space2):(0,E.AH)(ia||(ia=(0,z.A)(["\n            margin-right: ",";\n          "])),we.v.space2))),la=E.Ay.div(sa||(sa=(0,z.A)([""])));function ua(){const e=(0,m.d4)((e=>(0,Lt.Y5)(e.client,e.liveAgent))),t=(0,m.d4)((e=>e.pageState.secretButtonEnabled)),{isRTL:n}=(0,F.Wz)();return g.createElement(ca,{isRTL:n},g.createElement(Tn,null,g.createElement(la,null,g.createElement(yn,null))),e&&g.createElement(la,null,g.createElement(Ht,null)),t&&g.createElement(la,null,g.createElement(aa,null)))}var da;const ga=E.Ay.div(da||(da=(0,z.A)(["\n  position: relative;\n  transition: all 500ms ease-in-out;\n  opacity: 0;\n  transform: translateY(",");\n  width: 100%;\n\n  ","\n"])),we.v.space2,(e=>e.show&&"\n    opacity: 1;\n    transform: translateY(0);\n  "));function pa(e){const{shouldShowUp:t,children:n}=e,[a,r]=(0,g.useState)(!1);return(0,g.useEffect)((()=>{const e=setTimeout((()=>{r(t)}),0);return()=>{clearTimeout(e)}}),[t]),g.createElement(ga,{show:a,"aria-hidden":!a},t?n:null)}var ma;const fa=E.Ay.div(ma||(ma=(0,z.A)(["\n  display: flex;\n  justify-content: center;\n"]))),ha=e=>{const{isOptional:t,cancelCaptureResponseId:n,cancelCaptureLabel:a}=e,r=(0,m.wA)(),o=(0,W.mR)(),[i,s]=g.useState(!1);return g.createElement(fa,null,t?g.createElement(ae.X,{onClick:()=>{r((0,Z.addMessageAction)({body:o("SKIP_CAPTURE"),data:n,buttonType:"suggestion",messageType:"trigger"})),s(!0)},buttonType:"link",size:"large",text:o("SKIP_CAPTURE"),disabled:i}):g.createElement(ae.X,{onClick:()=>{r((0,Z.addMessageAction)({body:a,data:n,buttonType:"suggestion",messageType:"trigger"}))},buttonType:"link",size:"large",text:a,testid:"CancelCaptureButton"}))};var Ea,va,ya;const Aa=(0,E.i7)(Ea||(Ea=(0,z.A)(["\n  10%, 90% {\n    transform: translate3d(-1px, 0, 0);\n  }\n\n  20%, 80% {\n    transform: translate3d(2px, 0, 0);\n  }\n\n  30%, 50%, 70% {\n    transform: translate3d(-4px, 0, 0);\n  }\n\n  40%, 60% {\n    transform: translate3d(4px, 0, 0);\n  }\n"]))),_a=E.Ay.div(va||(va=(0,z.A)(["\n  display: flex;\n  justify-content: center;\n  color: ",";\n  font-size: ",";\n  line-height: 15px;\n  align-items: center;\n  text-align: center;\n  letter-spacing: -0.1px;\n  padding: "," "," "," ",";\n\n  ","\n"])),(e=>e.theme.colorTextError),we.v.xSmallFontSize,we.v.space1,we.v.space4,we.v.space2,we.v.space4,(e=>e.shouldShake&&(0,E.AH)(ya||(ya=(0,z.A)(["\n      animation: "," 0.82s cubic-bezier(0.36, 0.07, 0.19, 0.97) both;\n      transform: translate3d(0, 0, 0);\n    "])),Aa))),Sa=e=>{let{isMessageValid:t,validationMessage:n}=e;return n?g.createElement(_a,{shouldShake:!t,"data-testid":"CaptureValidationMessage",role:"alert"},n):null};var ba,Ta,Ca,wa,Ia,xa,Ra,ka,Oa,Na,La,Ma,Da,Fa,Ua,za,Pa;const Ga=10,Ha=E.Ay.div(ba||(ba=(0,z.A)(["\n  display: flex;\n  flex-grow: 1;\n  position: relative;\n  overflow: hidden;\n  border: 1px solid ",";\n  border-radius: ",";\n  box-shadow: 0 12px 36px 0 rgba(0, 0, 0, 0.04);\n  transition: all 300ms ease-in-out;\n\n  ",";\n\n  ","\n\n  :focus-within {\n    box-shadow: none;\n    border: 1px solid ",";\n  }\n"])),(e=>e.theme.colorOutline3),(e=>e.theme.messageBorderRadius),(e=>e.isDisabled&&"\n    border: 1px solid ".concat(e.theme.colorOutline2,";\n    box-shadow: none;\n  ")),(e=>e.isInvalid&&(0,E.AH)(Ta||(Ta=(0,z.A)(["\n      &,\n      &:focus {\n        border: 2px solid ",";\n      }\n    "])),e.theme.colorOutlineError)),(e=>e.theme.colorOutline2)),Ba=E.Ay.form(Ca||(Ca=(0,z.A)(["\n  font-size: 0;\n  width: 100%;\n"]))),Za=E.Ay.textarea(wa||(wa=(0,z.A)(["\n  width: 100%;\n  resize: none;\n  padding: ","px 38px ","px 13px;\n  margin: 0;\n  border: none;\n  background: ",";\n  font-size: ",";\n  color: ",";\n  line-height: 1.25;\n  outline: none;\n  box-sizing: border-box;\n\n  &::placeholder {\n    color: ",";\n    font-weight: ",";\n  }\n\n  &:disabled {\n    background: ",";\n\n    &::placeholder {\n      color: ",";\n    }\n  }\n\n  ",";\n"])),Ga,Ga,(e=>e.theme.colorSurfaceDefault),(e=>e.theme.mainFontSize),(e=>e.theme.colorTextDefault),(e=>e.theme.colorTextSubdued),we.v.normalFontWeight,(e=>e.darkMode?"transparent":e.theme.colorSolid1),(e=>e.theme.colorTextDisabled),(e=>e.isRTL?(0,E.AH)(Ia||(Ia=(0,z.A)(["\n          padding: ","px 13px ","px 38px;\n        "])),Ga,Ga):(0,E.AH)(xa||(xa=(0,z.A)(["\n          padding: ","px 38px ","px 13px;\n        "])),Ga,Ga))),Wa=E.Ay.div(Ra||(Ra=(0,z.A)(["\n  position: absolute;\n  top: ","px;\n  height: 24px;\n  width: 24px;\n  border: none;\n  padding: 0;\n  margin: 0;\n  background: ",";\n  color: ",";\n  border-radius: 50%;\n  transform: scale(1);\n  opacity: 1;\n  transition: transform 200ms cubic-bezier(0.34, 1.56, 0.64, 1), opacity 200ms ease-out;\n  transition-delay: 300ms;\n\n  ","\n\n  :focus-within {\n    box-shadow: 0 0 0 4px rgba(43, 65, 86, 0.6);\n  }\n\n  ",";\n\n  ",";\n"])),8,(e=>e.theme.themeColor),(e=>e.theme.themeFgColor),(e=>e.disabled&&(0,E.AH)(ka||(ka=(0,z.A)(["\n      transition-delay: 0ms;\n      opacity: 0.3;\n      transform: scale(0);\n      transition: transform 200ms ease, opacity 180ms ease-out;\n    "])))),(e=>e.theme.focusStyle),(e=>e.isRTL?(0,E.AH)(Oa||(Oa=(0,z.A)(["\n          left: ","px;\n        "])),8):(0,E.AH)(Na||(Na=(0,z.A)(["\n          right: ","px;\n        "])),8))),Va=E.Ay.input(La||(La=(0,z.A)(["\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  left: 0;\n  width: 100%;\n  height: 100%:\n  padding: 0;\n  cursor: pointer;\n  font-size: 0;\n  background: transparent;\n  border: none;\n  outline: none;\n"]))),Ka=E.Ay.div(Ma||(Ma=(0,z.A)(["\n  position: absolute;\n  bottom: ",";\n  font-size: 8px;\n  color: ",";\n  ",";\n\n  ",";\n"])),we.v.space2,(e=>e.theme.colorTextDisabled),(e=>e.isInvalid&&(0,E.AH)(Da||(Da=(0,z.A)(["\n      color: ",";\n    "])),e.theme.colorTextError)),(e=>e.isRTL?(0,E.AH)(Fa||(Fa=(0,z.A)(["\n          left: ",";\n        "])),we.v.space4):(0,E.AH)(Ua||(Ua=(0,z.A)(["\n          right: ",";\n        "])),we.v.space4))),ja="\n  display: flex;\n  flex-direction: column;\n  width: 100%;",qa=E.Ay.div(za||(za=(0,z.A)(["\n  ","\n"])),ja),Xa=E.Ay.div(Pa||(Pa=(0,z.A)(["\n  ","\n"])),ja),Qa=g.forwardRef(((e,t)=>{const{darkMode:n,isRTL:a}=e,[r,o]=(0,g.useState)(!0),[i,s]=(0,g.useState)(!1),{currentMessage:c}=Y(),{chatter:l}=(0,W.NC)(),{pageState:u}=(0,U.Sw)(),{sessionID:d,stateData:p}=u,f=(0,m.wA)(),h=(0,W.mR)(),E=c.trim().length>0,v=()=>{t&&t.current.focus()};(0,g.useEffect)((()=>{v()}),[]);const y=p.message_input;if(!y)return null;const{placeholder:A,validation_error_message:_,is_optional:S,cancel_capture_response_id:b,cancel_capture_label:T}=y,C=A||h("MESSAGE_INPUT_PLACEHOLDER"),w=async()=>{o(!0),s(!0);const e=await f((0,Z.sendMessage)({type:"text",body:c,language:l.language,by:l.token,external_chat_id:d,data:{"validate-capture":!0}})),{message:t}=e.data;"Returning Capture Validation Error"===t&&(o(!1),s(!1),v()),"Processing..."===t&&f(q())},I=i||!E;return g.createElement(qa,null,g.createElement(Ha,{isInvalid:!r,isDisabled:i},g.createElement(Ba,{onSubmit:e=>{e.preventDefault(),w()},"data-testid":"MesssageInputForm"},g.createElement(Za,{isRTL:a,value:c,ref:t,placeholder:C,"aria-label":C,rows:1,isInvalid:!r,onChange:e=>{const{value:t}=e.currentTarget;f(j(t))},onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),E&&w())},disabled:i,darkMode:n,"data-testid":"MessageInput"}),g.createElement(Wa,{isRTL:a,disabled:I},g.createElement(Va,{type:"submit",disabled:I,"aria-label":h("SEND_MESSAGE"),"data-testid":"SendButton"}),g.createElement(Pn.ArrowUpIcon,null)))),g.createElement(Sa,{isMessageValid:r,validationMessage:_}),g.createElement(ha,{cancelCaptureLabel:T,cancelCaptureResponseId:b,isOptional:S}))})),Ya=g.forwardRef(((e,t)=>{const{setFocusState:n,darkMode:a,isRTL:r}=e,{currentMessage:o,maxMessageLength:i}=Y(),s=(0,W.mR)(),{isDisabled:c,isOverLimit:l,isValid:u,remainingCharCount:d,onChange:p,onKeyPress:f,sendMessage:h,focusDefaultInput:E}=function(e){const{currentMessage:t,isOverLimit:n,maxMessageLength:a}=Y(),{liveChatQueue:r,inLiveChat:o}=de(),{pageState:i}=(0,U.Sw)(),s=(0,m.wA)(),{errorType:c,secretButtonEnabled:l}=i,u=Boolean(r)||"CHAT_OUTAGE_MID_CONVERSATION"===c||l,d=Boolean(t.trim())&&!n,g=t.length>.5*a?a-t.length:null,p=()=>{s((0,Z.sendCurrentMessageAction)()),s(q()),setTimeout((()=>{(0,I.hZ)("SCROLL_MESSAGE_LIST_TO_BOTTOM")}),0)};return{isDisabled:u,isValid:d,isOverLimit:n,remainingCharCount:g,onChange:e=>{const{value:t}=e.currentTarget;o&&s(Pe()),s(j(t))},sendMessage:p,onKeyPress:e=>{if("Enter"===e.key){if(e.preventDefault(),!d)return;p()}},focusDefaultInput:()=>{e&&e.current.focus()}}}(t);(0,g.useEffect)((()=>{E()}),[]);const v=!u||c;return g.createElement(Ha,{isInvalid:l,isDisabled:c},g.createElement(Ba,{onSubmit:e=>{e.preventDefault(),h(),E()}},g.createElement(Za,{isRTL:r,value:o,ref:t,placeholder:s("MESSAGE_INPUT_PLACEHOLDER"),"aria-label":s("MESSAGE_INPUT_PLACEHOLDER"),rows:1,isInvalid:o.length>i,onChange:p,onFocus:()=>{n&&n(!0)},onBlur:()=>{n&&n(!1)},onKeyPress:f,disabled:c,darkMode:a,"data-testid":"MessageInput"}),g.createElement(Wa,{isRTL:r,disabled:v},g.createElement(Va,{type:"submit",disabled:v,"aria-label":s("SEND_MESSAGE"),"data-testid":"SendButton"}),g.createElement(Pn.ArrowUpIcon,null))),null!==d&&g.createElement(Ka,{isRTL:r,isInvalid:l,"aria-label":s("MAX_CHARACTER_COUNT",{maxCharCount:i})},d))}));function Ja(e){const{setFocusState:t}=e,{currentMessage:n}=Y(),{client:a}=(0,V.useClient)(),r=(0,g.useRef)(null),{isRTL:o}=(0,F.Wz)(),{pageState:i}=(0,U.Sw)(),{stateData:c,stateType:l,inState:u,responseLoading:d}=i,{embedState:p}=(0,s.useEmbedState)(),{isDrawerOpen:m,parentElement:f,embed2Enabled:h}=p,E=(0,g.useRef)(m),{darkMode:v}=(0,Pn.getThemeParams)(a);E.current=m;const y=u&&l===Z.CONVERSATION_STATE_CAPTURE,A=(0,He.useRenderableMessages)(),[_,S]=(0,g.useState)(!1),[b,T]=(0,g.useState)(!1),{shouldForceQuickReplies:C}=(0,K.cf)(),w=()=>{const e=r.current;e&&(E.current||f||!h)&&e.focus()};return(0,g.useEffect)((()=>(navigator.appVersion.match(/iPhone OS 15_0/)&&"Safari"===(0,B.c)()||w(),(0,I.B1)("FOCUS_MESSAGE_INPUT",w),()=>{(0,I.al)("FOCUS_MESSAGE_INPUT",w)})),[]),(0,g.useEffect)((()=>{const e=r.current;if(!e)return;const{lineHeight:t,paddingTop:n,paddingBottom:a}=getComputedStyle(e);e.rows=1,e.rows=(e.scrollHeight-parseInt(n,10)-parseInt(a,10))/parseInt(t,10)}),[n,c]),(0,g.useEffect)((()=>{_&&y?setTimeout((()=>{T(!0)}),0):T(!1)}),[y,_]),(0,g.useEffect)((()=>{if(y&&A.size>0){if(d)return void S(!1);d||"user"===A.last().source||S(!0)}else S(!1)}),[d,y,A]),g.createElement(Xa,null,g.createElement(pa,{shouldShowUp:b&&!C},g.createElement(Qa,{ref:r,darkMode:v,isRTL:o})),g.createElement(pa,{shouldShowUp:!y&&!C},g.createElement(Ya,{ref:r,setFocusState:t,darkMode:v,isRTL:o})))}var $a;const er=E.Ay.div($a||($a=(0,z.A)([""])));function tr(){const e=(0,m.wA)(),t=(0,W.mR)(),n=(0,g.useRef)(null),{embedState:a}=(0,s.useEmbedState)(),[r,o]=(0,g.useState)(!1),i=()=>{var e;null===(e=n.current)||void 0===e||e.focus()};return(0,g.useEffect)((()=>(a.isDrawerOpen&&(0,I.B1)("FOCUS_NEW_CONVERSATION_BUTTON",i),()=>{(0,I.al)("FOCUS_NEW_CONVERSATION_BUTTON",i)})),[a]),(0,g.useEffect)((()=>{const e=setTimeout((()=>{o(!1)}),5e3);return()=>{clearTimeout(e)}}),[r]),g.createElement(er,null,g.createElement(ae.X,{testid:"startNewChatButton",ref:n,disabled:r,block:!0,size:"large",text:t("START_NEW_CHAT"),onClick:()=>{o(!0),e((0,Z.addMessageAction)({messageType:"greeting"})),setTimeout((()=>{(0,I.hZ)("SCROLL_MESSAGE_LIST_TO_BOTTOM")}),0)}}))}var nr=n(5056);class ar extends(Tt.Ay.Record({body:"",responseId:null,type:"text",isNew:!0,buttonType:null})){}const rr=Tt.Ay.List();var or,ir,sr,cr,lr,ur;const dr=E.Ay.section(or||(or=(0,z.A)(["\n  margin: 0 -",";\n  transition: opacity 200ms ease-in-out, height 200ms ease-in-out;\n  transition-delay: 100ms; // Wait to make transition smoother\n  opacity: 1;\n  height: ","px;\n  box-sizing: border-box;\n\n  ","\n"])),we.v.space4,(e=>e.height),(e=>e.collapsed&&(0,E.AH)(ir||(ir=(0,z.A)(["\n      transition-delay: 0ms;\n      opacity: 0;\n      height: 0;\n    "]))))),gr=E.Ay.h2(sr||(sr=(0,z.A)(["\n  font-size: ",";\n  font-weight: normal;\n  color: ",";\n  padding: 0 ",";\n  margin: 0;\n  line-height: 20px;\n"])),(e=>e.theme.smallFontSize),(e=>e.theme.colorTextSubdued),we.v.space4),pr=E.Ay.ul(cr||(cr=(0,z.A)(["\n  overflow-x: auto;\n  max-width: 100%;\n  padding: ",";\n  margin: 0;\n  white-space: nowrap;\n\n  ::-webkit-scrollbar {\n    display: none;\n  }\n\n  ","\n"])),we.v.space4,(e=>e.stacked&&(0,E.AH)(lr||(lr=(0,z.A)(["\n      display: flex;\n      flex-wrap: wrap;\n    "]))))),mr=E.Ay.li(ur||(ur=(0,z.A)(["\n  display: inline-block;\n  list-style: none;\n  margin-bottom: ",";\n\n  :not(:last-child) {\n    margin-right: ",";\n  }\n"])),we.v.space2,we.v.space2);function fr(){var e;const{client:t}=(0,V.useClient)(),n=(0,m.wA)(),{pageState:a}=(0,U.Sw)(),{currentMessage:r}=Y(),o=(0,W.mR)(),{predictiveSuggestions:i}={predictiveSuggestions:(0,m.d4)((e=>e.predictiveSuggestionResponses))},[s,c]=(0,g.useState)(!1),l=r.trim().length>=3,{inState:u}=a,d=!l&&Boolean(i.size),p=(0,g.useRef)(null),[f,h]=(0,g.useState)(null===(e=p.current)||void 0===e?void 0:e.scrollHeight);(0,g.useEffect)((()=>{var e;h(null===(e=p.current)||void 0===e?void 0:e.scrollHeight)}),[i]),(0,g.useEffect)((()=>{l?u||n((0,v.getPredictiveSuggestionsAction)(r)):d&&n((0,v.resetPredictiveSuggestionsAction)())}),[r,n,l,u,d]);const E=Boolean(i.size);(0,g.useEffect)((()=>{c(E)}),[E]);const y=(()=>{if(null===i||0===i.size)return null;const e=i.map((e=>"".concat(e.body))),t="".concat(i.size," ").concat(o("SUGGESTIONS"),": ").concat(String(e.toJS()));return g.createElement(T.Iu,{message:t,"aria-live":"polite"})})(),A=g.createElement("div",{"aria-hidden":!s,ref:p},g.createElement(gr,{id:"suggestions-title"},o("SUGGESTIONS")),g.createElement(pr,{stacked:!t.isMobile},i.map((e=>g.createElement(mr,{key:e.responseId||""},g.createElement(nr.a,{wrapText:!0,text:"".concat(e.body),onClick:()=>(e=>{n((0,Z.addMessageAction)({body:e.body,data:e.responseId,buttonType:e.buttonType,messageType:"trigger"})),n(q()),(0,I.hZ)("FOCUS_MESSAGE_INPUT")})(e)}))))),y);return g.createElement(dr,{height:f||0,collapsed:!s,"aria-hidden":!s,"aria-labelledby":"suggestions-title"},A)}function hr(){var e;const{activeConversation:t}=(0,K.VC)(),{client:n,isGenerative:a}=(0,V.useClient)(),{chatter:r}=(0,W.NC)(),{embedState:o}=(0,s.useEmbedState)(),{allMessages:i}=(0,He.useAllMessages)(),{pageState:c}=(0,U.Sw)(),{stateType:l}=c,u=(0,W.mR)(),{isOverLimit:d}=Y(),p=(0,g.useRef)(null),[m,f]=(0,g.useState)(!1),{platform:h,osVersion:E}=(0,B.e)(),v="Safari"===(0,B.c)()&&"iPhone"===h&&(null==E?void 0:E.startsWith("15.0")),y=Boolean(null===(e=o.metaFields)||void 0===e?void 0:e.sdkType),A=l===Z.CONVERSATION_STATE_LIST_SELECTION,_=Boolean(v&&!y&&m);(0,g.useEffect)((()=>{const e=p.current;e&&e.addEventListener("animationend",(()=>{e.style.overflow="visible"}))}),[]);const S=!r.isNew&&!t;let b;b=S&&"CHAT_OUTAGE_MID_CONVERSATION"!==c.errorType?g.createElement(tr,null):g.createElement(g.Fragment,null,n.hasFeature(V.Features.PREDICTIVE_SUGGESTIONS)&&g.createElement(fr,null),g.createElement(ft,null,g.createElement(ht,null,g.createElement(ua,null)),A||"post"!==c.initializationPhase?null:c.pusherMessageChannelConnected?0===i.size&&n.hasFeature(V.Features.FORCED_QUICK_REPLIES)?null:g.createElement(Ja,{setFocusState:e=>f(e)}):null));const T=n.privacy&&n.privacyLink?g.createElement(yt,{href:n.privacyLink,target:"_blank",rel:"noreferrer noopener"},u("PRIVACY_POLICY")):null,C=d?g.createElement(At,{role:"alert"},u("MESSAGE_TOO_LONG")):null;return g.createElement(dt,{appear:o.isDrawerOpen,ref:p,inOutageMode:"CHAT_OUTAGE_MID_CONVERSATION"===c.errorType,clearMobileKeyboard:_},g.createElement(gt,{state:S?"start_new_chat":"default",appear:o.isDrawerOpen},g.createElement(pt,null,b,l===Z.CONVERSATION_STATE_CAPTURE||n.hasFeature(V.Features.FREE_TIER_PLAN)?null:C||g.createElement(At,null,T,a&&g.createElement(_t,null))),g.createElement(mt,null,g.createElement(De,null)),g.createElement(H,null)))}var Er,vr,yr,Ar,_r;const Sr=E.Ay.section(Er||(Er=(0,z.A)(["\n  padding: ",";\n"])),we.v.space5),br=E.Ay.h1(vr||(vr=(0,z.A)(["\n  margin: "," 0;\n  font-size: ",";\n  padding: 0;\n  font-weight: ",";\n  text-align: center;\n  color: ",";\n"])),we.v.space5,we.v.heading3FontSize,we.v.heavyFontWeight,(e=>e.theme.colorTextEmphasized)),Tr=E.Ay.div(yr||(yr=(0,z.A)(["\n  margin-bottom: ",";\n  color: ",";\n  text-align: center;\n  font-size: ",";\n  line-height: 1.3;\n"])),we.v.space7,(e=>e.theme.colorTextDefault),(e=>e.theme.mainFontSize)),Cr=E.Ay.ul(Ar||(Ar=(0,z.A)(["\n  list-style: none;\n  margin: 0;\n  padding: 0;\n"]))),wr=E.Ay.li(_r||(_r=(0,z.A)(["\n  margin: 0;\n  padding: 0;\n\n  &:not(:last-child) {\n    margin-bottom: ",";\n  }\n"])),we.v.space2);function Ir(e){let{title:t,description:n,buttons:a}=e;return g.createElement(Sr,{role:"dialog","aria-labelledby":"dialog-title","aria-describedby":"dialog-description"},g.createElement(br,{id:"dialog-title"},t),g.createElement(Tr,{id:"dialog-description"},n),g.createElement(Cr,null,a.map((e=>g.createElement(wr,{key:e.label},g.createElement(ae.X,{text:e.label,onClick:e.onClick,buttonType:e.type,size:e.size,block:!0,disabled:e.disabled,testid:e.testid}))))))}var xr=n(74262),Rr=n(52224);const kr={[Rr.sE]:"UNSUPPORTED_FILE",[Rr.r4]:"MAX_FILE_SIZE",[Rr.zR]:"TECHNICAL_ISSUES",[Rr.wr]:"TECHNICAL_ISSUES",[Rr.Vt]:"BROWSER_UNSUPPORTED",[Rr.fX]:"RECIPIENT_UNSUPPORTED",[Rr.Bk]:"MULTIPLE_FILES",[Rr.CP]:"FAILED_TO_SEND",[xr.F4]:"TECHNICAL_ISSUES",[xr.wm]:"MAX_FILE_SIZE",[xr.Cl]:"UNSUPPORTED_FILE"},Or=e=>{const{fileUploadError:t,onCloseClick:n}=e,a=(0,W.mR)();if(!t)return null;const{errorKey:r,errorData:o}=t,i=o?o.toJS():{},s=kr[r]||"TECHNICAL_ISSUES";return g.createElement(Ir,{title:a("UPLOAD_FAILED",{...i}),description:a(s,{...i}),buttons:[{label:a("CLOSE"),size:"large",onClick:n,type:"primary"}]})};var Nr,Lr,Mr,Dr,Fr,Ur,zr,Pr,Gr,Hr;const Br=E.Ay.div(Nr||(Nr=(0,z.A)(["\n  width: 100%;\n  margin: "," 0;\n  position: relative;\n  z-index: 10;\n"])),we.v.space6),Zr=E.Ay.div(Lr||(Lr=(0,z.A)(["\n  & svg {\n    fill: ",";\n  }\n"])),(e=>e.theme.colorIconDefault)),Wr=E.Ay.div(Mr||(Mr=(0,z.A)(["\n  display: flex;\n  flex-direction: column;\n  ",";\n  margin: auto;\n  width: 100%;\n  box-sizing: border-box;\n  padding: "," ",";\n  border-radius: 16px;\n  background-color: ",";\n  align-items: center;\n  justify-content: center;\n  direction: ",";\n\n  ","\n"])),(e=>e.inline&&"max-width: 351px; \n   border: 1px solid ".concat(e.theme.colorOutline2,";\n   box-shadow: ").concat(we.v.boxShadow2,";\n   ")),we.v.space6,we.v.space5,(e=>e.theme.colorSurfaceCardElevated),(e=>e.isRTL?"rtl":"ltr"),(e=>e.isRTL&&(0,E.AH)(Dr||(Dr=(0,z.A)(["\n    & "," {\n    transform: rotateY(-180deg);\n  "])),Zr))),Vr=E.Ay.div(Fr||(Fr=(0,z.A)(["\n  svg,\n  img {\n    height: 42px;\n    width: auto;\n  }\n"]))),Kr=E.Ay.p(Ur||(Ur=(0,z.A)(["\n  margin: 0;\n  line-height: 20px;\n  font-size: ",";\n  text-align: center;\n  color: ",";\n  margin: "," 0;\n"])),(e=>e.theme.mainFontSize),(e=>e.theme.colorTextDefault),we.v.space2),jr=E.Ay.ul(zr||(zr=(0,z.A)(["\n  text-align: center;\n  margin: 0;\n  padding: 0;\n  list-style: none;\n"]))),qr=E.Ay.li(Pr||(Pr=(0,z.A)(["\n  margin-top: ",";\n"])),we.v.space5),Xr=E.Ay.a(Gr||(Gr=(0,z.A)(["\n  text-decoration: none;\n  color: ",";\n  font-size: ",";\n  font-weight: ",";\n  cursor: pointer;\n"])),(e=>e.theme.colorTextInfo),(e=>e.theme.mainFontSize),we.v.mediumFontWeight),Qr=E.Ay.div(Hr||(Hr=(0,z.A)(["\n  margin-top: ",";\n"])),we.v.space7),Yr=Br,Jr=(0,u.tZ)("RESPONSE_TIMEOUT");function $r(e){let{inline:t=!0,skipBackoff:n=!1}=e;const r=(0,W.mR)(),{chatter:o}=(0,W.NC)(),{client:i}=(0,V.useClient)(),c=(0,m.wA)(),{isRTL:l}=(0,F.Wz)(),u=(0,g.useRef)(),d=(0,g.useRef)(!1),p=o.language||i.language;(0,g.useEffect)((()=>{t||s.fc.postMessage(a.qR,{errorType:"chat-outage"}),t||n||(d.current=(0,Z.retryChatConnection)())}),[t,n]),(0,g.useEffect)((()=>()=>{clearTimeout(u.current)}),[]),(0,g.useEffect)((()=>{t&&"number"==typeof u.current||(u.current=window.setTimeout((()=>{c((0,U.ez)("CHAT_OUTAGE_FULL_PAGE")),Jr.info("FULL_OUTAGE_DETECTED - 2 minute timeout")}),12e4))}),[t,c]);const f=()=>g.createElement(g.Fragment,null,g.createElement(Zr,null,g.createElement(Pn.CommentInfoAlt,{size:42})),g.createElement(Kr,{role:"alert","data-testid":"default-outage-message"},r("DEFAULT_OUTAGE_MESSAGE")));return g.createElement(Yr,null,g.createElement(Wr,{inline:t,isRTL:l},t?f():(()=>{const e=i.uiSettings.get("chat").get("fallbackUiSettings");return Boolean(e.getIn(["message",p]))?g.createElement(g.Fragment,null,g.createElement(Vr,null,g.createElement("img",{src:e.getIn(["icon","image"]),alt:"outage message icon"})),g.createElement(Kr,{role:"alert","data-testid":"custom-outage-message"},e.getIn(["message",p])),(()=>{const t=e.get("links").get(p);return t?g.createElement(jr,null,t.map((e=>e.get("url")&&e.get("label")?g.createElement(qr,{key:e.get("label")},g.createElement(Xr,{target:"_blank",rel:"noopener noreferrer",href:e.get("url")},e.get("label"))):null))):null})()):f()})(),d.current?g.createElement(Qr,null,g.createElement(ae.X,{text:r("RETRY_CONNECTION"),onClick:()=>window.location.reload()})):null))}Jr.setLoggerReady();var eo,to=n.p+"e1053afba4cc194f7ff7.mp3";function no(){return no=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},no.apply(this,arguments)}var ao,ro,oo,io,so,co,lo,uo=e=>g.createElement("svg",no({xmlns:"http://www.w3.org/2000/svg",width:26,height:26,fill:"none"},e),eo||(eo=g.createElement("path",{fill:"currentColor",d:"M5.66 21.193c1.127-2.037 3.047-3.514 5.328-4.118 3.747-.955 7.556.866 9.354 4.117A10.96 10.96 0 0 1 13 24a10.96 10.96 0 0 1-7.34-2.807ZM17.375 11.125A4.333 4.333 0 0 1 13 15.5a4.333 4.333 0 0 1-4.375-4.375A4.333 4.333 0 0 1 13 6.75a4.333 4.333 0 0 1 4.375 4.375Z"}))),go=n(20969);const po=E.Ay.span(ao||(ao=(0,z.A)(["\n  display: inline-flex;\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  overflow: hidden;\n  background-color: ",";\n  color: ",";\n  align-items: center;\n  justify-content: center;\n  font-size: ",";\n  line-height: 0;\n  flex: 0 0 32px;\n  font-weight: ",";\n\n  ","\n\n  ","\n  \n  ","\n  \n  ","\n  \n  ","\n"])),(e=>e.theme.themeColor),(e=>e.theme.themeFgColor),(e=>e.theme.mainFontSize),we.v.heavyFontWeight,(e=>e.outlineColor&&(0,E.AH)(ro||(ro=(0,z.A)(["\n      box-shadow: 0 0 0 1px ",";\n    "])),e.outlineColor)),(e=>e.outlineColor&&(0,E.AH)(oo||(oo=(0,z.A)(["\n      box-shadow: 0 0 0 1px ",";\n    "])),e.outlineColor)),(e=>"small"===e.size&&(0,E.AH)(io||(io=(0,z.A)(["\n      width: 26px;\n      height: 26px;\n      font-size: ",";\n      flex: 0 0 26px;\n    "])),e.theme.smallFontSize)),(e=>"large"===e.size&&(0,E.AH)(so||(so=(0,z.A)(["\n      width: 36px;\n      height: 36px;\n      flex: 0 0 36px;\n    "])))),(e=>"x-large"===e.size&&(0,E.AH)(co||(co=(0,z.A)(["\n      width: 72px;\n      height: 72px;\n      flex: 0 0 72px;\n      font-size: 30px;\n      font-weight: ",";\n      box-shadow: ",";\n    "])),we.v.heavyFontWeight,we.v.boxShadow2))),mo=E.Ay.img(lo||(lo=(0,z.A)(["\n  width: 100%;\n  height: auto;\n"])));function fo(e){let{size:t="default",agentInfo:n,outlineColor:a}=e;const{client:r}=(0,go.t)(),o=r.avatar;let i,s=a;return n?n.imageUrl&&r.hasFeature(An.O.ADA_GLASS_ZENDESK_MESSAGING)?i=g.createElement(mo,{src:n.imageUrl,alt:""}):r.agentAvatar.get("default")?i=g.createElement(uo,null):(i=g.createElement(mo,{src:r.agentAvatar.get("image"),alt:""}),s=void 0):o.get("useLetter")?i=o.get("letter"):(i=g.createElement(mo,{src:o.get("image"),alt:""}),s=void 0),g.createElement(po,{size:t,outlineColor:s,"aria-hidden":!0},i)}var ho,Eo,vo,yo;const Ao=E.Ay.div(ho||(ho=(0,z.A)(["\n  padding: "," ",";\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n"])),we.v.space8,we.v.space5),_o=E.Ay.div(Eo||(Eo=(0,z.A)(["\n  margin-bottom: ",";\n"])),we.v.space5),So=E.Ay.div(vo||(vo=(0,z.A)(["\n  color: ",";\n  font-size: ",";\n  font-weight: ",";\n  margin-bottom: ",";\n"])),(e=>e.theme.colorTextDefault),we.v.xLargeFontSize,we.v.heavyFontWeight,we.v.space2),bo=E.Ay.div(yo||(yo=(0,z.A)(["\n  font-size: ",";\n  color: ",";\n  text-align: center;\n  padding: 0 ",";\n"])),(e=>e.theme.smallFontSize),(e=>e.theme.colorTextSubdued),we.v.space5);function To(){const{client:e}=(0,V.useClient)(),{withChatterLanguage:t}=(0,W.He)();return g.createElement(Ao,null,g.createElement(_o,null,g.createElement(fo,{size:"x-large"})),g.createElement(So,null,t(e.uiSettings.get("chat").get("botName"))||""),g.createElement(bo,null,t(e.uiSettings.get("chat").get("botDescription"))))}var Co,wo,Io,xo,Ro,ko,Oo,No,Lo,Mo,Do=n(73346);const Fo=E.Ay.section(Co||(Co=(0,z.A)(["\n  text-align: center;\n  margin: -8px 0 8px;\n  padding-top: 8px;\n  padding-bottom: 8px;\n"]))),Uo=E.Ay.details(wo||(wo=(0,z.A)(["\n  margin: 0 auto;\n  border-radius: 16px;\n  display: flex;\n  flex-direction: column-reverse;\n  align-items: center;\n  justify-content: center;\n  max-width: 500px;\n  flex-grow: 1;\n  cursor: default;\n  font-weight: normal;\n  padding: 0;\n\n  ","\n\n  // hide the arrow icon when toggling the summary details\n  ::marker {\n    display: none;\n  }\n\n  summary {\n    list-style: none;\n    display: flex;\n    flex-direction: column;\n\n    &:focus {\n      ","\n    }\n  }\n"])),(e=>(0,E.AH)(Io||(Io=(0,z.A)(["\n    font-size: ",";\n    color: ",";\n\n    ","\n  "])),e.theme.smallFontSize,e.theme.colorTextSubdued,e.expandable&&(0,E.AH)(xo||(xo=(0,z.A)(["\n      border: 1px solid ",";\n      padding: ",";\n      background: ",";\n    "])),e.theme.colorOutline2,we.L.gUnitDouble,e.theme.colorSurfaceCardDepressed))),(e=>e.theme.focusStyle)),zo=E.Ay.h1(Ro||(Ro=(0,z.A)(["\n  margin: 0;\n  font-size: ",";\n  font-weight: ",";\n  line-height: 20px;\n\n  ","\n"])),we.L.smallFontSize,we.L.mediumFontWeight,(e=>(0,E.AH)(ko||(ko=(0,z.A)(["\n    color: ",";\n  "])),e.theme.colorTextDefault))),Po=E.Ay.div(Oo||(Oo=(0,z.A)(["\n  font-size: ",";\n  text-transform: capitalize;\n\n  &:last-child {\n    margin-bottom: 0;\n  }\n"])),we.L.smallFontSize),Go=E.Ay.section(No||(No=(0,z.A)(["\n  margin-top: ",";\n  margin-bottom: ",";\n"])),we.L.gUnitDouble,we.L.gUnit),Ho=E.Ay.span(Lo||(Lo=(0,z.A)(["\n  padding: "," "," 0 ",";\n  border: 0;\n  background: none;\n  cursor: pointer;\n  font-size: ",";\n  user-select: none;\n\n  ","\n"])),we.v.space2,we.v.space2,we.v.space2,we.L.smallFontSize,(e=>(0,E.AH)(Mo||(Mo=(0,z.A)(["\n    color: ",";\n    border-radius: ",";\n\n    ",";\n  "])),e.theme.colorTextDefault,e.theme.mainBorderRadius,e.theme.focusStyle)));function Bo(e){return e&&e.surveyType===rn.C.END_CHAT}function Zo(e){return Boolean(e&&(e.feedback.length||e.comment||null!==e.resolved))}class Wo extends g.Component{constructor(){super(...arguments),(0,y.A)(this,"state",{isExpanded:!1}),(0,y.A)(this,"rootRef",g.createRef()),(0,y.A)(this,"csatDetailsRef",g.createRef()),(0,y.A)(this,"onToggle",(e=>{e.stopPropagation(),this.setState((e=>({isExpanded:!e.isExpanded})),(()=>{this.rootRef.current.scrollIntoView({block:"nearest",behavior:"smooth"})}))}))}componentDidMount(){var e;const{fetchCsatSettings:t}=this.props;t(),window.dispatchEvent(I.VR.SCROLL_MESSAGE_LIST_TO_BOTTOM),null===(e=this.csatDetailsRef.current)||void 0===e||e.addEventListener("toggle",this.onToggle.bind(this))}componentDidUpdate(e){const{csatResult:t}=this.props;Bo(t)===Bo(e.csatResult)&&Zo(t)===Zo(e.csatResult)||window.dispatchEvent(I.VR.SCROLL_MESSAGE_LIST_TO_BOTTOM)}get hasMoreDetails(){const{csatResult:e}=this.props;return Zo(e)}get ratingLabel(){const{csatResult:e,currentUiLanguage:t}=this.props;return e.style===rn.P.THUMBS?(0,on.jK)(e.score,t):(0,on.m0)(e.score,t)}renderFeedbackOptions(){const{csatResult:e,csatSettings:t,withChatterLanguage:n,t:a}=this.props;if(!t)return null;if(!e.feedback.length)return null;const r=e.isPositive?a("WHAT_WENT_WELL"):a("WHAT_WENT_WRONG"),o=e.feedback.map((a=>{const r=(e.isPositive?t.followUpPositiveFeedbackOptions:t.followUpNegativeFeedbackOptions).find((e=>e.id===a));return r?n(r.label):null})).filter((e=>Boolean(e))).join(", ");return g.createElement(Go,null,g.createElement(zo,null,r),g.createElement("div",null,o))}renderResolution(){const{csatResult:e,csatSettings:t,withChatterLanguage:n,t:a}=this.props;return null!==e.resolved&&t?g.createElement(Go,null,g.createElement(zo,null,n(t.resolutionLabel)),g.createElement("div",null,e.resolved?a("YES"):a("NO"))):null}renderComment(){const{csatResult:e,t:t}=this.props;return e.comment?g.createElement(Go,null,g.createElement(zo,null,t("ADDITIONAL_FEEDBACK")),g.createElement("div",null,e.comment)):null}render(){const{t:e}=this.props,{isExpanded:t}=this.state;return g.createElement(Fo,{ref:this.rootRef},g.createElement(Uo,{expandable:this.hasMoreDetails,ref:this.csatDetailsRef},g.createElement("summary",null,!t&&g.createElement("span",null,e("YOU_RATED_CHAT_AS_",{label:this.ratingLabel})),this.hasMoreDetails&&g.createElement(Ho,null,e(t?"SHOW_LESS":"SHOW_MORE"))),this.hasMoreDetails&&g.createElement(g.Fragment,null,g.createElement(zo,null,e("SATISFACTION_RATING")),g.createElement(Po,null,this.ratingLabel),this.renderFeedbackOptions(),this.renderResolution(),this.renderComment())))}}var Vo,Ko,jo,qo=(0,m.Ng)((e=>({currentUiLanguage:e.chatter.language,csatSettings:(0,nn.getResource)(e,nn.ResourceType.CSAT_SETTINGS),withChatterLanguage:(0,tn.YC)(e),t:(0,Dt.Nj)(e.chatter.language)})),(e=>({fetchCsatSettings:()=>e((0,nn.fetchOneIfNeeded)(nn.ResourceType.CSAT_SETTINGS))})))(Wo),Xo=n(39904),Qo=n(64766);const Yo=E.Ay.div(Vo||(Vo=(0,z.A)([""]))),Jo=(0,E.i7)(Ko||(Ko=(0,z.A)(["\n  0% { opacity: 0; transform: scale(0.94); }\n  100% { opacity: 1; transform: scale(1); }\n"]))),$o=E.Ay.div(jo||(jo=(0,z.A)(["\n  opacity: 0;\n  animation: forwards "," 400ms cubic-bezier(0.34, 1.56, 0.64, 1) 100ms;\n"])),Jo);function ei(e){let{message:t}=e;const{csatSettings:n,agentCsatSettings:a,fetchCsatSettings:r,fetchAgentCsatSettings:o,postCsatResult:i}=(0,on.f4)(),{setSheetContent:s,closeSheet:c}=(0,Qo.ZJ)(),{conversationId:l}=t,u=(0,K.LM)(l),d=(0,g.useRef)(u);d.current=u;const p=(0,m.d4)((e=>(0,on.hU)(e,{conversationId:l}))),[f,h]=(0,g.useState)([]),[E,v]=(0,g.useState)(null),y=(0,m.d4)((e=>(0,on.E9)(e,{conversationId:l}))),A=(0,m.d4)((e=>(0,on.$v)(e,{conversationId:l})));if((0,g.useEffect)((()=>{n||r(),a||o()}),[]),!u||!d.current)return null;if(!n)return null;const _=d.current.active&&null===t.score&&t===y,S=null===t.score&&t===A,b=()=>{const e=d.current;e&&(i(e,{submit:!0}),c())},T=async(e,t)=>{const r=d.current;if(!r)return;const o=!r.csat||!r.csat.score||r.csat.score>3&&e<=3||r.csat.score<=3&&e>3;await i(r,{surveyType:t,score:e});const l=t===rn.C.POST_AGENT?a:n;null!=l&&l.hasSurveyQuestionOnly||s(g.createElement(on.wI,{onClose:b,onSubmit:c,surveyType:t,clean:o,useAgentCsat:_}))},C=(e,t,n)=>{const a=d.current;a&&("feedback"===e&&h(t),E&&clearTimeout(E),v(setTimeout((async()=>{await i(a,{surveyType:n,score:5,[e]:t}),s(g.createElement(on.wI,{onClose:b,onSubmit:c,surveyType:n,useAgentCsat:_}))}),1e3)))},w=_?g.createElement($o,null,g.createElement(on.lQ,{conversationId:t.conversationId,onScoreChange:e=>T(e,rn.C.POST_AGENT),providedCsatSettings:a,conversation:u,onAdditionalFeedbackTextChange:e=>C("comment",e,rn.C.POST_AGENT),onIsResolvedChange:e=>C("resolved",e,rn.C.POST_AGENT),setSelectedFeedbackOptions:e=>C("feedback",e,rn.C.POST_AGENT),selectedFeedbackOptions:f})):S?g.createElement($o,null,g.createElement(on.lQ,{conversationId:t.conversationId,onScoreChange:e=>T(e,rn.C.ANSWER_FLOW),conversation:u,onAdditionalFeedbackTextChange:e=>C("comment",e,rn.C.ANSWER_FLOW),onIsResolvedChange:e=>C("resolved",e,rn.C.ANSWER_FLOW),setSelectedFeedbackOptions:e=>C("feedback",e,rn.C.ANSWER_FLOW),selectedFeedbackOptions:f})):null===t.score||t.surveyType===rn.C.END_CHAT?null:p.includes(t)?g.createElement(qo,{csatResult:new Xo.CsatResult({score:t.score,feedback:t.feedback,resolved:t.resolved,comment:t.comment,style:t.style,surveyType:t.surveyType,isPositive:t.isPositive})}):[rn.C.POST_AGENT,rn.C.ANSWER_FLOW].includes(t.surveyType)?null:g.createElement(on.mT,{csatResult:new Xo.CsatResult({score:t.score})});return g.createElement(Yo,null,w)}var ti,ni,ai=n(49253);const ri=E.Ay.div(ti||(ti=(0,z.A)(["\n  background-color: ",";\n  color: ",";\n  border-radius: ",";\n  padding: "," 14px;\n  font-weight: normal;\n  line-height: 1.25;\n  font-size: ",";\n  word-break: break-word;\n  white-space: pre-wrap;\n  box-sizing: border-box;\n\n  & strong {\n    font-weight: 600;\n  }\n\n  ","\n"])),(e=>e.theme.messageBgColor),(e=>e.theme.colorTextDefault),(e=>e.theme.messageBorderRadius),we.v.space3,(e=>e.theme.mainFontSize),(e=>e.user&&(0,E.AH)(ni||(ni=(0,z.A)(["\n      background-color: ",";\n      color: ",";\n    "])),e.theme.themeColor,e.theme.themeFgColor)));var oi,ii,si,ci,li,ui;const di=E.Ay.div(oi||(oi=(0,z.A)(["\n  display: flex;\n  flex-wrap: wrap;\n\n  ","\n"])),(e=>(0,E.AH)(ii||(ii=(0,z.A)(["\n    ","\n  "])),e.minWidth&&(0,E.AH)(si||(si=(0,z.A)(["\n      min-width: ","px;\n    "])),e.minWidth)))),gi=E.Ay.div(ci||(ci=(0,z.A)(["\n  display: flex;\n\n  &:not(:last-child) {\n    margin-right: ",";\n  }\n\n  ","\n"])),we.v.space2,(e=>(0,E.AH)(li||(li=(0,z.A)(["\n    ","\n  "])),e.equalWidth&&(0,E.AH)(ui||(ui=(0,z.A)(["\n      flex: 1 1 0;\n    "]))))));function pi(e){let{children:t,equalWidth:n,minWidth:a}=e;return g.createElement(di,{minWidth:a},g.Children.map(t,(e=>g.createElement(gi,{equalWidth:n},e))))}function mi(e,t){return(n,a)=>{const r=(0,He.getMessages)(a()).find((t=>t.id===e));if(!r)throw new Error("Survey message not found");return $.FH.patch("/message/survey/".concat(r.conversationId,"/"),{type:"survey_result",message_log_id:e,...t})}}const fi=["main","question","comment","result"];var hi,Ei,vi,yi,Ai,_i,Si,bi,Ti,Ci,wi,Ii,xi,Ri,ki,Oi,Ni,Li,Mi,Di,Fi,Ui,zi,Pi,Gi;const Hi=E.Ay.div(hi||(hi=(0,z.A)(["\n  position: relative;\n  box-shadow: ",";\n  max-width: 380px;\n  margin: 0 auto;\n  overflow: hidden;\n\n  ","\n"])),we.v.boxShadow2,(e=>(0,E.AH)(Ei||(Ei=(0,z.A)(["\n    border: 1px solid ",";\n    border-radius: ",";\n    background-color: ",";\n  "])),e.theme.colorOutline2,e.theme.messageBorderRadius,e.theme.colorSurfaceCardElevated))),Bi=E.Ay.div(vi||(vi=(0,z.A)(["\n  position: absolute;\n  left: ",";\n  right: ",";\n  top: ",";\n  display: flex;\n  justify-content: space-between;\n  z-index: 1;\n"])),we.v.space4,we.v.space4,we.v.space4),Zi=E.Ay.button(yi||(yi=(0,z.A)(["\n  border: 0;\n  background: none;\n  cursor: pointer;\n  font-size: 0;\n  padding: ",";\n\n  &:hover {\n    background-color: ",";\n  }\n\n  ","\n"])),we.v.space1,(e=>e.theme.colorOutline1),(e=>(0,E.AH)(Ai||(Ai=(0,z.A)(["\n    color: ",";\n    border-radius: ",";\n\n    ","\n\n    ",";\n  "])),e.theme.colorIconDefault,e.theme.mainBorderRadius,e.forward&&(0,E.AH)(_i||(_i=(0,z.A)(["\n      margin-left: auto;\n    "]))),e.theme.focusStyle))),Wi=E.Ay.div(Si||(Si=(0,z.A)(["\n  display: flex;\n  transition: transform 400ms ease-in-out;\n\n  ","\n"])),(e=>(0,E.AH)(bi||(bi=(0,z.A)(["\n    width: ","%;\n    transform: translateX(","%);\n  "])),100*e.numberOfSteps,-100/e.numberOfSteps*e.stepIndex))),Vi=E.Ay.div(Ti||(Ti=(0,z.A)(["\n  position: relative;\n  padding: 18px "," ",";\n  display: flex;\n  flex-direction: column;\n  box-sizing: border-box;\n  flex: 1 1 0px;\n"])),we.v.space5,we.v.space6),Ki=E.Ay.div(Ci||(Ci=(0,z.A)(["\n  padding: 0 28px;\n  text-align: center;\n  margin-bottom: ",";\n\n  ","\n"])),we.v.space6,(e=>(0,E.AH)(wi||(wi=(0,z.A)(["\n    font-size: ",";\n    color: ",";\n    font-weight: ",";\n  "])),e.theme.mainFontSize,e.theme.colorTextEmphasized,we.v.mediumFontWeight))),ji=E.Ay.div(Ii||(Ii=(0,z.A)(["\n  display: flex;\n"]))),qi=E.Ay.div(xi||(xi=(0,z.A)(["\n  display: flex;\n  justify-content: space-between;\n  margin-top: ",";\n"])),we.v.space2),Xi=E.Ay.div(Ri||(Ri=(0,z.A)(["\n  ","\n"])),(e=>(0,E.AH)(ki||(ki=(0,z.A)(["\n    font-size: ",";\n    color: ",";\n  "])),e.theme.xSmallFontSize,e.theme.colorTextSubdued))),Qi=E.Ay.div(Oi||(Oi=(0,z.A)(["\n  display: flex;\n  flex: 1 1 0;\n\n  &:not(:last-child) {\n    margin-right: ",";\n  }\n"])),we.v.space1),Yi=E.Ay.div(Ni||(Ni=(0,z.A)(["\n  display: flex;\n  justify-content: center;\n"]))),Ji=E.Ay.div(Li||(Li=(0,z.A)(["\n  text-align: center;\n  padding: 0 ",";\n\n  ","\n"])),we.v.space4,(e=>(0,E.AH)(Mi||(Mi=(0,z.A)(["\n    font-size: ",";\n  "])),e.theme.mainFontSize))),$i=E.Ay.div(Di||(Di=(0,z.A)(["\n  display: flex;\n"]))),es=E.Ay.div(Fi||(Fi=(0,z.A)(["\n  margin-left: auto;\n"]))),ts=E.Ay.div(Ui||(Ui=(0,z.A)(["\n  font-weight: ",";\n  margin-bottom: ",";\n"])),we.v.mediumFontWeight,we.v.space3),ns=E.Ay.div(zi||(zi=(0,z.A)(["\n  &:not(:last-child) {\n    margin-bottom: ",";\n  }\n"])),we.v.space3),as=E.Ay.div(Pi||(Pi=(0,z.A)(["\n  margin-bottom: ",";\n\n  ","\n"])),we.v.space1,(e=>(0,E.AH)(Gi||(Gi=(0,z.A)(["\n    font-size: ",";\n  "])),e.theme.xSmallFontSize)));function rs(e){let{message:t}=e;const n=(0,W.mR)(),{activeSteps:a,activeStep:r,stepIndex:o,goForward:i,goBack:s,scaleItems:c,updateSurveyResult:l,setSubmittedScaleValue:u,showBinaryOptions:d,canGoBack:p,canGoForward:f,handleQuestionButton:h,submittedYesNoQuestionResult:E,submittedComment:v,setSubmittedComment:y,isLastStep:A,doesStepHaveValue:_,handleSubmit:S,shouldShowOverview:b,submittedScaleValue:C}=function(e){const t=(0,m.wA)(),n=function(e){return fi.filter((t=>!("question"===t&&!e.hasQuestionSection||"comment"===t&&!e.hasCommentSection)))}(e),[a,r]=(0,g.useState)(0),[o,i]=(0,g.useState)(e.likertScore),[s,c]=(0,g.useState)(1===e.resolved||-1!==e.resolved&&null),[l,u]=(0,g.useState)(e.comment||""),[d,p]=(0,g.useState)(e.isSubmitted),f=n[a],h=e=>"main"===e&&null!==o||"question"===e&&null!==s||"comment"===e&&null!==l,E=e=>n.indexOf(e)===n.length-2,v=!!h(f)&&!E(f)&&a!==n.length-1,y=(0,g.useRef)(v);y.current=v;const A="main"!==f&&"result"!==f,_=e.scaleItems.length<=2,S=function(){return t(mi(...arguments))},b=()=>{y.current&&r(a+1)};return{activeSteps:n,activeStep:f,stepIndex:a,setSubmittedScaleValue:i,showBinaryOptions:_,canGoForward:v,canGoBack:A,submittedYesNoQuestionResult:s,submittedComment:l,setSubmittedComment:u,isLastStep:E,doesStepHaveValue:h,shouldShowOverview:d,goForward:b,submittedScaleValue:o,goBack:()=>{A&&r(a-1)},scaleItems:(()=>{const t={};if(_){const n=Math.min(...e.scaleItems),a=Math.max(...e.scaleItems);t[n]=e.likertScaleLabelLow,t[a]=e.likertScaleLabelHigh}return e.scaleItems.map((e=>({value:e,label:t[e]||e,isSubmitted:o===e})))})(),updateSurveyResult:S,handleQuestionButton:t=>{c(t),S(e.id,{resolved:t?1:-1}),setTimeout(b,500)},handleSubmit:()=>{r(n.indexOf("result")),S(e.id,{comment:l,is_submitted:!0}),setTimeout((()=>p(!0)),3e3)}}}(t),w=e=>A(e)&&_(e)?g.createElement(g.Fragment,null,g.createElement(Pn.Space5,null),g.createElement(ae.X,{text:n("SUBMIT"),disabled:r!==e||v.length>320,onClick:S})):null;return b?(()=>{var e;const a=null===(e=c.find((e=>e.value===C)))||void 0===e?void 0:e.label,r=v.length<80?v:"".concat(v.slice(0,80).trim(),"");return g.createElement($i,{"aria-live":"polite"},g.createElement(es,null,g.createElement(ri,{user:!0},g.createElement(ts,null,n("FEEDBACK_SUBMITTED")),g.createElement(ns,null,g.createElement(as,null,d?t.likertScaleQuestionLabel:n("RATING")),d?a:"".concat(C,"/").concat(t.scale)),t.hasQuestionSection&&g.createElement(ns,null,g.createElement(as,null,n("RESOLUTION")),E?"Yes":"No"),Boolean(t.hasCommentSection&&r)&&g.createElement(ns,null,g.createElement(as,null,n("COMMENTS")),r))))})():g.createElement(Hi,null,g.createElement(Bi,null,p&&g.createElement(Zi,{onClick:s,"aria-label":n("BACK")},g.createElement(Pn.AngleLeftIcon,null)),f&&g.createElement(Zi,{onClick:i,forward:!0,"aria-label":n("FORWARD")},g.createElement(Pn.AngleRightIcon,null))),g.createElement(Wi,{numberOfSteps:a.length,stepIndex:o},g.createElement(Vi,{"data-testid":"main-step","aria-hidden":"main"!==r,"aria-live":"polite"},g.createElement(Ki,null,t.likertScaleQuestionLabel),g.createElement(ji,null,c.map((e=>g.createElement(Qi,{key:e.value},g.createElement(nr.a,{noPadding:!0,flexGrow:!0,text:"".concat(e.label),active:e.isSubmitted,onClick:()=>{u(e.value),l(t.id,{likert_score:e.value,scale:t.scale}),setTimeout(i,500)},disabled:"main"!==r}))))),!d&&g.createElement(qi,{"aria-hidden":!0},g.createElement(Xi,null,t.likertScaleLabelLow),g.createElement(Xi,null,t.likertScaleLabelHigh)),w("main")),a.includes("question")?g.createElement(Vi,{"data-testid":"question-step","aria-hidden":"question"!==r},"question"===r&&g.createElement(T.Iu,{message:t.yesNoQuestionLabel,"aria-live":"polite"}),g.createElement(Ki,null,t.yesNoQuestionLabel),g.createElement(Yi,null,g.createElement(pi,{equalWidth:!0,minWidth:208},g.createElement(nr.a,{text:n("YES"),flexGrow:!0,onClick:()=>h(!0),active:!0===E,disabled:"question"!==r}),g.createElement(nr.a,{text:n("NO"),flexGrow:!0,onClick:()=>h(!1),active:!1===E,disabled:"question"!==r}))),w("question")):null,a.includes("comment")?g.createElement(Vi,{"data-testid":"comment-step","aria-hidden":"comment"!==r},g.createElement(Ki,null,t.additionalCommentsLabel),g.createElement(ai.p,{label:t.additionalCommentsLabel,value:v,maxLength:320,onChange:y,disabled:"comment"!==r}),w("comment")):null,g.createElement(Vi,{"data-testid":"result-step","aria-hidden":"result"!==r},"result"===r&&g.createElement(g.Fragment,null,g.createElement(T.Iu,{message:n("FEEDBACK_SUBMITTED_SUCCESS"),"aria-live":"polite"}),g.createElement(T.Iu,{message:n("THANK_YOU_MESSAGE"),"aria-live":"polite"})),g.createElement(Ki,null,n("FEEDBACK_SUBMITTED_SUCCESS")),g.createElement(Pn.Space6,null),g.createElement(Ji,null,g.createElement("span",{role:"img","aria-label":n("THANK_YOU_MESSAGE")},""),g.createElement("br",null),n("THANK_YOU_MESSAGE")))))}var os,is=n(80959);function ss(e){const{message:t,a11yMessage:n}=e,{botName:a,client:r}=(0,V.useClient)(),o=(0,He.useIsMessageFirstInGroup)(t.id),i=(0,W.mR)();if(!t.isNew)return null;let s=n||"";return o&&(s="agent"===t.source&&t.agentInfo?"".concat(i("MESSAGE_FROM",{name:t.agentInfo.name}),": ").concat(s):t.isOwnedByUser?"".concat(i("MESSAGE_FROM",{name:i("YOU")}),": ").concat(s):"".concat(i("MESSAGE_FROM",{name:a||r.handle}),": ").concat(s)),g.createElement(T.Iu,{message:(0,is.jT)(s),"aria-live":"polite"})}const cs=E.Ay.div(os||(os=(0,z.A)(["\n  background: ",";\n  height: 133px;\n  width: 256px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color ",";\n  border-radius: ",";\n  @media only screen and (max-width: 374px) {\n    width: 198px;\n  }\n"])),(e=>e.theme.messageBgColor),(e=>e.theme.colorIconDisabled),(e=>e.theme.messageBorderRadius)),ls=()=>g.createElement(cs,null,g.createElement(Pn.BrokenImageIcon,{size:48,"aria-hidden":"true"}));var us,ds;const gs=(0,E.i7)(us||(us=(0,z.A)(["\n  0% { background-position: -500px 0 }\n  100% { background-position: 500px 0 }\n"]))),ps=E.Ay.div(ds||(ds=(0,z.A)(["\n  box-sizing: border-box;\n  display: block;\n  border-radius: ",";\n  width: 128px;\n  background-color: ",";\n  background-image: ",";\n  background-size: cover;\n  animation-name: ",";\n  animation-duration: 7.2s;\n  animation-iteration-count: infinite;\n  animation-timing-function: linear;\n  animation-fill-mode: forwards;\n  height: 80px;\n"])),(e=>e.theme.messageBorderRadius),(e=>e.theme.messageBgColor),(e=>e.theme.bgMessageLoader),gs);var ms;function fs(){return fs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},fs.apply(this,arguments)}var hs,Es,vs,ys,As,_s,Ss,bs=e=>g.createElement("svg",fs({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),ms||(ms=g.createElement("path",{fillRule:"evenodd",d:"M47.414 47.435a2.001 2.001 0 0 1-2.83 0l-12.6-12.6-12.589 12.59a2.002 2.002 0 0 1-2.83-2.831l12.588-12.589L16.567 19.42a2.002 2.002 0 0 1 2.83-2.83l12.587 12.586L44.58 16.577a2.002 2.002 0 1 1 2.83 2.83L34.815 32.006l12.6 12.6a2.001 2.001 0 0 1 0 2.83Z"})));const Ts=E.Ay.div(hs||(hs=(0,z.A)(["\n  max-width: 400px;\n  border-radius: ",";\n  overflow: hidden;\n"])),(e=>e.theme.messageBorderRadius)),Cs=E.Ay.img(Es||(Es=(0,z.A)(["\n  max-width: 100%;\n  max-height: 300px;\n  display: block;\n  cursor: pointer;\n\n  ",";\n"])),(e=>!e.hasLoaded&&(0,E.AH)(vs||(vs=(0,z.A)(["\n      display: none;\n    "]))))),ws=E.Ay.img(ys||(ys=(0,z.A)(["\n  max-height: 80%; // creates space for the close button\n  max-width: 80%; // creates gutters on the left and right\n\n  ",";\n"])),(e=>!e.hasLoaded&&(0,E.AH)(As||(As=(0,z.A)(["\n      display: none;\n    "]))))),Is=E.Ay.div(_s||(_s=(0,z.A)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  background-color: rgba(0, 0, 0, 0.8);\n  z-index: 900;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),xs=E.Ay.button(Ss||(Ss=(0,z.A)(["\n  all: unset;\n  position: fixed;\n  top: 12px;\n  right: 15px;\n  z-index: 900;\n  cursor: pointer;\n  width: 35px;\n  height: 35px;\n  & > svg {\n    fill: rgba(255, 255, 255, 0.6);\n  }\n"])));function Rs(e){let{message:t,isProactive:n=!1,onReady:a=(()=>null)}=e;const[r,o]=(0,g.useState)(!1),[i,s]=(0,g.useState)(!1),[c,l]=(0,g.useState)(!1),{client:u}=(0,V.useClient)(),d=u.get("isMobile"),p=(0,W.mR)();(0,g.useLayoutEffect)((()=>{(r||i)&&(a(),t.isNew&&(0,I.hZ)("SCROLL_MESSAGE_LIST_TO_BOTTOM"))}),[r,i,a,t]);const m=()=>{o(!0)},f=()=>{s(!0)};return g.createElement(Ts,null,!r&&!i&&g.createElement(ps,null),i&&g.createElement(ls,null),g.createElement(Cs,{"data-testid":"AutoMsgPic","aria-label":p("OPEN_IMAGE"),src:t.picUrl,hasLoaded:r,alt:t.altText,onLoad:m,onError:f,onClick:()=>{n||(d?l(!0):window.open(t.picUrl))}}),c&&d&&g.createElement(b(),{active:!0},g.createElement(Is,null,g.createElement(xs,{"aria-label":p("CLOSE_IMAGE"),onClick:()=>{l(!1)}},g.createElement(bs,null)),g.createElement(ws,{src:t.picUrl,hasLoaded:r,alt:t.altText,onLoad:m,onError:f}))),g.createElement(ss,{message:t,a11yMessage:t.altText}))}var ks,Os,Ns,Ls,Ms,Ds,Fs,Us,zs;const Ps=E.Ay.section(ks||(ks=(0,z.A)([""]))),Gs=E.Ay.a(Os||(Os=(0,z.A)(["\n  display: flex;\n  font-weight: ",";\n\n  ","\n\n  ","\n"])),we.v.mediumFontWeight,(e=>e.isRTL&&(0,E.AH)(Ns||(Ns=(0,z.A)(["\n      flex-direction: row-reverse;\n    "])))),(e=>(0,E.AH)(Ls||(Ls=(0,z.A)(["\n    color: ",";\n  "])),e.theme.colorTextDefault))),Hs=E.Ay.span(Ms||(Ms=(0,z.A)([""]))),Bs=E.Ay.span(Ds||(Ds=(0,z.A)(["\n  flex: 0 0 auto;\n  align-self: flex-end;\n  ","\n\n  ","\n"])),(e=>e.isRTL?(0,E.AH)(Fs||(Fs=(0,z.A)(["\n          margin-left: ",";\n        "])),we.v.space4):(0,E.AH)(Us||(Us=(0,z.A)(["\n          margin-right: ",";\n        "])),we.v.space4)),(e=>(0,E.AH)(zs||(zs=(0,z.A)(["\n    color: ",";\n  "])),e.theme.colorIconDefault)));function Zs(e){let{message:t}=e;const n=t.url&&/\.(jpe?g|gif|png|)$/.test(t.url),[a,r]=(0,g.useState)(),{isRTL:o}=(0,F.Wz)();return(0,l.a)()&&s.embedStore.getState().then((e=>{if(!e)return;const{metaFields:t}=e;"ANDROID"===(null==t?void 0:t.sdkType)&&r("_blank")})),g.createElement(Ps,null,n?g.createElement(Rs,{message:new He.PictureMessage({...t,picUrl:t.url})}):g.createElement(ri,null,g.createElement(Gs,{isRTL:o,href:t.url,download:!0,target:a},g.createElement(Hs,null,t.name),g.createElement(Bs,{isRTL:o},g.createElement(Pn.DownloadIcon,{size:20}))),g.createElement(ss,{message:t,a11yMessage:t.name})))}var Ws,Vs,Ks,js,qs=n(45029);const Xs=E.Ay.div(Ws||(Ws=(0,z.A)(["\n  width: calc(100% - 16px);\n  display: block;\n  margin: auto;\n  border: none;\n  ",";\n"])),(e=>e.theme.focusStyle)),Qs=E.Ay.iframe(Vs||(Vs=(0,z.A)(["\n  // leaving some space on the right so scrolling on mobile isn't too difficult\n  width: calc(100% - 16px);\n  display: block;\n  margin: auto;\n  border: none;\n  ","\n  ","\n"])),(e=>e.hideIframe&&(0,E.AH)(Ks||(Ks=(0,z.A)(["\n      display: none;\n    "])))),(e=>(0,E.AH)(js||(js=(0,z.A)(["\n      height: ","px;\n    "])),e.widgetHeight+1))),Ys=Xs;function Js(e){const{message:t,closeSheet:n,setCancelButtonText:a,setCancelButtonOnClick:r,testid:o}=e,i=t instanceof He.WidgetMessage?t.widgetUrl:t.authLink,s=t instanceof He.WidgetMessage?t.ariaLabel:"",c=t instanceof He.WidgetMessage?t.widgetName:"",{chatter:l}=(0,W.NC)(),u=(0,W.mR)(),d=(0,g.useRef)(),p=(0,g.useRef)(),m=t instanceof He.SeamlessOAuthMessage,[f,h]=(0,g.useState)(400),E=(0,g.useCallback)((e=>{var o,i;if(e.source!==(null===(o=p.current)||void 0===o?void 0:o.contentWindow))return;let s;try{s=JSON.parse(e.data)}catch(e){return}switch(s.message){case"POST_CONTENT_HEIGHT":h(s.contentMaxHeight);break;case"POST_WIDGET_CLOSE":n&&n();break;case"OVERRIDE_POST_WIDGET_CLOSE":if(r){const e=()=>{var e,t;null===(e=p.current)||void 0===e||null===(t=e.contentWindow)||void 0===t||t.postMessage(JSON.stringify({message:"ADA_CLOSE_WIDGET_EVENT"}),"*")};r((()=>e))}break;case"POST_WIDGET_INACTIVE":a&&a(u("RETURN_TO_CHAT"));break;case"POST_CONTENT_CAROUSEL_LINK_CLICKED":$.FH.post("/events",{by:l.token,type:qs.k,subtype:s.actionType,message_id:t.id,url:null===(i=s)||void 0===i?void 0:i.url,is_carousel:!0})}}),[l.token,n,t.id,r,a,u]);return(0,g.useEffect)((()=>(window.addEventListener("message",E),()=>window.removeEventListener("message",E))),[E]),g.createElement(Ys,{tabIndex:m?-1:0,ref:d},g.createElement(Qs,{src:i,ref:p,hideIframe:m,widgetHeight:f,title:c||s,"data-testid":o,role:"application",onLoad:()=>{!m&&d.current&&d.current.focus()}}))}var $s,ec,tc,nc,ac,rc,oc=n(4712);const ic=E.Ay.div($s||($s=(0,z.A)([""]))),sc=E.Ay.div(ec||(ec=(0,z.A)(["\n  background-color: transparent;\n  padding: 0.5rem 1rem;\n  box-shadow: inset 0px -1px #ddd;\n  display: flex;\n"]))),cc=E.Ay.button(tc||(tc=(0,z.A)(["\n  background-color: transparent;\n  outline: none;\n  height: 36px;\n  width: 40px;\n  border-radius: 8px;\n  border: 0;\n  margin-right: 0.5rem;\n  background-size: 30px;\n  background-position: center;\n  background-repeat: no-repeat;\n  cursor: pointer;\n\n  &:hover,\n  &:focus {\n    background-color: #f6f6f6;\n  }\n\n  ","\n\n  &:active {\n    background-color: #e8e8e8;\n  }\n\n  ","\n\n  ","\n"])),(e=>e.theme.focusStyle),(e=>e.isOpen&&(0,E.AH)(nc||(nc=(0,z.A)(['\n      background-image: url("https://static.ada.support/ArrowNE.svg");\n    '])))),(e=>e.isClose&&(0,E.AH)(ac||(ac=(0,z.A)(['\n      background-image: url("https://static.ada.support/close.svg");\n      margin-left: auto;\n      margin-right: 0;\n    ']))))),lc=E.Ay.iframe(rc||(rc=(0,z.A)(["\n  height: calc(100vh - 150px);\n  width: 100%;\n"])));function uc(e){let{url:t,handleClose:n}=e;return g.createElement(ic,null,g.createElement(sc,null,g.createElement(cc,{onClick:()=>{window.open(t)},"aria-label":"Open this article in a new tab",title:"Open this article in a new tab",type:"button",isOpen:!0}),g.createElement(cc,{onClick:n,isClose:!0,tabIndex:0,title:"Close this article","aria-label":"Close this article",type:"button"})),g.createElement(lc,{title:"web-frame",src:"".concat(t,"&referrer=ada"),frameBorder:"0"}))}var dc,gc,pc,mc,fc,hc,Ec,vc,yc,Ac,_c,Sc,bc,Tc,Cc=n(82251);const wc=E.Ay.a(dc||(dc=(0,z.A)(["\n  display: block;\n  border-radius: ",";\n  overflow: hidden;\n  border: 1px solid ",";\n  text-decoration: none;\n\n  ",";\n"])),(e=>e.theme.messageBorderRadius),(e=>e.theme.messageBgColor),(e=>e.theme.focusStyle)),Ic=E.Ay.div(gc||(gc=(0,z.A)(["\n  background-color: ",";\n  padding: 10px 14px;\n"])),(e=>e.theme.colorSurfaceMessageSecondary)),xc=E.Ay.div(pc||(pc=(0,z.A)(["\n  display: flex;\n"]))),Rc=E.Ay.div(mc||(mc=(0,z.A)(["\n  font-size: ",";\n  color: ",";\n  line-height: 20px;\n  flex-grow: 1;\n  font-weight: ",";\n"])),(e=>e.theme.mainFontSize),(e=>e.theme.colorTextEmphasized),we.v.mediumFontWeight),kc=E.Ay.img(fc||(fc=(0,z.A)(["\n  height: 20px;\n  width: 20px;\n  border-radius: 2px;\n  margin-left: ",";\n"])),we.v.gUnit),Oc=E.Ay.div(hc||(hc=(0,z.A)(["\n  font-size: ",";\n  color: ",";\n  line-height: 19px;\n\n  "," + & {\n    margin-top: ",";\n  }\n"])),we.v.smallFontSize,(e=>e.theme.colorTextSubdued),xc,we.v.gUnit),Nc=E.Ay.div(Ec||(Ec=(0,z.A)(["\n  display: flex;\n  padding: 10px 14px;\n  background-color: ",";\n"])),(e=>e.theme.colorSurfaceMessagePrimary)),Lc=E.Ay.div(vc||(vc=(0,z.A)(["\n  width: 100%;\n  flex-grow: 1;\n  word-break: break-word;\n  text-decoration: underline;\n  ","\n  font-size: ",";\n  color: ",";\n  font-weight: ",";\n"])),(e=>e.isRTL?(0,E.AH)(yc||(yc=(0,z.A)(["\n          padding-left: ",";\n        "])),we.v.space5):(0,E.AH)(Ac||(Ac=(0,z.A)(["\n          padding-right: ",";\n        "])),we.v.space5)),(e=>e.theme.mainFontSize),(e=>e.theme.colorTextDefault),we.v.mediumFontWeight),Mc=E.Ay.div(_c||(_c=(0,z.A)(["\n  display: flex;\n  align-items: flex-end;\n  ","\n  color: ",";\n"])),(e=>e.isRTL&&(0,E.AH)(Sc||(Sc=(0,z.A)(["\n      transform: scaleX(-1);\n    "])))),(e=>e.theme.colorIconDefault)),Dc=E.Ay.div(bc||(bc=(0,z.A)([""]))),Fc=E.Ay.div(Tc||(Tc=(0,z.A)(["\n  & ",", & "," {\n    ","\n  }\n\n  & "," {\n    ","\n  }\n"])),Mc,Lc,(e=>"color: ".concat(e.theme.campaignFontColor,";")),Nc,(e=>"background-color: ".concat(e.theme.campaignColor,";"))),Uc=e=>{let{message:t,isProactive:n=!1,onReady:a=(()=>null)}=e;const{setSheetContent:r,closeSheet:o}=(0,Qo.ZJ)(),{chatter:i}=(0,W.NC)(),c=i.token,{altText:l,linkText:u,title:d,linkIcon:p,linkDescription:f,url:h,newWindow:E,generateLinkPreview:y,isLinkLoading:A}=t,_=u||"Link",S=E?"_blank":"_top",[b,T]=(0,g.useState)(!1),C=(0,m.wA)(),{isRTL:w}=(0,F.Wz)(),{client:x}=(0,go.t)(),R=(0,W.mR)(),{embedState:k}=(0,s.useEmbedState)();(0,g.useEffect)((()=>{A&&C((0,v.getLinkResponse)(t))}),[C,A,t]),(0,g.useLayoutEffect)((()=>{A||(a(),t.isNew&&(0,I.hZ)("SCROLL_MESSAGE_LIST_TO_BOTTOM"))}),[A,a,t]);const O=(0,g.useCallback)((e=>{t.articleId&&(e.preventDefault(),r(g.createElement(uc,{url:t.url,handleClose:o}))),(0,oc.S6)(x,t,c),n&&k.latestCampaignKey&&(0,oc.p3)({eventKey:"ada:message_opened:".concat(k.latestCampaignKey),value:0,isVariable:!1,meta:{campaign_key:k.latestCampaignKey},customerQuery:{token:c}})}),[t,x,c,n,k.latestCampaignKey,r,o]),N=n?Fc:Dc,L=d?g.createElement(N,null,g.createElement(xc,null,g.createElement(Rc,{"data-testid":"AutoLinkTitle"},d),!b&&p&&g.createElement(kc,{src:p,alt:"preview icon",onError:()=>{T(!0),console.log("We were unable to load the following icon: ".concat(p))}}))):null,M=f?g.createElement(Oc,{"data-testid":"AutoLinkDesc"},f):null;return g.createElement(wc,{"data-testid":"AutoLink",href:h,target:S,tabIndex:0,"aria-label":l,rel:"noreferrer noopener",onClick:O},(!y||!A)&&g.createElement(N,null,(d||f)&&g.createElement(Ic,{"data-testid":"AutoLnkPreview"},L,M),g.createElement(Nc,null,g.createElement(Lc,{isRTL:w},u),g.createElement(Mc,{isRTL:w},g.createElement("span",{role:"img","aria-label":R("EXTERNAL_LINK")},g.createElement(Cc.A,{size:20})))),g.createElement(ss,{message:t,a11yMessage:_})),A&&g.createElement(ps,null))};var zc,Pc,Gc,Hc,Bc,Zc,Wc,Vc,Kc,jc,qc,Xc;const Qc=E.Ay.a(zc||(zc=(0,z.A)(["\n  display: block;\n  overflow: hidden;\n  text-decoration: none;\n  color: #0079cf;\n\n  ",";\n"])),(e=>e.theme.focusStyle)),Yc=E.Ay.div(Pc||(Pc=(0,z.A)(["\n  display: flex;\n  justify-content: flex-start;\n  margin-bottom: ",";\n"])),we.v.space0),Jc=E.Ay.div(Gc||(Gc=(0,z.A)(["\n  font-size: ",";\n  color: ",";\n  line-height: 20px;\n  font-weight: ",";\n"])),(e=>e.theme.mainFontSize),(e=>e.theme.colorTextEmphasized),we.v.mediumFontWeight),$c=E.Ay.img(Hc||(Hc=(0,z.A)(["\n  height: 20px;\n  width: 20px;\n  border-radius: 2px;\n  margin-left: ",";\n"])),we.v.space3),el=E.Ay.div(Bc||(Bc=(0,z.A)(["\n  font-size: ",";\n  color: ",";\n  line-height: 19px;\n  margin-bottom: ",";\n\n  "," + & {\n    margin-top: ",";\n  }\n"])),we.v.smallFontSize,(e=>e.theme.colorTextSubdued),we.v.space1,Yc,we.v.gUnit),tl=E.Ay.span(Zc||(Zc=(0,z.A)(["\n  display: inline;\n  word-break: break-word;\n  text-decoration: underline;\n  ","\n  font-size: ",";\n  font-weight: ",";\n"])),(e=>e.isRTL?(0,E.AH)(Wc||(Wc=(0,z.A)(["\n          padding-left: ",";\n        "])),we.v.space1):(0,E.AH)(Vc||(Vc=(0,z.A)(["\n          padding-right: ",";\n        "])),we.v.space1)),(e=>e.theme.mainFontSize),we.v.mediumFontWeight),nl=E.Ay.span(Kc||(Kc=(0,z.A)(["\n  display: inline-block;\n  position: relative;\n  top: 5px;\n  ",";\n  color: #0079cf;\n"])),(e=>e.isRTL&&(0,E.AH)(jc||(jc=(0,z.A)(["\n      transform: scaleX(-1);\n    "]))))),al=E.Ay.div(qc||(qc=(0,z.A)([""]))),rl=E.Ay.div(Xc||(Xc=(0,z.A)(["\n  & ",", & "," {\n    ","\n  }\n"])),nl,tl,(e=>"color: ".concat(e.theme.campaignFontColor,";"))),ol=e=>{let{message:t,isProactive:n=!1,onReady:a=(()=>null)}=e;const{setSheetContent:r,closeSheet:o}=(0,Qo.ZJ)(),{chatter:i}=(0,W.NC)(),c=i.token,{altText:l,linkText:u,title:d,linkIcon:p,linkDescription:f,url:h,newWindow:E,generateLinkPreview:y,isLinkLoading:A}=t,_=u||"Link",S=E?"_blank":"_top",[b,T]=(0,g.useState)(!1),C=(0,m.wA)(),{isRTL:w}=(0,F.Wz)(),{client:x}=(0,go.t)(),R=(0,W.mR)(),{embedState:k}=(0,s.useEmbedState)();(0,g.useEffect)((()=>{A&&C((0,v.getLinkResponse)(t))}),[C,A,t]),(0,g.useLayoutEffect)((()=>{A||(a(),t.isNew&&(0,I.hZ)("SCROLL_MESSAGE_LIST_TO_BOTTOM"))}),[A,a,t]);const O=(0,g.useCallback)((e=>{t.articleId&&(e.preventDefault(),r(g.createElement(uc,{url:t.url,handleClose:o}))),(0,oc.S6)(x,t,c),n&&k.latestCampaignKey&&(0,oc.p3)({eventKey:"ada:message_opened:".concat(k.latestCampaignKey),value:0,isVariable:!1,meta:{campaign_key:k.latestCampaignKey},customerQuery:{token:c}})}),[t,x,c,n,k.latestCampaignKey,r,o]),N=n?rl:al,L=d?g.createElement(N,null,g.createElement(Yc,null,g.createElement(Jc,{"data-testid":"AutoLinkTitle"},d),!b&&p&&g.createElement($c,{src:p,alt:"preview icon",onError:()=>{T(!0),console.log("We were unable to load the following icon: ".concat(p))}}))):null,M=f?g.createElement(el,{"data-testid":"AutoLinkDesc"},f):null;return g.createElement(Qc,{"data-testid":"AutoLink",href:h,target:S,tabIndex:0,"aria-label":l,rel:"noreferrer noopener",onClick:O},(!y||!A)&&g.createElement(N,null,(d||f)&&g.createElement("div",null,L,M),g.createElement("div",null,g.createElement(tl,{isRTL:w},u),g.createElement(nl,{isRTL:w},g.createElement("span",{role:"img","aria-label":R("EXTERNAL_LINK")},g.createElement(Cc.A,{size:20})))),g.createElement(ss,{message:t,a11yMessage:_})),A&&g.createElement(ps,null))};var il,sl,cl;const ll=E.Ay.button(il||(il=(0,z.A)(["\n  box-shadow: ",";\n  background-color: ",";\n  color: ",";\n  border-radius: ",";\n  border: none;\n  font-size: ",";\n  min-height: 38px;\n  ","\n  width: 100%;\n  cursor: pointer;\n  padding: "," ",";\n  ",";\n\n  & + & {\n    margin-top: ",";\n  }\n"])),we.v.boxShadow1,(e=>e.isGenerative?e.theme.colorSolid1:e.disabled?e.theme.colorSolid2:e.theme.colorSurfaceMessageSecondary),(e=>e.disabled?e.theme.colorTextDisabled:e.theme.themeOutlineColor),we.v.mainBorderRadius,(e=>e.theme.mainFontSize),(e=>e.disabled&&e.isGenerative&&(0,E.AH)(sl||(sl=(0,z.A)(["\n      opacity: 0.2;\n    "])))),we.v.space2,we.v.space4,(e=>e.theme.focusStyle),we.v.space1),ul=E.Ay.span(cl||(cl=(0,z.A)(["\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 2;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  line-height: 1.3;\n"]))),dl=ll,gl=e=>{const{text:t,onClick:n,disabled:a,title:r,isGenerative:o=!1}=e,i=a||!1;return g.createElement(dl,{isGenerative:o,onClick:n,disabled:i},g.createElement(ul,{title:r},t))};var pl,ml,fl,hl;gl.defaultProps={disabled:!1};const El=E.Ay.p(pl||(pl=(0,z.A)(["\n  margin: 0;\n  font-size: ",";\n  ",";\n"])),(e=>e.theme.mainFontSize),(e=>e.isGenerative&&"margin-bottom: 20px")),vl=E.Ay.div(ml||(ml=(0,z.A)(["\n  margin-top: ",";\n  ",";\n"])),we.v.space3,(e=>e.theme.focusStyle)),yl=E.Ay.div(fl||(fl=(0,z.A)([""]))),Al=(0,E.Ay)(ri)(hl||(hl=(0,z.A)(["\n  ",";\n"])),(e=>e.fullWidth&&"width: 256px")),_l=e=>{let{isGenerative:t=!1,prompt:n,buttons:a,hideOptions:r=!1,fullWidth:o=!1}=e;const i=(()=>{const e=a.reduce(((e,t)=>"".concat(e,", ").concat(t.text)),"");return"".concat(n," ").concat(e)})(),s=()=>a.length?g.createElement(vl,null,a.map((e=>g.createElement(gl,{isGenerative:t,onClick:e.onClick,text:e.text,"aria-label":e.ariaLabel,key:e.key,disabled:e.disabled,title:e.title})))):null;return t?g.createElement(g.Fragment,null,g.createElement(yl,null,g.createElement(El,{isGenerative:!0},n),!r&&s()),g.createElement(T.Iu,{"aria-live":"polite",message:i})):g.createElement(g.Fragment,null,g.createElement(yl,null,g.createElement(Al,{fullWidth:o},g.createElement(El,null,n),!r&&s())),g.createElement(T.Iu,{"aria-live":"polite",message:i}))};function Sl(e){const t=(0,W.mR)(),{embedState:n}=(0,s.useEmbedState)(),{notificationsPermission:r}=n,{message:o}=e,i={default:t("ENABLE_NOTIFICATIONS"),granted:t("NOTIFICATIONS_ENABLED"),denied:t("NOTIFICATIONS_DISABLED")}[r],c={key:i,text:i,onClick:()=>{"default"===r&&s.fc.postMessage(a.Wd)},ariaLabel:i,disabled:"default"!==r};return g.createElement(_l,{prompt:o.body,buttons:[c]})}var bl;function Tl(){return Tl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Tl.apply(this,arguments)}var Cl,wl,Il,xl,Rl,kl,Ol,Nl,Ll,Ml;const Dl=E.Ay.label(Cl||(Cl=(0,z.A)(["\n  position: relative;\n  display: flex;\n  width: 100%;\n  padding: ",";\n  align-items: center;\n  ",";\n"])),we.v.space2,(e=>e.labelOnLeft&&(0,E.AH)(wl||(wl=(0,z.A)(["\n      justify-content: space-between;\n    "]))))),Fl=E.Ay.span(Il||(Il=(0,z.A)(["\n  border-radius: ",";\n  border: ",";\n  height: ",";\n  width: ",";\n  background: ",";\n  cursor: pointer;\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: background 100ms ease-in-out, border-color 100ms ease-in-out;\n\n  ","\n"])),we.v.space2,(e=>e.checked?"none":"2px solid ".concat(e.theme.colorOutline3)),(e=>e.checked?"26px":"22px"),(e=>e.checked?"26px":"22px"),(e=>e.checked?e.theme.colorSolidInverted:"transparent"),(e=>e.disabled&&"\n    background: ".concat(e.theme.colorSolid2,";\n    border: 2px solid ").concat(e.checked?"none":e.theme.colorOutline2,";\n  "))),Ul=E.Ay.input.attrs({type:"checkbox"})(xl||(xl=(0,z.A)(["\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  left: 0;\n  top: 0;\n  opacity: 0;\n  z-index: 1;\n  cursor: pointer;\n  margin: 0;\n\n  &:not(:disabled):hover + "," {\n    border-color: ",";\n  }\n\n  &:focus-visible + ",':after {\n    content: "";\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    height: 26px;\n    width: 26px;\n    border-radius: ',";\n  }\n"])),Fl,(e=>e.theme.colorOutline4),Fl,we.v.mainBorderRadius),zl=(0,E.AH)(Rl||(Rl=(0,z.A)(["\n  display: block;\n  position: absolute;\n  top: 0;\n  left: -",";\n  right: -",";\n  bottom: 0;\n\n  ",";\n"])),we.v.space2,we.v.space2,(e=>(0,E.AH)(kl||(kl=(0,z.A)(["\n    border-radius: ",";\n    ",";\n  "])),e.theme.mainBorderRadius,e.theme.focusRingStyle))),Pl=E.Ay.span(Ol||(Ol=(0,z.A)(["\n  display: none;\n\n  ",":focus + "," + & {\n    ","\n    display: inline-block;\n  }\n\n  ",":focus-visible + "," + & {\n    ","\n    display: inline-block;\n  }\n\n  ",":focus:not(.focus-visible) + "," + & {\n    display: none;\n  }\n"])),Ul,Fl,zl,Ul,Fl,zl,Ul,Fl),Gl=E.Ay.span(Nl||(Nl=(0,z.A)(["\n  flex-basis: 88%;\n  margin-left: ",";\n  ",";\n  overflow: hidden;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 2;\n  text-overflow: ellipsis;\n  word-break: break-word;\n"])),we.v.space4,(e=>e.labelOnLeft&&(0,E.AH)(Ll||(Ll=(0,z.A)(["\n      order: -1;\n      margin: 0;\n    "]))))),Hl=Dl,Bl=(0,E.Ay)((e=>g.createElement("svg",Tl({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 12"},e),bl||(bl=g.createElement("path",{d:"M13.7 1.2c-.4-.4-1-.4-1.4 0L4.8 8.7 1.7 5.6c-.4-.4-1-.4-1.4 0-.4.4-.4 1 0 1.4l3.8 3.8c.2.2.4.3.7.3.3 0 .5-.1.7-.3l8.2-8.2c.4-.4.4-1 0-1.4Z"})))))(Ml||(Ml=(0,z.A)(["\n  fill: ",";\n  height: 11.6px;\n  width: 16px;\n"])),(e=>e.disabled?e.theme.colorIconDisabled:e.theme.colorIconInverted));function Zl(e){const{checked:t,disabled:n=!1,onChange:a,label:r,labelOnLeft:o=!1}=e;return g.createElement(Hl,{labelOnLeft:o},g.createElement(Ul,{disabled:n,checked:t,onChange:a}),g.createElement(Fl,{checked:t,disabled:n},t&&g.createElement(Bl,{disabled:n})),g.createElement(Pl,null),g.createElement(Gl,{labelOnLeft:o},r))}var Wl,Vl,Kl,jl,ql,Xl,Ql,Yl,Jl;const $l=E.Ay.span(Wl||(Wl=(0,z.A)(["\n  height: 26px;\n  width: 26px;\n  border-radius: 26px;\n  border: 2px solid ",";\n  transition: all 100ms ease-in-out;\n  position: relative;\n  box-sizing: border-box;\n  display: inline-block;\n"])),(e=>e.theme.colorOutline3)),eu=E.Ay.input.attrs({type:"radio"})(Vl||(Vl=(0,z.A)(["\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  opacity: 0;\n  left: 0;\n  z-index: 1;\n  cursor: pointer;\n  margin: 0;\n\n  &:hover:not(:checked):not(:disabled) + "," {\n    border-color: ",";\n  }\n\n  &:checked + "," {\n    border: 8px solid ",";\n  }\n\n  &:disabled + "," {\n    border-color: ",";\n    background-color: ",";\n  }\n\n  &:disabled:checked + "," {\n    border: 8px solid ",";\n  }\n\n  &:focus-visible + ",':after {\n    content: "";\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    height: 26px;\n    width: 26px;\n    border-radius: 26px;\n  }\n'])),$l,(e=>e.theme.colorOutline4),$l,(e=>e.theme.colorSolidInverted),$l,(e=>e.theme.colorOutline2),(e=>e.theme.colorSolid2),$l,(e=>e.theme.colorSolid4),$l),tu=(0,E.AH)(Kl||(Kl=(0,z.A)(["\n  display: block;\n  position: absolute;\n  top: 0;\n  left: -",";\n  right: -",";\n  bottom: 0;\n\n  ",";\n"])),we.v.space2,we.v.space2,(e=>(0,E.AH)(jl||(jl=(0,z.A)(["\n    border-radius: ",";\n    ",";\n  "])),e.theme.mainBorderRadius,e.theme.focusRingStyle))),nu=E.Ay.span(ql||(ql=(0,z.A)(["\n  display: none;\n\n  ",":focus + "," + & {\n    ","\n    display: inline-block;\n  }\n\n  ",":focus-visible + "," + & {\n    ","\n    display: inline-block;\n  }\n\n  ",":focus:not(.focus-visible) + "," + & {\n    display: none;\n  }\n"])),eu,$l,tu,eu,$l,tu,eu,$l),au=E.Ay.label(Xl||(Xl=(0,z.A)(["\n  display: flex;\n  width: 100%;\n  padding: "," 0;\n  position: relative;\n  align-items: center;\n  ",";\n"])),we.v.space2,(e=>e.labelOnLeft&&(0,E.AH)(Ql||(Ql=(0,z.A)(["\n      justify-content: space-between;\n    "]))))),ru=E.Ay.span(Yl||(Yl=(0,z.A)(["\n  flex-basis: 88%;\n  margin-left: ",";\n  cursor: pointer;\n  overflow: hidden;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 2;\n  text-overflow: ellipsis;\n  word-break: break-word;\n\n  ",";\n"])),we.v.space4,(e=>e.labelOnLeft&&(0,E.AH)(Jl||(Jl=(0,z.A)(["\n      margin-left: 0;\n      order: -1;\n    "]))))),ou=au,iu=e=>{const{name:t="",label:n,value:a="",checked:r,disabled:o=!1,onChange:i,labelOnLeft:s=!1,onFocus:c}=e;return g.createElement(ou,{labelOnLeft:s},g.createElement(eu,{name:t,disabled:o,value:a,checked:r,onChange:i,onFocus:c}),g.createElement($l,null),g.createElement(nu,null),g.createElement(ru,{labelOnLeft:s},n))};var su,cu,lu,uu,du,gu,pu;const mu=E.Ay.div(su||(su=(0,z.A)(["\n  color: ",";\n"])),(e=>e.theme.colorTextDefault)),fu=E.Ay.div(cu||(cu=(0,z.A)(["\n  padding: "," 0;\n  border-bottom: 1px solid ",";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: ",";\n  letter-spacing: 0.1px;\n  font-size: ",";\n"])),we.v.space5,(e=>e.theme.colorOutline1),we.v.heavyFontWeight,we.v.heading3FontSize),hu=E.Ay.ul(lu||(lu=(0,z.A)(["\n  margin: 0;\n  padding: 0 ",";\n  list-style: none;\n  font-size: ",";\n  overflow-y: scroll;\n"])),we.v.gUnit,(e=>e.theme.mainFontSize)),Eu=E.Ay.li(uu||(uu=(0,z.A)(["\n  margin-bottom: ",";\n  transition: background-color 333ms ease-in-out;\n  display: flex;\n  align-items: center;\n  padding: 0 ",";\n  border-radius: ",";\n\n  &:hover {\n    background-color: ",";\n  }\n\n  &:first-of-type {\n    margin-top: ",";\n  }\n"])),we.v.gUnitHalf,we.v.gUnit,we.v.mainBorderRadius,(e=>e.theme.colorOverlayHover),we.v.gUnitHalf),vu=E.Ay.p(du||(du=(0,z.A)(["\n  margin: 0;\n  padding: ",";\n  font-size: ",";\n"])),we.v.gUnitDouble,(e=>e.theme.mainFontSize)),yu=E.Ay.div(gu||(gu=(0,z.A)(["\n  display: flex;\n  flex-direction: column;\n  padding: ",";\n"])),we.v.gUnitDouble),Au=E.Ay.div(pu||(pu=(0,z.A)(["\n  margin-bottom: ",";\n"])),we.v.gUnit),_u=mu,Su=e=>{const{selectables:t,prompt:n,multiple:a=!1,onDoneClick:r,labelOnLeft:o=!1}=e,i=(0,W.mR)(),[s,c]=(0,g.useState)([]),{closeSheet:l}=(0,Qo.ZJ)(),u=e=>{if(s.includes(e)){const t=s.filter((t=>t!==e));c([...t])}else c(a?[...s,e]:[e])};return g.createElement(_u,{"aria-labelledby":"selectables-title"},g.createElement(fu,{id:"selectables-title"},i("MORE_OPTIONS")),g.createElement(vu,{id:"selectables-prompt"},n),g.createElement(hu,{role:a?"group":"radiogroup","aria-labelledby":"selectables-prompt"},t.map((e=>{const{id:t,text:n}=e,r=s.includes(t);return g.createElement(Eu,{key:t},a?g.createElement(Zl,{checked:r,label:n,labelOnLeft:o,onChange:()=>u(t)}):g.createElement(iu,{label:n,labelOnLeft:o,onChange:()=>u(t),checked:r}))}))),g.createElement(yu,null,g.createElement(ae.X,{onClick:()=>{r(s),l()},size:"large",disabled:0===s.length,buttonType:"primary",text:i("DONE")}),g.createElement(Au,null),g.createElement(ae.X,{onClick:l,buttonType:"link",size:"large",text:i("CANCEL")})))};function bu(e){const{message:t}=e,{dialogMessage:n,optionsExpired:a,optionsList:r}=t,{setSheetContent:o}=(0,Qo.ZJ)(),i=(0,W.mR)(),s=(0,m.wA)(),c=i("MORE_OPTIONS"),l=(0,g.useMemo)((()=>r.map((e=>({id:e.key,text:e.displayText})))),[r]),u=e=>({body:e.displayText,data:{...e,optionsProcessor:t.optionsProcessor},messageType:"selected_option",messageId:t.id}),d=()=>{s({type:"CAPTURE_OPTIONS_DISABLED",payload:{messageId:t.get("id")}}),(0,I.hZ)("FOCUS_MESSAGE_INPUT")},p=e=>{const t=e[0],n=r.find((e=>e.key===t));if(n){const e=u(n);s((0,Z.addMessageAction)(e)),d()}},f=()=>{o(g.createElement(Su,{selectables:l,prompt:n,onDoneClick:p,labelOnLeft:!0}))};return g.createElement(_l,{hideOptions:a,prompt:n,buttons:(()=>{let e=r.slice(0,3).map((e=>{const t=u(e);return{onClick:()=>{s((0,Z.addMessageAction)(t)),d()},text:e.displayText,key:e.displayText}}));return r.length>3&&(e=[...e,{onClick:f,text:"".concat(c," (").concat(r.length-3,")"),key:c}]),e})()})}var Tu=n(95774);const Cu="agent_arrival",wu="agent_depart",Iu="agent_file_request",xu="agent_file_request_cancelled",Ru="agent_file_request_failure",ku="agent_file_request_success",Ou="agent_snoozed",Nu="chatter_about_to_time_out_header",Lu="chatter_secret_sent",Mu="live_chat_disconnected",Du={AGENT_ARRIVAL:Cu,AGENT_DEPART:wu,AGENT_FILE_REQUEST:Iu,AGENT_FILE_REQUEST_CANCELLED:xu,AGENT_SNOOZED:Ou};function Fu(e,t){return{header:e&&e.toLocaleUpperCase()||null,body:t&&t.toLocaleUpperCase()||null}}const Uu={[Cu]:Fu("agent_connected",Cu),[wu]:Fu(null,wu),[Iu]:Fu(null,Iu),[xu]:Fu(null,xu),[Ru]:Fu(null,Ru),[ku]:Fu(null,ku),[Ou]:Fu(null,Ou),[Mu]:Fu(null,Mu),[Lu]:Fu(null,Lu),[Tu.n$]:Fu(Nu,"chatter_about_to_time_out_body"),[Tu.by]:Fu(Nu,"chatter_time_out_imminent_body"),[Tu.mk]:Fu(null,Tu.mk),[Tu.Tk]:Fu(null,Tu.Tk),[Tu.gA]:Fu(null,Tu.gA)},zu=(e,t,n)=>{var a;return(e=>!!Du[e])(t)?e(t,{agent_name:null===(a=n.agentInfo)||void 0===a?void 0:a.name}):e(t)};var Pu,Gu,Hu,Bu,Zu,Wu;const Vu=(0,E.i7)(Pu||(Pu=(0,z.A)(["\n  0% { \n    max-height: 10px;\n    opacity: 0;\n  }\n  100% { \n    max-height: 90px;\n    opacity: 1;\n  }\n"]))),Ku=E.Ay.div(Gu||(Gu=(0,z.A)(["\n  ","\n"])),(e=>(0,E.AH)(Hu||(Hu=(0,z.A)(["\n    color: ",";\n\n    ","\n  "])),e.theme.colorTextSubdued,e.animate&&(0,E.AH)(Bu||(Bu=(0,z.A)(["\n      animation: "," 300ms ease-in-out;\n    "])),Vu)))),ju=E.Ay.div(Zu||(Zu=(0,z.A)(["\n  margin-bottom: ",";\n"])),we.v.space2),qu=E.Ay.div(Wu||(Wu=(0,z.A)(["\n  font-weight: ",";\n  margin-bottom: ",";\n  color: ",";\n"])),we.v.heavyFontWeight,we.v.space1,(e=>e.theme.colorTextDefault));function Xu(e){let{isNew:t,body:n,header:a,agentInfo:r,showAgentAvatar:o}=e;return g.createElement(Ku,{animate:t},o&&g.createElement(ju,null,g.createElement(fo,{size:"default",agentInfo:r,"aria-hidden":!0})),a&&g.createElement(qu,null,a),n||"")}var Qu;const Yu=E.Ay.div(Qu||(Qu=(0,z.A)(["\n  margin-top: ",";\n"])),we.v.space5);function Ju(e){let{conversationId:t}=e;const{client:n}=(0,V.useClient)(),a=(0,K.LM)(t);return n.hasFeature(An.O.CSAT_V2)&&a&&a.csat&&!a.hasPostAgentCsatResult&&!a.hasAnswerFlowCsatResult?g.createElement(Yu,null,g.createElement(qo,{csatResult:a.csat})):null}var $u;const ed=E.Ay.div($u||($u=(0,z.A)(["\n  color: ",";\n  font-size: ",";\n  text-align: center;\n  margin-top: ",";\n  margin-bottom: ",";\n"])),(e=>e.theme.colorTextSubdued),(e=>e.theme.smallFontSize),we.v.space4,we.v.space4),td=e=>{let{message:t}=e;const n=(0,W.mR)(),a=t.event===Tu.SU||t.event===Tu.fG;let r=null;r=a?((e,t)=>e((t.event===Tu.SU?"you_ended_chat":"chat_timeout").toLocaleUpperCase()))(n,t):((e,t)=>{if(!t.event)return t.body;const n=Uu[t.event];let a=null==n?void 0:n.body;return a||(a=t.event.toLocaleUpperCase()),zu(e,a,t)})(n,t);const o=((e,t)=>{if(!t.event)return null;const n=Uu[t.event],a=null==n?void 0:n.header;return a?zu(e,a,t):null})(n,t),i=t.event===Tu.P3;return g.createElement(ed,{"data-testid":"PresenceMessageBlock","aria-live":"polite"},g.createElement(Xu,{isNew:t.isNew,body:r,header:o,agentInfo:t.agentInfo,showAgentAvatar:i}),a&&g.createElement(Ju,{conversationId:t.conversationId}))};var nd,ad,rd,od;const id=E.Ay.div(nd||(nd=(0,z.A)(["\n  ","\n"])),(e=>e.hidden&&"display: none;")),sd=E.Ay.div(ad||(ad=(0,z.A)(["\n  margin: 0 -",";\n  padding: "," "," 0;\n  display: flex;\n  flex-wrap: wrap;\n\n  ",";\n"])),we.v.space4,we.v.space1,we.v.space4,(e=>e.isCarouselLayout&&(0,E.AH)(rd||(rd=(0,z.A)(["\n      flex-wrap: nowrap;\n      overflow: auto;\n      padding-bottom: ",";\n      margin-bottom: -",';\n\n      // Needed for spacing on the right\n      &::after {\n        content: "";\n        flex: 0 0 1px;\n      }\n    '])),we.v.space5,we.v.space5))),cd=E.Ay.div(od||(od=(0,z.A)(["\n  margin: "," "," 0 0;\n"])),we.v.space2,we.v.space2);function ld(e){const{message:t}=e,n=(0,m.wA)(),a=(0,g.useRef)(null),r=(0,W.mR)(),{client:o}=(0,V.useClient)(),{pageState:i}=(0,U.Sw)(),{stateType:s}=i,c=o.isCarouselQuickRepliesButtonLayout,[l,u]=(0,g.useState)(!1),d=r("QUICK_REPLIES",{actions:t.quickReplies.map((e=>"".concat(e.label))).join(", ")});(0,g.useEffect)((()=>{var e;t.hasForcedQuickReplies&&(null===(e=a.current)||void 0===e||e.focus())}),[t.hasForcedQuickReplies]);const p=s===Z.CONVERSATION_STATE_CAPTURE;return g.createElement(id,{"data-testid":"MessageGroupQuickReplies",hidden:p,"aria-hidden":p},g.createElement(sd,{isCarouselLayout:c},t.quickReplies.map(((e,t)=>g.createElement(cd,{key:e.target,"data-testid":"AutoQuickReply"},g.createElement(nr.a,{ref:0===t?a:null,text:e.label,onClick:()=>(e=>{n((0,Z.addMessageAction)({body:e.label,data:e.target,buttonType:e.buttonType,messageType:"trigger"})),o.isMobile||(0,I.hZ)("FOCUS_MESSAGE_INPUT")})(e),wrapText:!c,disabled:l,setDisabled:u}))))),g.createElement(T.Iu,{message:d,"aria-live":"polite"}))}var ud,dd,gd;const pd=E.Ay.div(ud||(ud=(0,z.A)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),md=(0,E.i7)(dd||(dd=(0,z.A)(["\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n"]))),fd=E.Ay.div(gd||(gd=(0,z.A)(["\n  border: 2px solid ",";\n  border-bottom: 2px solid transparent;\n  border-radius: 50%;\n  width: 18px;\n  height: 18px;\n  animation: "," 1s linear infinite;\n"])),(e=>e.theme.themeFgColor),md);function hd(){return g.createElement(pd,null,g.createElement(fd,null))}var Ed,vd,yd,Ad,_d,Sd,bd,Td=n(8101);const Cd=E.Ay.div(Ed||(Ed=(0,z.A)(["\n  padding: "," 14px;\n  background-color: ",";\n  color: ",";\n  border-radius: ",";\n"])),we.v.space3,(e=>e.theme.themeColor),(e=>e.theme.themeFgColor),(e=>e.theme.messageBorderRadius)),wd=E.Ay.div(vd||(vd=(0,z.A)(["\n  text-align: center;\n  font-size: ",";\n  color: ",";\n\n  &:not(:last-child) {\n    padding-bottom: ",";\n  }\n"])),we.v.smallFontSize,(e=>e.theme.themeFgColor),we.v.space2),Id=E.Ay.div(yd||(yd=(0,z.A)(["\n  padding-bottom: ",";\n  font-size: ",";\n"])),we.v.gUnit,(e=>e.theme.mainFontSize)),xd=E.Ay.div(Ad||(Ad=(0,z.A)(["\n  text-align: center;\n  padding-bottom: ",";\n"])),we.v.gUnit),Rd=E.Ay.button(_d||(_d=(0,z.A)(["\n  box-shadow: ",";\n  background-color: ",";\n\n  ","\n  border-radius: ",";\n  border: none;\n  font-size: ",";\n  min-height: 38px;\n  width: 100%;\n  cursor: pointer;\n  padding: "," ",";\n  ",";\n"])),we.v.boxShadow1,we.c.colorWhite,(e=>(0,E.AH)(Sd||(Sd=(0,z.A)(["\n    color: ",";\n\n    ","\n  "])),e.theme.themeOutlineColor,e.disabled&&(0,E.AH)(bd||(bd=(0,z.A)(["\n      background-color: ",";\n      color: ",";\n    "])),e.theme.colorSolid2,e.theme.colorTextDisabled))),we.v.mainBorderRadius,(e=>e.theme.mainFontSize),we.v.space2,we.v.space4,(e=>e.theme.focusStyle)),kd=Cd;function Od(e){const{message:t}=e,{id:n,body:a}=t,r=t.getIn(["data","optionsProcessor"]),o=(0,W.mR)(),i=(0,m.wA)(),s=t.scheduleStatus,c="scheduled"===s,l="cancellation_pending"===s,u="booking_failed"===s,d="cancellation_failed"===s,p=!(c||l),f=c||d||l;return g.createElement(kd,null,g.createElement(Id,null,a),p?g.createElement(wd,null,(()=>{const e="STATUS_".concat(s.toUpperCase());return o(e)})()):null,l&&g.createElement(xd,null,g.createElement(hd,null)),f&&g.createElement(Rd,{onClick:()=>i(function(e,t){return(n,a)=>{const r={response_message_id:e,by:a().chatter.get("token")};let o;return n({type:Td.d8,messageId:e}),t!==Q.HJ?(n({type:Td.WD,messageId:e}),null):(o="/message/scheduled_callback/cancel/",$.FH.post("/message/scheduled_callback/cancel/",r).then((()=>n({type:"CANCEL_CALLBACK_SUCCESS",messageId:e})),(()=>n({type:Td.WD,messageId:e}))))}}(n,r)),disabled:l},o(d||u?"RETRY_BUTTON":"CANCEL_BUTTON")),g.createElement(ss,{message:t,a11yMessage:a||""}))}var Nd,Ld,Md,Dd,Fd,Ud,zd;const Pd=E.Ay.div(Nd||(Nd=(0,z.A)(["\n  color: ",";\n"])),(e=>e.theme.colorTextDefault)),Gd=E.Ay.ul(Ld||(Ld=(0,z.A)(["\n  display: flex;\n  flex-direction: column;\n  padding: 0 ",";\n  margin-bottom: 0;\n  list-style: none;\n  font-size: ",";\n  overflow-x: hidden;\n  max-height: ","px;\n  ","\n"])),we.v.space2,(e=>e.theme.mainFontSize),(e=>e.maxHeight),(e=>e.includePaddingForFocusRing&&"padding: ".concat(we.v.space2))),Hd=E.Ay.li(Md||(Md=(0,z.A)(["\n  display: flex;\n  justify-content: left;\n  align-items: center;\n  width: 100%;\n  transition: background-color 333ms ease-in-out;\n  height: ",";\n  min-height: ",";\n  position: relative;\n  border-radius: ",";\n\n  &:hover {\n    background-color: ",';\n    &:after {\n      height: 0;\n      transition: height 333ms ease-in-out;\n    }\n  }\n\n  &:after {\n    content: "";\n    position: absolute;\n    bottom: 0;\n    width: calc(100% - ',");\n    transform: translateX(-50%);\n    left: 50%;\n    height: 1px;\n    background: ",";\n  }\n"])),we.v.space8,we.v.space8,(e=>e.theme.mainBorderRadius),(e=>e.theme.colorOverlayHover),we.v.space5,(e=>e.theme.colorOverlayHover)),Bd=E.Ay.button(Dd||(Dd=(0,z.A)(["\n  border: none;\n  background: none;\n  width: 100%;\n  height: 100%;\n  text-align: left;\n  font-size: ",";\n  line-height: 1.25;\n  border-radius: ",";\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  color: ",";\n  ",";\n"])),(e=>e.theme.mainFontSize),(e=>e.theme.mainBorderRadius),(e=>e.theme.colorTextDefault),(e=>e.theme.focusStyle)),Zd=E.Ay.span(Fd||(Fd=(0,z.A)(["\n  width: 100%;\n  overflow: hidden;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 2;\n  text-overflow: ellipsis;\n  word-break: break-word;\n"]))),Wd=E.Ay.div(Ud||(Ud=(0,z.A)(["\n  display: flex;\n  flex-direction: column;\n  padding: ",";\n"])),we.v.space4),Vd=E.Ay.div(zd||(zd=(0,z.A)(["\n  background: ",";\n  height: 1px;\n  margin: 0 ",";\n"])),(e=>e.theme.colorOverlayHover),we.v.space2),Kd=e=>{const{selectables:t,multiple:n=!1,onDoneClick:a,labelOnLeft:r=!1,isOptional:o,showExitListOption:i,cancelCaptureResponseId:s,exitLobLabel:c}=e,l=(0,W.mR)(),[u,d]=(0,g.useState)([]),{closeDockedSheet:p}=k(),f=(0,m.wA)(),{pageState:h}=(0,U.Sw)(),{keyboardNavigation:E}=h,v=.4*document.documentElement.clientHeight,[y,A]=(0,g.useState)(48*Math.floor(v/48)+24),_=48*t.length>y;(0,g.useEffect)((()=>{A(48*Math.floor(v/48)+24)}),[v]);const S=e=>{if(u.includes(e)){const t=u.filter((t=>t!==e));d([...t])}else n?d([...u,e]):(a([e]),p())};return g.createElement(Pd,null,g.createElement(Gd,{maxHeight:y,role:n?"group":"radiogroup","aria-labelledby":"list-option-list",includePaddingForFocusRing:E},t.map(((e,t)=>{const{id:a,text:o}=e,i=u.includes(a),s="".concat(t,"-").concat(a);return g.createElement(Hd,{key:s},n?g.createElement(Zl,{checked:i,label:o,labelOnLeft:r,onChange:()=>S(a)}):g.createElement(Bd,{onClick:()=>S(a)},g.createElement(Zd,null,o)))}))),_&&g.createElement(Vd,null),g.createElement(Wd,null,g.createElement(g.Fragment,null,n&&g.createElement(ae.X,{onClick:()=>{a(u),p(),d([])},size:"large",disabled:0===u.length,buttonType:"primary",text:l("CONFIRM")}),o&&g.createElement(ae.X,{onClick:()=>{p(),f((0,Z.addMessageAction)({body:l("SKIP_CAPTURE"),data:s,buttonType:"suggestion",messageType:"trigger"}))},buttonType:"link",size:"large",text:l("SKIP_CAPTURE")}),i&&g.createElement(ae.X,{onClick:()=>{p(),f((0,Z.addMessageAction)({body:c,data:s,buttonType:"suggestion",messageType:"trigger"}))},buttonType:"link",size:"large",text:c}))))};var jd,qd;(0,n(97132).Mz)(He.getMessages,(e=>e.filter((e=>e.isRenderable)).map((e=>e.id))));const Xd=E.Ay.p(jd||(jd=(0,z.A)(["\n  margin: 0;\n"]))),Qd=(0,E.Ay)(ri)(qd||(qd=(0,z.A)(["\n  ",";\n"])),(e=>e.fullWidth&&"width: 256px")),Yd=e=>{const{activeConversation:t}=(0,K.VC)(),{client:n}=(0,V.useClient)(),{message:a}=e,r=(0,m.wA)(),o=(0,m.d4)((t=>((e,t)=>{const{message:n}=t,a=n.id,r=n.type,o=(0,He.getMessages)(e).filter((e=>e.type===r)).map((e=>e.id));return o.indexOf(a)===o.size-1})(t,e))),{setDockedSheetContent:i}=k(),{pageState:s}=(0,U.Sw)(),{stateType:c,stateData:l}=s,u=!!c&&["list_selection","capture_guess"].includes(c),d=(0,g.useRef)(u),p=a.get("id"),{prompt:f,selectables:h,multiple:E,isExpired:v}=a,{allMessages:y}=(0,He.useAllMessages)(),A=e=>{r(function(e,t,n){return a=>{const r=a(((e,t,n)=>(a,r)=>{const{client:o}=r();let i,s=n;return o.hasFeature(An.O.WFLW_ADVANCED_LOB)?(s=n.map((e=>"".concat(t.indexOf(e)))),i={selected:s,selected_text:n}):i={selected:s},{body:n.join("; "),data:i,messageType:"list_selection",messageId:e}})(e,t,n));a((0,Z.addMessageAction)(r)),a((e=>t=>{t({type:"SET_SELECTABLES_EXPIRED",payload:{messageId:e}})})(e))}}(p,h,e)),n.isMobile||(0,I.hZ)("FOCUS_MESSAGE_INPUT")};return(0,g.useEffect)((()=>{const e=h.map((e=>({text:e,id:e})));if(!v&&u&&o){const t=l.list_selection,{cancel_capture_response_id:n,is_optional:a,cancel_capture_label:r,show_exit_list_option_block:o}=t;i(g.createElement(Kd,{selectables:e,onDoneClick:A,multiple:E,labelOnLeft:!0,cancelCaptureResponseId:n,isOptional:a,showExitListOption:o,exitLobLabel:r}))}}),[v,E,f,h,i,u,o]),(0,g.useEffect)((()=>{const e=y.last();("text"===(null==e?void 0:e.type)||!t||!u&&d.current)&&r({type:"SET_SELECTABLES_EXPIRED",payload:{messageId:p}}),d.current=u}),[r,u,p,t,y]),g.createElement(Qd,{fullWidth:E&&!v},g.createElement(Xd,null,f))},Jd=e=>{const{message:t,isGenerative:n}=e,{authLink:a,authLinkExpired:r,authButtonLabel:o,messageLead:i}=t,s=(0,W.mR)();return g.createElement(_l,{isGenerative:n,prompt:i,hideOptions:r,fullWidth:!0,buttons:[{key:o||s("SIGN_IN"),text:o||s("SIGN_IN"),onClick:()=>{r||window.open(a)},ariaLabel:s("SIGN_IN_NEW_WINDOW")}]})};var $d,eg,tg,ng,ag,rg,og=n(42838),ig=n.n(og),sg=n(43371),cg=n.n(sg);const lg=E.Ay.div($d||($d=(0,z.A)([""]))),ug=E.Ay.div(eg||(eg=(0,z.A)(["\n  font-size: 50px;\n  line-height: 1.3;\n"]))),dg=E.Ay.div(tg||(tg=(0,z.A)(["\n  display: flex;\n  ","\n"])),(e=>e.hasError&&(0,E.AH)(ng||(ng=(0,z.A)(["\n      justify-content: flex-end;\n      cursor: pointer;\n      padding-top: 20px;\n    "]))))),gg=E.Ay.div(ag||(ag=(0,z.A)(["\n  align-self: flex-end;\n  color: ",";\n  margin-left: ",";\n"])),(e=>e.theme.colorTextError),we.v.gUnitHalf),pg=E.Ay.div(rg||(rg=(0,z.A)(["\n  font-size: ",";\n  color: ",";\n  margin-top: ",";\n"])),we.v.smallFontSize,(e=>e.theme.colorTextError),we.v.gUnitHalf);function mg(e){let{message:t}=e;const n=(0,He.useRenderableMessages)(),{pageState:a}=(0,U.Sw)(),{client:r}=(0,V.useClient)(),{inLiveChat:o,isMessageFailed:i}=function(){const{zendeskMessaging:e,inLiveChat:t}=(0,m.d4)((e=>e.liveAgent)),n=Object.keys(e.failedMessageErrors);return{inLiveChat:t,isMessageFailed:e=>!!n.find((t=>e.id===t||e.tempMessageUuid===t))}}(),s=(0,W.mR)(),c=(0,m.wA)(),l=n.last()===t,u="user"===t.source,d=a.lastMessageHasError||r.hasFeature(An.O.ADA_GLASS_ZENDESK_MESSAGING)&&o&&i(t),p=u&&l&&d;if("string"!=typeof t.body||""===t.body)return null;let f;return f=(()=>{const e=(t.body||"").match("^(".concat(cg()().toString().replace(/\/g$/,""),"|\\s)+$"))||[];return Boolean(e.length&&e[0].length<=4)})()?g.createElement(ug,null,t.body):g.createElement(ri,{"data-testid":"AutoMessage",user:"user"===t.source,dangerouslySetInnerHTML:{__html:ig().sanitize(t.body,{ADD_ATTR:["target"]})||""}}),g.createElement(lg,{onClick:p?()=>c((0,v.retryMessageAction)(t)):void 0},g.createElement(dg,{hasError:p},f,p&&g.createElement(gg,{"aria-hidden":"true"},g.createElement(Pn.SyncErrorIcon,{size:20}))),p&&g.createElement(pg,{role:"alert"},s("MESSAGE_DELIVERY_FAIL")),g.createElement(ss,{message:t,a11yMessage:t.body||""}))}var fg,hg,Eg,vg,yg,Ag,_g,Sg=n(9246);const bg=(0,E.i7)(fg||(fg=(0,z.A)(["\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n"]))),Tg=E.Ay.div(hg||(hg=(0,z.A)([""]))),Cg=(E.Ay.div(Eg||(Eg=(0,z.A)(["\n  font-size: 50px;\n  line-height: 1.3;\n"]))),E.Ay.div(vg||(vg=(0,z.A)(["\n  display: flex;\n"])))),wg=(E.Ay.div(yg||(yg=(0,z.A)(["\n  align-self: flex-end;\n  color: ",";\n  margin-left: ",";\n"])),(e=>e.theme.colorTextError),we.v.gUnitHalf),E.Ay.div(Ag||(Ag=(0,z.A)(["\n  font-size: ",";\n  color: ",";\n  margin-top: ",";\n"])),we.v.smallFontSize,(e=>e.theme.colorTextError),we.v.gUnitHalf),E.Ay.div(_g||(_g=(0,z.A)(["\n  white-space: pre-wrap;\n  color: ",";\n  line-height: 1.25;\n  font-size: ",";\n  .word {\n    opacity: 0;\n    animation: "," 0.15s forwards;\n  }\n  .line-break {\n    display: block;\n    width: 100%;\n    height: 0.1rem;\n  }\n  .double-line-break {\n    display: block;\n    width: 100%;\n    height: 1rem;\n  }\n  a {\n    color: #0079cf;\n    display: inline-block;\n    white-space: normal;\n  }\n  ul,\n  ol {\n    white-space: normal;\n    padding: 0;\n    margin: 0;\n    padding-left: 15px;\n    li {\n      line-height: 1.2rem;\n      padding-top: 6px;\n      padding-bottom: 6px;\n      &:last-child {\n        padding-bottom: 0;\n      }\n    }\n  }\n"])),(e=>e.theme.colorTextDefault),(e=>e.theme.mainFontSize),bg));function Ig(e){let{message:t}=e;const n=(0,g.useRef)(null);return(0,g.useEffect)((()=>{const e=ig().sanitize(t.body||"",{ADD_ATTR:["target"]});(0,Sg.SB)(e,n,t.shouldAnimate)}),[t.body,t.shouldAnimate]),"string"!=typeof t.body||""===t.body?null:g.createElement(Tg,null,g.createElement(Cg,null,g.createElement(wg,{ref:n})),g.createElement(ss,{message:t,a11yMessage:t.body||""}))}var xg=n(13554);const Rg=/^.*(vimeo\.com\/)((channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/))?([0-9]+)/,kg=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/;var Og,Ng,Lg,Mg,Dg,Fg;const Ug=E.Ay.div(Og||(Og=(0,z.A)(["\n  max-width: 256px;\n  border-radius: ",";\n  position: relative;\n  border: 1px solid rgba(0, 0, 0, 0.02);\n  overflow: hidden\n};\n"])),(e=>e.theme.messageBorderRadius)),zg=E.Ay.img(Ng||(Ng=(0,z.A)(["\n  position: relative;\n  width: 100%;\n  display: block;\n  border-radius: ",";\n  ",";\n"])),(e=>e.theme.messageBorderRadius),(e=>e.isLoading&&(0,E.AH)(Lg||(Lg=(0,z.A)(["\n      display: none;\n    "]))))),Pg=(E.Ay.button(Mg||(Mg=(0,z.A)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n  border-radius: ",";\n  background-color: rgba(0, 0, 0, 0.05);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: 0;\n  padding: 0;\n  border: none;\n  color: ",";\n  z-index: 1;\n  ",";\n  cursor: pointer;\n\n  & > svg {\n    height: 48px;\n    width: 48px;\n    fill: ",";\n  }\n"])),(e=>e.theme.messageBorderRadius),we.c.colorWhite,(e=>e.theme.focusStyle),we.c.colorWhite),E.Ay.video(Dg||(Dg=(0,z.A)(["\n  width: 100%;\n  display: block;\n  border-radius: ",";\n"])),(e=>e.theme.messageBorderRadius)),E.Ay.div(Fg||(Fg=(0,z.A)(["\n  width: 100%;\n  display: block;\n  overflow: hidden;\n  border-radius: ",";\n"])),(e=>e.theme.messageBorderRadius))),Gg=Ug,Hg=e=>{const{message:t,onReady:n=(()=>null),onPlayVideo:a=(()=>null)}=e,{vidUrl:r,altText:o}=t,i=(0,W.mR)(),{type:s,image:c,src:l}=(e=>{const[t,n]=(0,g.useState)(),[a,r]=(0,g.useState)("");return(0,g.useEffect)((()=>{!function(e,t){const n=e.match(Rg),a=e.match(kg),r={id:null,type:null,image:null,startTime:null};if(a){r.id=a[7],r.type="youtube",r.image="https://img.youtube.com/vi/".concat(r.id,"/hqdefault.jpg");const n=e.match(/\?.*$/),o=n?n[0]:"",i=new URLSearchParams(o);return r.startTime=i.get("t")||i.get("start"),t(r),Promise.resolve(r)}n?(r.id=n[5],r.type="vimeo",$.TL.get("?url=https%3A//vimeo.com/".concat(r.id)).then((e=>(r.image=e.data.thumbnail_url,t(r),r))).catch((e=>((0,J.to)(e),window.console.error("Cannot connect to Vimeo API"),t(r),r)))):(r.type="file",t(r),Promise.resolve(r))}(e,(e=>n({...e})))}),[e]),(0,g.useEffect)((()=>{if(t){const{type:n,id:a,startTime:o}=t;r(((e,t,n)=>{const a="vimeo"===e;if("youtube"===e){const e=n?"&t=".concat(n):"";return"https://www.youtube-nocookie.com/embed/".concat(t,"?rel=0&player=html5&showinfo=0&autohide=1&autoplay=1&disablekb=1&cc_load_policy=1").concat(e)}return a?"https://player.vimeo.com/video/".concat(t,"?autoplay=1&title=0&byline=0&portrait=0"):null})(n,a,o)||e)}}),[t,e]),{...t,src:a}})(r),u=(0,m.d4)((e=>e.client.get("name"))),d=(0,g.useMemo)((()=>"file"!==s),[s]),[p,f]=(0,g.useState)(d),[h,E]=(0,g.useState)(!1),[v,y]=(0,g.useState)(!1),[A,_]=(0,g.useState)(!1),S=d?i("VIDEO_FROM_CLIENT_NAME",{client_name:u}):o;return(0,g.useLayoutEffect)((()=>{h&&(0,I.hZ)("SCROLL_MESSAGE_LIST_TO_BOTTOM"),v&&(n(),t.isNew&&(0,I.hZ)("SCROLL_MESSAGE_LIST_TO_BOTTOM"))}),[h,v,n,t]),h?g.createElement(ls,null):g.createElement(Gg,null,g.createElement(Pg,null,p&&g.createElement(zg,{src:c,alt:S,isLoading:p,"aria-hidden":p}),g.createElement(xg.A,{controls:!0,playsinline:!0,url:"".concat(l,"#t=0.001"),title:S,onError:()=>{A?(E(!0),_(!1)):_(!0)},onReady:()=>{y(!0),f(!1),E(!1),_(!1)},onStart:a,width:"100%",height:"100%",config:{file:{forceVideo:!0}}})),g.createElement(ss,{message:t,a11yMessage:S}))},Bg=e=>{const{message:t}=e,{windowTitle:n,windowButtonLabel:a}=t,{chatter:r}=(0,W.NC)();(0,g.useEffect)((()=>{(0,I.hZ)("FOCUS_MESSAGE_INPUT")}),[]);const o=[{key:a,onClick:()=>{window.open(t.windowUrl,"_blank","height=".concat(t.windowHeight,",width=").concat(t.windowWidth)),$.FH.post("/events/",{by:r.token,type:t.isHandoff?"handoff":"link_click",subtype:"web_window",message_id:t.id,url:t.windowUrl}).catch((e=>{if((0,J.JE)(e))throw e;throw new J.eZ('POST request failed for "/events/". Reason: "'.concat(e,'"'))}))},text:a}];return g.createElement(_l,{prompt:n,buttons:o,fullWidth:!0})};var Zg,Wg,Vg,Kg,jg,qg;const Xg=E.Ay.div(Zg||(Zg=(0,z.A)([""]))),Qg=E.Ay.div(Wg||(Wg=(0,z.A)(["\n  border-bottom: 1px solid rgba(0, 0, 0, 0.06);\n"]))),Yg=E.Ay.h3(Vg||(Vg=(0,z.A)(["\n  font-weight: 600;\n  font-size: 17px;\n  line-height: 22px;\n  text-align: center;\n  letter-spacing: 0.1px;\n  color: ",";\n"])),(e=>e.theme.colorTextEmphasized)),Jg=E.Ay.div(Kg||(Kg=(0,z.A)(["\n  display: flex;\n"]))),$g=(E.Ay.iframe(jg||(jg=(0,z.A)(["\n  display: block;\n  margin: auto;\n  border: none;\n  height: 400px;\n  width: 100%;\n  ",";\n"])),(e=>e.theme.focusStyle)),E.Ay.div(qg||(qg=(0,z.A)(["\n  margin-bottom: 16px;\n  padding: 3px 0;\n"]))));function ep(e){const{closeSheet:t,message:n}=e,{widgetName:a}=n,r=(0,W.mR)(),[o,i]=(0,g.useState)(r("CANCEL")),[s,c]=(0,g.useState)((()=>t)),l=(0,g.useCallback)((()=>{s()}),[s]);return g.createElement(Xg,null,g.createElement(Qg,null,g.createElement(Yg,null,a)),g.createElement(Jg,null,g.createElement(Js,{message:n,closeSheet:t,setCancelButtonText:i,setCancelButtonOnClick:c})),g.createElement($g,null,g.createElement(ae.X,{text:o,onClick:l,buttonType:"link",testid:"WidgetCloseButton",block:!0})))}function tp(e){const{message:t}=e,{setSheetContent:n,closeSheet:a}=(0,Qo.ZJ)();return g.createElement(_l,{prompt:t.linkText.length>60?"".concat(t.linkText.substring(0,60),"..."):t.linkText,fullWidth:!0,buttons:[{key:t.linkSubtext,text:t.linkSubtext.length>20?"".concat(t.linkSubtext.substring(0,20),"..."):t.linkSubtext,ariaLabel:t.linkSubtext,title:t.linkSubtext.length>20?t.linkSubtext:"",onClick:()=>{n(g.createElement(ep,{message:t,closeSheet:a}))}}]})}var np,ap,rp,op,ip,sp,cp,lp;const up=E.Ay.div(np||(np=(0,z.A)(["\n  display: flex;\n  border-radius: 28px;\n  background: ",";\n  box-shadow: 0 4px 14px rgba(0, 0, 0, 0.06);\n  transform: translate(-4px, 12px);\n  width: 78px;\n  transition: all ","ms ease-out;\n  position: relative;\n\n  ","\n"])),(e=>e.theme.colorSurfaceMessageSecondary),180,(e=>e.selected&&(0,E.AH)(ap||(ap=(0,z.A)(["\n      width: 32px;\n      transform: translate(0, 0);\n      background: transparent;\n    "]))))),dp=E.Ay.button(rp||(rp=(0,z.A)(["\n  background: none;\n  border: none;\n  padding: 6px;\n  border-radius: 50%;\n  font-size: 0;\n  cursor: pointer;\n  color: ",";\n  transition: background-color ","ms ease;\n  margin: 2px;\n\n  ",";\n\n  ","\n\n  ","\n  \n  ",";\n"])),(e=>e.theme.colorIconDefault),200,(e=>e.selected&&(0,E.AH)(op||(op=(0,z.A)(["\n      color: ",";\n      background-color: ",";\n      margin: 0;\n      cursor: default;\n      pointer-events: none;\n    "])),e.theme.themeFgColor,e.theme.themeColor)),(e=>!e.selected&&(0,E.AH)(ip||(ip=(0,z.A)(["\n      &:hover {\n        background: ",";\n      }\n    "])),e.theme.colorOverlayHover)),(e=>{let{reaction:t}=e;return 1===t?(0,E.AH)(sp||(sp=(0,z.A)(["\n          margin-right: auto;\n        "]))):(0,E.AH)(cp||(cp=(0,z.A)(["\n          margin-left: auto;\n        "])))}),(e=>e.theme.focusStyle)),gp=E.Ay.div(lp||(lp=(0,z.A)(["\n  position: absolute;\n  color: ",";\n  font-size: ",";\n  width: max-content;\n  max-width: 200px;\n  top: calc(50% - 6px);\n  line-height: 1.3;\n  right: 100%;\n  padding: 0 ",";\n"])),(e=>e.theme.colorTextSubdued),(e=>e.theme.xSmallFontSize),we.v.space2);function pp(e){let{message:t}=e;const n=(0,m.wA)(),{client:a}=(0,V.useClient)(),{pageState:r}=(0,U.Sw)(),o=(0,W.mR)(),i=(0,W.tn)(),[s,c]=(0,g.useState)(0!==t.review?t.review:null),[l,u]=(0,g.useState)(!0),d=r.inState&&!s,p=(0,g.useRef)();if((0,g.useEffect)((()=>{if(p.current){const e=p.current.getBoundingClientRect().left>12,t=null===s;u(e&&t)}}),[s,i]),d)return null;const f=e=>{c(e),a.isMobile||(0,I.hZ)("FOCUS_MESSAGE_INPUT"),setTimeout((()=>{n((0,v.addMessageReactionAction)(t.conversationId,t.id,e))}),200)};return g.createElement(up,{selected:Boolean(s)},g.createElement(gp,{ref:p},l&&o("WAS_THIS_HELPFUL?")),-1!==s&&g.createElement(dp,{title:o("MARK_AS_HELPFUL"),selected:1===s,disabled:1===s,onClick:()=>f(1),onMouseDown:e=>e.preventDefault(),reaction:1},g.createElement(Pn.ThumbsUpIcon,{size:20})),1!==s&&g.createElement(dp,{title:o("MARK_AS_UNHELPFUL"),selected:-1===s,disabled:-1===s,onClick:()=>f(-1),onMouseDown:e=>e.preventDefault(),reaction:-1},g.createElement(Pn.ThumbsDownIcon,{size:20})))}var mp,fp,hp,Ep,vp,yp,Ap,_p,Sp,bp,Tp;const Cp=(0,E.i7)(mp||(mp=(0,z.A)(["\n  from {\n    opacity: 0;\n    transform: translateY(8px);\n  }\n\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n"]))),wp=E.Ay.div(fp||(fp=(0,z.A)(["\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  transform: translate(50%, 50%);\n"]))),Ip=E.Ay.div(hp||(hp=(0,z.A)([""]))),xp=E.Ay.div(Ep||(Ep=(0,z.A)(["\n  color: ",";\n  font-size: ",";\n  border-radius: 4px;\n  line-height: 15px;\n  visibility: hidden;\n  position: absolute;\n  top: 50%;\n  white-space: nowrap;\n  transition: all 200ms ease;\n  opacity: 0;\n  z-index: 1;\n  transform: translate(8px, -50%);\n\n  left: 100%;\n  right: auto;\n\n  ","\n"])),(e=>e.theme.colorTextSubdued),we.v.xSmallFontSize,(e=>"left"===e.position&&(0,E.AH)(vp||(vp=(0,z.A)(["\n      transform: translate(-8px, -50%);\n      left: auto;\n      right: 100%;\n    "]))))),Rp=E.Ay.div(yp||(yp=(0,z.A)(["\n  ",";\n  ","\n\n  position: relative;\n  transform-origin: bottom left;\n\n  ","\n\n  ",";\n\n  ","\n"])),(e=>e.disabled&&"pointer-events: none; opacity: 0.7;"),(e=>e.isRTL&&"direction: rtl;"),(e=>e.user&&(0,E.AH)(Ap||(Ap=(0,z.A)(["\n      transform-origin: bottom right;\n    "])))),(e=>e.shouldAnimate&&(0,E.AH)(_p||(_p=(0,z.A)(["\n      animation: "," 200ms ease;\n    "])),Cp)),(e=>(0,E.AH)(Sp||(Sp=(0,z.A)(["\n    &:hover "," {\n      "," {\n        visibility: visible;\n        opacity: 1;\n\n        ","\n      }\n    }\n  "])),e.showTimestampOnFocus?", #MESSAGE_LIST_LOG:focus-within &":"",xp,e.user?(0,E.AH)(bp||(bp=(0,z.A)(["\n              transform: translate(-",", -50%);\n            "])),we.v.space3):(0,E.AH)(Tp||(Tp=(0,z.A)(["\n              transform: translate(",", -50%);\n            "])),we.v.space3)))),kp=new Set(["text","picture","video","trigger","link","surfaceable_list_selection","options_message","selected_option","list_selection","downloadable"]);function Op(e){const{messageId:t}=e,n=(0,He.useMessage)(t),{isRTL:a}=(0,F.Wz)(),{pageState:r}=(0,U.Sw)(),{client:o,isGenerative:i}=(0,V.useClient)(),s=o.hasFeature(V.Features.WS_CHAT_UI_IMPROVEMENTS);if(!n)return null;const c="user"===n.source,l=kp.has(n.type),u="CHAT_OUTAGE_MID_CONVERSATION"===r.errorType,d=!["link","picture","video","downloadable"].includes(n.type);return g.createElement(Rp,{shouldAnimate:n.isNew,user:c,disabled:u&&d,showTimestampOnFocus:r.keyboardNavigation,isRTL:a,"data-testid":"MessageGroupMessage"},g.createElement(Ip,null,n instanceof He.UserMessage&&"selected_option"===n.type?g.createElement(Od,{message:n}):n instanceof He.TextMessage&&!c&&i&&s?g.createElement(Ig,{message:n}):n instanceof He.TextMessage||n instanceof He.UserMessage||n instanceof He.ListSelectionMessage?g.createElement(mg,{message:n}):n instanceof He.QuickRepliesMessage?g.createElement(ld,{message:n}):n instanceof He.PresenceMessage?g.createElement(td,{message:n}):n instanceof He.PictureMessage?g.createElement(Rs,{message:n}):n instanceof He.SelectablesMessage?g.createElement(Yd,{message:n}):n instanceof He.LinkMessage?i&&s?g.createElement(ol,{message:n}):g.createElement(Uc,{message:n}):n instanceof He.CsatMessage?g.createElement(ei,{message:n}):n instanceof He.SeamlessOAuthMessage?g.createElement(Js,{message:n}):n instanceof He.WidgetMessage?(p=n).inlineInChat||(null===(m=p.widgetName)||void 0===m?void 0:m.toLowerCase().includes("carousel"))?g.createElement(Js,{message:n}):g.createElement(tp,{message:n}):n instanceof He.SignInMessage?g.createElement(Jd,{message:n,isGenerative:i&&s}):n instanceof He.OptionsMessageRecord?g.createElement(bu,{message:n}):n instanceof He.DownloadableMessage?g.createElement(Zs,{message:n}):n instanceof He.SurveyMessage?g.createElement(rs,{message:n}):n instanceof He.NotificationsPermissionMessage?g.createElement(Sl,{message:n}):"video"===n.type?g.createElement(Hg,{message:n}):"web_window"===n.type?g.createElement(Bg,{message:n}):g.createElement("div",null,'Unknown message of type "',n.type,'"')),l&&(!s||!i)&&g.createElement(xp,{position:c?"left":"right"},(0,Do.A)(1e3*n.created).format("h:mm a")),n.reviewableMessage&&g.createElement(wp,null,g.createElement(pp,{message:n})));var p,m}var Np,Lp,Mp,Dp,Fp,Up,zp,Pp,Gp,Hp,Bp,Zp;const Wp=E.Ay.div(Np||(Np=(0,z.A)(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  max-width: 70%;\n  // workaround for IE to prevent lengthy messages from assuming they are the full width of the screen\n  min-width: 1px;\n\n  ","\n\n  ","\n\n  ","\n"])),(e=>e.nonBubble&&(0,E.AH)(Lp||(Lp=(0,z.A)(["\n      padding-right: 14px;\n      margin-top: 3px;\n      max-width: 90%;\n    "])))),(e=>!e.fullWidth&&(0,E.AH)(Mp||(Mp=(0,z.A)(["\n      @media only screen and (max-width: 374px) {\n        max-width: 60%;\n      }\n    "])))),(e=>e.fullWidth&&(0,E.AH)(Dp||(Dp=(0,z.A)(["\n      max-width: 100%;\n      align-items: stretch;\n      width: 100%;\n    "]))))),Vp=E.Ay.div(Fp||(Fp=(0,z.A)(["\n  display: flex;\n  padding: 0 ",";\n\n  ","\n\n  ","\n"])),we.v.space4,(e=>e.user&&(0,E.AH)(Up||(Up=(0,z.A)(["\n      justify-content: flex-end;\n\n      "," {\n        align-items: flex-end;\n      }\n    "])),Wp)),(e=>e.hasReactions&&(0,E.AH)(zp||(zp=(0,z.A)(["\n      padding-bottom: ",";\n    "])),we.v.space7))),Kp=E.Ay.div(Pp||(Pp=(0,z.A)(["\n  ",";\n  ","\n  max-width: 100%;\n  // workaround for IE11 where media elements are presented with excessive whitespace beneath\n  // https://github.com/philipwalton/flexbugs/issues/75#issuecomment-161800607\n  min-height: 1px;\n  &:not(:last-child) {\n    margin-bottom: ",";\n  }\n"])),(e=>e.containsWidget&&(0,E.AH)(Gp||(Gp=(0,z.A)(["\n      overflow: hidden;\n    "])))),(e=>e.isGenerative&&(0,E.AH)(Hp||(Hp=(0,z.A)(["\n      width: 100%;\n    "])))),(e=>{let{isGenerative:t}=e;return t?we.v.space4:we.v.space0})),jp=E.Ay.div(Bp||(Bp=(0,z.A)(["\n  display: flex;\n  align-items: ",";\n  max-width: 34px;\n  padding-right: ",";\n  ","\n"])),(e=>{let{isGenerative:t}=e;return t?"flex-start":"flex-end"}),(e=>{let{isGenerative:t}=e;return t?we.v.space4:we.v.space2}),(e=>e.hidden&&(0,E.AH)(Zp||(Zp=(0,z.A)(["\n      visibility: hidden;\n    "])))));function qp(e){const{isLast:t,messageGroup:n}=e,a=(0,He.useMessageLoader)(),r=(0,He.useMessage)(n.ids.last()),o=!!r&&r.reviewableMessage,{client:i,isGenerative:s}=(0,V.useClient)(),c=i.hasFeature(V.Features.WS_CHAT_UI_IMPROVEMENTS);let l=!1;("quick_replies"===n.type||"presence"===n.type||"csat"===n.type||"survey"===n.type||n.widgetInline)&&(l=!0);const u=!l&&!n.isOwnedByUser;let d=a.loading&&t;return c&&s&&(d=!1),g.createElement(Vp,{"data-testid":n.isOwnedByUser?"MessageGroupNewUser":"MessageGroupNewBot",user:n.isOwnedByUser,hasReactions:o},u&&g.createElement(jp,{isGenerative:c&&s,hidden:d,"aria-hidden":!0},g.createElement(fo,{size:"small",agentInfo:n.agentInfo||void 0})),g.createElement(Wp,{nonBubble:c&&s&&"user"!==n.source,fullWidth:l},n.ids.map((e=>g.createElement(Kp,{isGenerative:c&&s,key:e,containsWidget:n.widgetInline},g.createElement(Op,{messageId:e}))))))}var Xp,Qp,Yp;const Jp=E.Ay.div(Xp||(Xp=(0,z.A)(["\n  &:first-child {\n    padding-top: ",";\n  }\n"])),we.v.space8),$p=E.Ay.div(Qp||(Qp=(0,z.A)(["\n  padding-top: ",";\n  padding-bottom: ",";\n"])),(e=>{let{isGenerative:t}=e;return t?"10px":we.v.space4}),(e=>{let{isGenerative:t}=e;return t?"10px":we.v.space4})),em=E.Ay.h2(Yp||(Yp=(0,z.A)(["\n  color: ",";\n  font-size: ",";\n  line-height: 1.25;\n  margin-bottom: ",";\n  text-align: center;\n  font-weight: normal;\n"])),(e=>e.theme.colorTextSubdued),(e=>e.theme.xSmallFontSize),we.v.space4);function tm(e){const{id:t}=e,n=(0,He.useConversationMessageGroups)(t),a=(0,He.useMessageGroups)(),r=(0,W.mR)(),o=n.first(),{client:i,isGenerative:s}=(0,V.useClient)(),c=i.hasFeature(V.Features.WS_CHAT_UI_IMPROVEMENTS),l=o?1e3*o.created:null,u=l&&(0,Do.A)(l).calendar(void 0,{sameDay:"[".concat(r("TODAY"),"]"),lastDay:"[".concat(r("YESTERDAY"),"]"),lastWeek:"LL",sameElse:"LL"})||null;return g.createElement(Jp,{"data-testid":"MessageList"},g.createElement(em,null,u),n.map((e=>g.createElement($p,{isGenerative:c&&s,key:e.key},g.createElement(qp,{messageGroup:e,isLast:e===a.last()})))))}var nm,am,rm=n(47578);const om=(0,E.i7)(nm||(nm=(0,z.A)(["\n  0% {opacity: 0}\n  50% { opacity: 1 }\n"]))),im=E.Ay.div(am||(am=(0,z.A)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  z-index: 1;\n  display: flex;\n  justify-content: center;\n  padding-top: ",";\n  animation: "," 500ms ease-in;\n"])),we.v.space2,om);function sm(){const{pageState:e}=(0,U.Sw)(),t=(0,E.DP)();return e.loadingMessages?g.createElement(im,null,g.createElement(rm.A,{tint:t.colorTextDefault})):null}var cm,lm,um,dm,gm,pm,mm=n(84324);const fm=(0,E.i7)(cm||(cm=(0,z.A)(["\n  from {\n    opacity: 0;\n    transform: translateY(8px);\n  }\n\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n"]))),hm=E.Ay.div(lm||(lm=(0,z.A)(["\n  display: flex;\n  align-items: center;\n  margin-bottom: ",";\n  padding-left: ",";\n\n  ","\n"])),we.v.space4,we.v.space4,(e=>e.shouldAnimate&&(0,E.AH)(um||(um=(0,z.A)(["\n      animation: "," 200ms;\n    "])),fm))),Em=E.Ay.div(dm||(dm=(0,z.A)(["\n  display: flex;\n  flex: 0 1 100%;\n"]))),vm=E.Ay.div(gm||(gm=(0,z.A)(["\n  font-size: 0;\n"]))),ym=E.Ay.div(pm||(pm=(0,z.A)(["\n  display: flex;\n  flex-direction: row;\n  flex-grow: 1;\n"])));function Am(){const e=(0,He.useMessageGroups)(),{activeAgent:t,inLiveChat:n}=de(),a=e.last();return g.createElement(hm,{shouldAnimate:null==a?void 0:a.isOwnedByUser},g.createElement(Em,null,g.createElement(vm,null,g.createElement(fo,{size:"small",agentInfo:n&&t||void 0})),g.createElement(ym,null,g.createElement(mm.$b,{isInHandoff:n,lastMessageIsUser:null==a?void 0:a.isOwnedByUser}))))}var _m,Sm,bm,Tm,Cm,wm,Im,xm,Rm;const km=(0,E.i7)(_m||(_m=(0,z.A)(["\n  from {\n    opacity: 0;\n    transform: translateY(16px);\n  }\n\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n"]))),Om=E.Ay.div(Sm||(Sm=(0,z.A)(["\n  flex: 1 1 0px;\n  overflow: hidden;\n  min-height: 0;\n  background: ",";\n  color: ",";\n  position: relative;\n  min-width: ","px;\n  direction: ltr;\n\n  ","\n"])),(e=>e.theme.colorSurfaceDefault),(e=>e.theme.colorTextDefault),Pn.MIN_UI_WIDTH,(e=>(0,E.AH)(bm||(bm=(0,z.A)(["\n    ","\n  "])),e.appear&&(0,E.AH)(Tm||(Tm=(0,z.A)(["\n      opacity: 0;\n      transform: translateY(16px);\n      animation: forwards 400ms "," ease-out 150ms;\n    "])),km)))),Nm=E.Ay.div(Cm||(Cm=(0,z.A)(["\n  overflow: ",";\n  width: 100%;\n  height: 100%;\n  overscroll-behavior-y: contain;\n  margin-top: auto;\n  display: flex;\n  flex-direction: column-reverse;\n\n  ","\n"])),(e=>e.enableScrolling?"auto":"hidden"),(e=>(0,E.AH)(wm||(wm=(0,z.A)(["\n    &:focus {\n      outline: none;\n      box-shadow: inset 0 0 0 4px ",";\n    }\n\n    &:focus-visible {\n      outline: none;\n      box-shadow: inset 0 0 0 4px ",";\n    }\n\n    &:focus:not(.focus-visible) {\n      box-shadow: none;\n    }\n  "])),e.theme.focusRingColor,e.theme.focusRingColor))),Lm=E.Ay.div(Im||(Im=(0,z.A)(["\n  display: flex;\n  flex-direction: column;\n  min-height: 100%;\n  flex-shrink: 0;\n  justify-content: flex-end;\n"]))),Mm=E.Ay.div(xm||(xm=(0,z.A)(["\n  margin-bottom: auto;\n"]))),Dm=E.Ay.div(Rm||(Rm=(0,z.A)([""]))),Fm=function(e){let t;try{t=new Audio(e),t.volume=0}catch(e){t={play(){return Promise.resolve()}}}return t}(to);function Um(){const{client:e}=(0,V.useClient)(),{pageState:t}=(0,U.Sw)(),n=(0,He.useConversationIds)(),{embedState:a}=(0,s.useEmbedState)(),r=(0,He.useMessageLoader)(),o=(0,g.useRef)(null),c=(0,g.useRef)(null),u=(0,m.wA)(),{chatter:p}=(0,W.NC)(),f=(0,He.useRenderableMessages)(),{allMessages:h}=(0,He.useAllMessages)(),E=f.last(null),y=(0,g.useRef)();y.current=f;const A=(0,W.mR)(),[_,S]=(0,g.useState)();(0,l.a)()&&s.embedStore.getState().then((e=>{if(!e)return;const{metaFields:t}=e;S(null==t?void 0:t.sdkType)}));const b=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;0===(null===(e=o.current)||void 0===e?void 0:e.scrollTop)&&(o.current.scrollTop=t-1),setTimeout((()=>{o.current&&(o.current.scrollTop=0===t?o.current.scrollHeight:t)}),0)},T=(0,g.useCallback)((async()=>{var e,t;if(!o.current)return;const n=o.current.scrollTop,a=null===(e=y.current)||void 0===e?void 0:e.size;await u((0,v.fetchMoreMessagesAction)()),a!==(null===(t=y.current)||void 0===t?void 0:t.size)&&b(n)}),[u]);(0,g.useEffect)((()=>{var e,n;!t.canLoadMore||(null===(e=o.current)||void 0===e?void 0:e.scrollHeight)!==(null===(n=o.current)||void 0===n?void 0:n.offsetHeight)||t.didFailFetchingLogs||t.loadingMessages||T()}),[f,T,t]),(0,g.useLayoutEffect)((()=>{b(0)}),[]),(0,g.useLayoutEffect)((()=>{b(0)}),[null==E?void 0:E.id,r.loading]);const C=(0,g.useRef)(!0);(0,g.useEffect)((()=>{C.current?C.current=!1:(null!=E&&E.isOwnedByUser||!p.playAlertChime||"IOS"===_||(()=>{Fm.volume=1;const e=Fm.play();e&&e.catch((()=>{}))})(),E&&("bot"===E.source&&(0,i.AA)("bot_message_displayed"),"agent"===E.source&&(0,i.AA)("agent_message_displayed")))}),[E,p.playAlertChime,_,e.handle]),(0,g.useEffect)((()=>((0,I.B1)("SCROLL_MESSAGE_LIST_TO_BOTTOM",(()=>b(0))),()=>{(0,I.al)("SCROLL_MESSAGE_LIST_TO_BOTTOM",(()=>b(0)))})),[]);const w=!(a.embed2Enabled&&!a.parentElement)||Boolean(a.isDrawerOpen);return(0,d.Bw)(),g.createElement(Om,{appear:Boolean(a.isDrawerOpen&&(h.size||r.loading))},g.createElement(sm,null),g.createElement(Nm,{id:"MESSAGE_LIST_LOG",onScroll:async()=>{if(!o.current)return;const{scrollTop:e}=o.current;o.current.scrollHeight-o.current.offsetHeight+e<=5&&T()},ref:o,tabIndex:0,"aria-label":A("CHAT_MESSAGES_LABEL"),enableScrolling:w},g.createElement(Lm,null,e.uiSettings.get("chat").get("botDescriptionEnabled")&&!t.canLoadMore&&g.createElement(Mm,null,g.createElement(To,null)),n.map((e=>g.createElement(tm,{key:e,id:e}))),"CHAT_OUTAGE_MID_CONVERSATION"===t.errorType&&g.createElement($r,null),r.loading&&g.createElement(Am,null),g.createElement(Dm,{ref:c}))))}var zm=n(21372),Pm=n.n(zm),Gm=n(74187);const Hm=e=>(t,n)=>{const a=n().chatter.get("token"),r={device_notifications_enabled:!n().chatter.get("deviceNotificationsEnabled")};$.FH.patch("/chatters/chat/".concat(a,"/"),r).then((n=>{t({type:"TOGGLE_DEVICE_NOTIFICATIONS",deviceNotificationsEnabled:n.data.chatter.device_notifications_enabled}),e()}))},Bm=e=>(t,n)=>{const a=n().chatter.get("token"),r={sms_notifications_enabled:!n().chatter.get("smsNotificationsEnabled")};$.FH.patch("/chatters/chat/".concat(a,"/"),r).then((n=>{t({type:"TOGGLE_SMS_NOTIFICATIONS",smsNotificationsEnabled:n.data.chatter.sms_notifications_enabled}),e()}))};var Zm;function Wm(){return Wm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Wm.apply(this,arguments)}var Vm,Km,jm=e=>g.createElement("svg",Wm({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),Zm||(Zm=g.createElement("path",{d:"m8.491 12.764 5.66 5.65a1.002 1.002 0 0 0 1.71-.705 1 1 0 0 0-.29-.705l-4.95-5 4.95-4.95a1 1 0 0 0 0-1.41 1 1 0 0 0-.71-.3 1 1 0 0 0-.71.3l-5.66 5.65a1 1 0 0 0 0 1.47Z"})));const qm=E.Ay.div(Vm||(Vm=(0,z.A)(["\n  position: absolute;\n  top: 0;\n  right: ","};\n  margin: 0 ",";\n  height: 100%;\n  display: flex;\n  align-items: center;\n"])),(e=>e.isRTL?0:"auto"),we.v.space3),Xm=E.Ay.button(Km||(Km=(0,z.A)(["\n  border: none;\n  background: transparent;\n  color: ",";\n  padding: ",";\n  cursor: pointer;\n  border-radius: ",";\n\n  &:hover {\n    background-color: ",";\n  }\n\n  ",";\n\n  > svg {\n    fill: ",";\n    transform: ",";\n    vertical-align: middle;\n    height: 24px;\n    width: 24px;\n  }\n"])),(e=>e.theme.colorIconDefault),we.v.space1,(e=>e.theme.mainBorderRadius),(e=>e.theme.colorOutline1),(e=>e.theme.focusStyle),(e=>e.theme.colorTextSubdued),(e=>e.isRTL?"rotateY(-180deg)":"none")),Qm=qm,Ym=e=>{let{onClick:t}=e;const{isRTL:n}=(0,F.Wz)(),a=(0,W.mR)();return g.createElement(Qm,{isRTL:n},g.createElement(Xm,{isRTL:n,type:"button","aria-label":a("BACK"),onClick:t},g.createElement(jm,null)))};var Jm,$m,ef,tf;const nf={height:"24px",width:"100%",resize:"none",marginBottom:"10px",marginTop:"10px",background:"#FFFFFF",color:"rgba(0, 0, 0, 0.85)",lineHeight:"1.25",border:"1px solid rgba(0, 0, 0, 0.42)",borderRadius:"8px",boxShadow:"0 12px 36px 0 rgba(0, 0, 0, 0.04)"},af={margin:"0",width:"327px"},rf={marginTop:"10px",height:"40px"},of=E.Ay.div(Jm||(Jm=(0,z.A)(["\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  padding: 4px 0 12px 0;\n  z-index: 6;\n"]))),sf=E.Ay.h2($m||($m=(0,z.A)(["\n  padding: 17px 0;\n  margin: 4px 0 12px 0;\n  width: 100%;\n  text-align: center;\n  color: ",";\n  font-size: ",";\n  font-weight: ",";\n  letter-spacing: 0.1px;\n  line-height: 22px;\n  position: relative;\n  border-bottom: 1px solid ",";\n"])),(e=>e.theme.colorTextDefault),we.v.heading3FontSize,we.v.heavyFontWeight,(e=>e.theme.colorOutline1)),cf=E.Ay.div(ef||(ef=(0,z.A)(["\n  display: flex;\n  height: 100%;\n  padding: 4px 16px 12px 16px;\n  flex-direction: column;\n  font-size: ",";\n  color: ",";\n"])),we.v.mainFontSize,(e=>e.theme.colorTextDefault)),lf=E.Ay.section(tf||(tf=(0,z.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n  height: 100%;\n  justify-content: end;\n"]))),uf=e=>{const{onConfirmClick:t,onCancelClick:n}=e,{chatter:a}=(0,W.NC)(),r=(0,W.mR)(),{setSheetContent:o}=(0,Qo.ZJ)(),i=(0,m.wA)(),{showToast:s}=(0,U.dj)(),{smsNotificationsEnabled:c}=a,[l,u]=(0,g.useState)(""),d=()=>{o(null),n()};return g.createElement(of,null,g.createElement(sf,null,g.createElement(Ym,{onClick:d}),r("GET_NOTIFIED_BY_SMS")),g.createElement(cf,null,r("PHONE_NUMBER"),g.createElement(Pm(),{value:l,country:"ca",specialLabel:"",onChange:e=>{u(e)},inputStyle:nf,buttonStyle:rf,dropdownStyle:af}),g.createElement(lf,null,g.createElement(ae.X,{onClick:()=>{c||i(Bm((()=>{setTimeout((()=>{s({toastMessage:r("SMS_NOTIFICATIONS_ENABLED"),toastType:"SUCCESS"})}),500)}))),o(null),(0,Gm.S)(a.token,{sensitiveMetaFields:{device_token:l,device_os:"SMS"}}),t&&t()},size:"large",buttonType:"primary",text:r("CONFIRM"),testid:"sms-confirm-button"}),g.createElement(ae.X,{onClick:d,size:"large",buttonType:"link",text:r("CANCEL"),testid:"sms-cancel-button"}))))};var df,gf,pf;const mf=E.Ay.section(df||(df=(0,z.A)(["\n  direction: ",";\n  position: absolute;\n  z-index: 5;\n  top: 0;\n  left: ",";\n  right: ",";\n  margin-left: auto;\n  margin-right: auto;\n  padding: ",";\n  box-shadow: 0px 4px 14px ",";\n  border: 1px solid ",";\n  border-radius: ",";\n  background: ",";\n  text-align: center;\n  color: ",";\n"])),(e=>e.isRTL?"rtl":"ltr"),we.v.space5,we.v.space5,we.v.space2,(e=>e.theme.colorOverlayHover),(e=>e.theme.colorOutline2),we.v.space5,(e=>e.theme.colorSurfaceDefault),(e=>e.theme.colorTextDefault)),ff=E.Ay.section(gf||(gf=(0,z.A)(["\n  margin: ",";\n  font-style: normal;\n  font-weight: 400;\n  font-size: ",";\n  line-height: 20px;\n"])),we.v.space2,(e=>e.theme.mainFontSize)),hf=E.Ay.section(pf||(pf=(0,z.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n  margin: "," 0;\n"])),we.v.space4);function Ef(e){var t,n;const{handleTurnOnNotifications:a,handleSMSClick:r,handleNoThanksClick:o}=e,{embedState:i}=(0,s.useEmbedState)(),c=(0,W.mR)(),l=Boolean(!i.deviceToken),u=(null===(t=i.metaFields)||void 0===t?void 0:t.sdkType)||"WEB",d="WEB"===u,p=Boolean(null===(n=i.metaFields)||void 0===n?void 0:n.sdkType),m="iPhone"===(0,B.e)().platform&&!p,f=c("WEB"===u?"TURN_ON_NOTIFICATIONS_BROWSER_SETTINGS":"TURN_ON_NOTIFICATIONS_DEVICE_SETTINGS");return g.createElement(g.Fragment,null,c("WEB"===u?"NOTIFICATION_PROMPT_BLURB_WEB":"NOTIFICATION_PROMPT_BLURB_APP"),g.createElement(hf,null,!m&&g.createElement(Zt.m,{text:f,disabled:!l,triggerType:"hover",showAbove:!0},g.createElement(ae.X,{onClick:a,size:"large",buttonType:"primary",text:c("TURN_ON_DEVICE_NOTIFICATIONS"),disabled:l,testid:"notification-button",block:!0})),d&&g.createElement(ae.X,{onClick:r,size:"large",buttonType:m?"primary":"secondary",text:c("GET_NOTIFIED_BY_SMS")}),g.createElement(ae.X,{onClick:()=>o(),buttonType:"link",size:"large",text:c("NO_THANKS"),testid:"no-thanks-button"})))}function vf(){var e;const{isRTL:t}=(0,F.Wz)(),{client:n}=(0,V.useClient)(),a=(0,m.wA)(),{pageState:r}=(0,U.Sw)(),{embedState:o}=(0,s.useEmbedState)(),{chatter:i}=(0,W.NC)(),{setSheetContent:c}=(0,Qo.ZJ)(),{showToast:l}=(0,U.dj)(),u=(0,W.mR)(),{stateType:d,inState:p}=r,f=n.hasFeature(V.Features.PUSH_NOTIFICATIONS),h=n.hasFeature(V.Features.ADA_GLASS_ZENDESK_MESSAGING)&&"live_chat"===d&&p,{deviceNotificationsEnabled:E,smsNotificationsEnabled:v}=i,y=(0,g.useMemo)((()=>f&&!E&&!v&&(d===te.kb||h)),[d,f,E,v,h]),[A,_]=(0,g.useState)(y),S=(0,g.useMemo)((()=>f&&E),[f,E]),[b,T]=(0,g.useState)(!1),C=(null===(e=o.metaFields)||void 0===e?void 0:e.sdkType)||"WEB",w="REACTNATIVE"===C?"ANDROID":C;return(0,g.useEffect)((()=>{if(y)return _(!0),void T(!0);_(!1)}),[y]),(0,g.useEffect)((()=>{S&&!b&&null!==i.token&&((0,Gm.S)(i.token,{sensitiveMetaFields:{device_token:o.deviceToken,device_os:w}}),T(!0))}),[S,i.token,o.deviceToken,w,b]),A?g.createElement(mf,{isRTL:t,"data-testid":"notification-prompt"},g.createElement(ff,null,g.createElement(Ef,{handleNoThanksClick:()=>{a(((e,t)=>{const n=t().chatter.get("token");$.FH.patch("/chatters/chat/".concat(n,"/"),{device_notifications_enabled:!1,sms_notifications_enabled:!1}).then((t=>{e({type:"TOGGLE_DEVICE_NOTIFICATIONS",deviceNotificationsEnabled:t.data.chatter.device_notifications_enabled}),e({type:"TOGGLE_SMS_NOTIFICATIONS",smsNotificationsEnabled:t.data.chatter.sms_notifications_enabled})}))})),_(!1)},handleTurnOnNotifications:()=>{E||a(Hm((()=>{setTimeout((()=>{l({toastMessage:u("DEVICE_NOTIFICATIONS_ENABLED"),toastType:"SUCCESS"})}),500)}))),(0,Gm.S)(i.token,{sensitiveMetaFields:{device_token:o.deviceToken,device_os:w}}),_(!1)},handleSMSClick:()=>{_(!1),c(g.createElement(uf,{onConfirmClick:()=>_(!1),onCancelClick:()=>_(!0)}))}}))):null}function yf(){const{retryLiveChat:e,cancelLiveChat:t}=de(),{pageState:n}=(0,U.Sw)(),{closeSheet:a}=(0,Qo.ZJ)(),r=(0,m.wA)(),o=(0,W.mR)(),[i,s]=(0,g.useState)(!1),c=()=>{r((0,U.FX)({showRetryDialog:!1})),a()};return g.createElement(Ir,{title:o("RETRY_DIALOG_LABEL"),description:o("RETRY_DIALOG_MESSAGE"),buttons:[{label:o("RETRY_OPTION_LABEL"),type:"primary",size:"large",onClick:async()=>{s(!0),await e()&&c(),setTimeout((()=>{s(!1)}),0)},disabled:i},{label:o("CANCEL"),type:"link",onClick:async()=>{s(!0);const e=n.stateType===te.kb;e||(r((0,ne.XR)()),c()),e&&await t()&&(r((0,ne.XR)()),c()),setTimeout((()=>{s(!1)}),0)},disabled:i}]})}var Af;const _f=E.Ay.div(Af||(Af=(0,z.A)(["\n  position: absolute;\n  top: 0;\n  width: 100%;\n  background-color: ",";\n  color: ",";\n  padding: ",";\n  display: flex;\n  transform: translate(0, ",");\n  justify-content: center;\n  transition: all ","ms ease-in;\n\n  font-weight: ",";\n  font-size: ",";\n  line-height: 19px;\n  z-index: 2;\n  box-sizing: border-box;\n"])),(e=>{switch(e.toastType){case"SUCCESS":return e.theme.colorSurfaceSuccess;case"WARNING":return e.theme.colorSurfaceWarning;default:return e.theme.colorSurfaceError}}),(e=>{switch(e.toastType){case"SUCCESS":return e.theme.colorTextSuccess;case"WARNING":return e.theme.colorTextWarning;default:return e.theme.colorTextError}}),we.v.space2,(e=>e.isVisible?"0":"-100%"),300,we.v.heavyFontWeight,(e=>e.theme.smallFontSize));function Sf(){const{toast:e}=(0,U.dj)(),{toastMessage:t,isToastMessageVisible:n,toastType:a}=e;return g.createElement(_f,{isVisible:n,toastType:a,"aria-live":"assertive",role:"alert"},t)}var bf=n(7732);const Tf=(0,se.bN)();function Cf(){const{closeSheet:e}=(0,Qo.ZJ)(),t=(0,m.wA)(),{cancelLiveChat:n}=de(),[a,r]=(0,g.useState)(!1),o=(0,W.mR)();return(0,g.useEffect)((()=>(Tf.info("ZD Fatal Request Error Dialog is visible"),()=>{Tf.info("ZD Fatal Request Error Dialog is no longer visible")})),[]),g.createElement(Ir,{title:o("UNABLE_TO_CONNECT"),description:o("AGENT_CONNECTION_FAILED"),buttons:[{label:o(a?"CANCELLING":"CANCEL_AND_TRY_AGAIN_LATER"),type:"link",onClick:async()=>{r(!0),await n()?(t((0,bf.A4)(!1)),t((0,ne.XR)()),e(),Tf.info("ZD Fatal Request Error Dialog - Live Chat was successfully cancelled")):Tf.info("ZD Fatal Request Error Dialog - Live Chat was not successfully cancelled"),setTimeout((()=>{r(!1)}),0)},disabled:a,testid:"FatalRequestErrorDialogCancelBtn"}]})}var wf;const If=E.Ay.div(wf||(wf=(0,z.A)(["\n  display: flex;\n  flex-direction: column;\n  flex: 1 1 0px;\n  direction: ",";\n  position: relative;\n  overflow: hidden;\n"])),(e=>e.isRTL?"rtl":"ltr")),xf=(0,u.tZ)();function Rf(){var e;const{showToast:t}=(0,U.dj)(),{embedState:n}=(0,s.useEmbedState)(),{isRTL:a}=(0,F.Wz)(),r=(0,W.mR)(),{setSheetContent:o,closeSheet:i}=(0,Qo.ZJ)(),{pageState:c,setPageState:l}=(0,U.Sw)(),u=null===(e=c.errorType)||void 0===e?void 0:e.startsWith("CHAT_OUTAGE"),d=(0,g.useRef)(),{isDrawerOpen:p}=n,{zendesk:f}=(0,m.d4)((e=>e.liveAgent)),{fatalRequestErrorReached:h}=f,E=[te.kb,te.YR],v=c.inState&&E.includes(c.stateType||"");return(0,Z.useLanguageChangeEffect)((()=>{setTimeout((()=>{t({toastMessage:r("LANGUAGE_CHANGED"),toastType:"SUCCESS"})}),500)})),(0,g.useEffect)((()=>{p&&((0,I.hZ)("FOCUS_MESSAGE_INPUT"),(0,I.hZ)("FOCUS_NEW_CONVERSATION_BUTTON"))}),[p]),(0,g.useEffect)((()=>{c.fileUploadError&&o(g.createElement(Or,{fileUploadError:c.fileUploadError,onCloseClick:i}))}),[i,c.fileUploadError,o]),(0,g.useEffect)((()=>{c.showRetryDialog&&o(g.createElement(yf,null))}),[i,c.showRetryDialog,o]),(0,g.useEffect)((()=>{h&&v&&o(g.createElement(Cf,null))}),[h,v,o]),(0,g.useEffect)((()=>{d.current&&!u&&(xf.info("Chat service restored"),t({toastMessage:r("CHAT_SERVICE_RESTORED"),toastType:"SUCCESS"})),d.current=u}),[u,t,r]),g.createElement(If,{isRTL:a,onKeyDown:e=>{"Tab"===e.key&&l({keyboardNavigation:!0})},onMouseDown:()=>{l({keyboardNavigation:!1})}},g.createElement(Sf,null),g.createElement(vf,null),g.createElement(Um,null),g.createElement(hr,null))}var kf;function Of(){return Of=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Of.apply(this,arguments)}xf.setLoggerReady();var Nf=e=>g.createElement("svg",Of({xmlns:"http://www.w3.org/2000/svg",width:64,height:64,fill:"none"},e),kf||(kf=g.createElement("path",{d:"M46.01 44.02h-6a2 2 0 0 1 0-4h5.906a8.058 8.058 0 0 0 8.094-7.927c.038-5.377-4.133-7.227-6.59-8.064a1.992 1.992 0 0 1-1.34-1.703l-.103-1.082a10.106 10.106 0 0 0-9.83-9.223c-4.668-.054-7.12 2.678-8.707 4.684a1.993 1.993 0 0 1-1.993.696 9.815 9.815 0 0 0-2.634-.377 6.004 6.004 0 0 0-5.792 5.87L16.99 24.2a1.987 1.987 0 0 1-1.254 1.806c-2.593 1.016-5.887 2.66-5.719 7.358a6.97 6.97 0 0 0 6.993 6.658h7a2 2 0 0 1 0 4h-7a10.995 10.995 0 0 1-3.988-21.244 9.982 9.982 0 0 1 12.088-9.532 13.991 13.991 0 0 1 24.833 7.448 11.994 11.994 0 0 1-3.933 23.328ZM24.196 34.41l6.989-9.974a.997.997 0 0 1 1.638 0l6.989 9.974a1.027 1.027 0 0 1-.82 1.623H34.01V56.02a2 2 0 0 1-4 0V36.03h-4.995a1.028 1.028 0 0 1-.819-1.622Z",clipRule:"evenodd"})));const Lf="FileUploadDropzone";class Mf extends g.Component{static handleDragOver(e){e.preventDefault()}constructor(e){super(e),(0,y.A)(this,"state",{isDragging:!1}),this.dragCounter=0,this.handleDragDrop=this.handleDragDrop.bind(this),this.handleDragEnter=this.handleDragEnter.bind(this),this.handleDragLeave=this.handleDragLeave.bind(this)}get isEnabled(){const{client:e,liveAgent:t,pageState:n}=this.props;return(0,Lt.ZP)(e,t,n)}closeDragNDrop(){this.setState({isDragging:!1},(()=>{this.dragCounter=0}))}handleDragEnter(e){e.preventDefault(),e.stopPropagation(),this.setState({isDragging:!0},(()=>{this.dragCounter+=1}))}handleDragLeave(){this.dragCounter-=1,0===this.dragCounter&&this.setState({isDragging:!1})}handleDragDrop(e){e.stopPropagation(),e.preventDefault();const t=e.target.files||e.dataTransfer.files,{setLightboxError:n}=this.props;if(this.closeDragNDrop(),!t.length)return void n(Rr.wr);if(t.length>1)return void n(Rr.Bk);const{sendFile:a}=this.props;a(t[0])}render(){const{t:e,children:t,pageState:n}=this.props,{isDragging:a}=this.state;return g.createElement("div",{className:Lf,onDragEnter:this.isEnabled?this.handleDragEnter:void 0,onDragLeave:this.isEnabled?this.handleDragLeave:void 0,onDrop:this.isEnabled?this.handleDragDrop:void 0,onDragOver:this.isEnabled?Mf.handleDragOver:void 0},g.createElement("div",{className:_()("".concat(Lf,"__content"),{["".concat(Lf,"__content--is-dragging")]:a})},t),a&&g.createElement("div",{className:"".concat(Lf,"__dropzone")},g.createElement("div",{className:"".concat(Lf,"__dropzone-content")},g.createElement(Nf,{className:"".concat(Lf,"__svg")}),g.createElement("p",{className:"".concat(Lf,"__text")},e("DROP_FILE")))),n.isFileUploading&&g.createElement("div",{className:"".concat(Lf,"__spinner-container")},g.createElement(hd,null)))}}var Df=(0,m.Ng)((function(e){const{client:t,pageState:n,chatter:a,liveAgent:r}=e;return{client:t,liveAgent:r,pageState:n,t:(0,Dt.Nj)(a.get("language"))}}),(function(e){return{setLightboxError:(0,C.zH)(v.setLightboxError,e),sendFile:(0,C.zH)(Nt.TX,e)}}))(Mf);class Ff extends g.Component{constructor(){super(...arguments),(0,y.A)(this,"handleMessageEventBound",this.handleMessageEvent.bind(this))}componentDidMount(){const{onMessageEvent:e}=this.props;e&&window.addEventListener("message",this.handleMessageEventBound)}componentWillUnmount(){const{onMessageEvent:e}=this.props;e&&window.removeEventListener("message",this.handleMessageEventBound)}handleMessageEvent(e){const{onMessageEvent:t}=this.props;t&&t(e)}render(){const{children:e}=this.props;return g.createElement(T.Ai,null,g.createElement(Df,null,e))}}var Uf,zf,Pf,Gf=Ff;const Hf=E.Ay.div(Uf||(Uf=(0,z.A)(["\n  width: 100%;\n  display: flex;\n  align-items: center;\n  height: 100%;\n  flex-direction: column;\n  position: fixed;\n  justify-content: center;\n"]))),Bf=E.Ay.div(zf||(zf=(0,z.A)(["\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  box-sizing: border-box;\n  width: 100%;\n  top: 0;\n  position: fixed;\n  color: ",";\n  & > button {\n    margin: ",";\n  }\n"])),(e=>e.theme.colorTextDefault),we.v.space4),Zf=E.Ay.div(Pf||(Pf=(0,z.A)(["\n  margin: auto 0;\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n  align-items: center;\n  padding: ",";\n  text-align: center;\n  color: ",";\n  font-size: ",";\n"])),we.v.space7,(e=>e.theme.colorTextDefault),(e=>e.theme.mainFontSize));function Wf(e){let{errorType:t}=e;const n=(0,W.mR)(),{embedState:a}=(0,s.useEmbedState)(),{pageState:i}=(0,U.Sw)(),{initializationPhase:l}=i,[u,d]=(0,g.useState)(!1),p=!a.parentElement||!(0,c.P)(),f=a.language,h=(0,Dt.mf)(),E=(0,m.wA)();(0,g.useEffect)((()=>{(async()=>{if("post"!==l){const e=f||h;await E((0,W.f4)(e))}d(!0)})()}),[l]);const v=(()=>{switch(t){case"BOT_DISABLED":return n("THIS_BOT_HAS_BEEN_DISABLED_");case"TRIAL_MODE":return n("TRIAL_MODE");default:return n("DEFAULT_ERROR")}})();return u?g.createElement(Hf,null,g.createElement(Bf,null,p&&g.createElement(w.A,{onClick:()=>{(0,c.E)()===r.y.Embed2?s.embedStore.dispatch("toggleChat"):window.parent.postMessage({closeChat:!0},(0,o.Bq)())},icon:g.createElement(Pn.CloseIcon,null),title:"Close Chat",accessKey:"q",clear:!0})),g.createElement(Zf,null,t&&t.startsWith("CHAT_OUTAGE")?g.createElement($r,{inline:!1,skipBackoff:t.endsWith("NO_BACKOFF")}):g.createElement(g.Fragment,null,g.createElement(Pn.CommentInfoAlt,{size:42}),g.createElement("p",null,v)))):null}var Vf,Kf=n(26183);function jf(){return jf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},jf.apply(this,arguments)}var qf=e=>g.createElement("svg",jf({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),Vf||(Vf=g.createElement("path",{fillRule:"evenodd",d:"m33.09 16.183-.04-4.612a.926.926 0 0 0-1.471-.728l-8.945 6.401a.901.901 0 0 0 .013 1.483l9.055 6.244a.926.926 0 0 0 1.458-.754l-.038-4.38a14.47 14.47 0 1 1-16.17 14.49 1.81 1.81 0 0 0-3.618.032A18.095 18.095 0 1 0 33.09 16.183Z",clipRule:"evenodd"}))),Xf=n(14687),Qf=n.n(Xf),Yf=n(2622),Jf=n(64955);const $f=["embed","private","reset","chatterToken","created","zdSession","greeting"];let eh,th={};const nh=()=>(e,t)=>{const n=t().chatter.get("token"),a=function(e){const t={...e};return Object.keys(t).forEach((e=>{void 0===t[e]&&delete t[e]})),t}(th);n&&Object.keys(a).length&&((0,Gm.S)(n,{metaFields:a}),th={})},ah=(e,t)=>n=>{e&&t&&n(t),(0,Z.teardownChat)(),(0,Yf.S)(),n((0,v.resetChatState)()),n((0,v.initializeApp)()),n(nh()),function(){const e=new Jf.k,{query:t}=e,n=Qf()(t,$f);th={...th,...n}}()};function rh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=window.location.host,n=window.__env.NODE_ENV,a=window.location.hostname;let r="development"===n?"http://".concat(a,":8002/"):"https://".concat(t,"/chat/");return r+="?test_user=1",Object.entries(e).forEach((e=>{const t=e[0],n=e[1];r+="&".concat(t,"=").concat(n)})),r}function oh(){const e=window.location.host,t=window.__env.NODE_ENV,n=window.location.hostname;return"development"===t?"http://".concat(n,":8003/"):"https://".concat(e,"/")}var ih;function sh(){return sh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},sh.apply(this,arguments)}var ch,lh,uh,dh,gh,ph=e=>g.createElement("svg",sh({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),ih||(ih=g.createElement("path",{fillRule:"evenodd",d:"M33.408 43.43a2 2 0 0 1-2.83 0L15.575 28.418a2 2 0 1 1 2.83-2.83l13.59 13.597 13.59-13.597a2.001 2.001 0 1 1 2.828 2.83Z"})));const mh=E.Ay.div(ch||(ch=(0,z.A)(["\n  display: flex;\n  flex-direction: column;\n"]))),fh=E.Ay.div(lh||(lh=(0,z.A)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 145px;\n  height: 32px;\n  background-color: ",";\n  color: ",";\n  padding: 0px "," 0px ",";\n  box-sizing: border-box;\n  gap: 6px;\n  border-radius: 8px;\n  cursor: pointer;\n"])),we.c.colorSlate800,we.c.colorWhite0,we.v.space2,we.v.space4),hh=E.Ay.span(uh||(uh=(0,z.A)(["\n  font-size: ",";\n  font-weight: ",";\n  line-height: 17px;\n  text-transform: capitalize;\n"])),we.v.smallFontSize,we.v.heavyFontWeight),Eh=E.Ay.div(dh||(dh=(0,z.A)(["\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  padding: 14px ",";\n  box-sizing: border-box;\n  background-color: ",";\n  color: ",";\n  border-radius: 8px;\n  transform: translateY(48px);\n"])),we.v.space2,we.c.colorBlack0,we.c.colorWhite0),vh=E.Ay.div(gh||(gh=(0,z.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  min-width: 235px;\n  height: 32px;\n  padding: "," ",";\n  box-sizing: border-box;\n  background-color: ",";\n  font-weight: ",";\n  font-size: ",";\n  border-radius: 8px;\n  cursor: pointer;\n\n  span {\n    text-transform: capitalize;\n  }\n"])),we.v.space1,we.v.space2,(e=>{let{active:t}=e;return t?"#32394C":"transparent"}),(e=>{let{active:t}=e;return t?we.v.heavyFontWeight:we.v.normalFontWeight}),we.v.smallFontSize),yh=e=>{let{options:t,selectedValue:n}=e;const a=(0,g.useRef)(null),[r,o]=(0,g.useState)(!1),i=(0,g.useCallback)((()=>{o(!r)}),[r]),s=(0,g.useCallback)((e=>{e(),o(!1)}),[]);return(0,U.Wr)(a,(()=>o(!1))),g.createElement(mh,{ref:a},g.createElement(fh,{onClick:i},g.createElement(hh,null,(()=>{const e=t.filter((e=>{let{value:t}=e;return t===n}));return e&&e[0].title?e[0].title:n})()),g.createElement(ph,{fill:"white",height:20})),r&&g.createElement(Eh,null,t.map((e=>{let{value:t,title:a,onSelect:r}=e;return g.createElement(vh,{key:t,onClick:()=>s(r),active:t===n},g.createElement("span",null,a||t),t===n&&g.createElement(Pn.CheckIcon,{size:24}))}))))};var Ah,_h,Sh,bh=n(67207);const Th=E.Ay.button(Ah||(Ah=(0,z.A)(["\n  display: inline-flex;\n  justify-content: space-between;\n  width: 100%;\n  cursor: pointer;\n  user-select: none;\n  align-items: center;\n  padding: 0;\n  border: none;\n  outline: none;\n  font: inherit;\n  color: inherit;\n  background: none;\n  border-radius: ",";\n\n  ",";\n"])),we.v.mainBorderRadius,(e=>{let{theme:t}=e;return t.focusStyle})),Ch=E.Ay.div(_h||(_h=(0,z.A)(["\n  position: relative;\n  display: inline-block;\n  width: ",";\n  height: ",";\n  border-radius: 20px;\n  transition: 0.2s;\n  background-color: ",";\n  opacity: ",';\n  flex-shrink: 0;\n  align-self: flex-start;\n\n  &:before {\n    position: absolute;\n    content: "";\n    height: ',";\n    width: ",";\n    left: 0;\n    margin: ",";\n    background-color: ",";\n    border-radius: 50%;\n    transition: 0.2s;\n    transform: ",";\n    box-shadow: ",";\n  }\n\n  &:active {\n    background-color: ",";\n  }\n"])),(e=>e.isSmall?"34px":"44px"),(e=>e.isSmall?"18px":"24px"),(e=>(e=>e.isChecked?e.theme.colorEmbellishmentSuccess:e.isSmall?"#595F70":e.theme.colorSolid3)(e)),(e=>{let{disabled:t}=e;return t?"0.5":"1"}),(e=>e.isSmall?"15px":"22px"),(e=>e.isSmall?"15px":"22px"),(e=>e.isSmall?"1.5px":"1px"),we.c.colorWhite,(e=>{let{isChecked:t,isSmall:n}=e;return t&&(e=>e?"translateX(16px)":"translateX(20px)")(n)}),we.v.boxShadow1,(e=>{let{isChecked:t,theme:n}=e;return t?(0,bh.e$)(.15,n.colorEmbellishmentSuccess):(0,bh.e$)(.15,n.colorSolid3)})),wh=E.Ay.label(Sh||(Sh=(0,z.A)(["\n  color: ",";\n  font-size: ",";\n  cursor: inherit;\n  padding-right: ",";\n  text-align: ","};\n"])),(e=>{let{withinSheet:t,theme:n}=e;return t?n.colorTextDefault:we.c.colorWhite0}),(e=>e.withinSheet?e.theme.mainFontSize:we.v.smallFontSize),we.v.gUnit,(e=>e.isRTL?"right":"left")),Ih=e=>{const{id:t,label:n,isChecked:a,accessKey:r,handleToggle:o,disabled:i,withinSheet:s,isSmall:c}=e,[l,u]=(0,g.useState)(a),{isRTL:d}=(0,F.Wz)();return(0,g.useEffect)((()=>{u(a)}),[a]),g.createElement(Th,{id:t,onClick:i?null:()=>{u(!l),o()},tabIndex:0,role:"switch","aria-checked":l,accessKey:r,disabled:i},n?g.createElement(wh,{withinSheet:s,isRTL:d},n):null,g.createElement(Ch,{isChecked:l,disabled:i,isSmall:c}))};var xh,Rh,kh;Ih.defaultProps={id:"",label:"",accessKey:"",disabled:!1,withinSheet:!1};const Oh=E.Ay.div(xh||(xh=(0,z.A)(["\n  display: flex;\n  flex-direction: column;\n  position: absolute;\n"]))),Nh=E.Ay.div(Rh||(Rh=(0,z.A)(["\n  display: flex;\n  flex-direction: column;\n  padding: "," "," "," ",";\n  box-sizing: border-box;\n  background-color: ",";\n  color: ",";\n  border-radius: 8px;\n  transform: translateY(16px) translateX(-87%);\n"])),we.v.space4,we.v.space2,we.v.space4,we.v.space2,we.c.colorBlack0,we.c.colorWhite0),Lh=E.Ay.div(kh||(kh=(0,z.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  min-width: 265px;\n  height: 32px;\n  padding: "," ",";\n  box-sizing: border-box;\n  background-color: transparent;\n  font-weight: ",";\n  font-size: ",";\n  border-radius: 8px;\n  cursor: pointer;\n\n  &:hover {\n    font-weight: ",";\n    background-color: ",";\n  }\n"])),we.v.space1,we.v.space2,we.v.normalFontWeight,we.v.smallFontSize,we.v.normalFontWeight,(e=>{let{isSwitch:t}=e;return t?"transparent":"#32394C"})),Mh=e=>{let{options:t}=e;return g.createElement(Oh,null,g.createElement(Nh,null,t.map((e=>{let{text:t,onClick:n,isSwitch:a,isChecked:r=!1}=e;return g.createElement(Lh,{key:t,onClick:a?()=>null:n,isSwitch:a},a&&g.createElement(Ih,{isChecked:r,label:t,handleToggle:n,isSmall:!0}),!a&&g.createElement("span",null,t))}))))};var Dh,Fh,Uh;const zh=E.Ay.div(Dh||(Dh=(0,z.A)(["\n  flex: 0 0 auto;\n  color: ",";\n  background: ",";\n  padding: "," 14px;\n  box-sizing: border-box;\n  z-index: 100;\n  padding-right: ",";\n"])),we.W.colorWhite,we.W.colorBlack0,we.L.space4,(e=>{let{shouldMakeRoomForCloseButton:t}=e;return t?"34px":we.L.gUnitHalf})),Ph=E.Ay.div(Fh||(Fh=(0,z.A)(["\n  display: flex;\n"]))),Gh=(E.Ay.span(Uh||(Uh=(0,z.A)(["\n  font-style: normal;\n  font-weight: 500;\n  font-size: 16px;\n  line-height: 20px;\n"]))),"NavBar");function Hh(){const e=(0,m.wA)(),{chatter:t}=(0,W.NC)(),{client:n}=(0,V.useClient)(),{pageState:a}=(0,U.Sw)(),r=(0,g.useRef)(null),[o,i]=(0,g.useState)(!1);(0,U.Wr)(r,(()=>i(!1)));const{activeConversation:c,endActiveConversation:l}=(0,K.VC)(),u=!n.hasFeature(An.O.END_CHAT)&&a.get("showCloseButton"),d=n.hasFeature(An.O.EXPERIMENT_VOICE),p=n.hasFeature(An.O.FREE_TIER_PLAN)?"Test Bot":"Ada Web Chat",f=g.createElement(qf,null),h=g.createElement(Pn.MenuIcon,null),{embedState:E}=(0,s.useEmbedState)();let y;if(E.initialURL){const e=new Jf.k(E.initialURL);y=e.path.split("/").pop()}else{const e=window.location.href,t=new Jf.k(e);y=t.query.initialResponseId}const A=(0,g.useCallback)((t=>{e((0,U.FX)({testBotModality:t})),t===U.VB?Kf.BB.setItem("testBotModality","messaging"):t===U.mv&&Kf.BB.setItem("testBotModality","voice")}),[e]),_=(0,g.useCallback)((()=>{e((0,v.handleContentToggle)())}),[e]),S={selectedValue:a.testBotModality,options:[{value:U.VB,title:"Ada Web Chat",onSelect:()=>A(U.VB)}]};d&&S.options.push({value:U.mv,onSelect:()=>A(U.mv)});const b={options:[{text:"Open in a new window",onClick:()=>{!function(){const e=rh(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});window.open(e,"_blank","location=0,height=567,width=320,scrollbars=yes,status=no").focus()}({testBotModality:a.testBotModality,initialResponseId:y}),i(!1)}},{text:"Copy URL",onClick:()=>{navigator.clipboard.writeText(rh({testBotModality:a.testBotModality,initialResponseId:y})),i(!1)}}]};b.options.push({text:"Include inactive Answers in test",onClick:()=>_(),isSwitch:!0,isChecked:t.get("canViewDemoContent")});const T=(0,g.useCallback)((()=>{i(!o)}),[i,o]);return g.createElement(zh,{"data-testid":"root",shouldMakeRoomForCloseButton:u},g.createElement(Ph,null,d?g.createElement("div",{className:"".concat(Gh,"__select-container")},g.createElement(yh,S)):g.createElement("div",{className:"".concat(Gh,"__channel_title_container")},g.createElement("span",null,p)),!n.hasFeature(An.O.FREE_TIER_PLAN)&&a.testBotModality!==U.mv&&g.createElement(Zt.m,{text:"Reset Test"},g.createElement(w.A,{customClassName:"".concat(Gh,"__button ").concat(Gh,"__button-refresh"),onClick:()=>{e(ah(c,l))},icon:f,clear:!0})),!n.hasFeature(An.O.FREE_TIER_PLAN)&&g.createElement("div",{className:"".concat(Gh,"__settings-button"),ref:r},g.createElement(Zt.m,{text:"More options"},g.createElement(w.A,{customClassName:"".concat(Gh,"__button ").concat(Gh,"__menu-container"),onClick:T,icon:h,clear:!0})),o&&g.createElement(Mh,b))))}var Bh,Zh=n(35968);const Wh=E.Ay.div(Bh||(Bh=(0,z.A)(["\n  padding: "," 18px;\n"])),we.v.space5);function Vh(e){return g.createElement(Wh,null,g.createElement("span",{dangerouslySetInnerHTML:(()=>{const{message:t}=e;return{__html:ig().sanitize(t.get("body"),{ADD_ATTR:["target"]})}})()}))}var Kh,jh,qh,Xh,Qh,Yh,Jh;const $h=(0,E.i7)(Kh||(Kh=(0,z.A)(["\n  0% { opacity: 0; transform: translateY(8px); }\n  100% { opacity: 1; transform: translateY(0); }\n"]))),eE=E.Ay.div(jh||(jh=(0,z.A)(["\n  align-self: ",";\n  margin-bottom: ",";\n  opacity: 0;\n  transform: translateY(8px);\n  transition: height 200ms ease;\n  overflow: hidden;\n  box-shadow: ",";\n\n  ","\n\n  ","\n\n  animation: forwards 200ms "," ease 200ms;\n"])),(e=>e.alignLeft?"flex-start":"flex-end"),we.v.space1,we.v.boxShadow3,(e=>(0,E.AH)(qh||(qh=(0,z.A)(["\n    height: ",";\n    border-radius: ",";\n  "])),"".concat(e.height,"px"),e.theme.messageBorderRadius)),(e=>{let{isPlayVideoButtonClicked:t}=e;return t&&"\n    height: auto !important;\n  "}),$h),tE=E.Ay.div(Xh||(Xh=(0,z.A)(["\n  line-height: 1.25;\n  cursor: pointer;\n\n  ","\n"])),(e=>(0,E.AH)(Qh||(Qh=(0,z.A)(["\n    color: ",";\n    background-color: ",";\n    font-size: ",";\n\n    ",";\n  "])),e.theme.campaignFontColor,e.theme.campaignColor,e.theme.mainFontSize,e.theme.focusStyle))),nE=E.Ay.div(Yh||(Yh=(0,z.A)(["\n  max-width: 400px;\n  overflow: hidden;\n\n  ","\n"])),(e=>(0,E.AH)(Jh||(Jh=(0,z.A)(["\n    border: 4px solid ",";\n    background: ",";\n    border-radius: ",";\n  "])),e.theme.campaignColor,e.theme.campaignColor,e.theme.messageBorderRadius)));function aE(e){let{message:t}=e;const{height:n,rootRef:a}=(0,Pn.useRefHeight)(),{hideAndClearProactiveMessages:r}=(0,Zh.jN)(),[o,i]=(0,g.useState)(0),[c,l]=(0,g.useState)(!1),u=()=>{var e;return i((null===(e=a.current)||void 0===e?void 0:e.scrollHeight)||0)},{location:d}=window,p=(0,F.xe)(d.search),m=()=>t instanceof He.TextMessage?g.createElement(Vh,{message:t}):t instanceof He.LinkMessage?g.createElement(Uc,{message:t,isProactive:!0,onReady:u}):"picture"===t.type?g.createElement(nE,null,g.createElement(Rs,{message:t,isProactive:!0,onReady:u})):"video"===t.type?g.createElement(nE,null,g.createElement(Hg,{message:t,onReady:u,onPlayVideo:()=>l(!0)})):null;return[Tu.U0,Tu.Xn].includes(t.type)?g.createElement(eE,{height:o,ref:a,isPlayVideoButtonClicked:c,alignLeft:p},m()):g.createElement(eE,{height:t instanceof He.PictureMessage?o:n,ref:a,alignLeft:p},g.createElement(tE,{role:"button","data-testid":"ProactiveAutoMessage",tabIndex:0,onClick:()=>{r(),s.embedStore.dispatch("toggleChat")}},m()))}var rE,oE,iE;const sE=(0,E.i7)(rE||(rE=(0,z.A)(["\n  0% { opacity: 0; transform: translateY(8px); }\n  100% { opacity: 1; transform: translateY(0); }\n"]))),cE=E.Ay.div(oE||(oE=(0,z.A)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: ",";\n  margin-bottom: ",";\n  opacity: 0;\n  transform: translateY(8px);\n  transform-origin: right bottom;\n  animation: forwards 200ms "," ease 200ms;\n  margin: 0 -"," 14px 0;\n\n  transition: height 200ms ease;\n  height: ",";\n"])),(e=>e.alignLeft?"flex-start":"flex-end"),we.v.space1,sE,we.v.space2,(e=>"".concat(e.height,"px"))),lE=E.Ay.div(iE||(iE=(0,z.A)(["\n  margin: "," "," 0 0;\n"])),we.v.space2,we.v.space2);function uE(e){let{message:t}=e;const n=(0,m.wA)(),{height:a,rootRef:r}=(0,Pn.useRefHeight)(),{hideAndClearProactiveMessages:o}=(0,Zh.jN)(),{location:i}=window,c=(0,F.xe)(i.search),[l,u]=(0,g.useState)(!1);return g.createElement(cE,{height:a,ref:r,alignLeft:c},t.quickReplies.map((e=>g.createElement(lE,{"data-testid":"ProactiveAutoQuickReply",key:e.target},g.createElement(nr.a,{solid:!0,text:e.label,onClick:()=>(async e=>{o(),await s.embedStore.dispatch("toggleChat"),n((0,Z.addMessageAction)({body:e.label,data:e.target,buttonType:e.buttonType,messageType:"trigger"})),n((0,Zh.v5)()),(0,I.hZ)("FOCUS_MESSAGE_INPUT")})(e),wrapText:!0,disabled:l,setDisabled:u})))))}var dE,gE,pE,mE,fE,hE;const EE=(0,E.i7)(dE||(dE=(0,z.A)(["\n  0% { opacity: 0; }\n  100% { opacity: 1; }\n"]))),vE=E.Ay.div(gE||(gE=(0,z.A)(["\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  ","\n  bottom: 0;\n  right: 0;\n  max-width: 380px;\n  width: 100%;\n  box-sizing: border-box;\n  opacity: 0;\n  animation: forwards 100ms "," linear 200ms;\n\n  &:empty {\n    display: none;\n  }\n\n  ","\n"])),(e=>e.alignLeft?"padding: 44px ".concat(we.v.space8," ").concat(we.v.space8," 24px;"):"padding: 44px 24px ".concat(we.v.space8," ").concat(we.v.space8,";")),EE,(e=>e.hidden&&(0,E.AH)(pE||(pE=(0,z.A)(["\n      display: none;\n    "]))))),yE=E.Ay.button(mE||(mE=(0,z.A)(["\n  padding: 0;\n  margin: 0;\n  border: none;\n  line-height: 1;\n  position: absolute;\n  top: 4px;\n  ",": 20px;\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  ","\n"])),(e=>e.alignLeft?"left":"right"),(e=>(0,E.AH)(fE||(fE=(0,z.A)(["\n    background: ",";\n    color: ",";\n    ",";\n\n    &:hover {\n      background: ",";\n    }\n\n    ","\n  "])),e.theme.colorSolid1,e.theme.colorIconDefault,e.theme.focusStyle,e.theme.colorSolid2,e.theme.isMobile&&(0,E.AH)(hE||(hE=(0,z.A)(["\n      width: 28px;\n      height: 28px;\n      animation: forwards 200ms "," linear 2000ms;\n\n      > svg {\n        width: 18px;\n        height: 18px;\n      }\n    "])),EE))));function AE(){const e=(0,g.useRef)(null),t=(0,W.mR)(),{client:n}=(0,V.useClient)(),{outboundMessages:a,outboundQuickRepliesMessage:r,hideAndClearProactiveMessages:o,isHidden:i,currentCampaignMessageDuration:c}=(0,Zh.jN)(),[l,u]=(0,g.useState)(0),[d,p]=(0,g.useState)(0),m=(0,g.useRef)(void 0),f=(0,g.useRef)(void 0),h=(0,g.useRef)(!0),v=(0,Pn.getThemeParams)(n),{location:y}=window,A=(0,F.xe)(y.search),_=(0,Pn.getUiTheme)({...v,darkMode:!1});Number.isInteger(c)&&(clearTimeout(f.current),f.current=window.setTimeout((()=>{o(),s.embedStore.dispatch("setState",{wasCampaignShownButNowClosed:!0})}),1e3*c)),(0,g.useEffect)((()=>()=>{h.current=!1}),[]),(0,g.useEffect)((()=>{const t=e.current;t&&(clearTimeout(m.current),u(9999),p(t.clientWidth),t.ontransitionend=()=>{m.current=window.setTimeout((()=>{h.current&&(u(t.clientHeight),p(t.clientWidth))}),2e3)})}),[a.length,r]),(0,g.useEffect)((()=>{s.embedStore.dispatch("setState",{chatDimensions:{height:l,width:d},proactiveCampaignHadMessages:Boolean(a.length)})}),[l,d,a.length]);const S=Boolean(a.length);return g.createElement(E.NP,{theme:_},g.createElement(vE,{ref:e,hidden:i,alignLeft:A},S&&g.createElement(yE,{type:"button","data-testid":"CloseButton","aria-label":t("CLOSE"),onClick:()=>{o(),s.embedStore.dispatch("setState",{wasCampaignShownButNowClosed:!0})},alignLeft:A},g.createElement(Pn.CloseIcon,{size:20})),a.map((e=>g.createElement(aE,{key:e.id,message:e}))),S&&r&&g.createElement(uE,{message:r})))}var _E,SE,bE,TE,CE,wE,IE,xE;const RE=E.Ay.div(_E||(_E=(0,z.A)(["\n  position: fixed;\n  top: ",";\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 3;\n  direction: ",";\n"])),(e=>e.addNavBarClearance?"48px":0),(e=>e.isRTL?"rtl":"ltr")),kE=E.Ay.div(SE||(SE=(0,z.A)(["\n  background: ",";\n  position: absolute;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  transition: all ","ms ease;\n  opacity: 1;\n  padding: 0;\n  margin: 0;\n  border: 0;\n  display: block;\n\n  ","\n\n  ",";\n"])),(e=>e.theme.overlayColor),320,(e=>e.shouldHide&&(0,E.AH)(bE||(bE=(0,z.A)(["\n      opacity: 0;\n    "])))),(e=>e.theme.focusStyle)),OE=E.Ay.div(TE||(TE=(0,z.A)(["\n  background: ",";\n  position: absolute;\n  width: 100%;\n  border-radius: 16px 16px 0 0;\n\n  ","\n\n  box-shadow: 0 12px 48px 4px rgba(0, 0, 0, 0.12);\n  transform: translateY(0);\n  transition: ","ms cubic-bezier(0.45, 1.29, 0.64, 1);\n  transition-property: transform, border-radius;\n\n  // Add some spacing at the bottom to prevent showing a gap during the transition\n  padding-bottom: 20px;\n  bottom: -20px;\n\n  max-height: calc(100vh - 48px);\n  overflow: auto;\n  z-index: 1;\n\n  ","\n\n  ","\n"])),(e=>e.theme.colorSurfaceSheet),(e=>"rectangular"===e.theme.style&&(0,E.AH)(CE||(CE=(0,z.A)(["\n      border-radius: 8px 8px 0 0;\n    "])))),320,(e=>e.fullHeight&&(0,E.AH)(wE||(wE=(0,z.A)(["\n      transition-timing-function: cubic-bezier(0.03, 0.34, 0.6, 1.03);\n      transition-duration: ",";\n      border-radius: 0;\n    "])),320)),(e=>e.shouldHide&&(0,E.AH)(IE||(IE=(0,z.A)(["\n      transform: translateY(100%);\n\n      ","\n    "])),e.fullHeight&&(0,E.AH)(xE||(xE=(0,z.A)(["\n        transition-timing-function: ease-out;\n      "]))))));function NE(){const{sheet:e,closeSheet:t}=(0,Qo.ZJ)(),{isRTL:n}=(0,F.Wz)(),[a,r]=(0,g.useState)(e),[o,i]=(0,g.useState)(!0),c=(0,W.mR)(),l=(0,g.useRef)(null),u=(0,g.useRef)(null),[d,p]=(0,g.useState)(!1),{embedState:m}=(0,s.useEmbedState)(),{isDrawerOpen:f}=m,{pageState:h}=(0,U.Sw)(),{showNavBar:E}=h;return(0,g.useEffect)((()=>{e.content!==a.content&&(e.content?null===a.content?(r(e),setTimeout((()=>{i(!1)}),0)):(i(!0),setTimeout((()=>{r(e),i(!1)}),330)):(i(!0),setTimeout((()=>{r(e)}),330)))}),[e,a]),(0,g.useEffect)((()=>{var t,n;"fullscreen"!==e.style?((null===(t=u.current)||void 0===t?void 0:t.scrollHeight)||0)>=((null===(n=l.current)||void 0===n?void 0:n.offsetHeight)||0)?p(!0):p(!1):p(!0)}),[a.content,e.style]),(0,g.useEffect)((()=>{null===a.content&&f&&!e.useFocusTrap&&((0,I.hZ)("FOCUS_MESSAGE_INPUT"),(0,I.hZ)("FOCUS_NEW_CONVERSATION_BUTTON"))}),[a.content,f]),a.content?g.createElement(b(),{focusTrapOptions:{clickOutsideDeactivates:!0,returnFocusOnDeactivate:!0,fallbackFocus:"#sheet-backdrop",initialFocus:e.initialFocusId?"#".concat(e.initialFocusId):void 0,setReturnFocus:!!e.returnFocusId&&"#".concat(e.returnFocusId)},active:!o},g.createElement(RE,{isRTL:n,onKeyDown:e=>{e.stopPropagation(),"Escape"===e.key&&t()},role:"region",ref:l,addNavBarClearance:E&&d},g.createElement(OE,{shouldHide:o,ref:u,fullHeight:d},a.content),g.createElement(kE,{onClick:t,shouldHide:o,id:"sheet-backdrop","aria-label":c("CLOSE"),tabIndex:-1,role:"button"}))):null}var LE,ME;const DE=E.Ay.div(LE||(LE=(0,z.A)(["\n  background: #f1ecfa;\n  padding: "," ",";\n  color: #7b52c2;\n  font-size: ",";\n"])),we.v.space4,we.v.space4,we.v.smallFontSize),FE=E.Ay.span(ME||(ME=(0,z.A)(["\n  font-weight: ",";\n"])),we.v.heavyFontWeight),UE=e=>{let{title:t,description:n}=e;return g.createElement(DE,null,t,n&&g.createElement(FE,null,n))};var zE,PE,GE,HE,BE;const ZE=E.Ay.button(zE||(zE=(0,z.A)(["\n  border: none;\n  background: none;\n  color: ",";\n  padding: 9px ",";\n  margin: 0 0 4px 0;\n  width: 100%;\n  text-align: left;\n  font-size: ",";\n  line-height: 1.25;\n  border-radius: ",";\n  cursor: ",";\n  display: flex;\n  align-items: center;\n  &:hover {\n    background: ",";\n  }\n\n  ",";\n"])),(e=>e.a11yDisabled?e.theme.colorTextDisabled:e.theme.colorTextDefault),we.v.space2,(e=>e.theme.mainFontSize),(e=>e.theme.mainBorderRadius),(e=>e.a11yDisabled?"default":"pointer"),(e=>e.a11yDisabled?"none":e.theme.colorOverlayHover),(e=>e.theme.focusStyle)),WE=E.Ay.span(PE||(PE=(0,z.A)(["\n  ","\n  color: ",";\n  font-size: 0;\n  flex: 0 0 auto;\n"])),(e=>e.isRTL?(0,E.AH)(GE||(GE=(0,z.A)(["\n          margin-left: ",";\n          margin-right: 0;\n        "])),we.v.space4):(0,E.AH)(HE||(HE=(0,z.A)(["\n          margin-right: ",";\n          margin-left: 0;\n        "])),we.v.space4)),(e=>e.disabled?e.theme.colorIconDisabled:e.theme.colorIconDefault)),VE=E.Ay.span(BE||(BE=(0,z.A)(["\n  display: inline-block;\n  white-space: normal;\n  flex: 1 1 0px;\n  padding-top: 1px;\n  text-align: ","};\n"])),(e=>e.isRTL?"right":"left"));function KE(e){const{icon:t,onClick:n,text:a,disabled:r,testid:o}=e,{isRTL:i}=(0,F.Wz)();return g.createElement(ZE,{a11yDisabled:r,onClick:()=>{r||void 0===n||n()},"data-testid":o},g.createElement(WE,{disabled:r,isRTL:i},t),g.createElement(VE,{isRTL:i},a))}KE.defaultProps={disabled:!1,onClick:()=>{}};var jE,qE,XE,QE,YE,JE,$E=n(6436);const ev=E.Ay.div(jE||(jE=(0,z.A)(["\n  padding: ",";\n  background: ",";\n  height: 100%;\n  box-sizing: border-box;\n"])),we.v.space2,(e=>e.theme.colorSurfaceSheet)),tv=E.Ay.button(qE||(qE=(0,z.A)(["\n  background-color: transparent;\n  border: none;\n  cursor: pointer;\n  text-align: left;\n  width: 100%;\n  position: relative;\n  transition: background 200ms ease-in-out;\n  text-align: ","};\n  \n  font-size: ",";\n  line-height: 20px;\n  color: ",";\n  padding: 9px ",";\n  margin-bottom: ",";\n  border-radius: ",";\n  \n  ","\n  \n  &:last-child {\n    margin-bottom: 0;\n  }\n  \n  ","\n  \n  ",";\n"])),(e=>e.isRTL?"right":"left"),(e=>e.theme.mainFontSize),(e=>e.theme.colorTextDefault),we.v.space2,we.v.space1,(e=>e.theme.mainBorderRadius),(e=>e.isActive&&"\n    font-weight: ".concat(we.v.mediumFontWeight,";\n    color: ").concat(e.theme.colorTextEmphasized,";\n  ")),(e=>!e.disabled&&(0,E.AH)(XE||(XE=(0,z.A)(["\n      &:hover {\n        background-color: ",";\n      }\n    "])),e.theme.colorOverlayHover)),(e=>e.theme.focusStyle)),nv=E.Ay.div(QE||(QE=(0,z.A)(["\n  position: absolute;\n  top: 0;\n  ","\n  height: 100%;\n  display: flex;\n  align-items: center;\n  color: ",";\n"])),(e=>e.isRTL?(0,E.AH)(YE||(YE=(0,z.A)(["\n          left: ",";\n          right: auto;\n        "])),we.v.space2):(0,E.AH)(JE||(JE=(0,z.A)(["\n          right: ",";\n          left: auto;\n        "])),we.v.space2)),we.c.colorUIGood),av=ev;function rv(e){const{options:t,onSelect:n,value:a}=e,{isRTL:r}=(0,F.Wz)();return g.createElement(av,null,t.map((e=>g.createElement(tv,{isRTL:r,type:"button",key:e.value,isActive:e.value===a,disabled:e.value===a,onClick:()=>{return t=e.value,void n(t);var t}},e.value===a&&g.createElement(nv,{isRTL:r},g.createElement(Pn.CheckIcon,{size:24})),e.label))))}var ov,iv,sv,cv,lv;rv.defaultProps={value:null};const uv=E.Ay.div(ov||(ov=(0,z.A)(["\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  padding-bottom: ",";\n  box-sizing: border-box;\n"])),we.v.space2),dv=E.Ay.div(iv||(iv=(0,z.A)(["\n  margin: "," 0;\n  padding: "," 0;\n  width: 100%;\n  text-align: center;\n  background: ",";\n  color: ",";\n  font-size: ",";\n  font-weight: ",";\n  letter-spacing: 0.1px;\n  line-height: 22px;\n  position: relative;\n  flex: 0 0 auto;\n  border-bottom: 1px solid ",";\n"])),we.v.space1,we.v.space4,(e=>e.theme.colorSurfaceSheet),(e=>e.theme.colorTextDefault),we.v.heading3FontSize,we.v.heavyFontWeight,(e=>e.theme.colorOutline1)),gv=E.Ay.div(sv||(sv=(0,z.A)(["\n  flex-shrink: 1;\n  overflow: auto;\n"]))),pv=uv,mv=E.Ay.button(cv||(cv=(0,z.A)(["\n  border: none;\n  background: none;\n  cursor: pointer;\n  font-size: 0;\n  color: ",";\n  border-radius: ",";\n  height: ",";\n  width: ",";\n  transition: 100ms ease;\n  position: absolute;\n  top: 0;\n  right: ",";\n  left: ","};\n  margin: 6px ",";\n  display: flex;\n  align-items: center;\n  \n  &:hover {\n    background-color: ",";\n  }\n  \n  ","\n  \n  ",";\n  \n  &:disabled {\n    pointer-events: none;\n  }\n"])),(e=>e.theme.colorIconDefault),(e=>e.theme.mainBorderRadius),we.v.space7,we.v.space7,(e=>e.isRTL?"auto":0),(e=>e.isRTL?0:"auto"),we.v.space2,(e=>e.theme.colorOutline1),(e=>e.pressed&&(0,E.AH)(lv||(lv=(0,z.A)(["\n      color: ",";\n      background-color: ",";\n    "])),e.theme.colorTextDefault,e.theme.colorOutline1)),(e=>e.theme.focusStyle));function fv(e){const{isRTL:t}=(0,F.Wz)(),{languageOptions:n}=e,{closeSheetWithFocusTrap:a}=(0,Qo.ZJ)(),{chatter:r}=(0,W.NC)(),o=(0,m.wA)(),i=(0,W.mR)();return g.createElement(pv,null,g.createElement(dv,null,i("CHANGE_LANGUAGE"),g.createElement(mv,{"data-testid":"CloseSettingsButton",type:"button","aria-label":i("CLOSE"),onClick:()=>a(),isRTL:t},g.createElement(Pn.CloseIcon,null))),g.createElement(gv,null,g.createElement(rv,{options:n,onSelect:async e=>{o((0,v.setLanguage)(e)),await(0,an.u)(200),a()},value:r.language})))}var hv,Ev,vv,yv,Av;const _v=E.Ay.a(hv||(hv=(0,z.A)(["\n  border: none;\n  background: none;\n  color: ",";\n  padding: 9px ",";\n  margin: 0 0 4px 0;\n  width: 100%;\n  text-align: left;\n  font-size: ",";\n  line-height: 1.25;\n  border-radius: ",";\n  display: flex;\n  text-decoration: none;\n  align-items: center;\n  &:hover {\n    background: ",";\n  }\n\n  ",";\n"])),(e=>e.theme.colorTextDefault),we.v.space2,(e=>e.theme.mainFontSize),(e=>e.theme.mainBorderRadius),(e=>e.theme.colorOverlayHover),(e=>e.theme.focusStyle)),Sv=E.Ay.span(Ev||(Ev=(0,z.A)(["\n  ","\n  color: ",";\n  font-size: 0;\n  flex: 0 0 auto;\n"])),(e=>e.isRTL?(0,E.AH)(vv||(vv=(0,z.A)(["\n          margin-left: ",";\n          margin-right: 0;\n        "])),we.v.space4):(0,E.AH)(yv||(yv=(0,z.A)(["\n          margin-right: ",";\n          margin-left: 0;\n        "])),we.v.space4)),(e=>e.disabled?e.theme.colorIconDisabled:e.theme.colorIconDefault)),bv=E.Ay.span(Av||(Av=(0,z.A)(["\n  display: inline-block;\n  white-space: normal;\n  flex: 1 1 0px;\n  padding-top: 1px;\n  text-align: ","};\n"])),(e=>e.isRTL?"right":"left"));function Tv(e){const{icon:t,text:n,disabled:a,href:r,download:o}=e,{isRTL:i}=(0,F.Wz)();return g.createElement(_v,{href:r,download:o},g.createElement(Sv,{disabled:a,isRTL:i},t),g.createElement(bv,{isRTL:i},n))}function Cv(){const{client:e}=(0,V.useClient)(),{chatter:t}=(0,W.NC)(),{embedState:n}=(0,s.useEmbedState)(),a=(0,W.mR)(),r=e.uiSettings.get("chat").get("downloadTranscriptToggle"),o="small"===(0,Pn.useTheme)().theme.scale?18:24,i="/api/chatters/".concat(t.get("token"),"/transcript/txt/?remove_summary=true&session_token=").concat(t.get("sessionToken"));if(r){var c,l;const e=null===(c=n.metaFields)||void 0===c?void 0:c.sdkSupportsDownloadLink,t=null===(l=n.metaFields)||void 0===l?void 0:l.sdkType;if(e&&t||!t)return g.createElement(Tv,{text:a("DOWNLOAD"),href:i,download:!0,icon:g.createElement(Pn.DownloadIcon,{size:o})})}return null}var wv,Iv,xv,Rv;const kv=E.Ay.div(wv||(wv=(0,z.A)([""]))),Ov=E.Ay.label(Iv||(Iv=(0,z.A)(["\n  color: ",";\n  font-size: ",";\n  line-height: 20px;\n  display: inline-block;\n  margin-bottom: ",";\n  float: ",";\n"])),(e=>e.theme.colorTextDefault),(e=>e.theme.mainFontSize),we.v.space2,(e=>e.isRTL?"right":"left")),Nv=E.Ay.input(xv||(xv=(0,z.A)(["\n  background: transparent;\n  border-radius: ",";\n  color: ",";\n  font-size: ",";\n  line-height: 20px;\n  padding: 10px 14px;\n  border: 1px solid ",";\n  box-sizing: border-box;\n  width: 100%;\n  direction: ",";\n\n  &::placeholder,\n  &::-ms-input-placeholder {\n    font-size: ",";\n    line-height: 20px;\n    color: ",";\n  }\n\n  &:focus {\n    outline: none;\n    border: 1px solid ",";\n  }\n\n  ","\n\n  ","\n"])),(e=>e.theme.mainBorderRadius),(e=>e.theme.colorTextEmphasized),(e=>e.theme.mainFontSize),(e=>e.theme.colorOutline3),(e=>e.isRTL?"rtl":"ltr"),(e=>e.theme.mainFontSize),(e=>e.theme.colorTextSubdued),(e=>e.hasError?e.theme.colorOutlineError:e.theme.colorOutline4),(e=>e.hasError&&!e.disabled&&"\n    border: 1px solid ".concat(e.theme.colorOutlineError,";\n  ")),(e=>e.disabled&&"\n    border: none;\n    padding: 11px 14px;\n    background: ".concat(e.theme.colorSolid2,";\n    \n    &::placeholder, &::-ms-input-placeholder {\n      font-size: ").concat(e.theme.mainFontSize,";\n      line-height: 20px;\n      color: ").concat(e.theme.colorTextDisabled,";\n    }\n  "))),Lv=E.Ay.div(Rv||(Rv=(0,z.A)(["\n  color: ",";\n  font-size: ",";\n  line-height: 19px;\n  margin-top: ",";\n"])),(e=>e.hasError?e.theme.colorTextError:e.theme.colorTextDefault),(e=>e.theme.smallFontSize),we.v.space1),Mv=kv,Dv=g.forwardRef(((e,t)=>{const{label:n,value:a,placeholder:r,inputType:o,helperText:i,error:s,onValueChange:c,disabled:l}=e,{isRTL:u}=(0,F.Wz)();return g.createElement(Mv,null,g.createElement(Ov,{htmlFor:"".concat(n,"-input-field"),isRTL:u},n),g.createElement(Nv,{isRTL:u,id:"".concat(n,"-input-field"),value:a,type:o,placeholder:r,onChange:e=>{c(e.target.value)},hasError:s,ref:t,disabled:l,autoComplete:"email"===(null==o?void 0:o.toLowerCase())?"email":"on"}),i&&g.createElement(Lv,{hasError:s,role:"alert","aria-live":"assertive"},i))}));Dv.defaultProps={disabled:!1,error:!1,inputType:"text",placeholder:"",helperText:null};const Fv=e=>e.match(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/);var Uv,zv,Pv,Gv,Hv,Bv,Zv;const Wv=E.Ay.div(Uv||(Uv=(0,z.A)(["\n  direction: ",";\n"])),(e=>e.isRTL?"rtl":"ltr")),Vv=E.Ay.h2(zv||(zv=(0,z.A)(["\n  margin: "," 0;\n  padding: "," 0;\n  width: 100%;\n  text-align: center;\n  color: ",";\n  font-size: ",";\n  font-weight: ",";\n  letter-spacing: 0.1px;\n  line-height: 22px;\n  position: relative;\n  border-bottom: 1px solid ",";\n"])),we.v.space1,we.v.space4,(e=>e.theme.colorTextDefault),we.v.heading3FontSize,we.v.heavyFontWeight,(e=>e.theme.colorOutline1)),Kv=E.Ay.div(Pv||(Pv=(0,z.A)(["\n  padding: ",";\n"])),we.v.space5),jv=E.Ay.div(Gv||(Gv=(0,z.A)(["\n  display: flex;\n  flex-direction: column;\n  padding: ",";\n"])),we.v.gUnitDouble),qv=(E.Ay.div(Hv||(Hv=(0,z.A)(["\n  margin-bottom: ",";\n"])),we.v.space1),Wv),Xv=E.Ay.button(Bv||(Bv=(0,z.A)(["\n  border: none;\n  background: none;\n  cursor: pointer;\n  font-size: 0;\n  color: ",";\n  border-radius: ",";\n  height: ",";\n  width: ",";\n  transition: 100ms ease;\n  position: absolute;\n  top: 0;\n  right: ",";\n  left: ","};\n  margin: 6px ",";\n  display: flex;\n  align-items: center;\n  \n  &:hover {\n    background-color: ",";\n  }\n  \n  ","\n  \n  ",";\n  \n  &:disabled {\n    pointer-events: none;\n  }\n"])),(e=>e.theme.colorIconDefault),(e=>e.theme.mainBorderRadius),we.v.space7,we.v.space7,(e=>e.isRTL?"auto":0),(e=>e.isRTL?0:"auto"),we.v.space2,(e=>e.theme.colorOutline1),(e=>e.pressed&&(0,E.AH)(Zv||(Zv=(0,z.A)(["\n      color: ",";\n      background-color: ",";\n    "])),e.theme.colorTextDefault,e.theme.colorOutline1)),(e=>e.theme.focusStyle));function Qv(){const[e,t]=(0,g.useState)(""),[n,a]=(0,g.useState)(!1),[r,o]=(0,g.useState)(null),{closeSheetWithFocusTrap:i,closeSheet:s}=(0,Qo.ZJ)(),{chatter:c}=(0,W.NC)(),{showToast:l}=(0,U.dj)(),u=(0,W.mR)(),d=g.createRef(),p=Boolean(e)&&Fv(e),{isRTL:m}=(0,F.Wz)();return(0,g.useEffect)((()=>{var e;return null===(e=d.current)||void 0===e?void 0:e.focus()}),[d]),g.createElement(qv,{isRTL:m,role:"dialog"},g.createElement(Vv,null,u("EMAIL_TRANSCRIPT"),g.createElement(Xv,{"data-testid":"CloseSettingsButton",type:"button","aria-label":u("CLOSE"),onClick:()=>i(),isRTL:m},g.createElement(Pn.CloseIcon,null))),g.createElement("form",{onSubmit:async t=>{if(t.preventDefault(),!Fv(e))return void o(u("EMAIL_INVALID"));o(null),a(!0);const n=await(async(e,t)=>{try{return await $.FH.post("/chatters/".concat(e,"/transcript/email/"),{email:t}),!0}catch(e){return(0,J.to)(new Error("Chat transcript request failed. Error: ".concat(e.message))),!1}})(c.token,e);n?(s(),setTimeout((()=>l({toastMessage:u("TRANSCRIPT_SENT"),toastType:"SUCCESS"})),200)):o(u("SOMETHING_WENT_WRONG")),a(!1)}},g.createElement(Kv,null,g.createElement(Dv,{label:u("EMAIL_LABEL"),inputType:"email",value:e,onValueChange:n=>{t(n),Fv(e)?o(null):o(u("EMAIL_INVALID"))},ref:d,helperText:r,error:Boolean(r)})),g.createElement(jv,null,g.createElement(ae.X,{text:u("EMAIL_SEND"),size:"large",type:"submit",buttonType:"primary",disabled:!p},n?g.createElement(hd,null):u("EMAIL_SEND")))))}var Yv,Jv,$v;const ey=E.Ay.div(Yv||(Yv=(0,z.A)(["\n  border-top: 1px solid ",";\n  margin-top: ",";\n  direction: ltr; // direction of the footer should always be ltr (even in rtl languages)\n"])),(e=>e.theme.colorOutline1),we.v.space5),ty=E.Ay.a.attrs({rel:"noreferrer noopener",target:"_blank"})(Jv||(Jv=(0,z.A)(["\n  color: ",";\n  font-size: ",';\n  transition: color 200ms ease-in-out;\n  text-decoration: none;\n  padding-left: 24px;\n  margin-bottom: 6px;\n  position: relative;\n\n  &:first-child {\n    padding-left: 0;\n  }\n\n  // adds the bullet point\n  & + &:before {\n    content: "\\2022";\n    margin: 0 ',";\n    pointer-events: none;\n    color: ",";\n    position: absolute;\n    left: 0;\n    top: 0;\n  }\n\n  &:hover {\n    color: ",";\n\n    &:before {\n      color: ",";\n    }\n  }\n  ",";\n"],["\n  color: ",";\n  font-size: ",';\n  transition: color 200ms ease-in-out;\n  text-decoration: none;\n  padding-left: 24px;\n  margin-bottom: 6px;\n  position: relative;\n\n  &:first-child {\n    padding-left: 0;\n  }\n\n  // adds the bullet point\n  & + &:before {\n    content: "\\\\2022";\n    margin: 0 ',";\n    pointer-events: none;\n    color: ",";\n    position: absolute;\n    left: 0;\n    top: 0;\n  }\n\n  &:hover {\n    color: ",";\n\n    &:before {\n      color: ",";\n    }\n  }\n  ",";\n"])),(e=>e.theme.colorTextSubdued),(e=>e.theme.xSmallFontSize),we.v.space2,(e=>e.theme.colorTextDisabled),(e=>e.theme.colorTextDefault),(e=>e.theme.colorTextDisabled),(e=>e.theme.focusStyle)),ny=E.Ay.div($v||($v=(0,z.A)(["\n  display: flex;\n  flex-wrap: wrap;\n  align-items: flex-start;\n  justify-content: center;\n  padding: "," 0;\n"])),we.v.space5),ay=ey,ry=()=>{const{client:e}=(0,V.useClient)(),t=(0,W.mR)();return g.createElement(ay,null,(()=>{const n=(0,V.getAdaUrl)(e.handle,"legal/privacy-policy"),a=(0,V.getAdaUrl)(e.handle),r=(0,V.getAdaUrl)(e.handle,"legal/customer-terms-of-use"),o=(new Date).getFullYear();return g.createElement(ny,null,e.shouldShowBranding&&g.createElement(ty,{href:a}," ",o," Ada Inc."),g.createElement(ty,{href:n},t("PRIVACY_POLICY")),g.createElement(ty,{href:r},t("TERMS")))})())},oy=e=>{var t,n;const{onBackClick:a}=e,r=(0,m.wA)(),{chatter:o}=(0,W.NC)(),i=(0,W.mR)(),{embedState:c}=(0,s.useEmbedState)(),{setSheetContent:l}=(0,Qo.ZJ)(),{showToast:u}=(0,U.dj)(),d="small"===(0,Pn.useTheme)().theme.scale?18:24,p=Boolean(!c.deviceToken),{deviceNotificationsEnabled:f,smsNotificationsEnabled:h}=o,E=(null===(t=c.metaFields)||void 0===t?void 0:t.sdkType)||"WEB",v="REACTNATIVE"===E?"ANDROID":E,y=Boolean(null===(n=c.metaFields)||void 0===n?void 0:n.sdkType),A="iPhone"===(0,B.e)().platform&&!y,_=i("WEB"===v?"TURN_ON_NOTIFICATIONS_BROWSER_SETTINGS":"TURN_ON_NOTIFICATIONS_DEVICE_SETTINGS");return g.createElement(g.Fragment,null,!A&&g.createElement(Zt.m,{text:_,disabled:!p,triggerType:"hover",showAbove:!0,fullWidth:!0},g.createElement(KE,{disabled:p,text:i(f?"TURN_OFF_DEVICE_NOTIFICATIONS":"TURN_ON_DEVICE_NOTIFICATIONS"),icon:f?g.createElement(Pn.BellSlashIcon,{size:d}):g.createElement(Pn.BellIcon,{size:d}),onClick:()=>{const e=i(f?"DEVICE_NOTIFICATIONS_DISABLED":"DEVICE_NOTIFICATIONS_ENABLED");r(Hm((()=>{setTimeout((()=>{u({toastMessage:e,toastType:"SUCCESS"})}),500)}))),(0,Gm.S)(o.token,{sensitiveMetaFields:{device_token:c.deviceToken,device_os:v}}),l(null)},testid:"device-notification-button"})),!y&&g.createElement(KE,{text:i(h?"TURN_OFF_SMS_NOTIFICATIONS":"TURN_ON_SMS_NOTIFICATIONS"),icon:h?g.createElement(Pn.CommentSlashIcon,{size:d}):g.createElement(Pn.CommentIcon,{size:d}),onClick:()=>{h?(r(Bm((()=>{setTimeout((()=>{u({toastMessage:i("SMS_NOTIFICATIONS_DISABLED"),toastType:"SUCCESS"})}),500)}))),l(null)):l(g.createElement(uf,{onCancelClick:a}))},testid:"sms-notification-button"}))};function iy(){const e="small"===(0,Pn.useTheme)().theme.scale?18:24,{chatter:t}=(0,W.NC)(),{closeSheetWithFocusTrap:n}=(0,Qo.ZJ)(),{showToast:a}=(0,U.dj)(),r=(0,W.mR)(),o=(0,m.wA)(),i=!t.playAlertChime;return g.createElement(KE,{text:r(i?"UNMUTE_SOUND":"MUTE_SOUND"),icon:i?g.createElement(Pn.VolumeIcon,{size:e}):g.createElement(Pn.VolumeMuteIcon,{size:e}),onClick:()=>{o((0,v.handleSoundToggle)()),(()=>{n();const e=r(i?"SOUND_ENABLED":"SOUND_DISABLED");setTimeout((()=>{a({toastMessage:e,toastType:"SUCCESS",autoHide:!0})}),250)})()}})}var sy,cy,ly,uy,dy,gy;const py=E.Ay.section(sy||(sy=(0,z.A)(["\n  direction: ",";\n"])),(e=>e.isRTL?"rtl":"ltr")),my=E.Ay.section(cy||(cy=(0,z.A)(["\n  padding: "," "," ",";\n"])),we.v.space2,we.v.space2,we.v.space1),fy=E.Ay.h2(ly||(ly=(0,z.A)(["\n  margin: "," 0;\n  padding: "," 0;\n  text-align: center;\n  color: ",";\n  font-size: ",";\n  font-weight: ",";\n  letter-spacing: 0.1px;\n  line-height: 22px;\n  position: relative;\n  border-bottom: 1px solid ",";\n"])),we.v.space1,we.v.space4,(e=>e.theme.colorTextDefault),we.v.heading3FontSize,we.v.heavyFontWeight,(e=>e.theme.colorOutline1)),hy=(E.Ay.div(uy||(uy=(0,z.A)(["\n  border-bottom: 1px solid ",";\n  color: ",";\n  font-size: ",";\n  padding: "," 0 "," 0;\n  margin: 0 "," ",";\n"])),(e=>e.theme.colorOutline1),(e=>e.theme.colorTextDefault),(e=>e.theme.mainFontSize),we.v.space2,we.v.space5,we.v.space2,we.v.space2),E.Ay.button(dy||(dy=(0,z.A)(["\n  border: none;\n  background: none;\n  cursor: pointer;\n  font-size: 0;\n  color: ",";\n  border-radius: ",";\n  height: ",";\n  width: ",";\n  transition: 100ms ease;\n  position: absolute;\n  top: 0;\n  right: ",";\n  left: ","};\n  margin: 6px ",";\n  display: flex;\n  align-items: center;\n  \n  &:hover {\n    background-color: ",";\n  }\n  \n  ","\n  \n  ",";\n  \n  &:disabled {\n    pointer-events: none;\n  }\n"])),(e=>e.theme.colorIconDefault),(e=>e.theme.mainBorderRadius),we.v.space7,we.v.space7,(e=>e.isRTL?"auto":0),(e=>e.isRTL?0:"auto"),we.v.space2,(e=>e.theme.colorOutline1),(e=>e.pressed&&(0,E.AH)(gy||(gy=(0,z.A)(["\n      color: ",";\n      background-color: ",";\n    "])),e.theme.colorTextDefault,e.theme.colorOutline1)),(e=>e.theme.focusStyle))),Ey="default",vy="denied";function yy(){const{client:e}=(0,V.useClient)(),t=(0,F.Jt)(),{embedState:n}=(0,s.useEmbedState)(),{setSheetContent:r,closeSheetWithFocusTrap:o}=(0,Qo.ZJ)(),i=(0,W.mR)();let c=()=>{};const u=e.hasFeature(An.O.PUSH_NOTIFICATIONS),d="small"===(0,Pn.useTheme)().theme.scale?18:24,[p,f]=(0,g.useState)(!0);(0,l.a)()&&s.embedStore.getState().then((e=>e&&e.metaFields&&"IOS"===e.metaFields.sdkType&&f(!1)));const{translatedLanguages:h,language:E}=e,v=h.concat([E]),y=t.filter((e=>v.includes(e.code))).map((e=>({label:e.name,value:e.code}))),A=y.size>1,_=e.uiSettings.get("chat").get("emailTranscriptSetting"),S={[Ey]:i("ENABLE_NOTIFICATIONS"),granted:i("NOTIFICATIONS_ENABLED"),[vy]:i("NOTIFICATIONS_DISABLED")},b=n.notificationsPermission!==Ey,T=(0,$E.y)((0,m.d4)((e=>e))),C=()=>{s.fc.postMessage(a.Wd)},{isRTL:w}=(0,F.Wz)();return c=()=>{r(g.createElement(yy,null))},g.createElement(py,{id:"settings-menu",role:"dialog","aria-label":i("SETTINGS"),isRTL:w,"aria-modal":"true","aria-labelledby":i("SETTINGS")},g.createElement(fy,null,i("SETTINGS"),g.createElement(hy,{"data-testid":"CloseSettingsButton",type:"button","aria-label":i("CLOSE"),onClick:()=>o(),isRTL:w},g.createElement(Pn.CloseIcon,null))),g.createElement(my,null,p&&g.createElement(iy,null),T&&(b?g.createElement(Zt.m,{text:i("NOTIFICATIONS_TOOLTIP_TEXT")},g.createElement(KE,{disabled:b,text:S[n.notificationsPermission],icon:n.notificationsPermission===vy?g.createElement(Pn.BellSlashIcon,{size:d}):g.createElement(Pn.BellIcon,{size:d}),onClick:C})):g.createElement(KE,{disabled:b,text:S[n.notificationsPermission],icon:g.createElement(Pn.BellIcon,{size:d}),onClick:C})),u&&g.createElement(oy,{onBackClick:c}),A&&g.createElement(KE,{onClick:()=>{r(g.createElement(fv,{languageOptions:y.toJS()}),void 0,void 0,{focusTrapParams:{initialFocusId:void 0,returnFocusId:void 0},useFocusTrap:!0})},text:i("CHANGE_LANGUAGE"),icon:g.createElement(Pn.TranslateIcon,{size:d})}),_&&g.createElement(KE,{onClick:()=>{r(g.createElement(Qv,null),void 0,void 0,{focusTrapParams:{initialFocusId:void 0,returnFocusId:void 0},useFocusTrap:!0})},text:i("EMAIL_TRANSCRIPT"),icon:g.createElement(Pn.EnvelopeIcon,{size:d})}),g.createElement(Cv,null),g.createElement(ry,null)))}var Ay,_y,Sy=n(67129);function by(){const{activeConversation:e,endActiveConversation:t}=(0,K.VC)(),{client:n}=(0,V.useClient)(),{chatter:a}=(0,W.NC)(),i=(0,m.wA)(),{pageState:l}=(0,U.Sw)(),{closeSheet:u,setSheetContent:d}=(0,Qo.ZJ)(),p=(0,W.mR)(),{csatSettings:f,trackCsatShown:h}=(0,on.f4)(),{inLiveChat:E,endLiveChat:v,setAllAgentsToInactive:y}=de(),A=()=>{(0,c.E)()===r.y.Embed2?s.embedStore.dispatch("toggleChat"):window.parent.postMessage({closeChat:!0},(0,o.Bq)()),u()},_=!(!n.hasFeature(An.O.CSAT_V2)||!f||!e||!f.hasPostChatSurvey(n)||e.hasPostAgentCsatResult||e.hasAnswerFlowCsatResult||e.hadHandoff),S="live_chat_pending"===l.stateType?p("MESSAGE_IN_LIVE_CHAT_QUEUE"):"live_chat"===l.stateType?p("MESSAGE_IN_LIVE_CHAT"):p("END_CHAT_DIALOG_MESSAGE");return g.createElement(Ir,{title:p("END_CHAT_ACTION_LABEL"),description:S,buttons:[{label:p("END_CHAT_ACTION_LABEL"),type:"danger",size:"large",onClick:()=>{if(u(),!navigator.onLine&&E)(()=>{const e=l.isToastMessageVisible&&"ERROR"===l.toastType,t=l.toastMessage;i((0,U.tk)(p("END_LIVE_CHAT_WITH_NETWORK_DISRUPTION_MESSAGE"),"WARNING",!0)),e&&t&&i((0,U.tk)(t,"ERROR",!1))})();else{if(n.hasFeature(An.O.END_LIVE_CHAT)&&E)return y(),void v();a.isNew&&i((0,Sy.y)({isNew:!1})),setTimeout((()=>{y(),t()}),_?500:0),n.hasFeature(An.O.CSAT_V2)&&i((0,nn.fetchOneIfNeeded)(nn.ResourceType.CSAT_SETTINGS)),_?e&&(d(g.createElement(on.wI,{surveyType:rn.C.END_CHAT,onClose:A,onSubmit:A})),h(e.id,rn.C.END_CHAT)):A()}},disabled:n.hasFeature(An.O.CSAT_V2)&&!f,testid:"EndChat"},{label:p("CANCEL"),type:"link",onClick:u}]})}const Ty=E.Ay.button(Ay||(Ay=(0,z.A)(["\n  border: none;\n  background: none;\n  padding: 0;\n  cursor: pointer;\n  font-size: 0;\n  color: ",";\n  border-radius: ",";\n  height: 32px;\n  width: 32px;\n  transition: 100ms ease;\n\n  &:hover {\n    background-color: ",";\n  }\n\n  ","\n\n  ",";\n\n  &:disabled {\n    pointer-events: none;\n  }\n"])),(e=>e.theme.colorIconDefault),(e=>e.theme.mainBorderRadius),(e=>e.theme.colorOutline1),(e=>e.pressed&&(0,E.AH)(_y||(_y=(0,z.A)(["\n      color: ",";\n      background-color: ",";\n    "])),e.theme.colorTextDefault,e.theme.colorOutline1)),(e=>e.theme.focusStyle));var Cy,wy,Iy;const xy=E.Ay.div(Cy||(Cy=(0,z.A)(["\n  height: 100%;\n  display: flex;\n  align-items: center;\n  margin: 0 -",";\n"])),we.v.space1),Ry=E.Ay.div(wy||(wy=(0,z.A)(["\n  padding: 0 ",";\n"])),we.v.space1),ky=E.Ay.div(Iy||(Iy=(0,z.A)(["\n  margin: 0 ",";\n"])),we.v.space1);function Oy(){const{client:e}=(0,V.useClient)(),{pageState:t}=(0,U.Sw)(),{endActiveConversation:n}=(0,K.VC)(),a=(0,W.mR)(),i=(0,m.d4)(tn.ne),l=(0,m.wA)(),{setSheetContent:u,closeSheet:d}=(0,Qo.ZJ)(),{errorType:p}=t,f=()=>{(0,c.E)()===r.y.Embed2?s.embedStore.dispatch("toggleChat"):window.parent.postMessage({closeChat:!0},(0,o.Bq)()),d()},h=i&&!("CHAT_OUTAGE_MID_CONVERSATION"===p),E=()=>{(()=>{if(l((0,v.dequeueAllMessagesInQueueAtOnceAction)()),h){if(e.hasFeature(An.O.END_LIVE_CHAT)&&t.get("hasActiveConversationLiveChatBeenEndedByUser"))return n(),void f();u(g.createElement(by,null)),e.hasFeature(An.O.CSAT_V2)&&(l((0,nn.fetchOneIfNeeded)(nn.ResourceType.CSAT_SETTINGS)),l((0,K.bJ)()))}else f()})()};return g.createElement(xy,null,t.get("showCloseButton")?g.createElement(g.Fragment,null,g.createElement(ky,null,g.createElement(mm.m_,{text:a("MINIMIZE_CHAT_ACTION_LABEL")},g.createElement(Ty,{type:"button","aria-label":a("MINIMIZE_CHAT_ACTION_LABEL"),onClick:()=>{f()}},g.createElement(Pn.MinimizeIcon,null)))),g.createElement(ky,null,g.createElement(mm.m_,{text:a(h?"END_CHAT_ACTION_LABEL":"CLOSE")},g.createElement(Ty,{"data-testid":"CloseButton",type:"button","aria-label":a(h?"END_CHAT_ACTION_LABEL":"CLOSE"),onClick:E},g.createElement(Pn.CloseIcon,null))))):g.createElement(Ry,null,g.createElement(ae.X,{size:"small",buttonType:"secondary",text:a("END_CHAT_ACTION_LABEL"),disabled:!h,onClick:E,testid:"EndChatButton"})))}var Ny,Ly,My,Dy,Fy,Uy,zy;const Py=(0,E.i7)(Ny||(Ny=(0,z.A)(["\n  from {\n    opacity: 0;\n  }\n\n  to {\n    opacity: 1;\n  }\n"]))),Gy=E.Ay.div(Ly||(Ly=(0,z.A)(["\n  direction: ",";\n  height: 56px;\n  display: flex;\n  align-items: center;\n  padding: 0 ",";\n  background: ",";\n  color: ",";\n  min-width: ","px;\n  box-sizing: border-box;\n  z-index: 3; // Topbar need to be placed above the Toast component for animation to work\n\n  ","\n"])),(e=>e.isRTL?"rtl":"ltr"),we.v.space5,(e=>e.theme.headerColor),(e=>e.theme.colorTextDefault),Pn.MIN_UI_WIDTH,(e=>(0,E.AH)(My||(My=(0,z.A)(["\n    ","\n  "])),e.appear&&(0,E.AH)(Dy||(Dy=(0,z.A)(["\n      animation: 500ms "," ease-out;\n    "])),Py)))),Hy=E.Ay.div(Fy||(Fy=(0,z.A)(["\n  margin-left: auto;\n  transition: opacity 200ms ease;\n"]))),By=E.Ay.h1(Uy||(Uy=(0,z.A)(["\n  margin: 0 ",";\n  display: inline-flex;\n  align-items: center;\n  flex: 1 1 0;\n  min-width: 0;\n"])),we.v.space2),Zy=E.Ay.span(zy||(zy=(0,z.A)(["\n  color: ",";\n  font-size: ",";\n  padding: 0 ",";\n  font-weight: ",";\n  display: inline-block;\n  align-items: center;\n  overflow: hidden;\n  white-space: nowrap;\n  flex: 1 1 0;\n  text-overflow: ellipsis;\n\n  @media only screen and (max-width: 339px) {\n    display: none;\n  }\n"])),(e=>e.theme.colorTextEmphasized),(e=>e.theme.mainFontSize),we.v.space2,we.v.mediumFontWeight);function Wy(){var e,t;const{client:n}=(0,V.useClient)(),{headerTheme:a,theme:r}=(0,Pn.useTheme)(),o=(0,W.mR)(),{setSheetContent:i,sheet:c}=(0,Qo.ZJ)(),{activeAgent:l,inLiveChat:u}=de(),{embedState:d}=(0,s.useEmbedState)(),{pageState:p}=(0,U.Sw)(),{withChatterLanguage:m}=(0,W.He)(),{isRTL:f}=(0,F.Wz)(),[h,v]=(0,g.useState)(""),[y,A]=(0,g.useState)("");(0,g.useEffect)((()=>{const e=e=>{("development"===window.__env.NODE_ENV||"production"===window.__env.NODE_ENV&&"".concat(e.origin,"/")===oh())&&"GUIDANCE_TESTING"===e.data.type&&v(e.data.body),("development"===window.__env.NODE_ENV||"production"===window.__env.NODE_ENV&&"".concat(e.origin,"/")===oh())&&"PROCESS_TESTING"===e.data.type&&A(e.data.body)};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}}),[]);const _="CHAT_OUTAGE_MID_CONVERSATION"===p.errorType,S=m(n.uiSettings.get("chat").get("botName"))||"",b=(null===(e=d.metaFields)||void 0===e?void 0:e.guidance_id)&&p.isTestBot&&h,T=(null===(t=d.metaFields)||void 0===t?void 0:t.process_id)&&p.isTestBot&&y;return g.createElement(E.NP,{theme:a},g.createElement(Gy,{appear:d.isDrawerOpen,isRTL:f},g.createElement(Zt.m,{text:o("SETTINGS"),disabled:"settings"===c.name||_},g.createElement(Ty,{id:"settings-menu-button",type:"button",pressed:"settings"===c.name,"aria-label":o("SETTINGS"),"aria-controls":"settings-menu",onClick:()=>{i(g.createElement(yy,null),"settings",void 0,{focusTrapParams:{initialFocusId:void 0,returnFocusId:"settings-menu-button"},useFocusTrap:!0})},disabled:_||"settings"===c.name},g.createElement(Pn.MenuIcon,null))),u&&l?g.createElement(By,null,g.createElement(E.NP,{theme:r},g.createElement(fo,{agentInfo:l})),g.createElement(Zy,null,l.name)):g.createElement(By,{"aria-hidden":!S},g.createElement(E.NP,{theme:r},g.createElement(fo,{outlineColor:a.headerColor===r.themeColor?a.colorOutline3:void 0})),g.createElement(Zy,null,S)),g.createElement(Hy,null,g.createElement(Oy,null))),b&&g.createElement(UE,{title:"",description:h}),T&&g.createElement(UE,{title:"",description:y}))}var Vy;function Ky(){return Ky=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ky.apply(this,arguments)}var jy,qy,Xy,Qy,Yy,Jy,$y,eA=e=>g.createElement("svg",Ky({xmlns:"http://www.w3.org/2000/svg",width:48,height:48,fill:"none"},e),Vy||(Vy=g.createElement("path",{fill:"#B2B6C1",d:"M32.283 17c.29.111.6.166.91.164h9.334a2.334 2.334 0 0 0 0-4.667h-3.71l7.676-7.677a2.332 2.332 0 1 0-3.29-3.29l-7.676 7.654v-3.71a2.333 2.333 0 0 0-4.667 0v9.333c-.003.311.053.62.163.91A2.334 2.334 0 0 0 32.283 17Zm9.077 9.334c-.513 0-1.05-.164-1.563-.28a22.029 22.029 0 0 1-3.057-.91 4.666 4.666 0 0 0-5.787 2.333l-.513 1.05a28.417 28.417 0 0 1-6.207-4.667 28.419 28.419 0 0 1-4.666-6.206l.98-.654a4.667 4.667 0 0 0 2.333-5.786 24.099 24.099 0 0 1-.91-3.057 17.3 17.3 0 0 1-.28-1.587 7 7 0 0 0-7-5.81h-7a7 7 0 0 0-7 7.957 44.334 44.334 0 0 0 38.547 38.407h.886a7 7 0 0 0 4.667-1.774 6.999 6.999 0 0 0 2.333-5.25v-7a7 7 0 0 0-5.763-6.766Zm1.167 14a2.334 2.334 0 0 1-.794 1.75 2.473 2.473 0 0 1-1.913.583A39.666 39.666 0 0 1 5.497 8.18a2.543 2.543 0 0 1 .583-1.913 2.333 2.333 0 0 1 1.75-.793h7a2.333 2.333 0 0 1 2.333 1.843c.094.638.21 1.268.35 1.89a25.95 25.95 0 0 0 1.074 3.617L15.32 14.34a2.334 2.334 0 0 0-1.143 3.104A33.81 33.81 0 0 0 30.51 33.777a2.333 2.333 0 0 0 1.773 0 2.334 2.334 0 0 0 1.33-1.213l1.447-3.267a31.93 31.93 0 0 0 3.687 1.073c.622.14 1.252.257 1.89.35a2.334 2.334 0 0 1 1.843 2.334l.047 7.28Z"}))),tA=n(19574);const nA=E.Ay.div(jy||(jy=(0,z.A)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  width: 100%;\n"]))),aA=E.Ay.span(qy||(qy=(0,z.A)(["\n  margin-top: 30px;\n  font-size: ",";\n  font-weight: 700;\n  line-height: 150%;\n  color: ",";\n"])),we.v.smallFontSize,we.c.colorBlack0),rA=E.Ay.span(Xy||(Xy=(0,z.A)(["\n  margin-top: ",";\n  font-size: ",";\n  font-weight: ",";\n  color: #595f70;\n  line-height: 150%;\n"])),we.v.space1,we.v.smallFontSize,we.v.normalFontWeight),oA="#E81641",iA="#D1D5DE",sA=E.Ay.input(Qy||(Qy=(0,z.A)(["\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 6px 8px;\n  gap: ",";\n  width: 235px;\n  height: 36px;\n  background: ",";\n  border: 1px solid ",";\n  border-radius: 8px;\n  margin-top: 18px;\n  margin-bottom: ",";\n  font-size: ",";\n\n  ::placeholder {\n    font-style: italic;\n  }\n\n  :focus {\n    outline: none;\n  }\n"])),we.v.space2,we.c.colorWhite0,(e=>{let{isInvalid:t}=e;return t?oA:iA}),(e=>{let{isInvalid:t}=e;return t?we.v.space1:we.v.space6}),we.v.smallFontSize),cA=E.Ay.div(Yy||(Yy=(0,z.A)(["\n  font-weight: ",";\n  font-size: ",";\n  line-height: 120%;\n  color: ",";\n  margin-bottom: ",";\n  width: 235px;\n  text-align: left;\n"])),we.v.normalFontWeight,we.v.xSmallFontSize,oA,we.v.space5),lA=E.Ay.button(Jy||(Jy=(0,z.A)(["\n  border: none;\n  outline: none;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 0px 16px;\n  gap: ",";\n  width: 235px;\n  height: 36px;\n  background: #e7bb56;\n  border-radius: 8px;\n  font-size: ",";\n  font-weight: ",";\n  color: ",";\n\n  :disabled,\n  :active {\n    background: #edeff2;\n    color: ",";\n  }\n"])),we.v.space1,we.v.smallFontSize,we.v.heavyFontWeight,we.c.colorBlack0,iA),uA=E.Ay.select($y||($y=(0,z.A)(["\n  width: 235px;\n  padding: 8px 10px;\n  border: 2px solid #ccc; /* Light grey border */\n  border-radius: 8px; /* Rounded borders */\n  background-color: white;\n  margin-top: 38px;\n  box-sizing: border-box; /* Include padding and border in width and height */\n  transition: border-color 0.3s;\n\n  &:hover {\n    border-color: #888; /* Darken border when hovered */\n  }\n\n  &:focus {\n    border-color: #0056b3; /* Blue border for focus */\n    outline: none; /* Remove default focus outline */\n  }\n"])));var dA,gA,pA,mA,fA=(0,m.Ng)(null,(function(e){return{handleVoiceCall:(0,C.zH)(tA.l$,e)}}))((function(e){let{handleVoiceCall:t}=e;const[n,a]=(0,g.useState)((0,tA.vt)()||""),[r,o]=(0,g.useState)(!1),[i,s]=(0,g.useState)("Call"),[c,l]=(0,g.useState)(!n),[u,d]=(0,g.useState)([]),[p,m]=(0,g.useState)([]),[f,h]=(0,g.useState)("en-US"),E=e=>"".concat(e.language_code,"-").concat(e.language_locale);(0,g.useEffect)((()=>{(async()=>{const[e,t]=await(async()=>{try{const e=await $.FH.get("/voice/languages/language_mappings");let t=[];return e.data instanceof Array&&(t=e.data,t=t.filter((e=>e.enabled))),[t,!0]}catch(e){return[[],!1]}})(),[n,a]=await(async()=>{try{const e=await $.FH.get("/voice/languages/supported_languages");let t=[];return e.data instanceof Array&&(t=e.data),[t,!0]}catch(e){return[[],!1]}})(),[r,o]=await(async()=>{try{const e=await $.FH.get("/voice/languages/call_routings");let t=[];return e.data instanceof Array&&(t=e.data),t=t.map((e=>{const{client_id:t,...n}=e;return n})),[t,!0]}catch(e){return[[],!1]}})();t&&m(e),a&&d(n),t&&a&&o&&((e,t,n)=>{if(n.length>0&&e.length>0){var a;const r=null===(a=n[0])||void 0===a?void 0:a.language_mapping_id,o=e.filter((e=>e.id===r))[0],i=t.filter((e=>e.id===o.language_id));h(E(i[0]))}})(e,n,r)})()}),[]);const v=e=>u.filter((t=>t.id===e)),y=e=>{const t=v(e)[0];return E(t)};return g.createElement(nA,null,g.createElement(eA,null),g.createElement(aA,null,"Test phone calls"),g.createElement(rA,null,"Enter your phone number to receive a call "),g.createElement(uA,{value:f,onChange:e=>{h(e.target.value)}},u.length>0&&p.map((e=>g.createElement("option",{key:e.language_id,value:y(e.language_id)},(e=>{const t=v(e)[0],n=t.language_name.split(" ")[0],a=t.language_name.split(" ").slice(1).join(" ");return"".concat(n," / ").concat(a," (").concat(t.language_code,"-").concat(t.language_locale,")")})(e.language_id))))),g.createElement(sA,{value:n,isInvalid:r,placeholder:"Phone number",type:"tel",onChange:e=>{const t=e.target.value;a(t);const n=/[a-zA-Z]/.test(t);o(n),l(!t||n)}}),r&&g.createElement(cA,null,"Please enter a valid phone number"),g.createElement(lA,{disabled:c,type:"button",onClick:()=>{t(n,f),s("Calling..."),l(!0),setTimeout((()=>{s("Call"),l(r)}),5e3)}},i))}));const hA=(0,E.i7)(dA||(dA=(0,z.A)(["\n  from { transform: rotate(0deg); }\n  to { transform: rotate(360deg); }\n"]))),EA=E.Ay.div(gA||(gA=(0,z.A)(["\n  display: flex;\n  flex-direction: column;\n  flex: 1 1 0px;\n  position: relative;\n  min-width: ",";\n  ","\n"])),we.v.minScreenSize,(e=>"background-color: ".concat(e.theme.colorSurfaceDefault,";"))),vA=E.Ay.div(pA||(pA=(0,z.A)(["\n  border: 2px solid ",";\n  border-bottom: 2px solid transparent;\n  border-radius: 50%;\n  width: 18px;\n  height: 18px;\n  animation: "," 1s linear infinite;\n"])),(e=>e.theme.colorIconDefault),hA),yA=E.Ay.div(mA||(mA=(0,z.A)([""]))),AA=g.lazy((()=>n.e(3568).then(n.bind(n,13568)))),_A="Container";class SA extends g.Component{constructor(){super(...arguments),(0,y.A)(this,"onMessageEventBound",this.onMessageEvent.bind(this)),(0,y.A)(this,"state",{lightboxMessage:null})}static getReadOrder(e){return[0,5,10,15,20,25][e]}static focusInputElement(){const e=document.getElementById("message-input");e&&e.focus()}static blurInputElement(){const e=document.getElementById("message-input");e&&e.blur()}componentDidMount(){window.addEventListener("keydown",this.handleKeyDown.bind(this))}componentDidUpdate(e){const{chatter:t,proactiveMessages:n}=this.props;e.chatter.get("language")!==t.get("language")&&(document.documentElement.lang=t.get("language")),e.proactiveMessages.length&&!n.length&&(s.embedStore.dispatch("setState",{chatDimensions:{height:0,width:0}}),(0,Gm.S)(t.get("token"),{metaFields:{introShown:!0}}))}componentDidCatch(e,t){(0,J.Up)(e,t)}componentWillUnmount(){window.removeEventListener("keydown",this.handleKeyDown.bind(this))}onMessageEvent(e){const{client:t}=this.props,n=t.get("isMobile"),a=e.data;if("object"==typeof a&&a.ada&&!n)switch(a.ada){case"focus":SA.focusInputElement();break;case"blur":SA.blurInputElement()}}get shouldShowTopBar(){const{client:e,chatter:t}=this.props,{lightboxMessage:n}=this.state;return!e.hasFeature(An.O.FREE_TIER_PLAN)&&!t.saml.get("locked")&&!n&&(!!e.hasFeature(An.O.END_CHAT)||e.shouldShowBranding)}collapseChat(){(0,c.E)()===r.y.Embed2?s.embedStore.dispatch("toggleChat"):window.parent.postMessage({closeChat:!0},(0,o.Bq)()),(0,l.a)()||window.close()}handleKeyDown(e){const{pageState:t}=this.props;"Escape"===e.key&&t.get("showCloseButton")&&this.collapseChat()}renderInnerContent(){const{client:e,chatter:t,t:n,handleUnlockSAML:a}=this.props;return t.getIn(["saml","locked"])?g.createElement(EA,{role:"main","aria-label":"Messages"},g.createElement("div",{className:"".concat(_A,"--full-screen-message")},g.createElement("div",{className:"".concat(_A,"__SAML-gate__container")},g.createElement("h2",{className:"".concat(_A,"__SAML-gate__header")},e.samlLoginButton.get("header")||n("PLEASE_SIGN_IN")),g.createElement("div",{className:"".concat(_A,"__SAML-gate__message")},e.samlLoginButton.get("headerMessage")||n("THIS_CHAT_APP_REQUIRES_YOU_TO_AUTHENTICATE")),g.createElement(w.A,{customClassName:"".concat(_A,"__SAML-gate__button"),type:"submit",accessKey:"n",title:e.samlLoginButton.get("title")||n("CONTINUE_TO_SIGN_IN"),text:e.samlLoginButton.get("text")||n("CONTINUE_TO_SIGN_IN"),onClick:a,tint:e.samlLoginButton.get("backgroundColor"),fontFamily:e.samlLoginButton.get("fontFamily")})))):g.createElement(EA,{role:"main","aria-label":"Messages",className:_()({["".concat(_A,"__message-container__inner")]:!1})},g.createElement(Rf,null))}renderWebChat(){const{pageState:e}=this.props,t=e.get("showNavBar");return g.createElement(yA,{id:"message-container",className:_()("".concat(_A,"__message-container"))},t&&g.createElement(Hh,null),this.shouldShowTopBar&&g.createElement(Wy,null),this.renderInnerContent(),g.createElement(NE,null))}renderFocusTrappableContent(){const{pageState:e,client:t}=this.props,n=e.get("testBotModality"),a=e.get("isTestBot");return g.createElement(yA,{id:"message-container",className:_()("".concat(_A,"__message-container"))},(()=>a&&n===U.mv&&t.hasFeature(An.O.EXPERIMENT_VOICE)?g.createElement(g.Fragment,null,g.createElement(Hh,null),g.createElement(fA,null)):this.renderWebChat())())}renderContent(){const{pageState:e,proactiveMessages:t,client:n,embedState:a,t:r}=this.props,{lightboxMessage:o}=this.state,i=(()=>e.get("chatEnabled")?e.get("hasErrors")&&"CHAT_OUTAGE_MID_CONVERSATION"!==e.errorType?g.createElement(Wf,{errorType:e.errorType}):e.get("loading")||!e.get("socketConnected")?g.createElement("div",{className:"Container--full-screen-message",id:"page-loader"},g.createElement(T.Iu,{"aria-live":"polite",message:r("MESSAGES_ARE_LOADING")}),g.createElement(vA,null)):"Firefox"===(0,B.c)()?this.renderFocusTrappableContent():g.createElement(b(),{focusTrapOptions:{initialFocus:!1},active:!o&&a.isDrawerOpen},this.renderFocusTrappableContent()):g.createElement(Wf,{errorType:"BOT_DISABLED"}))();return!a.isDrawerOpen&&a.embed2Enabled&&n.hasFeature(An.O.AFM_PROACTIVE_MESSAGING)&&t.length?g.createElement(AE,null):g.createElement(Gf,{onMessageEvent:this.onMessageEventBound},i)}render(){const{theme:e}=this.props;return g.createElement(E.NP,{theme:e},g.createElement(h.dO,null,g.createElement(h.qh,{path:"/c/:conversationId/:chatterToken"},g.createElement(g.Suspense,{fallback:""},g.createElement(AA,null))),g.createElement(h.qh,{path:"/"},this.renderContent())))}}const bA=(0,m.Ng)((function(e){const{client:t,chatter:n,pageState:a,embedState:r}=e;return{proactiveMessages:(0,Zh.En)(e),client:t,chatter:n,pageState:a,embedState:r,t:(0,Dt.Nj)(n.language),theme:(0,Pn.getUiThemeSelector)(e)}}),(function(e){return{handleUnlockSAML:(0,C.zH)(v.handleUnlockSAML,e)}}))(SA);var TA=n(1265);const CA="SET_CHATTER",wA="SET_LANGUAGE_SUCCESS",IA="GET_USER_LANGUAGE_SUCCESS",xA="UPDATE_CHATTER_CHAT_MODEL_SUCCESS",RA="TOGGLE_MESSAGE_ALERT_SOUND_SUCCESS",kA="TOGGLE_DEVICE_NOTIFICATIONS",OA="TOGGLE_SMS_NOTIFICATIONS",NA="SAML_GATE_TOGGLE_SUCCESS";var LA=n(51978),MA=n(16665);const DA=(0,u.tZ)("browserEvents");function FA(e){DA.info("Chatter browser event",{event:{...e.payload}})}var UA=n(74266),zA=n(40622),PA=n(70215);const GA="ENQUEUE_ASYNC_ACTION",HA="DEQUEUE_ASYNC_ACTION";function BA(e){return{type:GA,payload:{asyncAction:(t=e,async(e,n,a)=>{try{return await t(e,n,a)}finally{e({type:HA,payload:{}})}})}};var t}var ZA=n(68291);let WA;const VA=(WA||(WA=(0,u.tZ)("liveagent")),WA);function KA(e){const t={inLiveChat:e,eventType:"live_chat_update"},n=(0,c.E)();n===r.y.Embed1?window.parent.postMessage(t,(0,o.Bq)()):n===r.y.Embed2&&s.fc.postMessage(a.oF,t)}const jA=e=>e===te.YR;function qA(e){ee.I.store("inLiveChat",e)}function XA(e){ee.I.store("liveChatPending",e)}function QA(e,t){ee.I.store(te.Zh,Date.now()+te.Y),s.fc.postMessage(a.Sp,{title:e(t.type,{agent_name:t.payload.agent.name})}),VA.info(t.type,{agent_name:t.payload.agent.name})}var YA=n(75887),JA=n(25446),$A=n(75520),e_=n(95164),t_=n(40046),n_=n(89009),a_=n(83822);function r_(e,t){e!==Tu.vP&&e!==Tu.gq||t(Nt.Iv(t_.F4,{}))}var o_=n(57593);const i_=(0,se.bN)();var s_=n(26969),c_=n(83877),l_=n(94155),u_=n(32725),d_=n(75073),g_=n(86697),p_=n(79667),m_=n(9432);const f_=(0,se.bN)(),h_=e=>t=>{e(BA(bf.oJ(t)))},E_={onConnecting:h_,onConnected:h_,onClosed:h_,onError:e=>t=>{e(bf.BO(t.detail))},onQueuePosition:e=>t=>{const{position:n}=t.detail,a={conversation_state:ee.I.retrieve("inLiveChat")?"live_chat":"live_chat_pending",external_conversation_id:ee.I.retrieve("zdSessionId")||void 0,operation_tag:te.ll.INITIATE_HANDOFF};f_.info("Zendesk Queue: Received queue position event",{position:n,...a}),e(BA(bf.lm(n)))},onChatterBanned:e=>()=>{e(BA(bf.$X("live_chat_chatter_banned")))},onIdleDisconnect:e=>()=>{e(BA(bf.$X("live_chat_idle_disconnect")))},onDepartmentOffline:e=>()=>{e(BA(bf.$X("live_chat_department_offline")))},onAccountOffline:e=>()=>{e(BA(bf.$X("live_chat_account_offline")))},onAgentJoin:e=>t=>{e(BA(bf.XY(t.detail)))},onAgentLeave:e=>t=>{e(BA(bf.gW(t.detail)))},onAgentUpdate:function(e){return t=>{e(BA(bf.Kn(t.detail)))}},onAgentMessage:function(e){return t=>{const{memberData:n,message:a,timestamp:r}=t.detail;e(BA(bf.G7(n,a,r)))}},onAgentTyping:function(e){return t=>{const{memberData:n,typing:a}=t.detail;e(BA(bf.Xl(a,n)))}},onAgentFile:function(e){return t=>{e(BA(bf.xw(t.detail)))}}},v_=(0,se.bN)();function y_(e){return!!e.inLiveChat&&e.adaGlassEnv===te.Gh}function A_(e,t){const{client:n,chatter:a,chatterStorage:r,liveAgent:o,pageState:i}=e;return{chatterToken:a.get("token"),clientHandle:n.get("handle"),sessionId:i.get("sessionID"),zdSessionId:r.zdSessionId,conversation_state:o.inLiveChat?"live_chat":"live_chat_pending",external_conversation_id:o.zendesk.sessionId||"",operation_tag:t}}let __;const S_={hasSetGlobalLoggerContext:!1},b_={zdCid:null,zdCStore:null,zdSessionId:null};var T_=n(34632),C_=n(12178);function w_(e){return e.inPending||e.inLiveChat?{...e,isActive:!0}:{...e,isActive:!1}}function I_(e,t,n){return{...e,agents:{...e.agents,[t]:n}}}function x_(e,t,n){return{...e,agents:{...e.agents,[t]:{...e.agents[t],...n}}}}function R_(e,t,n){let a={};return a=e.zendeskAgents[t]?{...e.zendeskAgents[t],...n}:n,{...e,zendeskAgents:{...e.zendeskAgents,[t]:a}}}function k_(e,t){return{...e,zendeskMessaging:{...e.zendeskMessaging,...t}}}const O_=(e,t)=>{const n=e.zendeskMessaging.errorCounts[t]||0;return{...e.zendeskMessaging.errorCounts,[t]:n+1}},N_=(e,t)=>{const n=e.zendeskMessaging.failedMessageErrors[t]||0;return{...e.zendeskMessaging.failedMessageErrors,[t]:n+1}},L_=(e,t)=>{const{failedMessageErrors:n}=e.zendeskMessaging;return delete n[t],n};var M_=n(97757);function D_(e,t){return{...e,zendesk:{...e.zendesk,...t}}}const F_=(0,T_.A)(PA.I4,(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:PA.I4,t=arguments.length>1?arguments[1]:void 0,n=e;switch(t.type){case t_.bk:return"live_chat"===t.payload.stateType?n={...n,inLiveChat:t.payload.inState}:"live_chat_pending"===t.payload.stateType&&(n={...n,inPending:t.payload.inState}),w_(n);case t_.yC:return{...n,platformData:(0,C_.o)(t.payload.platformData)};case t_.Fh:return{...n,adaGlassEnv:t.payload.adaGlassEnv};case t_.Ph:return R_(n,t.payload.memberId,{timestamp:t.payload.timestamp});case t_.bt:return R_(n,t.payload.id,t.payload.data);case t_.u8:return delete n.zendeskAgents[t.payload.id],n;case t_.aq:return{...n,inLiveChat:!0,agents:{...n.agents,[t.payload.agent.internal_id]:(0,PA.SO)((0,C_.o)(t.payload.agent))}};case t_._r:return n.agents[t.payload.agent.internal_id]?x_(n,t.payload.agent.internal_id,{isActive:!1}):n;case t_.eu:return n.agents[t.payload.agentId]&&(n=x_(n,t.payload.agentId,{isTyping:t.payload.isTyping})),n;case t_.Or:return n.agents[t.payload.agent.internal_id]&&(n=x_(n,t.payload.agent.internal_id,(0,C_.o)(t.payload.agent))),n;case t_.kE:return t.payload.agents.forEach((e=>{n.agents[e.internal_id]||(n=I_(n,e.internal_id,(0,PA.SO)((0,C_.o)(e))))})),n;case t_.ix:return Object.keys(n.agents).forEach((e=>{n.agents[e]={...n.agents[e],isActive:!1}})),n;case t_.je:return{...n,fileTransfer:(0,C_.o)(t.payload.fileTransfer)};default:return e}}),(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:PA.I4,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c_.uS:return D_(e,{primarySession:t.payload.externalChatId});case d_.e2:return D_(e,{departmentStatus:Rr.jK});case d_.Qq:return D_(e,{departmentStatus:Rr.fu});case l_.V_:return D_(e,{connectionStatusTimeoutId:t.payload.connectionStatusTimeoutId});case l_.vS:return D_(e,{disconnected:!0,lastProcessedTimestamp:e.platformData.lastProcessedTimestamp});case l_.GK:return D_(e,{connectionStatusTimeoutId:null,disconnected:!1,sdkInitializedSuccessfully:!0});case c_.Ci:return D_(e,{reconnecting:!0,lastProcessedTimestamp:e.platformData.lastProcessedTimestamp});case c_.l_:return D_(e,{reconnecting:!1});case u_.tB:return D_(e,{adaVisitorInfo:t.payload.adaVisitorInfo});case d_.nn:return D_(e,{departmentId:t.payload.departmentId});case c_.$L:return D_(e,{transcript:null});case c_.wO:return D_(e,{transcript:t.payload.batchedTranscript,primarySession:t.payload.externalChatId});case c_.nJ:return D_(e,{lastProcessedTimestamp:t.payload.lastProcessedTimestamp,primarySession:t.payload.externalChatId});case c_.dW:return D_(e,{sessionId:t.payload.zendeskSessionId});case c_.iE:return D_(e,{tags:t.payload.tags});case c_.J5:return D_(e,{previouslyConnected:t.payload.previouslyConnected});case u_.gq:case u_.Ph:return D_(e,{agents:{...e.zendesk.agents,[t.payload.agentId]:{agentId:t.payload.agentId,displayName:t.payload.displayName,timestamp:t.payload.timestamp}}});case u_.RE:case u_.u8:return D_(e,{agents:Qf()(e.zendesk.agents,[t.payload.id])});case u_.bt:return e.zendesk.agents[t.payload.agentId]?D_(e,{agents:{...e.zendesk.agents,[t.payload.agentId]:{...e.zendesk.agents[t.payload.agentId],...t.payload}}}):e;case c_.ZM:return{...PA.I4,zendesk:{...PA.I4.zendesk,sdkInitializedSuccessfully:e.zendesk.sdkInitializedSuccessfully}};case M_.x:{const{fatalRequestErrorReached:n}=t.payload;return D_(e,{fatalRequestErrorReached:n})}default:return e}}),(function(){var e,t,n;let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:PA.I4,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case JA.M2:return k_(a,{errorCounts:O_(a,"events")});case JA.uh:return k_(a,{initializationStatus:JA.DC.Uninitialized});case JA.fC:return k_(a,{initializationStatus:JA.DC.Uninitialized,errorCounts:O_(a,"sdkDestroy")});case JA.Vj:return k_(a,{isDisconnected:!1,isReconnecting:!1});case JA.fI:return k_(a,{isDisconnected:!0});case JA.hB:return k_(a,{isDisconnected:!0,isReconnecting:!0});case JA.zS:return k_(a,{auth:{integrationId:(null===(e=r.payload)||void 0===e?void 0:e.integrationId)||"",externalId:(null===(t=r.payload)||void 0===t?void 0:t.externalId)||"",jwt:(null===(n=r.payload)||void 0===n?void 0:n.jwt)||""}});case JA.EW:return k_(a,{auth:null});case JA.Fk:return k_(a,{suncoConvoId:r.payload.suncoConvoId});case JA.i_:return k_(a,{suncoConvoId:null,errorCounts:O_(a,"loadConversation")});case JA._v:return r.payload.messageId?k_(a,{failedMessageErrors:N_(a,r.payload.messageId)}):a;case JA.Ly:return r.payload.messageId?k_(a,{failedMessageErrors:L_(a,r.payload.messageId)}):a;default:return a}}),(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:PA.I4,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case GA:return{...e,asyncActionQueue:e.asyncActionQueue?e.asyncActionQueue.concat([t.payload.asyncAction]):[t.payload.asyncAction]};case HA:return{...e,asyncActionQueue:e.asyncActionQueue?e.asyncActionQueue.slice(1):[]};default:return e}}));var U_=n(68414),z_=n.n(U_);const P_={queue:[],isDequeuing:!1},G_={global:{...P_}},H_=new W.lX,B_=new V.ClientRecord;class Z_ extends(Tt.mS({id:null,chatterId:null,clientId:null,active:!1})){}class W_ extends(Tt.mS({code:"",name:"",englishName:"",validBotLanguage:!1})){}const V_=Tt.B8();class K_ extends(Tt.Ay.Record({loading:!1})){}const j_=new K_;var q_=n(34282),X_=n(53847);const Q_=new U.jK;function Y_(e,t){if(function(e,t){const{stateData:n}=e,a=t.stateType||"",r=[Z.CONVERSATION_STATE_CAPTURE,Z.CONVERSATION_STATE_LIST_SELECTION].includes(a);if(!n||!r)return!1;const o=n.data_id,i=t.inState;return o!==t.stateData.data_id&&!i}(e,t.payload))return e;let n=e.merge(t.payload);if("live_chat"===t.payload.stateType){const e=!t.payload.inState;n=n.merge({hasActiveConversationLiveChatBeenEndedByUser:e})}return t.payload.inState?n:n.merge({stateType:null,stateData:{}})}const J_=(0,C.HY)({actionQueues:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ENQUEUE_ACTION":{const n=e,a=e[t.stack]||P_,r={...a,queue:[...a.queue,{action:t.action,delayBefore:t.delayBefore,delayAfter:t.delayAfter,id:z_()()}]};return n[t.stack]=r,n}case"DEQUEUE_START":{const n=e,a={...n[t.stack],isDequeuing:Boolean(n[t.stack].queue.length)};return n[t.stack]=a,n}case"DEQUEUE_FINISH":{const n=e,a=n[t.stack].queue[0];if(!a)return e;if(t.id!==a.id)return e;const r={...n[t.stack],queue:n[t.stack].queue.slice(1),isDequeuing:Boolean(n[t.stack].queue.length>1)};return n[t.stack]=r,n}case"REMOVE_QUEUE_DELAYS":{const n=e,a={...n[t.stack],queue:n[t.stack].queue.map((e=>({...e,delayBefore:0,delayAfter:0})))};return n[t.stack]=a,n}default:return e}},currentMessage:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_MESSAGE":return t.message;case"ADD_MESSAGE":return t.buttonType?e:"";case"DELETE_MESSAGES":return"";default:return e}},dockedSheet:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;return t.type===x?{content:t.content}:e},embedState:s.embedStateReducer,messages:q_.P_,resources:nn.resourcesReducer,sheet:Qo.cB,browserEvents:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case LA.b9:return{hasSetGlobalLoggerContext:!0};case LA.KL:return{hasSetGlobalLoggerContext:!1};default:return e}},chatterStorage:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CHATTER_STORAGE":return{...e,...t.payload};case"REMOVE_CHATTER_STORAGE":{const n=t.payload;return{...e,[n]:b_[n]}}case"RESET_CHATTER_STORAGE":return b_;default:return e}},client:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B_,t=arguments.length>1?arguments[1]:void 0;if("SET_CLIENT"===t.type){const n=navigator.language||navigator.userLanguage,a="fr"===n||"fr-ca"===n,r=-1!==t.response.client.handle.indexOf("-fr"),o=Array.isArray(navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(android)|(webOS)/i)),i=(0,C_.o)(t.response.client),s=new V.ClientRecord(Tt.ss((0,C_.y)(i,{isFrench:a||r,isMobile:o})));return e.merge(s)}return e},conversations:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt.B8(),t=arguments.length>1?arguments[1]:void 0;if("SET_CONVERSATIONS"===t.type){let n=e;return t.conversations.forEach((e=>{n=n.push(new Z_({id:e._id,chatterId:e.chatter_id,clientId:e.client_id,active:e.active}))})),n}return e},predictiveSuggestionResponses:function(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rr,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"ADD_PREDICTIVE_SUGGESTION_RESPONSES":if(e=t.clear(),n.predictiveSuggestions.length>0){const e=n.predictiveSuggestions.map((e=>new ar({body:e.body,responseId:e.response_id,type:e.type,buttonType:e.button_type,isNew:!0})));return Tt.Ay.List(e)}return e;case"PREDICTIVE_SUGGESTIONS_RESET":return e=t.clear(),e;default:return t}},messageLoader:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_MESSAGE":return t.inLiveChat||t.inState&&"variable_auto_capture"!==t.pageState.get("stateType")||"waiting_for_data"===t.messageType?e:e.set("loading",!0);case"TRIGGER_MESSAGE_LOADER":return e.merge({loading:!0});case"ADD_RESPONSE_MESSAGE":{const n=t.message.is_latency_message||!1;return"user"===t.source||n?e:e.merge({loading:!1})}case"ADD_LOGS_FROM_RESPONSE":case"SET_PAGE_ERROR":case"HIDE_MESSAGE_LOADER":return e.merge({loading:!1});case"LAST_MESSAGE_ERROR":{let n=e;return t.error&&(n=n.merge({loading:!1})),n}default:return e}},pageState:function(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q_,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"ADD_RESPONSE_MESSAGE":return t.merge({hasErrors:!1,errorType:null});case"PREDICTIVE_SUGGESTIONS_ANIMATE_OFF_STAGE":return t.merge({animatePredictiveSuggestionsOffstage:!0});case"PREDICTIVE_SUGGESTIONS_ANIMATE_ON_STAGE":return t.merge({animatePredictiveSuggestionsOffstage:!1});case"SET_PAGE_STATE":return t.merge(n.payload);case"SET_CURRENT_STATE":return Y_(t,n);case"SET_CLIENT":return t.merge({loading:n.response.client.chat,chatEnabled:n.response.client.chat,hasErrors:!1,errorType:null});case"SET_SOCKET_CONNECTED":return t.set("socketConnected",!0);case"SET_PUSHER_MESSAGE_CHANNEL_SUBSCRIBED":return t.set("pusherMessageChannelConnected",!0);case"CLEAR_PAGE_ERROR":return t.merge({loading:!1,hasErrors:!1,errorType:null});case"SET_PAGE_ERROR":{let e;return e="object"==typeof n.error&&n.error.response&&402===n.error.response.status?"TRIAL_MODE":"string"==typeof n.error&&n.error.startsWith("CHAT_OUTAGE")?n.error:"OTHER",t.merge({loading:!1,hasErrors:!0,errorType:e})}case X_.UT:return t.set("lastMessageHasError",n.error);case X_.Hf:{const e=n.message.temp_message_uuid;return!t.messagesWithError.toJS().find((t=>t.temp_message_uuid===e))&&e?t.set("messagesWithError",t.messagesWithError.push(n.message)):t}case X_.um:{const e=t.messagesWithError.toJS().findIndex((e=>n.message.id===e.temp_message_uuid));return e>=0?t.set("messagesWithError",t.messagesWithError.splice(e,1)):t}case U.dE:return t.merge({currentConversationIndex:t.get("currentConversationIndex")+1,pageNumber:1});case U.gN:return t.set("pageNumber",t.get("pageNumber")+1);case U.SS:return t.set("canLoadMore",!1);case"GET_LOGS_REQUEST":return t.merge({loadingMessages:!0,didFailFetchingLogs:!1});case"GET_LOGS_ERROR":return t.merge({loadingMessages:!1,loading:!1,didFailFetchingLogs:!0});case Td.Lw:case"GET_CONVERSATIONS_ERROR":case"NEW_CLIENT_LOADED":return t.merge({loadingMessages:!1,loading:!1});case"SET_NOTIFICATION":return e=t.merge({notification:Boolean(n.payload.notificationInfo),notificationInfo:Tt.Ay.Map(n.payload.notificationInfo||{})}),e;case"CLEAR_NOTIFICATION":return t.set("notification",!1);case"SET_CLOSE_BUTTON":return t.set("showCloseButton",n.showCloseButton);case"SET_RESPONSE_LOADING":return t.set("responseLoading",n.loading);case"PREDICTIVE_SUGGESTIONS_SHOW":return t.set("predictiveSuggestionsVisible",!0);case"PREDICTIVE_SUGGESTIONS_HIDE":return t.set("predictiveSuggestionsVisible",!1);case"MESSAGE_LIST_ANIMATE_UP":return t.set("animateMessageListUp",!0);case"MESSAGE_LIST_ANIMATE_DOWN":return t.set("animateMessageListUp",!1);case t_.ol:return t.merge({isFileUploading:!1});case t_.MZ:{if("CONN_ERROR"===n.payload.errorKey)return t.merge({lastMessageHasError:!0,isFileUploading:!1});const e={errorKey:n.payload.errorKey,errorData:Tt.Ay.Map(n.payload.translationOptions)};return t.merge({isFileUploading:!1,fileUploadError:e,lightBoxMessage:new U.yp({errorKey:n.payload.errorKey,translationOptions:n.payload.translationOptions})})}case t_.Sn:return t.set("isFileUploading",!0);case t_.v0:return t.set("isFileUploading",!1);case"SET_LIVE_CHAT_ENDED_BY_USER":return t.set("hasActiveConversationLiveChatBeenEndedByUser",!0);case"SET_SECRET_MESSAGE":return ee.A.setItem("secretButton",n.open.toString()),t.set("secretButtonEnabled",n.open);default:return t}},chatter:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case CA:return e.merge(Tt.Ay.fromJS(t.payload));case W.ei:case wA:case IA:return e.merge({language:t.language});case xA:return e.merge({canViewDemoContent:t.canViewDemoContent});case t_.pK:return e.merge({displayName:t.payload.displayName,email:t.payload.email});case RA:return e.merge({playAlertChime:t.playAlertChime});case kA:return e.merge({deviceNotificationsEnabled:t.deviceNotificationsEnabled});case OA:return e.merge({smsNotificationsEnabled:t.smsNotificationsEnabled});case NA:return e.mergeIn(["saml"],Tt.Ay.Map(t.saml||{}));default:return e}},languages:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V_,t=arguments.length>1?arguments[1]:void 0;return"GET_ALL_LANGUAGES_SUCCESS"===t.type?Tt.B8(t.languages).map((e=>new W_({code:e.code,name:e.name,englishName:e.english_name,validBotLanguage:e.valid_bot_language}))):e},liveAgent:F_,proactiveMessages:Zh.U0});var $_=n(64251),eS=n(93590),tS=n(36714);const nS=eS.t({stateTransformer:e=>(function(e){const{chatter:t,client:n}=e;$_.NA("chatter_id",t.token),$_.NA("client",n.handle),$_.gV({id:t.token})}(e),function(e){const{liveAgent:t}=e,n={};t.isActive&&(n.team="messaging"),Object.keys(n).forEach((e=>{$_.NA(e,n[e])}))}(e),e)}),aS=window.__env.SENTRY_ENVIRONMENT,rS=[xr.HY,xr.Sx,xr.XM,xr.cg,xr.b$];window.__env.SENTRY_DSN&&(tS.T({dsn:window.__env.SENTRY_DSN,environment:["ada-dev.support","ada-dev2.support","ada-stage.support"].includes(aS)?"dev":"production",release:"288e726f8129316b92a6d71dfccab98716d7b461",beforeSend(e,t){const n=t.originalException,a="string"==typeof n?n:null==n?void 0:n.message;return a&&rS.includes(a)?null:e}}),$_.NA("domain",aS));const oS=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||C.Zz,iS=(0,C.y$)(((e,t)=>{let n=e;return"RESET_CHAT"===t.type&&(n=void 0),J_(n,t)}),oS((0,C.Tw)(TA.A,(e=>t=>n=>{const{dispatch:a,getState:r}=e,{browserEvents:o,client:i,liveAgent:s}=r(),c=s.adaGlassEnv===te.Gh;switch(n.type){case CA:{const e=t(n),{chatter:s}=r(),{hasSetGlobalLoggerContext:c}=o;if(c)return e;const l=s.get("id"),d=s.get("token"),g=s.get("clientId"),p=i.get("handle");if(!l||!p)return e;const m={chatterId:l,chatterToken:d,clientId:g,clientHandle:p},f=(0,u.zm)(m);return a((0,MA.nC)()),a((0,MA.Q4)(f)),e}case LA._E:return DA.mergeContext(n.payload.defaultContext),DA.setLoggerReady(),t(n);case LA.NM:return c&&DA.mergeContext(n.payload.extraContext),t(n);case LA._M:return s.inLiveChat&&FA(n),t(n);case LA.d_:if(c&&s.inLiveChat){FA(n);const{chatter:e}=r();a(function(e,t){const n=e?"chatter_visibility_visible":"chatter_visibility_hidden";return(e,a)=>{const{stateType:r}=a().pageState;$.FH.post(Q.wc,{type:n,by:t}).catch((t=>{var a;if(400!==(null===(a=t.response)||void 0===a?void 0:a.status)||r!==te.YR)throw new J.eZ('Failed to make POST request to "'.concat(Q.wc,'" with type "').concat(n,'". Reason: ').concat(t));e({type:"SET_CURRENT_STATE",payload:{inState:!1,stateType:te.YR}}),ee.I.store("inLiveChat",!1),ee.I.store("liveChatPending",!1)}))}}("visible"===n.payload.documentVisibility,e.get("token")))}return t(n);default:return t(n)}}),(e=>t=>n=>{const{dispatch:a,getState:r}=e,{client:o,chatterStorage:i}=r();if((0,zA.Ay)(o))return t(n);switch(n.type){case"LOAD_CHATTER_STORAGE":{const e=t(n),r=Object.keys(i).reduce(((e,t)=>{const n=ee.I.retrieve(t);return n?{...e,[t]:n}:e}),{});return Object.keys(r).length&&a((0,UA.DT)(r)),e}case"RESET_CHATTER_STORAGE":return Object.keys(i).forEach((e=>{ee.I.destroy(e)})),t(n);case"SET_CHATTER_STORAGE":{const e=n.payload;return Object.keys(e).forEach((t=>{ee.I.store(t,e[t])})),t(n)}case"REMOVE_CHATTER_STORAGE":{const e=n.payload;return ee.I.destroy(e),t(n)}default:return t(n)}}),(e=>t=>n=>{const{chatter:i}=e.getState(),l=(0,Dt.Nj)(i.get("language")),u={BROWSER_LOGGER_READY:e=>{!function(e){VA.mergeContext({...e.payload.defaultContext,loggerName:"liveagent"}),VA.setLoggerReady()}(e)},ZD_SESSION_UPDATE:e=>{!function(e){const t={zdSessionId:e,eventType:"zd_session_update"},n=(0,c.E)();n===r.y.Embed1?window.parent.postMessage(t,(0,o.Bq)()):n===r.y.Embed2&&s.fc.postMessage(a.rI,{zdSessionId:e})}(e.payload.zdSessionId)},SET_CURRENT_STATE:t=>{!function(e,t){const{chatter:n,liveAgent:a}=e.getState(),{inState:r}=t.payload;if(((e,t,n)=>{const{client:a}=n.getState();return e.payload.stateType&&te.W.includes(e.payload.stateType)&&a.hasFeature(An.O.ADA_GLASS_ZENDESK_MESSAGING)&&(t||jA(e.payload.stateType))})(t,r,e)){const e=r?n.get("token"):"",t=r?n.get("created"):"";(0,ZA.S)(e,t),(0,ZA.J)(e,t)}!function(e,t){e||(XA(!1),qA(!1)),jA(e)&&(qA(t),KA(t)),e===te.kb&&(XA(t),KA(t))}(t.payload.stateType,r),jA(t.payload.stateType)&&a.adaGlassEnv===te.j1&&e.dispatch((0,ne.XR)()),t.payload.stateType===te.kb&&(r||ee.I.store("zdAuthChatPending",r))}(e,t)},AGENT_ARRIVE:e=>{QA(l,e)},AGENT_LEAVE:e=>{QA(l,e)},ADD_RESPONSE_MESSAGE:e=>{!function(e,t){var n,r,o;"agent"===t.source&&"text"===t.message.type&&t.message.agent_info&&(r=e("NEW_AGENT_MESSAGE",{agent_name:null===(n=t.message.agent_info)||void 0===n?void 0:n.name}),o=t.message.body,s.fc.postMessage(a.Sp,{title:r,body:o}),VA.info("NEW_AGENT_MESSAGE",{msg:o}))}(l,e)},RESET_CACHED_HANDOFF_STATES:()=>{XA(!1),qA(!1)}},d=u[n.type];return d&&d(n),t(n)}),(e=>t=>n=>{const{dispatch:a,getState:r}=e,{liveAgent:o}=r();switch(n.type){case GA:return o.asyncActionQueue&&0!==o.asyncActionQueue.length||a(n.payload.asyncAction),t(n);case HA:return o.asyncActionQueue&&o.asyncActionQueue.length>1&&a(o.asyncActionQueue[1]),t(n);default:return t(n)}}),Z.chatMiddleware,(e=>t=>async n=>{const{dispatch:a,getState:r}=e,o=r(),i=o.liveAgent.zendeskMessaging;let s;switch(s=(0,o_.H)(o,te.ll.CONFIG_EXTERNAL_PLATFORM),n.type){case JA.uh:return i_.info("ZD Messaging Middleware: Successfully destroyed SDK",s),n.payload.initAfterDestroy?(i_.info("ZD Messaging Middleware: Binding event handlers",s),a(YA.DB())):i_.info("ZD Messaging Middleware: SDK teardown complete",s),t(n);case JA.fC:return i_.warn("ZD Messaging Middleware: Failed to destroy SDK",s),(i.errorCounts.sdkDestroy||0)<(0,$A.Or)()?(await(0,an.u)((0,$A.Du)()),a(YA.Lj(n.payload.initAfterDestroy))):i_.error("ZD Messaging Middleware: Reached maximum attempts to destroy SDK",{...s,error_tag:te.wU.EXTERNAL_API_ERROR}),t(n);case JA.D:return i_.info("ZD Messaging Middleware: Successfully bound all event handlers",s),i_.info("ZD Messaging Middleware: Getting auth data",s),a(YA.bl()),t(n);case JA.M2:return i_.warn("ZD Messaging Middleware: Failed to bind all event handlers",s),(i.errorCounts.events||0)<(0,$A.Or)()?(i_.info("ZD Messaging Middleware: Retrying to bind event handlers",s),await(0,an.u)((0,$A.Du)()),a(YA.DB(n.payload.events))):(i_.error("ZD Messaging Middleware: Reached maximum attempts to bind all event handlers, destroying SDK",{...s,error_tag:te.wU.EXTERNAL_API_ERROR}),a(YA.Lj(!0))),t(n);case JA.zS:return i_.info("ZD Messaging Middleware: Successfully retrieved auth data",s),i_.info("ZD Messaging Middleware: Initializing SDK",s),t(n);case JA.EW:return i_.error("ZD Messaging Middleware: Destroying SDK, failed to get auth data for error - ".concat(n.payload.errorMessage),{...s,error_tag:te.wU.EXTERNAL_API_ERROR}),a(YA.Lj()),t(n);case JA.Fk:return i_.info("ZD Messaging Middleware: Successfully loaded SunCo conversation with ID: ".concat(n.payload.suncoConvoId),s),t(n);case JA.i_:return i_.warn("ZD Messaging Middleware: Failed to load conversation - ".concat(n.payload.errorMessage),s),n.payload.recoverable?(i.errorCounts.loadConversation||0)<(0,$A.Or)()?(i_.info("ZD Messaging Middleware: Retrying to load conversation",s),await(0,an.u)((0,$A.Du)()),a(BA(YA.wp()))):(i_.error("ZD Messaging Middleware: Reached maximum attempts to load conversation, destroying SDK",{...s,error_message:n.payload.errorMessage,error_tag:te.wU.EXTERNAL_API_ERROR}),a(YA.Lj())):(i_.error("ZD Messaging Middleware: Destroying SDK due to unrecoverable error",{...s,error_message:n.payload.errorMessage,error_tag:te.wU.EXTERNAL_API_ERROR}),a((0,YA.Lj)())),t(n);case JA.Ly:var c;return s=(0,o_.H)(r(),te.ll.EXTERNAL_API_CALL),i_.info("ZD Messaging Middleware: Successfully sent message to SunCo conversation",{...s,message_type:null===(c=n.payload.type)||void 0===c?void 0:c.toString()}),t(n);case JA._v:return s=(0,o_.H)(r(),te.ll.EXTERNAL_API_CALL),i_.warn("ZD Messaging Middleware: Message could not be sent to SunCo conversation - ".concat(n.payload.errorMessage)),n.payload.recoverable?n.payload.messageId&&(i.failedMessageErrors[n.payload.messageId]||0)<(0,$A.Or)()?(i_.info("ZD Messaging Middleware: Retrying to send message",s),await(0,an.u)((0,$A.Du)()),a(BA(YA.uS(n.payload.messageId,n.payload.message,n.payload.type)))):(i_.error("ZD Messaging Middleware: Reached maximum attempts to send message, failed to send message",{...s,error_message:n.payload.errorMessage,error_tag:te.wU.EXTERNAL_API_ERROR}),r_(n.payload.type,a)):(i_.error("ZD Messaging Middleware: Failed to send message due to unrecoverable error",{...s,error_message:n.payload.errorMessage,error_tag:te.wU.EXTERNAL_API_ERROR}),r_(n.payload.type,a)),t(n);case JA.VA:{const e=n.payload.error.response;return function(e,t){switch(e){case 413:t(Nt.Iv(t_.wm,{maxFileSizeInMB:(0,Lt.IG)(n_.w3)}));break;case 415:t(Nt.Iv(t_.Cl,{}));break;default:t(Nt.Iv(t_.F4,{}))}}(e.status,a),s=(0,o_.H)(r(),te.ll.EXTERNAL_API_CALL),i_.error("ZD Messaging Middleware: Failed to upload attachment",{...s,error_message:e.data,error_code:e.status,error_tag:te.wU.EXTERNAL_API_ERROR}),t(n)}case JA.sP:return i_.info("ZD Messaging Middleware: Uploaded attachment",{...s,attachment:JSON.stringify(n.payload.attachment)}),function(e,t,n){const{mediaUrl:a,mediaType:r,mediaName:o}=e;switch(r.split("/")[0]){case"image":n((0,e_.V)(r,a,t.get("inState"),(0,a_.X)()));break;case"application":n((0,e_.b)(r,a,o,t.get("inState"),(0,a_.X)()))}}(n.payload.attachment,o.pageState,a),t(n);case JA.Vj:return i_.info("ZD Messaging Middleware: SDK Connected",s),t(n);case JA.fI:return i_.warn("ZD Messaging Middleware: SDK disconnected",s),t(n);case JA.hB:return i_.info("ZD Messaging Middleware: SDK reconnecting",s),t(n);default:return t(n)}}),(e=>t=>async n=>{const{dispatch:r,getState:o}=e,{client:i,chatterStorage:s,liveAgent:c,pageState:l}=o();switch(n.type){case LA._E:return v_.mergeContext(n.payload.defaultContext),v_.setLoggerReady(),t(n);case c_.Ci:{const{account_key:e,tags:a,use_zd_auth:i,override_proxy:c}=n.payload.reconnectResponse;__=A_(o(),te.ll.CONFIG_EXTERNAL_PLATFORM),v_.mergeContext({...__}),v_.info("ZD middleware: Chat reconnecting"),v_.info("ZD middleware: SDK Reconnecting - setting department ID"),r(bf.sY(s.zdSessionId)),v_.info("ZD middleware: SDK Reconnecting - setting Zendesk SDK");const l={useJWTAuth:i,sdkProxyOverride:c};return r(bf.J1(e,E_,l)),v_.info("ZD middleware: SDK Reconnected - setting tags"),r(bf.Qz(a)),t(n)}case l_.V_:{const{initConvoResponse:e}=n.payload;__=A_(o(),te.ll.INITIATE_HANDOFF),v_.mergeContext({...__}),v_.info("ZD middleware: Setting department ID",{departmentId:e.department_id}),r(bf.kw(parseInt(e.department_id,10))),v_.info("ZD middleware: Setting tags",{tags:e.tags}),r(bf.Qz(e.tags)),v_.info("ZD middleware: Setting visitor info",{...e.visitor_info}),r(bf.TS(e.visitor_info&&{chatterName:e.visitor_info.display_name,chatterEmail:e.visitor_info.email,chatterPhone:e.visitor_info.phone})),v_.info("ZD middleware: Initializing Zendesk SDK");const a={useJWTAuth:e.use_zd_auth,sdkProxyOverride:e.override_proxy};return r(bf.J1(e.account_key,E_,a)),t(n)}case l_.Em:return __=A_(o(),te.ll.CHATTER_END_CONVERSATION),v_.mergeContext({...__}),v_.info("ZD middleware: Tearing down SDK"),r(bf.P()),v_.info("ZD middleware: Tearing down - setting previously connected state to false"),r(bf.C$(!1)),s_.SO&&(s_.SO.release(Q.u7),v_.info("Released mutex lock during tear down.")),t(n);case u_.vs:if(__=A_(o(),te.ll.INITIATE_HANDOFF),v_.mergeContext({...__}),v_.info("ZD middleware: Setting visitor info success"),v_.info("ZD middleware: Sending transcript"),!(0,m_.f_)(o())){const{transcript:e}=c.zendesk,t=!(0,g_.cA)().isChatting();!e||t?r((async(e,t)=>{try{const{chatter:n,pageState:a,liveAgent:r}=t(),{data:o={}}=await p_.$Z(n.get("token"),a.get("sessionID"),r.zendesk.sessionId||"",e);e(bf.du(o.batched_transcript,o.external_chat_id))}catch(t){v_.error("Failed to send transcript request to API",{error_message:t.message,error_type:te.wU.INTERNAL_API_ERROR}),e(bf.hc()),e(bf.$C())}})):v_.info("ZD middleware: Transcript sent to agent already. Will not resend")}return t(n);case u_.Q_:return __=A_(o(),te.ll.INITIATE_HANDOFF),v_.mergeContext({...__}),v_.error("ZD middleware: Failed to set visitor info, tearing down SDK and ending chat",{error_message:n.payload.errorMessage,error_tag:te.wU.EXTERNAL_API_ERROR}),r(bf.hc()),r(bf.$C()),t(n);case l_.vS:return __=A_(o(),te.ll.CONFIG_EXTERNAL_PLATFORM),v_.mergeContext({...__}),v_.info("ZD middleware: SDK connecting"),c.zendesk.connectionStatusTimeoutId&&(v_.info("ZD middleware: SDK Connecting - clearing connection status timeout"),clearTimeout(c.zendesk.connectionStatusTimeoutId)),t(n);case l_.GK:{__=A_(o(),te.ll.CONFIG_EXTERNAL_PLATFORM),v_.mergeContext({...__}),v_.info("ZD middleware: SDK connected"),c.zendesk.connectionStatusTimeoutId&&(v_.info("ZD middleware: SDK Connected - clearing connection status timeout"),clearTimeout(c.zendesk.connectionStatusTimeoutId));const e=function(e,t){return e.isActive&&e.inLiveChat&&e.zendesk.previouslyConnected?(function(e){if(function(){const e=ee.I.retrieve("netDisruptionMsgStartTime");let t=!1;return e?(new Date).getTime()-e>3e5&&(t=!0):t=!0,t}()){e(bf.u5("CHATTER_WEBSOCKET_DISCONNECT"));const t=new Date;ee.I.store("netDisruptionMsgStartTime",t.getTime())}}(t),!0):!!e.zendesk.reconnecting}(c,r);return c.zendesk.previouslyConnected||(v_.info("ZD middleware: SDK connected - setting previously connected state to true"),r(bf.C$(!0))),e?(v_.info("ZD middleware: SDK connected - setting reconnected status"),r(bf.fy()),t(n)):(v_.info("ZD middleware: SDK Connected - setting department ID"),r(bf.IT()),v_.info("ZD middleware: SDK Connected - setting session ID"),r(bf.sY(s.zdSessionId)),v_.info("Pushing zdSessionId to embed for storage"),r({type:"ZD_SESSION_UPDATE",payload:{zdSessionId:s.zdSessionId}}),t(n))}case c_.l_:return __=A_(o(),te.ll.CONFIG_EXTERNAL_PLATFORM),v_.mergeContext({...__}),v_.info("ZD middleware: Chat reconnected"),r(bf.RP()),t(n);case l_.$R:{const e=Rr.MP;return v_.info("ZD middleware: SDK Closed - ending chat"),setTimeout((()=>r(bf.zK(e))),1e3),r((0,ne.XR)()),t(n)}case l_.X3:{__=A_(o(),te.ll.EXTERNAL_API_CALL),v_.mergeContext({...__});let e=n.payload.errorDetails.message;const a=e.replace(n.payload.errorDetails.context,"_context_");return a in Rr.rK&&(e=Rr.rK[a]),e===Rr.Ue?(v_.warn("Ignoring 'Multiple Initialization' Zendesk SDK Error",{error_message:n.payload.errorDetails.message,context:n.payload.errorDetails.context,name:n.payload.errorDetails.name,...n.payload.errorDetails.extra}),t(n)):(v_.error("Zendesk SDK Error",{error_message:n.payload.errorDetails.message,context:n.payload.errorDetails.context,name:n.payload.errorDetails.name,error_type:te.wU.EXTERNAL_API_ERROR,...n.payload.errorDetails.extra}),r(bf.zK(e)),t(n))}case l_.Y4:return __=A_(o(),te.ll.CONFIG_EXTERNAL_PLATFORM),v_.mergeContext({...__}),v_.info("Zendesk SDK connecting error"),r({type:"SET_CURRENT_STATE",payload:{inState:!0,stateType:"live_chat_pending_error"}}),t(n);case c_.dW:return v_.addContext("zdSessionId",n.payload.zendeskSessionId),t(n);case d_.xC:return __=A_(o(),te.ll.INITIATE_HANDOFF),v_.mergeContext({...__}),v_.info("ZD middleware: Set department ID success"),v_.info("ZD middleware: Set department ID success - checking if account or department offline"),r(bf.hv(n.payload.departmentId)),t(n);case d_.e2:return __=A_(o(),te.ll.CONFIG_EXTERNAL_PLATFORM),v_.mergeContext({...__}),v_.info("ZD middleware: ZD department online"),v_.info("ZD middleware: ZD department online - setting visitor info"),r(bf.ig(c.zendesk.adaVisitorInfo)),v_.info("ZD middleware: ZD department online - removing tags"),await r(bf.Q0()),v_.info("ZD middleware: ZD department online - sending tags"),r(bf.HD()),t(n);case c_.wO:return v_.info("ZD middleware: Sending transcript"),n.payload.externalChatId!==l.get("sessionID")?(__=A_(o(),te.ll.INTERNAL_API_CALL),v_.mergeContext({...__}),v_.warn("Session id mismatch error",{externalChatId:n.payload.externalChatId,sessionId:l.get("sessionID")}),r(bf.Zb(n.payload.externalChatId))):(c.zendesk.departmentStatus===Rr.jK&&(v_.info("ZD middleware: Sending transcript - Sending transcript messages"),n.payload.batchedTranscript.forEach((e=>r(bf.RU(e)))),v_.info("ZD middleware: Sending transcript - Clearing transcript from state"),r(bf.Et())),t(n));case c_.Q6:return __=A_(o(),te.ll.CHATTER_END_CONVERSATION),v_.mergeContext({...__}),v_.info("Zendesk cancel handoff"),v_.info("ZD middleware: Cancel handoff - tearing down SDK"),r(bf.hc()),v_.info("ZD middleware: Cancel handoff - end chat success"),r(bf.$C()),t(n);case c_.te:return r(bf.h_(n.payload.isTyping)),t(n);case Td.jR:return!y_(c)||"text"!==n.payload.message.type||c.zendesk.disconnected||l.lastMessageHasError||r(bf.RU(n.payload.message.body)),t(n);case Td.qe:return!y_(c)||"text"!==n.messageType||c.zendesk.disconnected||l.lastMessageHasError||r(bf.RU(n.body)),t(n);case Td.mn:return n.message.event===a.T8&&r((0,ne.XR)()),t(n);case c_.yh:return r(bf.RU(n.payload.message)),t(n);case c_.Z8:return r(Nt.Yj(te.Gh)),r(bf.aG(n.payload.file)),t(n);case c_.mM:return r(Nt.Q$(n.payload.errorMessage,n.payload.translationOptions)),t(n);case c_.xe:return r((0,e_.b)(n.payload.fileData.mime_type,n.payload.fileData.url,n.payload.fileData.name,l.get("inState"),(0,a_.X)())),r(Nt.DV()),t(n);case c_.nJ:return __=A_(o(),te.ll.CONFIG_EXTERNAL_PLATFORM),v_.mergeContext({...__}),n.payload.externalChatId!==l.get("sessionID")?(v_.warn("Session id mismatch error",{externalChatId:n.payload.externalChatId,sessionId:l.get("sessionID")}),r(bf.Zb(n.payload.externalChatId))):t(n);case u_.u8:return __=A_(o(),te.ll.CONFIG_INTERNAL_PLATFORM),v_.mergeContext({...__}),v_.info("ZD middleware: Remove agent"),r(bf.o0(n.payload.id)),t(n);case LA._M:return __=A_(o(),te.ll.CHATTER_END_CONVERSATION),v_.mergeContext({...__}),"beforeunload"===n.payload.name&&function(e){return!(!e.inLiveChat&&!e.inPending)&&e.adaGlassEnv===te.Gh}(c)&&(0,zA.Ay)(i)?(v_.info("Ending chat onbeforeunload because of private mode"),r(bf._0()),t(n)):t(n);case c_.yq:case c_.ZM:case d_.Qq:return v_.info("ZD middleware: Department offline"),v_.info("ZD middleware: Department offline - tearing down SDK"),r(bf.hc()),v_.info("ZD middleware: Department offline - removing previouslyAuthenticated flag from storage"),ee.I.destroy("previouslyAuthenticated"),t(n);case c_.sw:return __=A_(o(),te.ll.AGENT_EVENT),v_.mergeContext({...__}),v_.error("Zendesk File Upload: Failed to receive file from agent.",{error_message:n.payload.errorMessage,error_type:te.wU.EXTERNAL_API_ERROR}),t(n);case u_.Ph:return __=A_(o(),te.ll.AGENT_EVENT),v_.mergeContext({...__}),v_.info("ZD middleware: Add agent",{payload:n.payload}),l.get("notificationInfo").get("type")===a.zm&&r((0,ne.XR)()),t(n);default:return t(n)}})),nS));var sS,cS=n.p+"e788fedc5f222c09ef76.woff";const lS=(0,E.DU)(sS||(sS=(0,z.A)(['\n  * {\n    font-family: -apple-system, BlinkMacSystemFont, "Apple Color Emoji", "Segoe UI", "Segoe UI Emoji", "Segoe UI Symbol", Roboto, Helvetica, Arial, sans-serif;\n  }\n  \n  body, html {\n    font-size: 1em;\n    font-weight: 400;\n    height: 100%;\n    -webkit-text-size-adjust: 100%;\n  }\n  \n  @font-face {\n    font-family: "Redacted";\n    src: url(',') format("woff");\n    font-weight: normal;\n    font-style: normal;\n  }\n  \n  .g-redacted {\n    font-family: redacted, sans-serif;\n  }\n\n  #web-messenger-container {\n    display: none !important;\n  }\n\n  .react-tel-input{\n    font-size: 0.75rem;\n  }\n\n  .react-tel-input .form-control{\n    font-size: 1rem;\n  }\n'])),cS);function uS(){return(0,g.useEffect)((()=>{const e=(0,u.tZ)();new Promise((e=>{if("hidden"!==document.visibilityState)e();else{const t=()=>{"hidden"!==document.visibilityState&&(e(),document.removeEventListener("visibilitychange",t))};document.addEventListener("visibilitychange",t)}})).then((()=>{e.info("Chat visible"),(0,d.WF)(),function(e){e.subscribe((()=>{const t=eh;eh=e.getState().chatter,(t&&t.get("isNew")!==eh.get("isNew")||t&&t.get("token")!==eh.get("token"))&&e.dispatch(nh())}))}(iS),iS.dispatch((0,v.initializeApp)()),iS.dispatch((e=>{window.addEventListener(I.og.CONVERSATION_NOT_FOUND_ERROR,(()=>{e(ah(null))})),window.addEventListener(I.og.CHATTER_NOT_FOUND_ERROR,(()=>{e(ah(null))})),window.addEventListener(I.og.SESSION_UNAUTHORIZED,(()=>{e(ah(null))}))})),s.fc.postMessage("CHAT_STARTED",{})}))}),[]),null}function dS(){const{theme:e}=(0,Pn.useTheme)();return g.createElement(E.NP,{theme:e},g.createElement(Wf,{errorType:"CHAT_OUTAGE_FULL_PAGE"}))}const gS=!window.__env.API_ROOT&&"development"!==window.__env.NODE_ENV;!async function(){const e=(0,u.tZ)();(0,i.bj)(),(0,d.hr)(),e.info("Chat init start"),(0,i.AA)("chat_init_start"),(0,l.a)()||(console.warn("Chat is being used without Embed, which is not supported. Please refer to https://adasupport.github.io/documentation on how to properly set up Ada."),e.info("CHAT_USED_WITHOUT_EMBED")),await async function(){const e=(0,u.tZ)();if((0,o.A$)(),(0,c.E)()!==r.y.Embed2)(0,o.jr)(window.location.origin);else try{const e=await s.fc.embedFetch(a.Zj,a.XI,void 0,1e3);if(null!=e&&e.origin){const t="file://"===e.origin?"*":e.origin;(0,o.jr)(t)}}catch(t){e.info("".concat(t))}}(),(0,p.render)(g.createElement(m.Kq,{store:iS},g.createElement(lS,null),g.createElement(f.Kd,{basename:"/chat/"},g.createElement(h.dO,null,g.createElement(h.qh,{path:"/c/:conversationId/:chatterToken"}),g.createElement(h.qh,{path:"/"},gS?g.createElement(dS,null):g.createElement(uS,null))),!gS&&g.createElement(bA,null))),document.getElementById("app"))}()},73346:function(e,t,n){"use strict";var a=n(74353),r=n.n(a),o=n(97375),i=n.n(o),s=n(98720),c=n.n(s),l=n(15750),u=n.n(l),d=n(88569),g=n.n(d),p=n(53581),m=n.n(p),f=n(83826),h=n.n(f);r().extend(h()),r().extend(g()),r().extend(c()),r().extend(u()),r().extend(i()),r().extend(m()),t.A=r()},40046:function(e,t,n){"use strict";n.d(t,{Cl:function(){return h},F4:function(){return E},Fh:function(){return o},MZ:function(){return y},Or:function(){return d},Ph:function(){return i},Sn:function(){return A},_r:function(){return u},aq:function(){return l},bk:function(){return a},bt:function(){return s},eu:function(){return g},ix:function(){return m},je:function(){return b},kE:function(){return p},ol:function(){return S},pK:function(){return f},u8:function(){return c},v0:function(){return _},wm:function(){return v},yC:function(){return r}});const a="SET_CURRENT_STATE",r="SET_PLATFORM_DATA",o="SET_ADA_GLASS_ENV",i="ADD_ZENDESK_AGENT",s="UPDATE_ZENDESK_AGENT",c="REMOVE_ZENDESK_AGENT",l="AGENT_ARRIVE",u="AGENT_LEAVE",d="AGENT_UPDATE",g="AGENT_TYPING",p="SET_AGENTS",m="SET_AGENTS_INACTIVE",f="UPDATE_CHATTER_LIVE_CHAT_INFO",h="FILE_UPLOAD_UNSUPPORTED_TYPE",E="FILE_UPLOAD_UNKNOWN_ERROR",v="FILE_UPLOAD_EXCEED_SIZE_LIMIT",y="FILE_UPLOAD_ERROR",A="start_file_upload",_="end_file_upload",S="file_upload_hide_loader",b="UPDATE_FILE_TRANSFER"},1514:function(e,t,n){"use strict";n.d(t,{$3:function(){return c},Jf:function(){return s},Jp:function(){return g},RW:function(){return u},a$:function(){return d},kR:function(){return i},p$:function(){return l}});var a=n(4731),r=n(8311),o=n(40046);function i(){return(0,a.Gg)({type:r.m7})}function s(e){return{type:o.aq,payload:{agent:e}}}function c(e){return{type:o._r,payload:{agent:e}}}function l(e,t){return{type:o.eu,payload:{agentId:e,isTyping:t}}}function u(e){return{type:"SET_AGENTS",payload:{agents:e}}}function d(){return{type:"SET_AGENTS_INACTIVE",payload:{}}}function g(e){return{type:o.Or,payload:{agent:e}}}},53781:function(e,t,n){"use strict";n.d(t,{Re:function(){return v},DV:function(){return _},Iv:function(){return S},Q$:function(){return b},nD:function(){return C},TX:function(){return T},Yj:function(){return y},ZC:function(){return A}});var a=n(60510);const r=5242880;var o=n(40046),i=n(43219),s=n(60334),c=n(75887),l=n(89009),u=n(7732),d=n(52224),g=n(25054),p=n(52236),m=n(4276),f=n(86471),h=n(1514);const E=(0,m.tZ)("live-agent/actions"),v="RESET_CACHED_HANDOFF_STATES";function y(e){return{type:o.Sn,payload:{platform:e}}}function A(e){return{type:o.je,payload:{fileTransfer:e}}}function _(e){return{type:o.v0,payload:{platform:e}}}function S(e,t){return{type:o.MZ,payload:{errorKey:e,translationOptions:t}}}function b(e,t){return async(n,a)=>{if(n({type:o.ol,payload:{}}),await(0,f.u)(0),n(S(e,t)),!d.NA.includes(e)){const{pageState:t,chatter:n,liveAgent:r,client:o}=a();E.error("Live Agent: Unexpected file upload failure.",{errorMessage:e,chatSessionId:t.get("sessionID"),adaGlassEnv:r.adaGlassEnv,chatterToken:n.get("token"),clientHandle:o.get("handle")})}}}function T(e){return async(t,n)=>{const{client:g,chatter:m,liveAgent:f}=n();if(!f.inLiveChat)return;const h=g.hasFeature(a.O.SALESFORCE_FILE_UPLOAD),v=f.adaGlassEnv===i.j1;return h&&v?e.size>r?void t(S(o.wm,{maxFileSizeInMB:(0,s.IG)(r)})):void await t(function(e,t){return async(n,a)=>{const{conversations:r,pageState:c}=a(),l=c.get("currentConversationIndex"),u=r.get(l),d=(0,s.mp)(t,e,u.id||"");n(y(i.j1));const g={"Content-Type":"multipart/form-data"};try{await p.FH.post(s.D1,d,{headers:g})}catch(e){E.error("Error sending file to salesforce",{error:e.toString()}),n(S(o.F4,{}))}n(_())}}(e,f.fileTransfer)):f.adaGlassEnv===i.Gh?e.size>d.w3?void t(S(o.wm,{maxFileSizeInMB:(0,s.IG)(d.w3)})):void t((0,u.Hy)(e)):f.adaGlassEnv===i.bx?e.size>l.w3?void t(S(o.wm,{maxFileSizeInMB:(0,s.IG)(l.w3)})):l.i_.includes(e.type)?(t(y(i.bx)),await t((0,c.Q1)(e,m.token)),void t(_(i.bx))):void t(S(o.Cl,{})):void E.error("Unknown file upload for platform ".concat(f.adaGlassEnv))}}function C(e){return async(t,n)=>{if("presence"!==e.type)return;const{liveAgent:a}=n();"agent_arrival"===e.event&&(t(h.Jf(e.agent_info)),a.isActive&&t(h.kR()),(0,g.AA)("agent_connected")),"agent_depart"===e.event&&t(h.$3(e.agent_info))}}},43219:function(e,t,n){"use strict";n.d(t,{C_:function(){return p},Gh:function(){return a},W:function(){return l},Y:function(){return g},YR:function(){return s},Zh:function(){return d},_Y:function(){return o},bx:function(){return i},j1:function(){return r},kb:function(){return c},ll:function(){return m},r2:function(){return u},wU:function(){return f}});const a="zendesk_liveagent",r="salesforce_liveagent",o="influx",i="zaw_liveagent",s="live_chat",c="live_chat_pending",l=[s,c],u=1e3,d="delayMessageAfterLiveChatEndTimeStamp",g=u+1e3,p="CANCEL_LIVE_CHAT_QUEUE_ACTION";let m,f;!function(e){e.AGENT_EVENT="process-agent-event",e.INTERNAL_API_CALL="calling-internal-api",e.EXTERNAL_API_CALL="calling-external-api",e.CHATTER_END_CONVERSATION="chatter-ending-conversation",e.AGENT_END_CONVERSATION="agent-ending-conversation",e.INITIATE_HANDOFF="initiate-handoff-conversation",e.CHATTER_EVENT="process-chatter-event",e.POLLING_AGENT_EVENT="polling-agent-event",e.CONFIG_EXTERNAL_PLATFORM="configuring-external-platform",e.RETRIEVE_SETUP_EXTERNAL="retrieving-setup-info-external",e.EXTERNAL_SERVICE_OPERATION="external-service-operation",e.CONFIG_INTERNAL_PLATFORM="configuring-internal-service"}(m||(m={})),function(e){e.NETWORK_DISCONNECTION="network-disconnection",e.UNAVAILABLE_AGENTS="no-available-agents",e.OUT_OF_BUSSINES="out-of-business-hours",e.ADA_VALIDATION="ada-message-validation",e.EXTERNAL_VALIDATION="external-message-validation",e.INVALID_CREDENTIALS="invalid-credentials",e.FAILED_AUTH="failed-authentication",e.CONVERSATION_NOT_LIVE="non-live-conversation",e.INTERNAL_API_ERROR="internal-api-error",e.EXTERNAL_API_ERROR="external-api-error",e.INVALID_CONFIGURATION="invalid-configuration",e.EXTERNAL_SERVICE_ERROR="external-service-error",e.UNKNOWN_ERROR="unknown-error"}(f||(f={}))},60334:function(e,t,n){"use strict";n.d(t,{D1:function(){return o},IG:function(){return l},Y5:function(){return s},ZP:function(){return c},mp:function(){return i}});var a=n(60510),r=n(43219);const o="/salesforce_file_transfer";function i(e,t,n){const a=new FormData;return a.append("conversationId",n||""),a.append("chatId",e.sessionId||""),a.append("fileToken",e.fileToken||""),a.append("instanceUrl",e.uploadServletUrl||""),a.append("file",t),a}function s(e,t){if(!t.inLiveChat)return!1;const n=e.hasFeature(a.O.SALESFORCE_FILE_UPLOAD),o=t.adaGlassEnv===r.Gh,i=t.adaGlassEnv===r.j1;return t.adaGlassEnv===r.bx||o||n&&i}function c(e,t,n){return!!s(e,t)&&(t.adaGlassEnv===r.Gh||t.adaGlassEnv===r.bx||0!==Object.keys(t.fileTransfer).length&&"Requested"===t.fileTransfer.type&&!n.get("isFileUploading"))}function l(e){return Math.floor(e/1e6)}},23682:function(e,t,n){"use strict";n.d(t,{L_:function(){return E},aJ:function(){return A},ch:function(){return y},oI:function(){return v},pJ:function(){return f}});var a=n(74262),r=n(15584),o=n(74943),i=n(22635),s=n(90438),c=n(52236),l=n(4276),u=n(86471),d=n(75520);const g=(0,l.tZ)("requests");function p(e){return e.response?e.response.status:0}function m(e){return e instanceof Error&&Boolean(e.isAxiosError)}g.setLoggerReady();class f{constructor(e,t,n,a,r,o){this.maxAttempts=e||(0,d.Or)(),this.interval=t||(0,d.Du)(),this.factor=n||(0,d.bL)(),this.maxInterval=a||(0,d.VG)(),this.random=r||d.lA,this.rtimeout=o||(0,d.$$)()}retryable(e){return"ECONNABORTED"===e.code||[408,429,503,504].includes(p(e))||function(e){return!!m(e)&&!e.response&&e.message===a.b$}(e)}done(e,t){return e>=this.maxAttempts||!this.retryable(t)}backoffInterval(e){return this.random()*Math.min(this.maxInterval,this.interval*this.factor**e)}timeout(e){return this.rtimeout}}async function h(e,t,n,a){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;try{const o=await c.FH.post(e,t,{timeout:n.timeout(i)});return a((0,r.a0)(t.type)),o}catch(c){if(!m(c))throw new s.eZ('POST request failed for "'.concat(e,'". Reason: "').concat(c,'"'));if(n.done(i,c))throw g.error("Fatal request error.",{url:e,attempt:i,status_code:p(c),code:c.code,err_msg:c.message,zd_event:t.type}),a((0,o.A)(!0)),new s.eZ('POST request failed for "'.concat(e,'". Reason: "').concat(c,'"'));return g.warn("Transient request error.",{url:e,attempt:i,status_code:p(c),code:c.code,err_msg:c.message,zd_event:t.type}),a((0,o.O)({url:e,payload:t})),a((0,r.J8)(t.type)),await(0,u.u)(n.backoffInterval(i)),await h(e,t,n,a,i+1)}}async function E(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;try{return await c.FH.get(e,{timeout:t.timeout(a)})}catch(r){if(!m(r))throw new s.eZ('GET request failed to "'.concat(e,'". Reason: "').concat(r,'"'));if(t.done(a,r))throw g.error("Fatal request error.",{url:e,attempt:a,status_code:p(r),code:r.code,err_msg:r.message,zd_event:"GET ".concat(e)}),new s.eZ('GET request failed to "'.concat(e,'". Reason: "').concat(r,'"'));return g.warn("Transient request error.",{url:e,attempt:a,status_code:p(r),code:r.code,err_msg:r.message,zd_event:"GET ".concat(e)}),n((0,o.O)({url:e,payload:null})),await(0,u.u)(t.backoffInterval(a)),await E(e,t,n,a+1)}}async function v(e,t,n){return h(i.wc,e,t,n,1)}async function y(e,t,n){return h("".concat(i.wc,"agent/"),e,t,n,1)}function A(e){const t=new f;let n=0;return async function a(){let r;n+=1;try{return r=await e(...arguments),n=0,r}catch(e){const o=e;if(t.done(n,o))throw e;return await(0,u.u)(t.backoffInterval(n)),r=await a(...arguments),r}}}},75520:function(e,t,n){"use strict";n.d(t,{$$:function(){return c},Du:function(){return a},Or:function(){return o},VG:function(){return i},bL:function(){return r},lA:function(){return s}});const a=()=>1e3,r=()=>1.5,o=()=>10,i=()=>6e4,s=Math.random,c=()=>6e4},3228:function(e,t,n){"use strict";n.d(t,{Bf:function(){return i},Kn:function(){return u},U7:function(){return o},W9:function(){return l},lD:function(){return c}});var a=n(97132);const r=e=>e.liveAgent,o=(0,a.Mz)(r,(e=>e.platformData)),i=(0,a.Mz)(o,(e=>e.lastProcessedTimestamp)),s=(0,a.Mz)(r,(e=>e.agents)),c=(0,a.Mz)(s,(e=>Object.keys(e).filter((t=>e[t].isActive)))),l=((0,a.Mz)(s,(e=>Object.keys(e).filter((t=>e[t].isTyping)))),(0,a.Mz)(r,(e=>e.adaGlassEnv))),u=(0,a.Mz)(r,(e=>e.isActive));(0,a.Mz)(r,(e=>e.zendeskMessaging))},70215:function(e,t,n){"use strict";n.d(t,{I4:function(){return i},SO:function(){return o}});const a={initializationStatus:n(25446).DC.Uninitialized,isDisconnected:!1,hasSdkInitializedSuccessfully:!1,isReconnecting:!1,auth:null,errorCounts:{events:0,sdkInit:0,loadConversation:0},failedMessageErrors:{},suncoConvoId:null},r={name:"Agent",internalId:null,imageUrl:null,defaultImage:!1,isActive:!0,isTyping:!1},o=e=>({...r,...e}),i={inLiveChat:!1,inPending:!1,isActive:!1,platformData:{},adaGlassEnv:"",agents:{},zendesk:{adaVisitorInfo:null,agents:{},connectionStatusTimeoutId:null,departmentId:null,departmentStatus:null,disconnected:!1,sdkInitializedSuccessfully:!1,lastProcessedTimestamp:null,reconnecting:!1,sessionId:null,tags:null,transcript:null,primarySession:null,previouslyConnected:!1,fatalRequestErrorReached:!1},zendeskMessaging:a,asyncActionQueue:[],zendeskAgents:{},fileTransfer:{}}},75887:function(e,t,n){"use strict";n.d(t,{DB:function(){return W},Lj:function(){return D},Q1:function(){return y},bl:function(){return c},wp:function(){return A},uS:function(){return _}});var a=n(23682),r=n(22635);const o=new a.pJ;var i=n(21642);function s(e){return{type:i.E,payload:{errorMessage:e}}}function c(){return async(e,t)=>{const{chatter:n}=t(),c=n.get("token");if(!c)return e(s("Could not get chatter token"));try{const{data:t}=await async function(e,t){return(0,a.L_)("".concat(r.Dl,"auth/").concat(e),o,t,1)}(c,e);return null!=t&&t.integration_id&&null!=t&&t.jwt?e(function(e){return{type:i.z,payload:{...e}}}({integrationId:t.integration_id,jwt:t.jwt,externalId:c})):e(s("Invalid auth data attached to API response"))}catch(t){return e(s(t.message))}}}var l=n(53892),u=n.n(l),d=n(95774),g=n(86226),p=n(52236),m=n(89009),f=n(85230),h=n(71830);function E(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;return{type:f.i_,payload:{suncoConvoId:e,errorMessage:t,recoverable:n}}}function v(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;return{type:f._v,payload:{messageId:e,message:t,errorMessage:n,recoverable:a,type:r}}}function y(e,t){return async n=>{try{const o={"Content-Type":"multipart/form-data","Chatter-Token":t},i=new FormData;i.append("file",e);n((a=(await p.FH.post("".concat(r.Dl,"attachment_upload"),i,{headers:o})).data.attachment,{type:f.sP,payload:{attachment:a}}))}catch(e){n(function(e){return{type:f.VA,payload:{error:e}}}(e))}var a}}function A(){return async(e,t)=>{const n=t();let a=(0,g.o8)(n);if(!a){var r;const e=null===(r=n.resources.conversation)||void 0===r?void 0:r.byId;if(e){const t=Object.keys(e);t.length>0&&(a=e[t[0]])}}if(!a)return e(E(null,"No Ada conversation loaded into state",!0));{const t=a.channelExternalConversationId;if(!t)return e(E(null,"No SunCo conversation ID exists for active conversation",!1));try{return await u().loadConversation(t),e(function(e){return{type:f.Fk,payload:{suncoConvoId:e}}}(t))}catch(n){const a=n.message;if(a)return e(E(t,a,!1));const r=n.status,o=m.v5.includes(r);return e(E(t,n.description,o))}}}}function _(e,t,n){return async(a,r)=>{const{liveAgent:o}=r(),{suncoConvoId:i,initializationStatus:s}=o.zendeskMessaging,{inLiveChat:c}=o;if(s!==h.DC.Initialized)return a(v(null,"","No Smooch SDK initialized for this chat session",!1,n));if(!i)return a(v(e,"","No SunCo conversation ID exists in zendesk messaging state",!1,n));if("string"!=typeof t)return a(v(e,"","Attempted to send a message a non string type message",!1,n));try{const r=function(e,t){let n;return n=e===d.vP?{type:"file",mediaUrl:t}:e===d.gq?{type:"image",mediaUrl:t}:{type:"text",text:t},n}(n,t);return c&&e&&(r.metadata={ada_temp_message_uuid:e}),await u().sendMessage(r,i),a(function(e,t){return{type:f.Ly,payload:{messageId:e,type:t}}}(e,n))}catch(r){const o=r.message;if(o)return a(v(e,t,o,!1,n));const i=r.status,s=m.v5.includes(i);return a(v(e,t,r.description,s,n))}}}var S=n(43219),b=n(57593),T=n(46876),C=n(26183),w=n(24744),I=n(68291),x=n(21962);const R=(0,T.bN)();function k(e){return{type:h.uh,payload:{initAfterDestroy:e}}}function O(e){return{type:h.fC,payload:{initAfterDestroy:e}}}function N(){return{type:h.Vj,payload:{}}}function L(){return{type:h.hB,payload:{}}}function M(){return{type:h.fI,payload:{}}}function D(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return async(t,n)=>{const a=n(),r=(0,b.H)(a,S.ll.CONFIG_EXTERNAL_PLATFORM);try{if(!e){var o;R.info("ZD Messaging: Clearing local storage values for chatter persistence",r),C.BB.setItem("chatter",""),C.BB.setItem("created",""),(0,I.J)("",""),R.info("ZD Messaging: Clearing embed local storage values for chatter persistence",r),await x.embedStore.dispatch("setState",{chatterToken:"",chatterCreated:""});const e=a.client.handle,t=parseInt(String(null===(o=C.BB.getFnItem("zdmChatResetCount"))||void 0===o?void 0:o[e]),10)||0;t<3&&(C.BB.setFnItem("zdmChatResetCount",{[e]:t+1}),x.fc.postMessage(w.rY)),(0,I.S)("","")}await u().destroy(),t(k(e))}catch{t(O(e))}}}var F=n(11665);const U=(0,T.bN)(),z="connected",P="disconnected",G="reconnecting",H=["ready",z,P,G];function B(e){return{type:F.M,payload:{events:e}}}function Z(){return{type:F.D,payload:{}}}function W(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H;return async(t,n)=>{const a=n(),r=(0,b.H)(a,S.ll.CONFIG_EXTERNAL_PLATFORM),o={[z]:()=>{t(N())},[P]:()=>{t(M())},[G]:()=>{t(L())}},i=[];for(const t of e)try{o[t]?(await u().on(t,o[t]),U.info("ZD Messaging Events Actions: Successfully bound ".concat(t," handler"),r)):U.warn("ZD Messaging Events Actions: No event handler for ".concat(t,". Cannot bind."),r)}catch{U.warn("ZD Messaging Events Actions: Error binding ".concat(t," handler"),r),i.push(t)}return i.length>0?t(B([...i])):t(Z())}}},21642:function(e,t,n){"use strict";n.d(t,{E:function(){return r},z:function(){return a}});const a="ZENDESK_MESSAGING_GET_AUTH_DATA_SUCCESS",r="ZENDESK_MESSAGING_GET_AUTH_DATA_FAILURE"},85230:function(e,t,n){"use strict";n.d(t,{Fk:function(){return a},Ly:function(){return o},VA:function(){return s},_v:function(){return i},i_:function(){return r},sP:function(){return c}});const a="ZENDESK_MESSAGING_LOAD_CONVERSATION_SUCCESS",r="ZENDESK_MESSAGING_LOAD_CONVERSATION_FAILURE",o="ZENDESK_MESSAGING_SEND_MESSAGE_SUCCESS",i="ZENDESK_MESSAGING_SEND_MESSAGE_FAILURE",s="ZENDESK_MESSAGING_UPLOAD_ATTACHMENT_FAILURE",c="ZENDESK_MESSAGING_UPLOAD_ATTACHMENT_SUCCESS"},11665:function(e,t,n){"use strict";n.d(t,{D:function(){return r},M:function(){return a}});const a="BIND_ZENDESK_MESSAGING_SDK_EVENTS_FAILURE",r="BIND_ZENDESK_MESSAGING_SDK_EVENTS_SUCCESS"},25446:function(e,t,n){"use strict";n.d(t,{D:function(){return o.D},DC:function(){return a.DC},EW:function(){return i.E},Fk:function(){return r.Fk},Ly:function(){return r.Ly},M2:function(){return o.M},VA:function(){return r.VA},Vj:function(){return a.Vj},_v:function(){return r._v},fC:function(){return a.fC},fI:function(){return a.fI},hB:function(){return a.hB},i_:function(){return r.i_},sP:function(){return r.sP},uh:function(){return a.uh},zS:function(){return i.z}});var a=n(71830),r=n(85230),o=n(11665),i=n(21642)},71830:function(e,t,n){"use strict";n.d(t,{DC:function(){return c},Vj:function(){return o},fC:function(){return r},fI:function(){return s},hB:function(){return i},uh:function(){return a}});const a="DESTROY_ZENDESK_MESSAGING_SDK_SUCCESS",r="DESTROY_ZENDESK_MESSAGING_SDK_ERROR",o="ZENDESK_MESSAGING_SDK_CONNECTED",i="ZENDESK_MESSAGING_SDK_RECONNECTING",s="ZENDESK_MESSAGING_SDK_DISCONNECTED";let c;!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"}(c||(c={}))},89009:function(e,t,n){"use strict";n.d(t,{i_:function(){return o},v5:function(){return a},w3:function(){return r}});const a=[408,429,503,504],r=52428800,o=["image/jpeg","image/jpg","image/png","application/pdf"]},68291:function(e,t,n){"use strict";n.d(t,{J:function(){return l},S:function(){return c}});var a=n(24744),r=n(3278),o=n(21962),i=n(17936),s=n(11021);const c=(e,t)=>{(0,i.E)()===r.y.Embed2&&o.fc.postMessage(a.Pd,{zdMessagingExternalUserId:e,zdMessagingChatterCreated:t})},l=(e,t)=>{s.A.setItem("zdMessagingExternalUserId",e),s.A.setItem("zdMessagingChatterCreated",t)}},57593:function(e,t,n){"use strict";function a(e,t){const{client:n,chatter:a,pageState:r,liveAgent:o}=e,{suncoConvoId:i}=o.zendeskMessaging,{inLiveChat:s}=o;return{client_id:a.get("clientId"),conversation_state:s&&"live_chat",chatter_token:a.get("token"),client_handle:n.get("handle"),chat_session_id:r.get("sessionID"),external_conversation_id:i||"",operation_tag:t,handoff_platform:"zaw"}}n.d(t,{H:function(){return a}})},7359:function(e,t,n){"use strict";n.d(t,{$C:function(){return w},$X:function(){return W},C$:function(){return G},Et:function(){return M},G7:function(){return ee},H2:function(){return H},HD:function(){return B},Hy:function(){return O},Q0:function(){return Z},Qz:function(){return P},RP:function(){return j},RU:function(){return J},T:function(){return T},T7:function(){return Y},Xl:function(){return Q},Zb:function(){return D},_0:function(){return K},aG:function(){return ne},dA:function(){return b},du:function(){return L},fy:function(){return I},hF:function(){return z},h_:function(){return X},lm:function(){return V},sY:function(){return F},u5:function(){return $},xw:function(){return te},zK:function(){return q}});var a=n(4731),r=n(24744),o=n(3278),i=n(43219),s=n(3228),c=n(26969),l=n(86697),u=n(52224),d=n(35787),g=n(46876),p=n(79667),m=n(9432),f=n(21962),h=n(17936),E=n(40622),v=n(11021),y=n(16711),A=n(32725),_=n(83877);const S=(0,g.bN)();function b(e){return{type:A.Ph,payload:{agentId:e.memberId,displayName:e.displayName,timestamp:e.timestamp}}}function T(){return{type:_.Q6,payload:{}}}function C(){return{type:_.yq,payload:{}}}function w(){return{type:_.ZM,payload:{}}}function I(){return{type:_.l_,payload:{}}}function x(e){return S.info("Zendesk Queue: Setting queue position in chat",{position:e,operational_tag:i.ll.INITIATE_HANDOFF}),{type:_.Fv,payload:{position:e}}}function R(e){return{type:_.mz,payload:{message:e}}}function k(e){return{type:_.zC,payload:{message:e}}}function O(e){return{type:_.Z8,payload:{file:e}}}function N(e,t){return{type:_.mM,payload:{errorMessage:e,translationOptions:t}}}function L(e,t){return{type:_.wO,payload:{batchedTranscript:e,externalChatId:t}}}function M(){return{type:_.$L,payload:{}}}function D(e){return{type:_.uS,payload:{externalChatId:e}}}function F(e){return{type:_.dW,payload:{zendeskSessionId:e}}}function U(e,t){return{type:_.VI,payload:{message:e,errorMessage:t}}}function z(e){return{type:_.te,payload:{isTyping:e}}}function P(e){return{type:_.iE,payload:{tags:e}}}function G(e){return{type:_.J5,payload:{previouslyConnected:e}}}function H(e,t){return{type:_.nJ,payload:{lastProcessedTimestamp:e,externalChatId:t}}}function B(){return async(e,t)=>{const n=(0,l.cA)(),{tags:a,sessionId:o}=t().liveAgent.zendesk,s=(0,g.HG)(t(),i.ll.EXTERNAL_API_CALL);S.mergeContext({...s}),S.info("Zendesk: Processing sending Zendesk tags");try{await n.sendTags(a||[]);const e=(null==a?void 0:a.join(","))||"";v.I.store(u._F,e),f.fc.postMessage(r.rI,{zdSessionId:o,zdPreviousTags:e}),S.info("Zendesk: Added Tags",{tags:a||[]})}catch(e){S.error("Failed to send Zendesk tags",{error_message:e.message,tags:a||[],error_tag:i.wU.EXTERNAL_API_ERROR})}}}function Z(){return async(e,t)=>{const{previousZDTags:n}=await async function(){let e;try{(0,h.E)()===o.y.Embed2&&(e=await f.embedStore.get("zdPreviousTags")||"")}catch(e){console.warn("".concat(e))}return e&&"string"==typeof e||(e=v.I.retrieve(u._F)||""),{previousZDTags:e}}(),a=n.split(",").map((e=>e.trim())).filter((e=>e)),r=(0,l.cA)(),s=(0,g.HG)(t(),i.ll.EXTERNAL_API_CALL);S.mergeContext({...s}),S.info("Zendesk: Processing removing Zendesk tags");try{a.length>0&&(await r.removeTags(a),S.info("Zendesk: Removed Tags",{tags:a}))}catch(e){S.error("Failed to remove Zendesk tags",{error_message:e.message,tags:a,error_tag:i.wU.EXTERNAL_API_ERROR})}}}function W(e){return async(t,n)=>{const a=n(),{chatter:r,pageState:o,liveAgent:s}=a,c=r.get("token"),l=o.get("sessionID"),u=s.zendesk.sessionId,d=(0,g.HG)(a,i.ll.INTERNAL_API_CALL);S.mergeContext({...d}),S.info("Zendesk: Processing sending simple Zendesk event");try{S.info("Zendesk: Posting simple Zendesk event to backend"),await p.pE(e,c,l,u,t),S.info("Zendesk: Successfully posted simple Zendesk event to backend")}catch(t){S.error("Zendesk: Failed to send ".concat(e," event to API"),{error_tag:i.wU.INTERNAL_API_ERROR,error_message:t.message})}}}function V(e){return async(t,n)=>{const a=n(),{chatter:r,pageState:o,liveAgent:s}=a,c=r.get("token"),l=o.get("sessionID"),u=s.zendesk.sessionId,d=s.zendesk.reconnecting,m=(0,g.HG)(a,i.ll.INTERNAL_API_CALL);if(S.mergeContext({...m}),S.info("Zendesk Queue: Processing sending queue position"),d&&0===e)return S.info("Zendesk Queue: Position is 0 and in client in reconnecting state. Setting queue position and ending processing"),void t(x(e));S.info("Zendesk Queue: Sending queue position event to backend",{position:e}),await p.Vh(c,e,l,u,t).then((()=>{S.info("Zendesk Queue: Queue position successfully sent, now setting the position in chat",{position:e}),t(x(e))})).catch((e=>{S.error("Zendesk Queue: Failed to send queue position to API",{error_tag:i.wU.INTERNAL_API_ERROR,error_message:e.message})}))}}function K(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return async(t,n)=>{const a=n(),r=(0,g.HG)(a,i.ll.INTERNAL_API_CALL);if(S.mergeContext({...r}),S.info("Zendesk: Processing end chat"),(0,m.f_)(a))S.info("Zendesk: Session mismatch, ending processing");else try{const n=(0,m.Jc)(a),r=(0,l.cA)();S.info("Zendesk: Ending chat"),r.endChat(),S.info("Zendesk: Posting end chat event to backend"),await p.j_(n.chatterToken,e,n.chatSessionId,n.zdSessionId,t).then((()=>{S.info("Zendesk: Successfully posted end chat event to backend"),t(w())})).catch((e=>{S.error("failed to send end chat request to API",{error_message:e.message,error_tag:i.wU.INTERNAL_API_ERROR}),t(C())}))}catch(e){S.error("failed to get client info",{error_message:e.message,error_tag:i.wU.INTERNAL_API_ERROR}),t(C())}}}function j(){return async(e,t)=>{const n=(0,l.cA)(),r=t(),{chatterToken:o,chatSessionId:s,zdSessionId:c}=(0,m.Jc)(r),d=n.isChatting(),f=(0,g.HG)(r,i.ll.INTERNAL_API_CALL);if(S.mergeContext({...f}),S.info("Zendesk: Processing check if chat is active"),d){S.info("Zendesk: Chat is active, getting queue position and dispatching queue position event");const t=n.getQueuePosition();return e(function(e){return async t=>{e<0||t(V(e))}}(t)),S.info("Zendesk: Sending tags"),void e(B())}if(v.I.retrieve("previouslyAuthenticated")&&(S.warn("Zendesk Reconnect: Previously authenticated chat failed to reconnect."),v.I.destroy("previouslyAuthenticated")),e((0,a.XR)()),(0,m.f_)(r))return S.info("Zendesk: Session mismatch while processing check if chat is active. Dispatching end chat success"),void e(w());const h=u.wf;S.info("Zendesk Reconnect: Posting disconnected event to backend."),await p.g1(o,s,c,h,e).then((()=>{S.info("Zendesk Reconnect: chat ending as it is no longer active in Zendesk.",{isChatting:d,zdSessionId:c}),e(w())})).catch((t=>{S.error("Zendesk Reconnect: Failed to post disconnect event",{error_message:t.message,error_tag:i.wU.INTERNAL_API_ERROR}),e(C())})),e((0,a.XR)())}}function q(e){return async(t,n)=>{const a=n(),{chatterToken:r,chatSessionId:o,zdSessionId:s}=(0,m.Jc)(a),l=(0,g.HG)(a,i.ll.INTERNAL_API_CALL);S.mergeContext({...l}),S.info("Zendesk: Processing end chat due to error"),e!==u.MP&&S.error("Chat ended due to error",{error_message:e,error_tag:i.wU.INTERNAL_API_ERROR}),S.info("Zendesk: Posting disconnected event to backend"),await p.g1(r,o,s,e,t).then((()=>{S.info("Zendesk: Successfully posted disconnected event to backend"),e===u.MP&&S.error("Zendesk SDK connection closed",{error_message:e,error_tag:i.wU.INTERNAL_API_ERROR}),S.info("Zendesk: Tearing down SDK"),t((0,c.hc)()),t(w())})).catch((e=>{const t=e;S.error("Error sending disconnected event to backend",{error_message:t.message,error_tag:i.wU.INTERNAL_API_ERROR})}))}}function X(e){return async()=>{const t=(0,l.cA)(),n=t.getConnectionStatus();t.isChatting()&&"connected"===n&&t.sendTyping(e)}}function Q(e,t){return async(n,a)=>{const{chatterToken:r,chatSessionId:o,zdSessionId:s}=(0,m.Jc)(a()),c=(0,g.HG)(a(),i.ll.INTERNAL_API_CALL);S.mergeContext({...c});try{await p.L(t,r,o,s,e,n)}catch(e){const t=e;S.error("Failed to send typing event to API",{error_message:t.message,error_tag:i.wU.INTERNAL_API_ERROR})}}}function Y(){return async(e,t)=>{const n=t(),a=(0,g.HG)(n,i.ll.EXTERNAL_API_CALL);if(S.mergeContext({...a}),S.info("Zendesk: Processing handling existing Zendesk conversation"),!(0,m.f4)(n))return void S.info("Zendesk: No existing Zendesk state found, ending processing");S.info("Reconnecting to existing Zendesk chat conversation",{client:{persistence:n.client.persistence,timeToExpiry:n.client.timeToExpiry},isInNormalMode:(0,E.Is)(n.client),isInPrivateMode:(0,E.Ay)(n.client)});const{accountKey:r,tags:o,useZdAuth:c,overrideProxy:l}=(0,s.U7)(n);var u;e((u={account_key:r,tags:o,use_zd_auth:c,override_proxy:l},{type:_.Ci,payload:{reconnectResponse:u}}))}}function J(e){return async(t,n)=>{const a=(0,l.cA)(),r=(0,g.HG)(n(),i.ll.INTERNAL_API_CALL);S.mergeContext({...r}),S.info("Zendesk: Processing sending message to Zendesk");try{S.info("Zendesk: Sending message to Zendesk"),await a.sendMessage(e)}catch(n){const a=n;return S.error("Error sending message to zendesk sdk",{messageBody:e,error_message:a.message,error_tag:i.wU.EXTERNAL_API_ERROR}),void t(k(e))}S.info("Zendesk: Successfully sent message to Zendesk"),t(R(e))}}function $(e){return async(t,n)=>{const a=(0,l.cA)(),{chatter:r}=n(),o=(0,y.Nj)(r.get("language")),s="BOT: ".concat(o(e)),c=(0,g.HG)(n(),i.ll.INTERNAL_API_CALL);S.mergeContext({...c});try{await a.isChatting()?await a.sendMessage(s):t(I())}catch(e){const n=e;return S.error("Error sending presence message to zendesk sdk",{messageBody:s,error_message:n.message,error_tag:i.wU.EXTERNAL_API_ERROR}),void t(k(s))}t(R(s))}}function ee(e,t,n){return async(r,o)=>{const s=o(),{chatter:c,pageState:l,liveAgent:u}=s;if("system"===e.agent_id&&!e.display_name)return;const f=c.get("token"),h=l.get("sessionID"),E=u.zendesk.sessionId,v=(0,g.HG)(s,i.ll.EXTERNAL_API_CALL);if(S.mergeContext({...v}),S.info("Zendesk: Processing received agent message"),(0,m.At)(s)(n))return S.info("Zendesk: Timestamp is old when receiving agent message, sending warning and ending processing"),void(0,g.yr)(f,"receiveAgentMessage",n,u.zendesk.lastProcessedTimestamp);if(r((0,a.XR)()),u.inPending)S.info("Zendesk: Received agent message event while live chat in pending state. Converting pending to live chat"),r(function(e,t,n){return async a=>{const r=(0,m.Jc)(e),o=(0,g.HG)(e,i.ll.INTERNAL_API_CALL);S.mergeContext({...o,...r}),S.info("Zendesk: Processing converting pending to live chat"),S.info("Zendesk: Posting agent presence event for agent join to backend."),await p.pp(d.i.AGENT_JOIN,{...r,memberId:t.agent_id,displayName:t.display_name,timestamp:n},a).then((()=>{S.info("Zendesk: Successfully posted agent presence event for agent join to backend, adding Zendesk agent"),a(b({memberType:"agent",memberId:t.agent_id,displayName:t.display_name,timestamp:n}))})).catch((e=>{S.error("Failed to send agent presence event.",{error_message:e.message,error_tag:i.wU.EXTERNAL_API_ERROR,agentEvent:d.i.AGENT_JOIN})}))}}(s,e,n));else if(!u.inLiveChat){const n="Error receiving message from zendesk agent: live chat ended";return S.info(n,{message:t,memberType:e.type}),void r(U(t,n))}S.info("Zendesk: Posting agent message event to backend"),await p.Nh({memberData:e,message:t,timestamp:n,chatterToken:f,chatSessionId:h,zdSessionId:E},r).then((()=>{S.info("Zendesk: Successfully posted agent message event to backend"),r(function(e){return{type:_.a8,payload:{message:e}}}(t))})).catch((e=>{r(U(t,e.toString())),S.error("Error posting to live webhook",{message:t,error_message:e.toString(),error_tag:i.wU.EXTERNAL_API_ERROR})}))}}function te(e){return async(t,n)=>{const a=n(),{chatterToken:r,chatSessionId:o,zdSessionId:i}=(0,m.Jc)(a);(0,m.At)(a)(e.timestamp)?(0,g.yr)(r,"receiveAgentFile",e.timestamp,a.liveAgent.zendesk.lastProcessedTimestamp):await p.Eo(r,o,i,e,t).then((()=>{S.info("Zendesk: Successfully posted agent file event to backend"),t({type:_.xJ,payload:{}})})).catch((e=>{var n;t((n=e.message,{type:_.sw,payload:{errorMessage:n}}))}))}}function ne(e){return async t=>{const n=(0,l.cA)();var a;if(e.size>u.w3)t(N(u.r4,{maxFileSizeInMB:u.w3/1048576}));else try{t((a=await n.sendFile(e),{type:_.xe,payload:{fileData:a}}))}catch(e){t(N(e.extra.originalMessage,{}))}}}},15584:function(e,t,n){"use strict";n.d(t,{a0:function(){return p},J8:function(){return g}});var a=n(4731),r=n(24744),o=n(43219),i=n(46876);const{delay:s,clearDelay:c}=function(){let e=null;return{delay:(t,n)=>{e=window.setTimeout(t,n)},clearDelay:()=>{"number"==typeof e&&clearTimeout(e),e=null}}}(),l=(0,i.bN)();l.setLoggerReady();const u=[r.zm,r.yk,r.b8];function d(){return(e,t)=>{const{pageState:n}=t(),{inState:a,stateType:r}=n;return!!r&&a&&[o.YR,o.kb].includes(r)}}function g(e){return(t,n)=>{const{pageState:i,liveAgent:c}=n();if(c.adaGlassEnv===o.Gh){const{notificationInfo:n,notification:o}=i,c=u.includes(e),g=o&&n.get("type")===r.p8,p=t(d());!g&&p&&c&&(l.info("First ZD Live Chat Connectivity message shown for ".concat(e," event")),t((0,a.Gg)({type:r.p8,headerTranslationKey:"CONNECTING",descriptionTranslationKey:"TRYING_TO_CONNECT_YOU_WITH_AN_AGENT"})),s((()=>{t(function(e){return function(t){let n=t(d());n?(l.info("Second ZD Live Chat Connectivity message shown for ".concat(e," event")),t((0,a.Gg)({type:r.p8,headerTranslationKey:"CONNECTING",descriptionTranslationKey:"STILL_TRYING_AGENT_CONNECTION"})),s((()=>{n=t(d()),n?(l.info("Last ZD Live Chat Connectivity message shown for ".concat(e," event")),t((0,a.Gg)({type:r.p8,headerTranslationKey:"CONNECTING",descriptionTranslationKey:"AGENT_CONNECTION_IS_TAKING_LONGER_THAN_USUAL"}))):l.info("Last ZD Live Chat Connectivity message skipped because handoff state was exited")}),3e4)):l.info("Second ZD Live Chat Connectivity message skipped because handoff state was exited")}}(e))}),3e4))}}}function p(e){return(t,n)=>{const{pageState:o}=n(),{notificationInfo:i,notification:s}=o,u=e===r.b8;s&&i.get("type")===r.p8&&u&&(l.info("ZD Live Chat Connectivity message removed for ".concat(e," event")),t((0,a.XR)())),c()}}},7732:function(e,t,n){"use strict";n.d(t,{C$:function(){return r.C$},XY:function(){return D},gW:function(){return F},o0:function(){return M},Xl:function(){return r.Xl},Kn:function(){return L},T:function(){return r.T},h_:function(){return r.h_},hv:function(){return m},RP:function(){return r.RP},Et:function(){return r.Et},P:function(){return a.P},_0:function(){return r._0},zK:function(){return r.zK},$C:function(){return r.$C},T7:function(){return r.T7},u_:function(){return a.u_},xw:function(){return r.xw},G7:function(){return r.G7},Q0:function(){return r.Q0},aG:function(){return r.aG},RU:function(){return r.RU},lm:function(){return r.lm},$X:function(){return r.$X},du:function(){return r.du},u5:function(){return r.u5},HD:function(){return r.HD},Zb:function(){return r.Zb},hF:function(){return r.hF},A4:function(){return H.A},H2:function(){return r.H2},TS:function(){return U},ig:function(){return G},kw:function(){return g},J1:function(){return a.J1},IT:function(){return p},sY:function(){return r.sY},Qz:function(){return r.Qz},hc:function(){return a.hc},fy:function(){return r.fy},oJ:function(){return a.oJ},BO:function(){return a.BO},Hy:function(){return r.Hy}});var a=n(26969),r=n(7359),o=n(43219),i=n(86697),s=n(46876),c=n(79667),l=n(75073);const u=(0,s.bN)();function d(e){return{type:l.Yv,payload:{departmentId:e}}}function g(e){return{type:l.nn,payload:{departmentId:e}}}function p(){return async(e,t)=>{let{departmentId:n}=t().liveAgent.zendesk;const a=(0,i.cA)(),r=(0,s.HG)(t(),o.ll.CONFIG_EXTERNAL_PLATFORM);if(u.mergeContext({...r}),u.info("Zendesk: Processing setting Zendesk department ID"),!n){u.info("Zendesk: No department ID found in state, getting visitor default department from client");const t=a.getVisitorDefaultDepartment();if(!t)return u.error("Zendesk Department ID missing.",{error_tag:o.wU.INVALID_CONFIGURATION}),void e(d(t));u.info("Zendesk: Setting Zendesk department ID with visitor default department"),e(g(t)),n=t}u.info("Zendesk: Setting department ID in Zendesk client"),await a.setVisitorDepartment(n).then((()=>{u.info("Zendesk: Successfully set department ID in Zendesk client"),e(function(e){return{type:l.xC,payload:{departmentId:e}}}(n))})).catch((t=>{const a=t;u.error("Error setting visitor department in zendesk sdk",{departmentId:n,error_message:a.message,error_tag:o.wU.INVALID_CONFIGURATION}),e(d(n))}))}}function m(e){return async(t,n)=>{const a=(0,i.cA)(),{chatter:r,pageState:d,liveAgent:g}=n(),p=(0,s.HG)(n(),o.ll.INTERNAL_API_CALL);if(u.mergeContext({...p}),u.info("Zendesk: Processing checking if account or department offline"),a.isAccountOrDeptOffline(e)){u.info("Zendesk: Account or department is offline"),t({type:l.Qq,payload:{}});try{u.info("Zendesk: Posting account or department is offline event to backend."),await c.hX(r.get("token"),d.get("sessionID"),g.zendesk.sessionId,t),u.info("Zendesk: Successfully posted account or department is offline event to backend.")}catch(e){u.error("Zendesk Department Offline: Failed to post failure event.",{error_message:e.message,chatterToken:r.get("token"),chatSessionId:d.get("sessionID"),zdSessionId:g.zendesk.sessionId,error_tag:o.wU.INTERNAL_API_ERROR})}}else u.info("Zendesk: Posting account or department is online event to backend."),await c.aU(r.get("token"),d.get("sessionID"),g.zendesk.sessionId,t).then((()=>{u.info("Zendesk: Successfully posted account or department is online event to backend."),t({type:l.e2,payload:{}})}))}}var f=n(1514),h=n(35787),E=n(9432),v=n(11021);const y=()=>({inLiveChat:v.I.retrieve("inLiveChat")||!1,zdSessionId:v.I.retrieve("zdSessionId")||void 0}),A=(0,s.bN)(),_=(e,t)=>(A.mergeContext({conversation_state:e?"live_chat":"live_chat_pending",external_conversation_id:t,operation_tag:o.ll.CONFIG_EXTERNAL_PLATFORM}),A),S=/^Visitor (\d+)$/,b=/[0-9]+/,T=e=>"string"==typeof e&&""!==e.trim(),C=e=>{const t=e.trim();return t.length>255?t.substring(0,255):t},w=(e,t,n,a)=>e.test(n)?n:(a.warn("Unable to set chatter email due to invalid email",{chatterEmail:n}),t),I=(e,t)=>e||t||null,x=(e,t,n,a)=>{var r;t&&("string"!=typeof(r=t)||r.length>25||!b.test(r)?n.warn("Unable to set invalid phone number, reverting to fallback",{fallbackPhone:a,invalidPhone:t}):e.phone=t)};function R(e,t,n,a){return e?function(e,t,n){const{inLiveChat:a,zdSessionId:r}=y(),o=_(a,r),{chatterName:i,chatterEmail:s,chatterPhone:c}=e,{display_name:l,email:u,phone:d}=t;var g;o.info("Zendesk: Authorized user");const p={display_name:(g=l,S.test(g)&&T(i)?C(i):l),email:!u&&s?w(n,u,s,o):u},m=I(d,c);return x(p,m,o,m),p}(t,n,a):function(e,t,n){const{inLiveChat:a,zdSessionId:r}=y(),o=_(a,r),{chatterName:i,chatterEmail:s,chatterPhone:c}=e,{phone:l}=t,u={...t};o.info("Zendesk: Unauthorized user");const d={display_name:i&&T(i)?C(i):u.display_name,email:s?w(n,u.email,s,o):u.email},g=I(c,l);return x(d,g,o,c),d}(t,n,a)}var k=n(86471),O=n(32725);const N=(0,s.bN)();function L(e){return async(t,n)=>{const a=n(),r=(0,E.Jc)(a),i=(0,s.HG)(a,o.ll.INTERNAL_API_CALL);N.mergeContext({...i}),N.info("Zendesk: Processing agent updated action"),a.liveAgent.zendesk.primarySession===r.chatSessionId?(N.info("Zendesk: Posting agent update to backend"),await c.Pn({...r,...e},t).then((n=>{const{data:{agent:a}}=n;var r;N.info("Zendesk: Successfully posted agent update to backend"),t((r=e,{type:O.bt,payload:{agentId:r.memberId,avatarPath:r.avatarPath,displayName:r.displayName}})),t((0,f.Jp)(a))})).catch((t=>{N.error("Failed to update agent data",{eventName:"agentUpdated",error_tag:o.wU.INTERNAL_API_ERROR,error_message:t.message,...e})}))):N.info("Zendesk: Primary session different from chat session ID, ending processing")}}function M(e){return async(t,n)=>{const a=(0,i.cA)().getQueuePosition();let c=n(),l=(0,E.Jc)(c),u=(0,s.HG)(c,o.ll.INTERNAL_API_CALL);if(N.mergeContext({...u,...l}),N.info("Zendesk: Processing agent removed action"),(0,E.f_)(c))return void N.info("Zendesk: Session mismatch while processing agent removed action. Ending processing");if(a>0)return N.info("Zendesk: Queue position is greater than 0. Sending queue position and ending processing"),void t((0,r.lm)(a));await(0,k.u)(o.r2),c=n(),l=(0,E.Jc)(c),u=(0,s.HG)(c,o.ll.INTERNAL_API_CALL),N.mergeContext({...u,...l});const d=Object.values(c.liveAgent.agents),g=d.reduce(((e,t)=>e+(t.isActive?1:0)),0),p=d.map((e=>e.external_id));(0===g||1===g&&e in p)&&(N.info("Ending chat, no more agents",{error_tag:o.wU.INTERNAL_API_ERROR}),t((0,r._0)((new Date).getTime())))}}function D(e){return async(t,n)=>{const{memberId:a,displayName:i,timestamp:l}=e,u=n(),d=(0,E.Jc)(u),g=(0,E.At)(u)(l),{reconnecting:p}=(0,E.WP)(u),m=(0,s.HG)(u,o.ll.INTERNAL_API_CALL);if(N.mergeContext({...m}),N.info("Zendesk: Processing agent joined action"),(0,E.f_)(u))N.info("Zendesk: Session mismatch while processing agent joined action. Ending processing");else{if(g)return p?(N.info("Zendesk: Backfill add Zendesk agent due to reconnecting old Zendesk client"),void t(function(e){return{type:O.gq,payload:{agentId:e.memberId,displayName:e.displayName,timestamp:e.timestamp}}}(e))):(N.info("Zendesk: Timestamp is old when agent join, sending warning"),void(0,s.yr)(d.chatterToken,"agentJoinRequest",l,u.liveAgent.zendesk.lastProcessedTimestamp));N.info("Zendesk: Posting agent presence event for agent join to backend"),await c.pp(h.i.AGENT_JOIN,{...d,memberId:a,displayName:i,timestamp:l},t).then((()=>{N.info("Zendesk: Successfully posted agent presence event for agent join to backend"),t((0,r.dA)(e))})).catch((e=>{N.error("Failed to send agent presence event.",{error_message:e.message,agentEvent:h.i.AGENT_JOIN,error_tag:o.wU.INTERNAL_API_ERROR,...d})}))}}}function F(e){return async(t,n)=>{const{memberId:a,displayName:r,timestamp:i}=e,l=n(),u=(0,E.Jc)(l),d=(0,E.At)(l)(i),{reconnecting:g}=(0,E.WP)(l),p=(0,s.HG)(l,o.ll.INTERNAL_API_CALL);if(N.mergeContext({...p,...u}),N.info("Zendesk: Processing agent leave action"),(0,E.f_)(l))N.info("Zendesk: Session mismatch while processing agent leave action. Ending processing");else{if(d)return g?(N.info("Zendesk: Backfill remove Zendesk agent due to reconnecting old Zendesk client"),void t((m=e.memberId,{type:O.RE,payload:{id:m}}))):(N.info("Zendesk: Timestamp is old when agent leave, sending warning"),void(0,s.yr)(u.chatterToken,"agentLeaveRequest",i,l.liveAgent.zendesk.lastProcessedTimestamp));var m;N.info("Zendesk: Posting agent presence event for agent leave to backend"),await c.pp(h.i.AGENT_LEAVE,{...u,memberId:a,displayName:r,timestamp:i},t).then((()=>{N.info("Zendesk: Successfully posted agent presence event for agent leave to backend"),t(function(e){return{type:O.u8,payload:{id:e}}}(e.memberId))})).catch((e=>{N.error("Failed to send agent presence event.",{error_message:e.message,error_tag:o.wU.INTERNAL_API_ERROR,agentEvent:h.i.AGENT_LEAVE})}))}}}function U(e){return{type:O.tB,payload:{adaVisitorInfo:e}}}function z(){return{type:O.vs,payload:{}}}function P(e){return{type:O.Q_,payload:{errorMessage:e}}}function G(e){return async(t,n)=>{const a=(0,i.cA)(),r=n(),c=(0,s.HG)(r,o.ll.EXTERNAL_API_CALL);if(N.mergeContext({...c}),N.info("Zendesk: Processing setting visitor info in Zendesk"),!e)return N.error("Zendesk: No Ada visitor info was set. Failed to set visitor info in Zendesk, ending processing"),void t(P("Cannot set visitor info. No Ada visitor info was set."));let l;try{N.info("Zendesk: Getting visitor info from Zendesk"),l=a.getVisitorInfo()}catch(e){return N.error("Zendesk: Failed to get visitor info from Zendesk. Ending processing"),void t(P(e.message))}N.info("Zendesk: Building combined visitor info with Ada and Zendesk visitor info");const u=!!v.I.retrieve("zd_isChatterAuthenticated"),d=R(u,e,l,a.getEmailRegexp());if(N.info("Zendesk: Setting visitor info in Zendesk",{...d}),u)return N.info("Zendesk: we should not set visitor info for authenticated users",{is_chatter_authenticated:u,chatter_info:{...e},zendesk_info:{...l}}),void t(z());await a.setVisitorInfo(d).then((()=>{N.info("Zendesk: Succesfully set visitor info in Zendesk"),t(z())})).catch((n=>{N.error("Zendesk: Error setting visitor info",{chatter_info:{...e},error_message:n.message,error:n.toString(),error_tag:o.wU.EXTERNAL_API_ERROR,is_chatter_authenticated:u,request_payload:{...d},zendesk_info:{...l}}),t(P(n.message))}))}}var H=n(74943);n(15584)},74943:function(e,t,n){"use strict";n.d(t,{A:function(){return o},O:function(){return r}});var a=n(97757);function r(e){return{type:a.P,payload:{url:e.url,payload:e.payload}}}function o(e){return{type:a.x,payload:{fatalRequestErrorReached:e}}}},26969:function(e,t,n){"use strict";n.d(t,{P:function(){return R},u_:function(){return I},SO:function(){return v},J1:function(){return x},hc:function(){return _},oJ:function(){return w},BO:function(){return b}});var a=n(26183),r=n(76068),o=n.n(r),i=n(74266),s=n(24744),c=n(43219),l=n(86697),u=n(58621),d=n(46876),g=n(79667);const p=(0,d.bN)();var m=n(9432),f=n(22635),h=n(7359),E=n(94155);const v=(0,a.oJ)()?new(o()):null,y=(0,d.bN)();function A(e,t){return{type:E.V_,payload:{initConvoResponse:e,connectionStatusTimeoutId:t}}}function _(){return{type:E.Em,payload:{}}}function S(){return{type:E.$R,payload:{}}}function b(e){return{type:E.X3,payload:{errorDetails:e}}}const T={[u.W_.SDK_CONNECTING]:{action:function(){return{type:E.vS,payload:{}}},event:s.zm},[u.W_.SDK_CONNECTED]:{action:function(){return{type:E.GK,payload:{}}},event:s.W_},[u.W_.SDK_CLOSED]:{action:S,event:s.Yt}},C={[u.W_.SDK_CONNECTING]:{errorAction:function(){return{type:E.Y4,payload:{}}},errorEvent:s.zm},[u.W_.SDK_CONNECTED]:{errorAction:function(){return{type:E.nz,payload:{}}},errorEvent:s.W_},[u.W_.SDK_CLOSED]:{errorAction:function(){return{type:E.OS,payload:{}}},errorEvent:s.Yt}};function w(e){return async(t,n)=>{const a=e.type,{action:r}=T[a];let{event:o}=T[a];const{errorAction:i}=C[a],l=n(),p=(0,m.Jc)(l),{reconnecting:h}=(0,m.WP)(l),E=(0,d.HG)(n(),c.ll.EXTERNAL_API_CALL);if(y.mergeContext({...E,...p}),y.info("Zendesk: Processing Zendesk SDK connection status update"),!a)return y.error("Received unexpected connection update from Zendesk.",{connectionStatus:a,error_tag:c.wU.EXTERNAL_API_ERROR}),void t(S());if(y.info("Zendesk SDK Connection Status Update",{connectionStatus:a}),a!==u.W_.SDK_CONNECTED&&a!==u.W_.SDK_CLOSED||v&&(v.release(f.u7),y.info("Released mutex lock in zendeskSDKConnectionUpdate during CONNECTED or CLOSED event.")),(0,m.f_)(l))return y.info("Zendesk: Session mismatch on connection status update. Dispatching connection status update action"),void t(r());if(h){if(o===s.zm)return void y.info("Zendesk: Recieved connecting event in reconnecting state. Ending processing");o===s.W_&&(y.info("Zendesk: Recieved connected event in reconnecting state. Setting event to reconnected"),o=s.Vl)}y.info("Zendesk: Posting connecting SDK event to backend"),await(0,g.hs)(p.chatterToken,p.chatSessionId,p.zdSessionId,o,t).then((()=>{y.info("Zendesk: Successfully posted connecting SDK event to backend and dispatching connection status update action"),t(r())})).catch((()=>{y.error("Failed to post connection update to backend.",{connectionStatus:a,error_tag:c.wU.EXTERNAL_API_ERROR}),t(i())}))}}function I(e){return(t,n)=>{const a=n(),{pageState:r}=a,o=r.get("sessionID"),s=e.external_chat_id,l=o===s,u=(0,d.HG)(a,c.ll.INITIATE_HANDOFF);y.mergeContext({...u});const g=window.setTimeout((()=>((e,t)=>{const n=t(),a=(0,d.HG)(n,c.ll.CONFIG_EXTERNAL_PLATFORM);p.warn("ZDLA connection status not received",{...a,expectedConnectionTime:"1 minute"})})(0,n)),6e4);y.info("Zendesk: Processing initialize Zendesk conversation"),t((0,h.lm)(0)),l?(y.info("Zendesk: Initializing Zendesk Convo for existing session"),v?v.lock(f.u7).then((()=>{y.info("Zendesk initialize conversation received with localStorage -- Primary Tab",{primarySession:o}),t(A(e,g))})).catch((e=>{y.error("Error encountered while attempting to lock sessionID while dispatching setupZendeskConvo -- Primary Tab",{error:e.toString(),error_message:e.message,error_type:c.wU.INVALID_CONFIGURATION}),clearTimeout(g)})):(y.info("Zendesk initialize conversation received without localStorage -- Primary Tab",{primarySession:o}),t(A(e,g)))):(y.warn("Zendesk Initialize Conversation: Multiple sessions encountered. Retrying connection in ".concat(f.J7/1e3," second(s)"),{currentSession:o,externalSession:s}),v?setTimeout((()=>{v.lock(f.u7).then((()=>{y.info("Initializing Zendesk Conversation with localStorage -- Secondary Tab",{currentSession:o,externalSession:s}),t((0,i.rE)()),t(A(e,g))})).catch((e=>{y.error("Error encountered while attempting to lock sessionID while dispatching setupZendeskConvo -- Secondary Tab",{error_message:e.message,error:e.toString(),error_type:c.wU.INVALID_CONFIGURATION}),clearTimeout(g)}))}),f.J7):(y.info("Initializing Zendesk Conversation without localStorage -- Secondary Tab",{currentSession:o,externalSession:s}),setTimeout((()=>{t(A(e,g))}),f.J7)))}}function x(e,t,n){return async(a,r)=>{const o=r(),i=(0,m.Jc)(o),s=(0,d.HG)(o,c.ll.CONFIG_EXTERNAL_PLATFORM);y.mergeContext({...i,...s}),y.info("Zendesk: Processing setting Zendesk SDK"),y.info("Zendesk: No existing client, initializing new client."),await async function(e,t,n,a,r){const o=t(),i=(0,m.Jc)(o),s=(0,d.HG)(o,c.ll.CONFIG_EXTERNAL_PLATFORM);y.mergeContext({...i,...s});let g=null;y.info("Zendesk: Processing create new Zendesk client");try{y.info("Zendesk: Creating new Zendesk client"),g=await(0,l.c8)(n,i.chatterToken,r,e,t),y.info("Zendesk client initialized successfully.")}catch(t){return y.info("Zendesk: Failed to create new Zendesk client."),void e(b(t))}y.info("Zendesk: Setting Zendesk client event listeners."),function(e,t,n){e.addEventListener(u.Bf.ZENDESK_CHATTER_BANNED,t.onChatterBanned(n)),e.addEventListener(u.Bf.ZENDESK_IDLE_DISCONNECT,t.onIdleDisconnect(n)),e.addEventListener(u.Bf.ZENDESK_DEPARTMENT_OFFLINE,t.onDepartmentOffline(n)),e.addEventListener(u.Bf.ZENDESK_ACCOUNT_OFFLINE,t.onAccountOffline(n)),e.addEventListener(u.Bf.SDK_CONNECTED,t.onConnected(n)),e.addEventListener(u.Bf.SDK_CONNECTING,t.onConnecting(n)),e.addEventListener(u.Bf.SDK_CLOSED,t.onClosed(n)),e.addEventListener(u.Bf.SDK_ERROR,t.onError(n)),e.addEventListener(u.Bf.QUEUE_POSITION,t.onQueuePosition(n)),e.addEventListener(u.Bf.AGENT_JOIN,t.onAgentJoin(n)),e.addEventListener(u.Bf.AGENT_LEAVE,t.onAgentLeave(n)),e.addEventListener(u.Bf.AGENT_UPDATE,t.onAgentUpdate(n)),e.addEventListener(u.Bf.AGENT_MESSAGE,t.onAgentMessage(n)),e.addEventListener(u.Bf.AGENT_TYPING,t.onAgentTyping(n)),e.addEventListener(u.Bf.AGENT_FILE,t.onAgentFile(n))}(g,a,e)}(a,r,e,t,n)}}function R(){return async(e,t)=>{(0,l._I)(t)}}},83877:function(e,t,n){"use strict";n.d(t,{$L:function(){return o},Ci:function(){return v},Fv:function(){return i},J5:function(){return w},Q6:function(){return _},VI:function(){return h},Z8:function(){return s},ZM:function(){return S},a8:function(){return f},dW:function(){return a},iE:function(){return C},l_:function(){return y},mM:function(){return l},mz:function(){return p},nJ:function(){return T},sw:function(){return d},te:function(){return A},uS:function(){return E},wO:function(){return r},xJ:function(){return u},xe:function(){return c},yh:function(){return g},yq:function(){return b},zC:function(){return m}});const a="live-agent/zendesk/set_zendesk_session_id",r="live-agent/zendesk/send_transcript",o="live-agent/zendesk/clear_transcript",i="live-agent/zendesk/queue_position",s="live-agent/zendesk/send_file",c="live-agent/zendesk/send_file_success",l="live-agent/zendesk/send_file_failure",u="live-agent/zendesk/receive_file_success",d="live-agent/zendesk/receive_file_failure",g="live-agent/zendesk/send_message",p="live-agent/zendesk/send_message_success",m="live-agent/zendesk/send_message_failure",f="live-agent/zendesk/receive_message_success",h="live-agent/zendesk/receive_message_failure",E="live-agent/zendesk/session_mismatch",v="live-agent/zendesk/chat_reconnecting",y="live-agent/zendesk/chat_reconnected",A="live-agent/zendesk/chatter_typing",_="live-agent/zendesk/cancel_handoff",S="live-agent/zendesk/end_chat_success",b="live-agent/zendesk/end_chat_failure",T="live-agent/zendesk/set_last_processed_timestamp",C="live-agent/zendesk/set_zendesk_tags",w="live-agent/zendesk/set_previously_connected"},75073:function(e,t,n){"use strict";n.d(t,{Qq:function(){return s},Yv:function(){return o},e2:function(){return i},nn:function(){return a},xC:function(){return r}});const a="live-agent/zendesk/set_zendesk_department_id",r="live-agent/zendesk/set_zendesk_department_id_success",o="live-agent/zendesk/set_zendesk_department_id_failure",i="live-agent/zendesk/department_online",s="live-agent/zendesk/department_offline"},32725:function(e,t,n){"use strict";n.d(t,{Ph:function(){return a},Q_:function(){return u},RE:function(){return s},bt:function(){return o},gq:function(){return i},tB:function(){return c},u8:function(){return r},vs:function(){return l}});const a="live-agent/zendesk/add_agent",r="live-agent/zendesk/remove_agent",o="live-agent/zendesk/update_agent",i="live-agent/zendesk/backfill_add_agent",s="live-agent/zendesk/backfill_remove_agent",c="live-agent/zendesk/set_visitor_info",l="live-agent/zendesk/set_visitor_info_success",u="live-agent/zendesk/set_visitor_info_failure"},97757:function(e,t,n){"use strict";n.d(t,{P:function(){return a},x:function(){return r}});const a="REQUEST_RETRY",r="SET_FATAL_REQUEST_ERROR"},94155:function(e,t,n){"use strict";n.d(t,{$R:function(){return l},Em:function(){return r},GK:function(){return o},OS:function(){return u},V_:function(){return a},X3:function(){return d},Y4:function(){return c},nz:function(){return i},vS:function(){return s}});const a="live-agent/zendesk/setup_zendesk_convo",r="live-agent/zendesk/tear_down_zendesk_sdk",o="live-agent/zendesk/zendesk_sdk_connected",i="live-agent/zendesk/zendesk_sdk_connected_error",s="live-agent/zendesk/zendesk_sdk_connecting",c="live-agent/zendesk/zendesk_sdk_connecting_error",l="live-agent/zendesk/zendesk_sdk_closed",u="live-agent/zendesk/zendesk_sdk_closed_error",d="live-agent/zendesk/zendesk_sdk_error"},86697:function(e,t,n){"use strict";n.d(t,{cA:function(){return H},c8:function(){return G},_I:function(){return B}});var a=n(64467);class r{constructor(){(0,a.A)(this,"delegate",document.createDocumentFragment()),(0,a.A)(this,"eventListenersMap",{})}addEventListener(e,t,n){this.eventListenersMap[e]?this.eventListenersMap[e].push(t):this.eventListenersMap[e]=[t],this.delegate.addEventListener(e,t,n)}removeEventListener(e,t,n){this.delegate.removeEventListener(e,t,n),delete this.eventListenersMap[e]}dispatchEvent(e){return this.delegate.dispatchEvent(e)}removeAllEventListeners(){Object.keys(this.eventListenersMap).forEach((e=>{this.eventListenersMap[e].forEach((t=>{this.removeEventListener(e,t)})),delete this.eventListenersMap[e]}))}}var o=n(74266);n(90438);const i=(0,n(4276).tZ)("zendesk"),s=[{webSdkKey:"__zlcmid",adaKey:"zdSessionId"},{webSdkKey:"__zlcstore",adaKey:"zdCStore"},{webSdkKey:"__zlcid",adaKey:"zdCid"}],c=new Set(s.map((e=>e.webSdkKey))),l=s.reduce(((e,t)=>({...e,[t.webSdkKey]:t.adaKey})),{});function u(e){return e.includes("trigger")?"trigger":e.includes("agent")?"agent":"visitor"===e?"chatter":e.includes("system")?"system":null}function d(e){return e.split(":").pop()}function g(e){const{nick:t}=e,n=function(e){return e.includes("trigger")?"trigger":e.includes("agent")?"agent":"visitor"===e?"chatter":e}(t);let a={type:n,display_name:e.display_name};return"agent"===n&&(a={agent_id:d(t),...a}),a}function p(e){return()=>{const{chatterStorage:t}=e();return s.reduce(((e,n)=>({...e,[n.webSdkKey]:t[n.adaKey]})),{})}}function m(e){return(t,n)=>{if(c.has(t)){const a=l[t];e(n?(0,o.DT)({[a]:n}):(0,o.Pq)(a))}else i.warn("ZD attempted to set unknown key",{key:t,val:n})}}var f=n(43219),h=n(22635),E=n(52236),v=n(66507),y=n(11021),A=n(52224);class _ extends Error{constructor(e,t,n){super(),this.name=this.name||"Zendesk SDK Error",this.message="".concat(this.name,": ").concat(e),this.context=t,this.extra={...n,timestamp:(new Date).getTime()}}}class S extends _{constructor(e,t){super("Failed to set visitor department.","ZendeskClient.setVisitorDefaultDepartment",{originalMessage:t,departmentId:e}),this.name="Zendesk Visitor Department Error"}}class b extends _{constructor(e,t,n){super(e,t,n),this.name="Zendesk Visitor Info Error"}}class T extends b{constructor(e,t){super("Failed to set visitor information.","ZendeskClient.setVisitorInfo",{visitorInfo:e,originalMessage:t})}}class C extends _{constructor(e,t){super("Failed to send message.","ZendeskClient.sendMessage",{originalMessage:t,messageBody:e}),this.name="Zendesk Send Message Error"}}class w extends _{constructor(e,t,n){super("Failed to upload file.","ZendeskClient.sendFile",{originalMessage:n,fileName:e,fileType:t}),this.name="Zendesk Upload File Error"}}class I extends _{constructor(e,t){super("Failed to send tags.","ZendeskClient.sendTags",{originalMessage:t,tags:e}),this.name="Zendesk Send Tags Error"}}var x=n(19060);const R={departmentId:1,accountStatus:"online",departmentMap:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"test dept";return{[e]:{status:t,name:n,id:parseInt(e,10)}}}("1","online"),inLiveChat:!0,connectionStatus:"connected",visitorInfo:{display_name:"Visitor 1029928",email:"test@example.com",phone:"6135550141"},queuePosition:0};let k=!1,O=R;const N=[],L={};class M{constructor(){(0,a.A)(this,"datastore",N),(0,a.A)(this,"eventHandlers",L)}init(e){this.inLiveChat=O.inLiveChat,this.accountStatus=O.accountStatus,this.departmentStatusMap=O.departmentMap,this.connectionStatus=O.connectionStatus,this.visitorInfo=O.visitorInfo,this.queuePosition=O.queuePosition,this.EMAIL_REGEX=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,this.options=e,this.datastore.push({eventType:"init",eventData:{options:e}})}static canShutdown(){return true}reconnect(){this.datastore.push({eventType:"reconnected",eventData:{}}),this.inLiveChat=!0,this.connectionStatus="connected"}on(e,t){this.eventHandlers[e]=t}un(e,t){this.eventHandlers[e]===t&&delete this.eventHandlers[e]}addTags(e,t){this.datastore.push({eventType:"sendTags",eventData:{tags:e}}),t(null)}removeTags(e,t){this.datastore.push({eventType:"removeTags",eventData:{tags:e}}),t(null)}sendChatMsg(e,t){this.datastore.push({eventType:"sendChatMsg",eventData:{message:e}}),t(null)}endChat(){this.datastore.push({eventType:"endChat",eventData:{}}),this.inLiveChat=!1,this.connectionStatus="closed",k}getQueuePosition(){return this.queuePosition}getAccountStatus(){return this.accountStatus}getDepartment(e){return this.departmentStatusMap[e]}getVisitorDefaultDepartment(){return this.defaultDepartment}sendFile(e,t){this.datastore.push({eventType:"sendFile",eventData:{file:e}});t(null,{mime_type:e.type,name:e.name,size:e.size,url:null})}isChatting(){return this.datastore.push({eventType:"isChatting",eventData:{isChatting:this.inLiveChat}}),this.inLiveChat}getConnectionStatus(){return this.connectionStatus}sendTyping(e){this.datastore.push({eventType:"sendTyping",eventData:{isTyping:e}})}setVisitorDefaultDepartment(e,t){this.datastore.push({eventType:"setVisitorDefaultDepartment",eventData:{departmentId:e}}),this.defaultDepartment=e,t(null)}getVisitorInfo(){return this.visitorInfo}setVisitorInfo(e,t){this.datastore.push({eventType:"setVisitorInfo",eventData:{visitorInfo:e}}),t(null)}}var D=n(46876);const F="low_level_message",U=(0,D.bN)();let z=null;class P extends r{constructor(e,t,n,r,o){super(),(0,a.A)(this,"eventCacheExclusions",["typing"]),(0,a.A)(this,"handleConnectionUpdate",(e=>{const t={conversation_state:y.I.retrieve("inLiveChat")?"live_chat":"live_chat_pending",external_conversation_id:y.I.retrieve("zdSessionId")||void 0,operation_tag:f.ll.EXTERNAL_API_CALL};switch(U.mergeContext({...t}),U.info("Connection status event received from Zendesk",{connectionStatus:e}),e){case A._Y:return void this.dispatchEvent(x.CM());case A.Zt:return void this.dispatchEvent(x.PD());case A.V:return void this.dispatchEvent(x.zY());default:U.warn("Unknown zendesk SDK status",{connectionStatus:e})}})),(0,a.A)(this,"handleChatEvent",(e=>{if(!this.shouldDispatchEvent(e))return;const t=e.type,n=u(e.nick),a={conversation_state:y.I.retrieve("inLiveChat")?"live_chat":"live_chat_pending",external_conversation_id:y.I.retrieve("zdSessionId")||void 0,operation_tag:f.ll.CHATTER_EVENT};if(U.mergeContext({...a}),!n)return void U.error("Unknown member type",{nick:e.nick,eventType:t,error_type:f.wU.EXTERNAL_VALIDATION});const r=d(e.nick),o={...e};switch(U.info("Zendesk SDK chat event",o),e.type){case A.F5:return void this.dispatchEvent(x.ZW({memberType:n,position:e.queue_position}));case A.sI:if(n!==A.Wz)return;return void this.dispatchEvent(x.j$(x.iU.AGENT_JOIN,{memberId:r,memberType:n,displayName:e.display_name,timestamp:e.timestamp}));case A.NG:if(n!==A.Wz)return;return void this.dispatchEvent(x.j$(x.iU.AGENT_LEAVE,{memberId:r,memberType:n,displayName:e.display_name,timestamp:e.timestamp}));case A.H9:return;case A.cY:if(n!==A.Wz)return;return void this.dispatchEvent(x.gV({memberData:g(e),attachment:e.attachment,timestamp:e.timestamp}));case A.Mk:if(n!==A.Wz)return;return void this.dispatchEvent(x.FV({memberData:g(e),typing:e.typing}));default:U.warn("Unknown zendesk SDK chat event type",{eventType:t})}})),(0,a.A)(this,"handleError",(e=>{const t={message:e.message,context:e.context,extra:e.extra,name:e.name};this.dispatchEvent(x.NN(t))})),(0,a.A)(this,"handleLowLevelZendeskMessage",(e=>{var t,n,a,r,o,i;const s={seq:e.detail.seq,path:e.detail.path,update:e.detail.update},c=null===(t=s.update)||void 0===t||null===(n=t.channel)||void 0===n?void 0:n.log;c&&Object.entries(c).forEach(this.processLowLevelChatLogs,this),("banned"===(null===(a=s.update)||void 0===a||null===(r=a.registration_error)||void 0===r?void 0:r.cause$string)||"banned"===(null===(o=s.update)||void 0===o?void 0:o.status$string))&&this.dispatchEvent(x.g8()),"idle_disconnect"===(null===(i=s.update)||void 0===i?void 0:i.status$string)&&this.dispatchEvent(x.$s());const l={conversation_state:y.I.retrieve("inLiveChat")?"live_chat":"live_chat_pending",external_conversation_id:y.I.retrieve("zdSessionId")||void 0,operation_tag:f.ll.AGENT_EVENT};U.mergeContext({...l}),U.info("Zendesk SDK Low Level Message",{...s})})),(0,a.A)(this,"handleAgentUpdate",(e=>{this.shouldDispatchEvent(e)&&u(e.nick)===A.Wz&&this.dispatchEvent(x.$h({memberId:d(e.nick),displayName:e.display_name,avatarPath:e.avatar_path}))})),P.setZendeskOverrides(r,o),this.initOptions={account_key:e},n.sdkProxyOverride&&(this.initOptions.override_proxy=n.sdkProxyOverride),this.useJWTAuth=n.useJWTAuth,this.chatterToken=t}async init(){var e;null===(e=P.getZendeskOverrides())||void 0===e||e.sdkEventTarget.addEventListener(F,this.handleLowLevelZendeskMessage),this.useJWTAuth&&await this.authenticate(this.chatterToken),y.I.store("zdAuthChatPending",y.I.retrieve("liveChatPending")),this.backend=v.A?new M:(delete n.c[1922],n(1922)),U.log("Reloaded ZD SDK into memory prior to Init."),this.backend.init(this.initOptions)}setUp(){this.backend.on(A.bG,this.handleConnectionUpdate),this.backend.on(A.CO,this.handleChatEvent),this.backend.on(A.ff,this.handleError),this.backend.on(A.Or,this.handleAgentUpdate),this.preventIdleTimer=window.setInterval((()=>{window.document.dispatchEvent(new CustomEvent("mousemove"))}),9e5),this.eventCache=new Set}tearDown(){var e;return this.backend.un(A.bG,this.handleConnectionUpdate),this.backend.un(A.CO,this.handleChatEvent),this.backend.un(A.ff,this.handleError),this.backend.un(A.Or,this.handleAgentUpdate),null===(e=P.getZendeskOverrides())||void 0===e||e.sdkEventTarget.removeEventListener(F,this.handleLowLevelZendeskMessage),clearInterval(this.preventIdleTimer),this.removeAllEventListeners(),this.eventCache=null,this.canShutDown()}reconnect(){var e;null===(e=P.getZendeskOverrides())||void 0===e||e.sdkEventTarget.addEventListener(F,this.handleLowLevelZendeskMessage),this.backend.reconnect()}static setZendeskOverrides(e,t){window.zendeskOverrides=function(e,t){const n=/^p.ng!$/;return{setLocalStorage:m(e),getLocalStorage:p(t),sdkEventTarget:new r,debug:e=>{e.match(n)||i.info("Zendesk SDK WS debug message:",{data:e})}}}(e,t)}static getZendeskOverrides(){const{zendeskOverrides:e}=window;return e}setBackend(e){this.backend=e}async authenticate(e){let t;const n=y.I.retrieve("inLiveChat")||!1,a=y.I.retrieve("zdAuthChatPending")||!1,r=y.I.retrieve("zd_isChatterAuthenticated")||!1,o={conversation_state:n?"live_chat":"live_chat_pending",external_conversation_id:y.I.retrieve("zdSessionId")||void 0,operation_tag:f.ll.INITIATE_HANDOFF};U.mergeContext({...o});try{t=await P.getAuthToken(e)}catch(e){return U.info("Unable to fetch Zendesk authentication JWT from API. This will not be an authenticated chat."),y.I.retrieve("zd_isChatterAuthenticated")?y.I.store("previouslyAuthenticated",!0):y.I.store("previouslyAuthenticated",!1),void y.I.store("zd_isChatterAuthenticated",!1)}if(!t||!r&&(n||a))return y.I.store("zd_isChatterAuthenticated",!1),void U.info("Zendesk Authentication not set. This will not be an authenticated chat.",{zdChatterIsAuthenticated:r,inLiveChat:n,liveChatPending:a});U.info("Zendesk Authentication initOption set. This will be an authenticated chat.",{zdChatterIsAuthenticated:r,inLiveChat:n,liveChatPending:a}),this.initOptions.authentication={jwt_fn:e=>{const{jwt_token:n}=t.data;e(n)}},y.I.store("zd_isChatterAuthenticated",!0)}static async getAuthToken(e){return E.FH.post(h.EX,{chatter_token:e})}shouldDispatchEvent(e){if(this.eventCacheExclusions.includes(e.type))return!0;const t="".concat(Object.entries(e));return!this.eventCache.has(t)&&(this.eventCache.add(t),!0)}isAccountOrDeptOffline(e){const t=this.getAccountStatus(),n={conversation_state:y.I.retrieve("inLiveChat")?"live_chat":"live_chat_pending",external_conversation_id:y.I.retrieve("zdSessionId")||void 0,operation_tag:f.ll.EXTERNAL_API_CALL};if(U.mergeContext({...n}),"offline"===t)return this.dispatchEvent(x.L9()),U.error("Zendesk Unavailable: account offline",{accountStatus:t,departmentId:e,error_type:f.wU.OUT_OF_BUSSINES}),!0;const a=this.getDepartment(e);return a?"offline"===a.status&&(this.dispatchEvent(x.Eq()),U.error("Zendesk Unavailable: department offline",{departmentId:e,departmentName:a.name,departmentStatus:a.status,error_type:f.wU.OUT_OF_BUSSINES}),!0):(U.error("Zendesk Unavailable: department ID does not exist",{departmentId:e,error_type:f.wU.INVALID_CONFIGURATION}),!0)}getAccountStatus(){return this.backend.getAccountStatus()}getDepartment(e){return this.backend.getDepartment(e)}getVisitorDefaultDepartment(){return this.backend.getVisitorDefaultDepartment()}processLowLevelChatLogs(e){let[,t]=e;if((null==t||!t.attachment)&&null!=t&&t.nick$string&&u(t.nick$string)===A.Wz){const e={display_name:t.display_name$string,msg:t.translation?t.translation.msg$string:t.msg$string,nick:t.nick$string,options:[],timestamp:t.timestamp$int,type:"chat.msg"};this.dispatchEvent(x.Rh({memberData:g(e),message:e.msg,timestamp:e.timestamp}))}}endChat(){this.backend.endChat({clear_dept_id_on_chat_ended:!0})}isChatting(){return this.backend.isChatting()}getQueuePosition(){return this.backend.getQueuePosition()}getConnectionStatus(){return this.backend.getConnectionStatus()}sendTyping(e){this.backend.sendTyping(e)}canShutDown(){return this.backend instanceof M&&M.canShutdown()}setVisitorDepartment(e){return e?new Promise(((t,n)=>{this.backend.setVisitorDefaultDepartment(e,(a=>a instanceof Error?n(new S(e,a.message)):t(a)))})):Promise.reject(new Error("No department id passed to setVisitorDepartment"))}sendMessage(e){return new Promise(((t,n)=>{this.backend.sendChatMsg(e,(a=>a instanceof Error?n(new C(e,a.message)):t(a)))}))}sendFile(e){return new Promise(((t,n)=>{this.backend.sendFile(e,((a,r)=>a?n(new w(e.name,e.type,a.message)):t(r)))}))}sendTags(e){return e&&e.length?new Promise(((t,n)=>{const a=e.reduce(((e,t)=>e.concat(t.split(","))),[]).filter((e=>e.length));this.backend.addTags(a,(a=>a instanceof Error?n(new I(e,a.message)):t(a)))})):Promise.resolve(null)}removeTags(e){return e&&e.length?new Promise(((t,n)=>{this.backend.removeTags(e,(a=>a instanceof Error?n(new I(e,a.message)):t(a)))})):Promise.resolve(null)}getVisitorInfo(){const e=this.backend.getVisitorInfo();if(null==e)throw new b("Failed to get visitor information.","ZendeskClient.getVisitorInfo");return e}setVisitorInfo(e){return new Promise(((t,n)=>{this.backend.setVisitorInfo(e,(a=>{a?n(new T(e,a.message)):t()}))}))}getEmailRegexp(){return this.backend.EMAIL_REGEX}}async function G(e,t,n,a,r){return z=new P(e,t,n,a,r),await z.init(),z.setUp(),z}function H(){return z}function B(e){if(!z)return;const{sdkInitializedSuccessfully:t}=e().liveAgent.zendesk;t?(z.isChatting()&&z.endChat(),z.tearDown()&&(z=null)):(z.tearDown(),z=null)}},52224:function(e,t,n){"use strict";n.d(t,{Bk:function(){return u},CO:function(){return w},CP:function(){return l},F5:function(){return g},H9:function(){return p},MP:function(){return y},Mk:function(){return E},NA:function(){return d},NG:function(){return h},Or:function(){return R},Ue:function(){return b},V:function(){return N},Vt:function(){return i},Wz:function(){return D},Zt:function(){return O},_F:function(){return F},_Y:function(){return k},bG:function(){return I},cY:function(){return m},ei:function(){return A},fX:function(){return c},ff:function(){return x},fu:function(){return M},jK:function(){return L},r4:function(){return a},rK:function(){return T},sE:function(){return o},sI:function(){return f},w3:function(){return C},wf:function(){return v},wr:function(){return s},zR:function(){return r}});const a="EXCEED_SIZE_LIMIT",r="INTERNAL_ERROR",o="INVALID_EXTENSION",i="NOT_SUPPORTED",s="UNKNOWN_ERROR",c="NOT_ALLOWED",l="CONN_ERROR",u="MULTIPLE_FILES",d=[a,r,o,i,s,c,l,u],g="chat.queue_position",p="chat.msg",m="chat.file",f="chat.memberjoin",h="chat.memberleave",E="typing",v="Chat is no longer active in Zendesk.",y="Live chat connection ended by Zendesk.",A="The live chat had to be ended due to a network disruption.",_="There was a problem with initializing the connection to Zendesk.",S="Zendesk chatter authentication failed.",b="Zendesk Chat Web SDK: Error: init: Zendesk Chat Web SDK has already been initialized. Please ensure that zChat.init() is only called once in your code",T={"Zendesk Chat Web SDK: Error: _context_: Web SDK is not initialized yet. Please ensure that you call zChat.init() and wait for the connection to be established before calling this method":_,"Live Chat Failed - Zendesk Chat Web SDK: Error: _context_: Zendesk Chat Web SDK has already been initialized. Please ensure that zChat.init() is only called once in your code":_,"Zendesk Chat Web SDK: Error: _context_: Failed to verify token: jwt verification error":S,"Zendesk Chat Web SDK: Error: _context_: Failed to verify token: network/security error":S,"Zendesk Chat Web SDK: Error: _context_: Expect a valid department id":"Not a valid department ID."},C=20971520,w="chat",I="connection_update",x="error",R="agent_update",k="connected",O="connecting",N="closed",L="DEPARTMENT_ONLINE",M="DEPARTMENT_OFFLINE",D="agent",F="previousZDTags"},19060:function(e,t,n){"use strict";n.d(t,{iU:function(){return a.iU},L9:function(){return p},gV:function(){return h},Rh:function(){return f},j$:function(){return y},FV:function(){return E},$h:function(){return A},g8:function(){return u},zY:function(){return s},CM:function(){return o},PD:function(){return i},Eq:function(){return g},$s:function(){return d},ZW:function(){return m},NN:function(){return c}});var a=n(58621),r=n(81957);function o(){return new CustomEvent(r.W.SDK_CONNECTED)}function i(){return new CustomEvent(r.W.SDK_CONNECTING)}function s(){return new CustomEvent(r.W.SDK_CLOSED)}function c(e){return new CustomEvent(r.W.SDK_ERROR,{detail:e})}var l=n(16351);function u(){return new CustomEvent(l.W6.ZENDESK_CHATTER_BANNED,{detail:{}})}function d(){return new CustomEvent(l.W6.ZENDESK_IDLE_DISCONNECT,{detail:{}})}function g(){return new CustomEvent(l.W6.ZENDESK_DEPARTMENT_OFFLINE,{detail:{}})}function p(){return new CustomEvent(l.W6.ZENDESK_ACCOUNT_OFFLINE,{detail:{}})}function m(e){return new CustomEvent(l.W6.QUEUE_POSITION,{detail:e})}function f(e){return new CustomEvent(l.Jn.AGENT_MESSAGE,{detail:e})}function h(e){return new CustomEvent(l.Jn.AGENT_FILE,{detail:e})}function E(e){return new CustomEvent(l.Jn.AGENT_TYPING,{detail:e})}var v=n(35787);function y(e,t){return new CustomEvent(e,{detail:t})}function A(e){return new CustomEvent(v.L.AGENT_UPDATE,{detail:e})}},16351:function(e,t,n){"use strict";let a,r,o;n.d(t,{Jn:function(){return a},W6:function(){return o}}),function(e){e.AGENT_MESSAGE="agentMessageEvent",e.AGENT_TYPING="agentTypingEvent",e.AGENT_FILE="agentFileEvent"}(a||(a={})),function(e){e.CLOSED="closed",e.CONNECTING="connecting",e.CONNECTED="connected"}(r||(r={})),function(e){e.QUEUE_POSITION="queuePositionEvent",e.ZENDESK_CHATTER_BANNED="chatterBannedEvent",e.ZENDESK_IDLE_DISCONNECT="idleDisconnectEvent",e.ZENDESK_DEPARTMENT_OFFLINE="departmentOfflineEvent",e.ZENDESK_ACCOUNT_OFFLINE="accountOfflineEvent"}(o||(o={}))},58621:function(e,t,n){"use strict";n.d(t,{Bf:function(){return i},W_:function(){return o.W},iU:function(){return r.i}});var a=n(16351),r=n(35787),o=n(81957);const i={...r.L,...o.W,...r.i,...a.Jn,...a.W6}},35787:function(e,t,n){"use strict";let a,r;n.d(t,{L:function(){return r},i:function(){return a}}),function(e){e.AGENT_JOIN="agentJoinEvent",e.AGENT_LEAVE="agentLeaveEvent"}(a||(a={})),function(e){e.AGENT_UPDATE="agentUpdateEvent"}(r||(r={}))},81957:function(e,t,n){"use strict";let a;n.d(t,{W:function(){return a}}),function(e){e.SDK_CONNECTED="zendeskSdkConnected",e.SDK_CONNECTING="zendeskSdkConnecting",e.SDK_CLOSED="zendeskSdkClosed",e.SDK_ERROR="zendeskSdkError"}(a||(a={}))},46876:function(e,t,n){"use strict";n.d(t,{HG:function(){return i},bN:function(){return o},yr:function(){return s}});var a=n(4276);let r=null;function o(){return r||(r=(0,a.tZ)("zendesk"),r.mergeContext({channel:"chat",handoff_platform:"zendesk_liveagent"})),r}function i(e,t){const{sessionId:n}=e.liveAgent.zendesk,{inLiveChat:a}=e.liveAgent;return{conversation_state:a?"live_chat":"live_chat_pending",external_conversation_id:n||"",operation_tag:t,channel:"chat",handoff_platform:"zendesk_liveagent"}}function s(e,t,n,a){r.warn("Zendesk client received old event",{chatterToken:e,eventName:t,eventTimestamp:n,lastProcessedTimestamp:a})}},79667:function(e,t,n){"use strict";n.d(t,{$Z:function(){return u},Eo:function(){return A},L:function(){return E},Nh:function(){return g},Pn:function(){return v},Vh:function(){return d},aU:function(){return m},g1:function(){return f},hX:function(){return p},hs:function(){return y},j_:function(){return h},pE:function(){return l},pp:function(){return c}});var a=n(23682),r=n(19060);const o={[r.iU.AGENT_JOIN]:"live_chat_presence",[r.iU.AGENT_LEAVE]:"live_chat_presence_left"},i=new a.pJ,s=(e,t)=>({type:t,member:{type:"agent",display_name:e.displayName,agent_id:e.memberId,image_url:e.avatarPath},by:e.chatterToken,timestamp:e.timestamp,chat_session:e.chatSessionId,zd_session:e.zdSessionId});async function c(e,t,n){return(0,a.oI)(s(t,o[e]),i,n)}async function l(e,t,n,r,o){const s={type:e,by:t,chat_session:n,zd_session:r};return(0,a.oI)(s,i,o)}async function u(e,t,n,r){const o={type:"live_chat_send_transcript",by:e,chat_session:t,zd_session:n};return(0,a.oI)(o,i,r)}async function d(e,t,n,r,o){const s={type:"live_chat_queue_position",position:t,by:e,chat_session:n,zd_session:r};return(0,a.oI)(s,i,o)}async function g(e,t){const n={type:"live_chat_message",member:e.memberData,message:{msg:e.message,timestamp:e.timestamp},by:e.chatterToken,chat_session:e.chatSessionId,zd_session:e.zdSessionId};return(0,a.oI)(n,i,t)}async function p(e,t,n,r){const o={type:"live_chat_init_failure",by:e,chat_session:t,zd_session:n};return(0,a.oI)(o,i,r)}async function m(e,t,n,r){const o={type:"live_chat_init_success",by:e,chat_session:t,zd_session:n};return(0,a.oI)(o,i,r)}async function f(e,t,n,r,o){const s={type:"live_chat_disconnected",by:e,chat_session:t,zd_session:n,errorMessage:r};return(0,a.oI)(s,i,o)}async function h(e,t,n,r,o){const s={type:"live_chat_end_conversation",by:e,timestamp:t,chat_session:n,zd_session:r};return(0,a.oI)(s,i,o)}async function E(e,t,n,r,o,s){const c={type:o?"live_chat_typing_start":"live_chat_typing_end",member:{...e,type:"agent"},by:t,chat_session:n,zd_session:r};return(0,a.oI)(c,i,s)}async function v(e,t){return(0,a.ch)(s(e),i,t)}async function y(e,t,n,r,o){const s={type:r,by:e,chat_session:t,zd_session:n};return(0,a.oI)(s,i,o)}async function A(e,t,n,r,o){const s={type:"live_chat_file_message",by:e,chat_session:t,zd_session:n,member:r.memberData,message:{mimeType:r.attachment.mime_type,name:r.attachment.name,url:r.attachment.url,timestamp:r.timestamp}};return(0,a.oI)(s,i,o)}},9432:function(e,t,n){"use strict";n.d(t,{Jc:function(){return p},WP:function(){return c},f4:function(){return g},f_:function(){return f},At:function(){return m}});var a=n(97132),r=n(43219),o=n(3228);const i=(0,a.Mz)((e=>e.pageState),(e=>e.get("sessionID")));var s=n(87904);const c=e=>e.liveAgent.zendesk,l=(0,a.Mz)(c,(e=>e.primarySession)),u=(0,a.Mz)(c,(e=>e.lastProcessedTimestamp)),d=(0,a.Mz)([o.Kn,o.W9],((e,t)=>t===r.Gh&&e)),g=(0,a.Mz)([d,o.U7],((e,t)=>{let{accountKey:n}=t;return e&&n})),p=(0,a.Mz)([s.IZ,i,c],((e,t,n)=>({chatterToken:e.get("token"),chatSessionId:t,zdSessionId:n.sessionId}))),m=(0,a.Mz)([u,o.Bf],((e,t)=>n=>e>=n||t>=n)),f=(0,a.Mz)([i,l],((e,t)=>null!==t&&e!==t))},53177:function(e,t,n){"use strict";n.d(t,{On:function(){return c},qG:function(){return u},wo:function(){return l}});var a=n(64251),r=n(73346),o=n(90438),i=n(30924);const s={ca:()=>n.e(274).then(n.bind(n,90298)),en:()=>n.e(7779).then(n.bind(n,12704)),bs:()=>n.e(5579).then(n.bind(n,46643)),da:()=>n.e(3051).then(n.bind(n,78564)),de:()=>n.e(4591).then(n.bind(n,19368)),es:()=>n.e(7398).then(n.bind(n,51741)),fi:()=>n.e(1933).then(n.bind(n,13146)),fr:()=>n.e(5790).then(n.bind(n,86393)),hi:()=>n.e(4591).then(n.bind(n,14048)),ht:()=>n.e(3162).then(n.bind(n,86909)),id:()=>n.e(8989).then(n.bind(n,31750)),it:()=>n.e(7549).then(n.bind(n,59702)),ja:()=>n.e(4913).then(n.bind(n,32790)),km:()=>n.e(1254).then(n.bind(n,33402)),ko:()=>n.e(9444).then(n.bind(n,27303)),ms:()=>n.e(2494).then(n.bind(n,29285)),my:()=>n.e(7268).then(n.bind(n,91991)),nl:()=>n.e(1544).then(n.bind(n,73279)),no:()=>n.e(1395).then(n.bind(n,57580)),pa:()=>n.e(7999).then(n.bind(n,96992)),pt:()=>n.e(4738).then(n.bind(n,95717)),ru:()=>n.e(7869).then(n.bind(n,45586)),sv:()=>n.e(5517).then(n.bind(n,95958)),sq:()=>n.e(5506).then(n.bind(n,18810)),sr:()=>n.e(2697).then(n.bind(n,53337)),ta:()=>n.e(7195).then(n.bind(n,84244)),th:()=>n.e(6218).then(n.bind(n,65589)),tl:()=>n.e(6814).then(n.bind(n,90793)),tr:()=>n.e(8624).then(n.bind(n,48055)),vi:()=>n.e(1485).then(n.bind(n,21610)),zh:()=>n.e(4064).then(n.bind(n,45471)),"zh-tw":()=>n.e(2718).then(n.bind(n,41821)),bg:()=>n.e(3151).then(n.bind(n,11440)),ro:()=>n.e(4535).then(n.bind(n,47480)),el:()=>n.e(5969).then(n.bind(n,9506)),hu:()=>n.e(3747).then(n.bind(n,81860)),pl:()=>n.e(8010).then(n.bind(n,88877)),cs:()=>n.e(3216).then(n.bind(n,12843)),et:()=>n.e(3993).then(n.bind(n,2986)),hr:()=>n.e(6556).then(n.bind(n,68267)),lt:()=>n.e(4846).then(n.bind(n,64937)),lv:()=>n.e(7644).then(n.bind(n,89315)),sl:()=>n.e(9303).then(n.bind(n,19084)),sk:()=>n.e(280).then(n.bind(n,34675)),is:()=>n.e(9122).then(n.bind(n,68705)),be:()=>n.e(6109).then(n.bind(n,31058)),uk:()=>n.e(5758).then(n.bind(n,77701)),ar:()=>n.e(8131).then(n.bind(n,7184)),he:()=>n.e(5187).then(n.bind(n,12052)),kk:()=>n.e(6624).then(n.bind(n,15940)),af:()=>n.e(2391).then(n.bind(n,73948)),mk:()=>n.e(2102).then(n.bind(n,92077)),rw:()=>n.e(1263).then(n.bind(n,93424)),sw:()=>n.e(2708).then(n.bind(n,33927)),xh:()=>n.e(9222).then(n.bind(n,96857)),zu:()=>n.e(741).then(n.bind(n,83930))};function c(e){return Object.keys(i.Pc).includes(e)}function l(e){return!c(e)&&i.LM.includes(e)}const u={translations:{},deprecatedLanguage:null,async importLanguages(e){const t=e.map((async e=>{try{if(!s[e])return null;const t=s[e](),{locale:{addOns:n,locale:a,translations:o}}=await t;return r.A.updateLocale(a,n),Object.entries(o).forEach((t=>{let[n,a]=t;const r=this.translations[n]||{};this.translations[n]=r,r[e]=a})),t}catch(t){return a.NA("localization-language",e),(0,o.to)(new o.WF("AdaLocalizationError","Unable to import language: ".concat(e))),null}}));await Promise.all(t)},getCleanedLanguageCode(e){let t;return t=c(e)?i.Pc[e]:e,t},getDeprecatedLanguageCode(e){return this.deprecatedLanguage=Object.keys(i.Pc).find((t=>i.Pc[t]===e)),this.deprecatedLanguage}}},30924:function(e,t,n){"use strict";n.d(t,{AT:function(){return a},LM:function(){return r},Pc:function(){return o}});const a={en:"en",be:"be",ca:"ca",da:"da",de:"de",es:"es",fi:"fi",fr:"fr",hi:"hi",ht:"ht",id:"id",it:"it",ja:"ja",km:"km",ko:"ko",ms:"ms",my:"my",no:"no",nl:"nl",pa:"pa",pt:"pt",ru:"ru",sq:"sq",sv:"sv",ta:"ta",th:"th",tl:"tl",tr:"tr",uk:"uk",vi:"vi",zh:"zh",zhTW:"zh-tw",bg:"bg",ro:"ro",el:"el",hu:"hu",pl:"pl",cs:"cs",et:"et",hr:"hr",lt:"lt",lv:"lv",sl:"sl",sk:"sk",is:"is",ar:"ar",he:"he",bs:"bs",sr:"sr",kk:"kk",af:"af",mk:"mk",rw:"rw",sw:"sw",xh:"xh",zu:"zu"},r=[...Object.values(a)],o={in:a.id}},34282:function(e,t,n){"use strict";n.d(t,{I4:function(){return h},P_:function(){return S}});var a=n(49568),r=n(8101),o=n(95774),i=n(22635),s=n(24938),c=n(12178),l=n(80959),u=n(58541),d=n(86981);let g,p;function m(e){const t=e.options_list,n=e.options_processor;return t.map((e=>{let t;return"string"==typeof e?t={key:e,displayText:(0,s.Yq)(e)}:(t=e,n===i.HJ&&(t.key=e.datetime,t.displayText=(0,s.Yq)(e.datetime))),t}))}function f(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object.assign({},...t)}function h(e){const t=!0,n=!1,r=e.message;let i;switch(e.message.type){case"text":return i=new u.TextMessage((0,c.o)(f(e,r,{isNew:t,isOwnedByUser:n,body:(0,l.vX)(r.body,e.client,e.pageState,!0),shouldAnimate:"bot"===e.source}))),i;case"link":return i=new u.LinkMessage((0,c.o)(f(e,r,{isNew:t,isOwnedByUser:n}))),i;case"picture":return i=new u.PictureMessage((0,c.o)(f(e,r,{isNew:t,isOwnedByUser:n}))),i;case"video":return u.VideoMessage.fromSocket(e.message);case"web_window":return u.WebWindowMessage.fromSocket(e.message);case"sign_in":return i=new u.SignInMessage((0,c.o)(f(e,r,{isNew:t,isOwnedByUser:n}))),i;case"presence":return i=new u.PresenceMessage((0,c.o)(f(e,r,{isNew:t,isOwnedByUser:n}))),i;case"options_message":return i=new u.OptionsMessageRecord((0,c.o)(f(r,{optionsList:a.Ay.fromJS(m(r)),isNew:t,isOwnedByUser:n}))),i;case"survey":return i=new u.SurveyMessage((0,c.o)(f(e,r,{isNew:t,isOwnedByUser:n,reviewableMessage:!1}))),i;case o.UR:return i=new u.SelectablesMessage((0,c.o)(f(e,r,{isNew:t,isOwnedByUser:n,selectables:a.Ay.fromJS(r.selectables)}))),i;case"list_selection":return i=new u.ListSelectionMessage((0,c.o)(f({isNew:t,isOwnedByUser:n},e,r))),i;case o.vP:return i=new u.DownloadableMessage((0,c.o)(f(e,r,{isNew:t,isOwnedByUser:n}))),i;case o.Qy:return i=new u.SeamlessOAuthMessage((0,c.o)(f(e,r,{isNew:t,isOwnedByUser:n,reviewableMessage:!1}))),i;case d.R7:return new u.CsatMessage((0,c.o)(e.message));case d.u1:return new u.WidgetMessage((0,c.o)(f(r,{isNew:t,isOwnedByUser:n})));case d.U7:return new u.NotificationsPermissionMessage((0,c.o)(f(e,r,{isNew:t,isOwnedByUser:n})));case"quick_replies":return u.QuickRepliesMessage.fromSocket(e.message);default:return u.IgnoredMessage.fromSocket(e.message)}}function E(e,t){return e.message._type===t}function v(e,t){const n=E;if(n(e,"csat"))return u.CsatMessage.fromLog(e);if(n(e,"video"))return u.VideoMessage.fromLog(e);if(n(e,"web_window"))return u.WebWindowMessage.fromLog(e);if(n(e,"quick_replies"))return u.QuickRepliesMessage.fromLog(e);const r="user"===e.source,o=!1,i=e.message;let s;switch(e.message._type){case"presence":return s=new u.PresenceMessage((0,c.o)(f(e,i,{isNew:o,isOwnedByUser:r}))),s;case"link":return s=new u.LinkMessage((0,c.o)(f(e,i,{isOwnedByUser:r}))),s;case"text":return s=new u.TextMessage((0,c.o)(f(e,i,{isNew:o,isOwnedByUser:r,body:(0,l.vX)(i.body,t.client,t.pageState,!0),shouldAnimate:!1}))),s;case"picture":return s=new u.PictureMessage((0,c.o)(f(e,i,{isNew:o,isOwnedByUser:r}))),s;case"downloadable":return s=new u.DownloadableMessage((0,c.o)(f(e,i,{isNew:o,isOwnedByUser:r}))),s;case"sign_in":return s=new u.SignInMessage((0,c.o)(f(e,i,{isNew:o,isOwnedByUser:r}))),s;case"trigger":return s=new u.UserMessage((0,c.o)(f(e,i,{isNew:o,isOwnedByUser:r}))),s;case"options_message":return s=new u.OptionsMessageRecord((0,c.o)(f(i,e,{optionsList:a.Ay.fromJS(m(i)),isNew:o,isOwnedByUser:r}))),s;case"selected_option":return s=new u.UserMessage((0,c.o)(f(i,e,{body:(0,l.vX)(i.body,t.client,t.pageState),type:"selected_option",isNew:!0,source:"user",isOwnedByUser:!0}))),s;case"survey":return s=new u.SurveyMessage((0,c.o)(f(e,i,{isNew:o,isOwnedByUser:r,reviewableMessage:!1}))),s;case"surfaceable_list_selection":return s=new u.SelectablesMessage((0,c.o)(f({isNew:o,isOwnedByUser:r},e,i))),s;case"list_selection":return s=new u.ListSelectionMessage((0,c.o)(f(e,i,{isNew:o,isOwnedByUser:r,created:e.created}))),s;case"seamless_oauth":return s=new u.SeamlessOAuthMessage((0,c.o)(f(e,i,{isNew:o,isOwnedByUser:r}))),s;case"widget":return new u.WidgetMessage((0,c.o)(f(e,i,{isNew:o,isOwnedByUser:r})));case"local_notification_permission":return new u.NotificationsPermissionMessage((0,c.o)(f(e,i,{isNew:o,isOwnedByUser:r})));case"incoming_app_data":return new u.UserMessage((0,c.o)(f(e,i,{isNew:o,isOwnedByUser:r})));default:return u.IgnoredMessage.fromLog(e)}}function y(e){let t=e;return t=t.map(((e,n)=>{const r=t.get(n-1);return e.created?e.conversationId?e:a.Ay.merge(e,{conversationId:null==r?void 0:r.conversationId}):a.Ay.merge(e,{created:r?r.created:0})})),t=t.sort(((e,t)=>e.created-t.created)),t}function A(e,t){let n=e;return t.forEach((t=>{const a=e.find((e=>e.id===t.id||e.tempMessageUuid===t.tempMessageUuid&&null!==e.tempMessageUuid));n=a?n.setIn([n.indexOf(a)],t):n.push(t)})),n=y(n),n}const _=a.Ay.List(),S=function(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case r.fi:return g=t.findIndex((e=>e.id===n.id)),t.mergeIn([g],n.updatedFields);case r.WJ:return p=t.findIndex((e=>e.id===n.messageId)),t.mergeIn([p],{review:n.reaction});case r.mn:return e=h(n),e?n.message.campaign_key?t:A(t,[e]):t;case"UPDATE_RESPONSE":return g=t.findIndex((e=>e.id===n.message.id)),g<0?t:t.mergeIn([g],n.message);case r.tc:{let e=t;const r=e.findIndex((e=>e.tempMessageUuid===n.message.tempMessageUuid));return r<0||(e=e.update(r,(e=>a.Ay.merge(e,{id:n.message.id,isNew:!1,created:n.message.created,conversationId:n.message.conversationId}))),e=y(e)),e}case r.dB:case r.qe:return"secret"===n.messageType?t:(e=new u.UserMessage({body:(0,l.vX)(n.body||"",n.client,n.pageState),type:n.messageType,data:n.data||void 0,isNew:!0,source:"user",buttonType:n.buttonType,isOwnedByUser:!0,created:n.created}),e=n.tempMessageUuid?e.merge({id:n.tempMessageUuid,tempMessageUuid:n.tempMessageUuid}):e.merge({id:n.id}),n.messageType===o.vP&&(e=new u.DownloadableMessage({type:n.messageType,isNew:!0,source:"user",isOwnedByUser:!0,url:n.url,name:n.name,id:n.tempMessageUuid,tempMessageUuid:n.tempMessageUuid})),n.messageType===o.gq&&(e=new u.PictureMessage({type:n.messageType,isNew:!0,source:"user",isOwnedByUser:!0,picUrl:n.url,id:n.tempMessageUuid,tempMessageUuid:n.tempMessageUuid})),t.last(null)&&(e=e.merge({conversationId:null===(i=t.last(null))||void 0===i?void 0:i.conversationId})),"waiting_for_data"===n.messageType?t:A(t,[e]));var i;case"ADD_LOGS_FROM_RESPONSE":return A(t,n.logs.map((e=>v(e,n))).filter((e=>Boolean(e))));case r.Fr:return t.clear();case r.E3:return p=t.findIndex((e=>e.id===n.payload.messageId)),t.mergeIn([p],{optionsExpired:!0});case r.fu:return p=t.findIndex((e=>e.id===n.payload.messageId)),t.mergeIn([p],{isExpired:!0});case r.sB:return p=t.findIndex((e=>e.id===n.id)),t.mergeIn([p],{scheduleStatus:n.scheduleStatus});case r.d8:return p=t.findIndex((e=>e.id===n.messageId)),t.mergeIn([p],{scheduleStatus:"cancellation_pending"});case r.WD:return p=t.findIndex((e=>e.id===n.messageId)),t.mergeIn([p],{scheduleStatus:"cancellation_failed"});default:return t}}},49856:function(e,t,n){"use strict";n.d(t,{Y:function(){return r}});var a=n(68060);function r(e){return t=>t.get(e.chatter.language||a.P)||t.get(a.P)}},50616:function(e,t,n){"use strict";n.d(t,{Cq:function(){return d},ID:function(){return g},cz:function(){return p},ne:function(){return u},o8:function(){return c},tM:function(){return l}});var a=n(97132),r=n(95774),o=n(58541),i=n(54251),s=n(86981);function c(e){const t=(0,i.getResources)(e,i.ResourceType.CONVERSATION,{filter:{chatterId:e.chatter.token,recent:!0}});return t&&t.find((e=>e.active))||null}const l=(0,a.Mz)([c,o.getRenderableMessages,e=>e.pageState.inState,e=>e.pageState.stateType],((e,t,n,a)=>{if(n&&"list_selection"!==a)return!1;if(!e)return!1;const r=t.filter((t=>"bot"===t.source&&t.conversationId===e.id)).last(null);return!!r&&r.hasForcedQuickReplies}));function u(e){const t=c(e);if(!t)return!1;if(null!==t.endedBy)return!1;const n=(0,o.getMessages)(e);if(!n.size)return!1;const a=n.reverse().find((e=>null!==e.conversationId));if(!a)return!1;if(a instanceof o.PresenceMessage&&(a.event===r.SU||a.event===r.fG))return!1;const l=a.conversationId;return!!(0,i.getResource)(e,i.ResourceType.CONVERSATION,l)&&n.some((e=>e.conversationId===l&&"user"===e.source&&e.type!==s.p0&&e.type!==s.h5))}function d(e,t){return(0,i.getResources)(e,i.ResourceType.CONVERSATION,{filter:{chatterId:t,recent:!0}})}function g(e){return d(e,e.chatter.token)}function p(e){const t=g(e);return t&&t.length?t.sort(((e,t)=>t.created-e.created))[0]:null}},86226:function(e,t,n){"use strict";n.d(t,{ID:function(){return r.ID},YC:function(){return a.Y},ne:function(){return r.ne},o8:function(){return r.o8}});var a=n(49856),r=n(50616)},6436:function(e,t,n){"use strict";n.d(t,{y:function(){return i}});var a=n(97132),r=n(60510),o=n(13619);const i=e=>{const t=(0,o.c)();return(0,a.Mz)((e=>e.embedState.embed2Enabled),(e=>e.embedState.browserHasNotificationSupport),(e=>e.client.hasFeature(r.O.LOCAL_NOTIFICATIONS)),((e,n,a)=>!!e&&"Safari"!==t&&!!n&&!!a))(e)}},26234:function(e,t,n){"use strict";n.d(t,{H:function(){return a}});const a={onMouseDown:e=>{e.currentTarget.style.outline="none"},onBlur:e=>{e.currentTarget.style.outline=""}}},60506:function(e,t,n){"use strict";n.d(t,{dequeueAllAtOnceAction:function(){return g},enqueue:function(){return u}});var a=n(60510),r=n(86471);function o(e,t,n,a){return{type:"ENQUEUE_ACTION",action:e,delayBefore:t,delayAfter:n,stack:a}}function i(e){return{type:"DEQUEUE_START",stack:e}}function s(e,t){return{type:"DEQUEUE_FINISH",stack:e,id:t}}function c(e){return async(t,n)=>{const{actionQueues:o,client:c}=n(),l=o[e],u=c.hasFeature(a.O.WS_CHAT_UI_IMPROVEMENTS),d="generative"===n().client.productType;if(!l)return null;if(!l.queue.length)return null;if(u&&d){await t(i(e));const n=l.queue[0];return await(0,r.u)(n.delayBefore),await t(s(e,n.id)),n}t(i(e));const g=l.queue[0];return await(0,r.u)(g.delayBefore),t(s(e,g.id)),g}}function l(e){return async(t,n)=>{const{actionQueues:o,client:i}=n(),s=o[e],l=i.hasFeature(a.O.WS_CHAT_UI_IMPROVEMENTS),u="generative"===n().client.productType;if(!s)return null;if(s.isDequeuing)return null;const d=async n=>{if(!n)return null;if(l&&u){await t(n.action),await(0,r.u)(n.delayAfter);const a=await t(c(e));return d(a)}t(n.action),await(0,r.u)(n.delayAfter);const a=await t(c(e));return d(a)},g=await t(c(e));return d(g)}}function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"global";return r=>{r(o(e,t,n,a)),r(l(a))}}function d(e){return{type:"REMOVE_QUEUE_DELAYS",stack:e}}function g(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"global";return t=>(t(d(e)),t(l(e)))}},71934:function(e,t,n){"use strict";n.d(t,{dequeueAllAtOnceAction:function(){return a.dequeueAllAtOnceAction},enqueue:function(){return a.enqueue}});var a=n(60506)},99651:function(e,t,n){"use strict";n.d(t,{A$:function(){return g},Bq:function(){return u},jr:function(){return d},mR:function(){return l}});var a=n(26183),r=n(86226),o=n(4276),i=n(16711);const s=(0,o.tZ)();let c=!1;function l(){return(e,t)=>{const n=(0,i.mf)(),a=(0,i.Nj)(n),{client:o}=t(),s=(0,r.YC)(t())(o.uiSettings.get("chat").get("botName"))||"";document.title=s?a("main_title",{client_name:s}):a("default_title")}}const u=()=>{const e=(0,a.oJ)()?a.ad.getItem("parentOrigin"):window.PARENT_ORIGIN;return e||c||(s.info("Target origin missing for postMessage"),c=!0),e||"*"},d=e=>{(0,a.oJ)()?a.ad.setItem("parentOrigin",e):window.PARENT_ORIGIN=e},g=()=>{(0,a.oJ)()&&a.ad.removeItem("parentOrigin")}},13619:function(e,t,n){"use strict";n.d(t,{c:function(){return o},e:function(){return i}});var a=n(46880),r=n.n(a);const o=()=>r().getParser(window.navigator.userAgent).getBrowserName(),i=()=>{const e=r().getParser(window.navigator.userAgent),{name:t,version:n}=e.getOS(),{type:a,model:o}=e.getPlatform();return{platform:o||a,osName:t,osVersion:n}}},56090:function(e,t,n){"use strict";n.d(t,{i:function(){return o},x:function(){return i}});var a=n(25054),r=n(83822);function o(e){let{id:t,data:n,body:a,buttonType:r,messageType:o,tempMessageUuid:i,created:s,inState:c,inLiveChat:l,client:u,pageState:d,mimeType:g,url:p,name:m}=e;return{type:"ADD_MESSAGE",id:t,data:n||null,body:a,buttonType:r,messageType:o,tempMessageUuid:i,created:s,inState:c,inLiveChat:l,client:u,pageState:d,mimeType:g,url:p,name:m}}function i(e){const t=(0,r.X)(),{body:n="",data:i=null,messageType:s="text",buttonType:c,created:l}=e;return(e,r)=>{(0,a.AA)("user_message_sent"),e(o({data:i,body:n,buttonType:c,messageType:s,tempMessageUuid:t,created:l,inState:r().pageState.get("inState"),inLiveChat:r().liveAgent.inLiveChat,client:r().client,pageState:r().pageState}))}}},17066:function(e,t,n){"use strict";n.d(t,{CQ:function(){return o},IP:function(){return i},c$:function(){return a},pW:function(){return r}});const a=25,r="capture",o="list_selection",i="GET_CONVERSATIONS_PENDING"},42692:function(e,t,n){"use strict";n.d(t,{A:function(){return u}});var a=n(90438),r=n(52236),o=n(69734),i=n(54251),s=n(17066),c=n(17220),l=n(41017);function u(){return(e,t)=>{const n=t().pageState.get("currentConversationIndex"),d=t().conversations.get(n),g=d&&d.id,p=t().messages.getIn([0,"id"]);return t().pageState.get("canLoadMore")&&g?(e((0,o.Nj)()),r.FH.get("/logs/".concat(t().chatter.get("token"),"/"),{params:{conversation_id:g,page_size:s.c$,after:p||void 0}}).then((a=>{a.data.included&&e((0,i.pushResources)(a.data.included)),e((0,l.g)(a)),e((0,c.A)(a)),a.data.log.length!==s.c$?n<t().conversations.size-1?t().messages.size<s.c$||0===a.data.log.length?(e((0,o.eL)()),e(u())):a.data.log.length<s.c$&&e((0,o.eL)()):e((0,o.VV)()):e((0,o.Cd)())}),(t=>{t.response&&(0,a.to)(new Error("Fetching logs failed. Error: ".concat(t.message))),e((0,o.Yz)())}))):null}}},17220:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var a=n(58541),r=n(59552);function o(e){return(t,n)=>{e.data.log.forEach((e=>{if("link"===e.message._type&&e.message.generate_link_preview){const o=n().messages.find((t=>t.id===e._id));o instanceof a.LinkMessage&&t((0,r.A)({id:o.id,link_text:o.linkText,alt_text:o.altText,url:o.url,type:"link",new_window:o.newWindow,reviewableMessage:o.get("reviewableMessage")}))}}))}}},69971:function(e,t,n){"use strict";n.d(t,{G:function(){return l}});var a=n(90438),r=n(52236),o=n(69734),i=n(17066),s=n(17220),c=n(41017);function l(){return(e,t)=>{const n=t().pageState.get("currentConversationIndex"),l=t().conversations.get(n),u=l&&l.id;return r.FH.get("/logs/".concat(t().chatter.get("token"),"/"),{params:{conversation_id:u,page_size:i.c$}}).then((t=>{e((0,c.g)(t)),e((0,s.A)(t))}),(t=>{t.response&&(0,a.to)(new Error("Fetching logs failed. Error: ".concat(t.message))),e((0,o.Yz)())}))}}},59552:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var a=n(52236),r=n(58541);function o(e){return(t,n)=>{let o={};const{cluster:i}=n().embedState.adaSettings,s=(0,a.aT)(i);return o=e instanceof r.LinkMessage?{id:e.id,linkText:e.linkText,altText:e.altText,url:e.url,type:e.type,newWindow:e.newWindow,reviewableMessage:e.reviewableMessage,successBusinessEvent:e.successBusinessEvent}:{id:e.id,linkText:e.link_text,altText:e.alt_text,url:e.url,type:e.type,newWindow:e.new_window,reviewableMessage:e.reviewable_message,successBusinessEvent:e.success_business_event},o.isLinkLoading=!0,s.get("?url=".concat(e.url)).then((e=>{o.linkIcon=e.data.icon,o.title=e.data.title,o.linkDescription=e.data.desc,o.isLinkLoading=!1,t((0,r.updateResponse)(o,n().client))})).catch((()=>{o.isLinkLoading=!1,t((0,r.updateResponse)(o,n().client))}))}}},97537:function(e,t,n){"use strict";n.d(t,{A:function(){return d}});var a=n(71466),r=n(77583),o=n(60510),i=n(53781),s=n(71934),c=n(58541),l=n(55017),u=n(49715);function d(e){return(t,n)=>{const d=e.messages.filter((e=>(0,u.Y)(e,n()))),g=(0,c.processResponseMessages)(d,e),p=(0,l.XG)(),m=n().client.hasFeature(o.O.WS_CHAT_UI_IMPROVEMENTS),f=n().client.hasFeature(o.O.WS_CHAT_UI_IMPROVEMENTS_ROLLOUT_1),h="generative"===n().client.productType;"bot"===e.source&&(0,c.clearMessageTimeout)(),m&&h&&t((0,s.enqueue)((0,a.fh)())),g.forEach((n=>{let o;if(m&&h&&"text"===n.type&&n.body&&(o=n.body.split(" ").length*(r.Mj+20)),m&&h||["presence","quick_replies","status"].includes(n.type)||t((0,s.enqueue)((0,a.fh)())),"bot"===e.source){const{action:i,delay:c}=(0,a.Kb)(n,e),l=n.is_first_in_response&&(n.campaign_key||p>2e3)||f&&h?0:c,u=n.is_last_in_response?0:r.bn;t((0,s.enqueue)(i,l,void 0!==o?o:u))}else t((0,s.enqueue)((0,a.Aw)(n,e.conversation_id,e.source))),t((0,i.nD)(n))})),t((0,s.enqueue)((0,a.rX)(!1)))}}},39334:function(e,t,n){"use strict";n.d(t,{j:function(){return l}});var a=n(86226),r=n(4276),o=n(69734);function i(e){return t=>{t((0,o.ez)(e))}}var s=n(24873),c=n(69971);function l(e){return async(t,n)=>{const o=(0,a.o8)(n()),l=Boolean(e.body)||"greeting"===e.type,{stateType:u}=n().pageState;if(!e||!l||null!=u&&u.startsWith("live_chat"))return;const d=(e.body||"").replace(/\d/g,"*").replace(/\s?(.+)@(.+\..+)\s?/g,"[redacted_email]");if(o){const n={activeConversationId:o.id,messageToSend:d,sentAt:e.timestamp};await t(function(e,t,n){return async(a,o)=>{if(!Boolean(e.body))return;const l=(0,r.tZ)("RESPONSE_TIMEOUT");l.setLoggerReady();const{messages:u}=o(),d=u.findLastEntry((t=>t.tempMessageUuid===e.temp_message_uuid)),g=u.findLastEntry((e=>"bot"===e.source&&"ignored"!==e.type));if(d){if(!g)return i("CHAT_OUTAGE_MID_CONVERSATION"),void l.error("response timed out",{...n,activeConversation:!0,reason:"no bot responses in state",fallbackMessageShown:!0});try{await a(function(e,t,n){return async(a,r)=>{const{chatter:o}=r(),i=await(0,s.H)(e,o.token);let l=null;if(i){const[,e]=n;i._id!==e.id?(l="bot",await a((0,c.G)())):l=function(e,t){const[n,a]=e,[r]=t;return("text"===a.type||"trigger"===a.type)&&n>r?"chatter":"other"}(t,n)}if(!i||"chatter"===l)throw new Error("attempt to reconcile delayed bot responses failed: mostRecentMessageSource: ".concat(l))}}(t,d,g))}catch(e){a(i("CHAT_OUTAGE_MID_CONVERSATION"));const[,t]=g,[,r]=d;l.error("response timed out",{...n,reason:e.message,lastBotMessageId:t.id,sentMessageId:r.id,fallbackMessageShown:!0})}}else l.warn("response timed out",{...n,reason:"chatter message is not in state",chatterMessageId:e.temp_message_uuid,activeConversation:!0,messageType:e.type})}}(e,o.id,n))}else t((g="greeting"===e.type,(e,t)=>{const{id:n}=t().chatter;e(i(g?"CHAT_OUTAGE_FULL_PAGE_NO_BACKOFF":"CHAT_OUTAGE_MID_CONVERSATION")),function(e,t){const n=(0,r.tZ)("RESPONSE_TIMEOUT");n.setLoggerReady(),e?n.warn("response timed out",{reason:"greeting message timed out",fallbackMessageShown:!0,chatterId:t}):n.warn("response timed out",{reason:"no active conversations",fallbackMessageShown:!0,chatterId:t})}(g,n)}));var g}}(0,r.tZ)("RESPONSE_TIMEOUT").setLoggerReady()},34585:function(e,t,n){"use strict";n.d(t,{A:function(){return r}});var a=n(71466);function r(e){const{log:t}=e,n=t.message._type;return e=>{e((0,a.Aw)({...t.message,temp_message_uuid:t.temp_message_uuid,id:t.id,created:t.created,conversation_id:t.conversation_id,type:n},t.conversation_id,"user"))}}},7503:function(e,t,n){"use strict";n.d(t,{CONVERSATION_STATE_CAPTURE:function(){return m.pW},CONVERSATION_STATE_LIST_SELECTION:function(){return m.CQ},addConversationMessage:function(){return C},addMessageAction:function(){return f.x},addMessageGenericAction:function(){return f.i},appendMessageToConversation:function(){return w},fetchConversationIfNeeded:function(){return D},fetchMessages:function(){return h.A},fetchRecentMessages:function(){return E.G},getConversations:function(){return M},getLinkResponseRequest:function(){return v.A},handleResponseMessages:function(){return y.A},handleResponseTimeoutAction:function(){return S.j},handleSingleMessageAdded:function(){return A.A},hideMessageLoader:function(){return I},sendCurrentMessageAction:function(){return _.A},setPusherMessageChannelSubscribed:function(){return R},setSocketConnected:function(){return x},updateMessageInfo:function(){return k},updateOauth:function(){return O}});var a=n(67129),r=n(4731),o=n(8311),i=n(53781),s=n(1514),c=n(1217),l=n(58743),u=n(90438),d=n(4276),g=n(54251),p=n(11021),m=n(17066),f=n(56090),h=n(42692),E=n(69971),v=n(59552),y=n(97537),A=n(34585),_=(n(41017),n(93742)),S=n(39334),b=n(66618);n.o(b,"bindAllEventHandlers")&&n.d(t,{bindAllEventHandlers:function(){return b.bindAllEventHandlers}}),n.o(b,"sendEndConversationEvent")&&n.d(t,{sendEndConversationEvent:function(){return b.sendEndConversationEvent}}),n.o(b,"sendMessage")&&n.d(t,{sendMessage:function(){return b.sendMessage}}),n.o(b,"useLanguageChangeEffect")&&n.d(t,{useLanguageChangeEffect:function(){return b.useLanguageChangeEffect}});const T=(0,d.tZ)();function C(e,t){return{type:"ADD_CONVERSATION_MESSAGE",isResolved:e,agent:t}}function w(e){let{id:t,body:n,type:a,created:r,tempMessageUuid:o}=e;return(e,i)=>e(function(e){let{id:t,body:n,messageType:a,created:r,tempMessageUuid:o,client:i,pageState:s}=e;return{type:"APPEND_MESSAGE_TO_CONVERSATION",id:t,body:n,created:r,messageType:a,tempMessageUuid:o,client:i,pageState:s}}({id:t,body:n,created:r,messageType:a,tempMessageUuid:o,client:i().client,pageState:i().pageState}))}function I(){return{type:"HIDE_MESSAGE_LOADER"}}function x(){return{type:"SET_SOCKET_CONNECTED"}}function R(){return{type:"SET_PUSHER_MESSAGE_CHANNEL_SUBSCRIBED"}}function k(e){return{type:"UPDATE_MESSAGE_INFO",message:e}}function O(e,t){return{type:"UPDATE_OAUTH_STATUS",id:e,updatedFields:{authLinkExpired:t}}}const N="list_selection",L="capture";function M(){return async(e,t)=>{const n=e(((e,t)=>{const{resources:n}=t(),a=n[g.ResourceType.CONVERSATION];if(a){const e=a.requests[JSON.stringify({filter:{chatterId:t().chatter.token,recent:!0}})];if(e)return!e.isResolved}return!1}));return n?(e({type:m.IP}),Promise.resolve()):(e({type:"GET_CONVERSATIONS_REQUEST"}),e((0,g.fetchMany)(g.ResourceType.CONVERSATION,{filter:{chatterId:t().chatter.token,recent:!0}})).then((n=>{const{conversations:l,new_token:u}=n.data,[d]=l;if(d){const{current_state:n,notification_info:g,ada_glass_env:m,agents:f}=d,h=(null==n?void 0:n._type)||null,E=(null==n?void 0:n.platform_data)||{file_request:null},v=Boolean(g),y=f.length>0,A=y&&"object"==typeof d.agents[0];u&&u!==t().chatter.get("token")&&(p.I.store("chatter",u),e((0,a.y)({token:u}))),e({type:"SET_CONVERSATIONS",conversations:l}),e(function(e){return(t,n)=>{const{current_state:a,active:r}=e,{client:o}=n(),{timeToExpiry:s}=o,l=p.I.retrieve("created"),u=!(!(s>0&&l)||o.hasFeature(c.Features.ADA_GLASS_ZENDESK_MESSAGING))&&(0,c.isExpired)(s,parseInt(l,10));a||t({type:i.Re});const d=p.I.retrieve("inLiveChat"),g=p.I.retrieve("liveChatPending");var m;if(u&&(d||g)&&T.info("Session with expired chatter token still in use",{client_handle:o.handle,chatter_id:n().chatter.id,in_live_chat:p.I.retrieve("inLiveChat"),live_chat_pending:p.I.retrieve("liveChatPending"),conversation_state_from_api:(null==a?void 0:a._type)||"bot",sdk_used:(null===(m=n().embedState.metaFields)||void 0===m?void 0:m.sdkType)||"web"}),a&&r){const{_type:e,data:n}=a;let r;r=[N,L].includes(e)?{stateType:e,inState:Boolean(e),stateData:n.chat_data}:{stateType:e,inState:Boolean(e)},t({type:"SET_CURRENT_STATE",payload:r})}}}(d)),e({type:"SET_PLATFORM_DATA",payload:{platformData:E}}),E.file_request&&e((0,i.ZC)(E.file_request)),e({type:"SET_ADA_GLASS_ENV",payload:{adaGlassEnv:m}}),h&&null!=n&&n.queued&&e((0,r.Gg)({type:o.ad,unit:n.queue_unit,amount:n.queue_position})),v&&e((0,r.Gg)(g)),y&&A&&e((0,s.RW)(f))}else{const{chatter:e,client:n}=t();T.warn("No conversations were returned from api",{chatterToken:e.token,clientHandle:n.handle,chatterId:e.id})}})).catch((t=>{e(function(e){return(t,n)=>{if(e.response&&404===e.response.status)(0,l.hZ)("CONVERSATION_NOT_FOUND_ERROR");else{if(e.response&&401===e.response.status)return T.error("Unauthorized session error",{chatterId:n().chatter.id,chatterToken:n().chatter.token,clientHandle:n().client.handle}),void(0,l.hZ)("SESSION_UNAUTHORIZED");e.response&&(0,u.to)(new Error(e.message)),t({type:"GET_CONVERSATIONS_ERROR"})}}}(t))})))}}function D(e){return(t,n)=>{(0,g.getResource)(n(),g.ResourceType.CONVERSATION,e)||t(M())}}},41017:function(e,t,n){"use strict";n.d(t,{g:function(){return i}});var a=n(4731),r=n(58541),o=n(49715);function i(e){return(t,n)=>{const{pageState:i}=n();(0,r.clearMessageTimeout)();const s=e.data.log.filter((e=>(0,o.Y)(e.message,n())));s.some((e=>!("agent"!==e.source||!i.notification||(t((0,a.XR)()),0)))),t(function(e,t,n){return{type:"ADD_LOGS_FROM_RESPONSE",logs:e,client:t,pageState:n}}(s,n().client,n().pageState))}}},93742:function(e,t,n){"use strict";n.d(t,{A:function(){return r}});var a=n(56090);function r(){return(e,t)=>{const{currentMessage:n}=t();e((0,a.x)({body:n}))}}},66618:function(){},91052:function(e,t,n){"use strict";n.d(t,{f:function(){return c},y:function(){return l}});var a=n(3278),r=n(21962),o=n(17936),i=n(11021);function s(e,t,n){return!(!e||"string"!=typeof e||!t||"string"!=typeof t||n&&"string"!=typeof n)}async function c(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=null,n=null,i=null;const[c,l,u]=await Promise.all([r.embedStore.get("chatterToken"),r.embedStore.get("chatterCreated"),r.embedStore.get("sessionToken")]);if(s(c,l,u)&&(t=c,n=l,i=u),(0,o.E)()===a.y.Embed2&&e){const[e,a]=await Promise.all([r.embedStore.get("zdMessagingExternalUserId"),r.embedStore.get("zdMessagingChatterCreated")]);s(e,a)&&(t=e,n=a)}return[t,n,i]}function l(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=null,n=null,a=null;if(e){const e=i.A.getItem("zdMessagingExternalUserId"),r=i.A.getItem("zdMessagingChatterCreated");s(e,r)&&(t=e,n=r,a=i.A.getItem("sessionToken"))}if(!t||!n||!a){const e=i.I.retrieve("chatter"),r=i.I.retrieve("created"),o=i.I.retrieve("sessionToken");s(e,r,o)&&(t=e,n=r,a=o)}return[t,n,a]}},24873:function(e,t,n){"use strict";n.d(t,{H:function(){return i}});var a=n(5041),r=n.n(a),o=n(52236);function i(e,t){const n={params:{conversation_id:"".concat(e),page_size:10}};return o.FH.get("/logs/".concat(t),n).then((e=>{const t=e.data.log;return r()(t,(e=>"bot"===e.source&&"meta"!==e.message._type))})).catch((e=>{throw new Error("Fetching conversation failed: ".concat(e.message))}))}},83874:function(e,t,n){"use strict";n.d(t,{kK:function(){return me},WY:function(){return F},BM:function(){return I},nr:function(){return U},zd:function(){return fe},_z:function(){return W}});var a=n(20181),r=n.n(a),o=n(71466),i=n(4731),s=n(24744),c=n(95774),l=n(8311),u=n(3278),d=n(53781),g=n(1514),p=n(3228),m=n(86697),f=n(7732);let h=!1;var E=n(99651),v=n(87904),y=n(22635),A=n(21962),_=n(17936),S=n(4276),b=n(58541),T=n(69734),C=n(55017),w=n(7503),I={main:null,control:null,encrypted:null,setChannel(e,t){return this[e]=t,t}},x=n(52236);const R=async(e,t,n)=>{const a={headers:{"Chatter-Token":e}};return await x.FH.get("/chatters/js-event-data/".concat(n?"?stamped=1":""),a).then((e=>({...e.data.chatter_data,event_data:{...e.data.chatter_data.event_data,event_name:t}})))};var k=n(4712);const O=(0,n(12917).M)((e=>{A.fc.postMessage(s.r6,e)}),2e3),N=(0,S.tZ)("messageAdded");N.setLoggerReady();const L=(0,S.tZ)("pusher");L.setLoggerReady();const M=(e=>{const t=r()((function(t){for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];return t(e(...a))}),500);return function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return e=>t(e,...n)}})((e=>(t,n)=>{const{predictive_suggestions:a,request_id:r}=e;""!==n().currentMessage&&t({type:"ADD_PREDICTIVE_SUGGESTION_RESPONSES",predictiveSuggestions:a,requestId:r})})),D=e=>(t,n)=>{let a;const{chatter:r}=n(),S=r.token;if(!S)throw t((0,T.ez)("CHAT_OUTAGE_FULL_PAGE_NO_BACKOFF")),new Error("`chatterToken` is empty");if(I.setChannel("main",e.subscribe(S)),I.setChannel("encrypted",e.subscribe("private-encrypted-".concat(S))),e.subscribe("presence-chatter-".concat(S)),!I.encrypted||!I.main)throw t((0,T.ez)("CHAT_OUTAGE_FULL_PAGE_NO_BACKOFF")),new Error("Pusher channels are undefined for chatter token: ".concat(n().chatter.get("token")));var x;I.encrypted.bind("message-added",(e=>{L.info("message-added event received encrypted");const{chatter:a}=n();a.isNew&&(0,C.uG)(),"user"!==e.source&&(0,b.clearMessageTimeout)(),"agent"!==e.source&&"bot"!==e.source||function(e,t,n){e.forEach((e=>{A.fc.postMessage("PUBLISH_EVENT",{eventKey:"ada:conversation:message",data:{author:t,message_id:e.id,conversation_id:n}})}))}(e.messages,e.source,e.conversation_id),t(function(e){return(t,n)=>{if("user"===e.source)return void t(function(e){return(t,n)=>{const{log:a}=e,r=a.message._type;if(t((0,o.Ki)()),t((0,w.fetchConversationIfNeeded)(e.log.conversation_id)),["presence","csat"].includes(r))return void t((0,w.handleSingleMessageAdded)(e));const i={type:r,tempMessageUuid:a.temp_message_uuid,id:a.id,created:a.created,conversationId:a.conversation_id};n().messages.findIndex((e=>e.tempMessageUuid&&e.tempMessageUuid===a.temp_message_uuid||e.id===a.id))>-1?t((0,w.updateMessageInfo)(i)):"greeting"!==r&&(i.body=a.message.body,t((0,w.appendMessageToConversation)(i)))}}(e));e.messages.length||t((0,w.hideMessageLoader)()),t((0,w.fetchConversationIfNeeded)(e.conversation_id));const{client:a,chatter:r}=n();!function(e,t,n,a){e.forEach((e=>{"presence"===e.type&&e.event===c.n$&&N.info("Salesforce timeout presence message received",{event:e.event,body:e.body,client:{handle:t},chatter:{id:n},conversation:{id:a}})}))}(e.messages,a.handle,r.id,e.conversation_id),e.messages.some((e=>e.event===c.SU||e.event===c.fG))&&t((0,w.getConversations)());const i=e.messages.find((e=>null!==e.campaign_key));i&&((0,k.p3)({eventKey:"ada:message_received:".concat(i.campaign_key),value:0,isVariable:!1,meta:{campaign_key:i.campaign_key},customerQuery:{token:r.token}}),O({eventKey:"ada:campaigns:shown",data:{campaignKey:i.campaign_key}})),t((0,o.rX)(!0));const s=(0,_.E)(),l=function(e){return e.filter((e=>e.event!==c.SU&&e.event!==c.fG))}(e.messages);s===u.y.Embed2?l.length&&A.embedStore.dispatch("sendUnreadMessages",{messages:e.messages}):s===u.y.Embed1&&window.parent.postMessage({newMessages:{amount:l.length}},(0,E.Bq)()),t((0,w.handleResponseMessages)(e))}}(e))})),I.main.bind("conversation-started",(e=>{t((0,w.addConversationMessage)(!0,e.agent))})),I.main.bind("conversation-resolved",(e=>{t((0,w.addConversationMessage)(!1,e.agent)),t((0,w.hideMessageLoader)())})),I.main.bind("language",(e=>{t((0,v.f4)(e.language))})),I.main.bind("oauth-success",(e=>{t((0,w.updateOauth)(e._id,e.message.auth_link_expired))})),I.main.bind("request_secret_message",(()=>{L.info("Secret message request event has been received from api"),t((0,T.Af)(!0)),L.info("Secret message action has been set")})),I.main.bind("secret_message_received_by_agent",(()=>{L.info("Secret_message_received_by_agent event has been received from api"),t((0,T.Af)(!1)),L.info("Secret message action has been set to false")})),I.main.bind("live_handoff",(e=>{const t={userQuestion:e.user_question||"No last question",transcriptUrl:e.transcript_url,skillName:e.queue_name,lang:e.lang,variables:e.variables};(0,_.E)()===u.y.Embed2?A.fc.postMessage(s.xM,t):window.parent.postMessage({liveHandoff:t},(0,E.Bq)())})),t((x=I.main,e=>{h||(h=!0,x.bind("zendesk_live_agent_init_conversation",(t=>{e(f.u_(t))})),x.bind("zendesk_chatter_typing_indicator",(t=>{e(f.hF(t.is_typing))})),x.bind("zendesk_cancel_live_chat_request",(()=>{e(f.T())})),x.bind("zendesk_live_agent_last_processed_update",(t=>{const n=t.last_processed_timestamp,a=t.external_chat_id;e(f.H2(n,a))})),x.bind("zendesk_chatter_ended_chat",(()=>{e(f.hc()),e(f.$C())})))})),I.main.bind("live_agent_typing_indicator",(e=>{const a=e.is_typing,r=(0,p.lD)(n()),i=e.agent_internal_id||r[0];r.length>0&&(t(a?(0,o.fh)():(0,w.hideMessageLoader)()),t((0,g.p$)(i,a)))})),I.main.bind("message_state",(e=>{"fail"===e.state&&((0,b.clearMessageTimeout)(),t((0,o.k8)(!0)))})),I.main.bind("request_retry_handoff",(()=>{(e=>{(0,m.cA)().isChatting()&&e((0,T.FX)({showRetryDialog:!0}))})(t)})),I.main.bind("analytics",(e=>{(0,_.E)()===u.y.Embed2?A.fc.postMessage(s.MP,{analytics:e}):window.parent.postMessage({analytics:e},(0,E.Bq)())})),I.main.bind("custom-javascript-event",(async e=>{const t=await R(S,e.event_data.event_name);A.fc.postMessage(s.DI,t)})),I.main.bind("conversation_state_changed",(e=>{const{in_state:n,state_type:r,state_data:o}=e;(0,b.clearMessageTimeout)(),t({type:"SET_CURRENT_STATE",payload:{inState:n,stateType:r,stateData:o}}),r||(t((0,T.Af)(!1)),L.info("Secret message button has been removed")),a=t(((e,t)=>(n,a)=>{const{in_state:r,state_type:o,state_data:s}=e;let u=t;const d=s;if(t&&(window.clearTimeout(t),u=null),a().pageState.get("notificationInfo").get("type")===l.Ug&&n((0,i.XR)()),"waiting_for_data"===o&&r){d.show_banner&&n((0,i.Gg)({type:l.Ug,message:d.notification_message,messageSubtext:d.notification_message_subtext}));const e=parseInt(d.timeout_after_ms,10);e>0&&(u=window.setTimeout((()=>{n((0,w.addMessageAction)({body:"{}",messageType:c.OZ})),(0,b.clearMessageTimeout)(),n((0,i.XR)())}),e))}return u})(e,a))})),I.main.bind("ada_glass_env_update",(e=>{const{ada_glass_env:n}=e;t({type:"SET_ADA_GLASS_ENV",payload:{adaGlassEnv:n}})})),I.main.bind("options_block_expired",(e=>{const{message_id:n}=e;n&&t({type:"SET_CAPTURE_OPTIONS_DISABLED",payload:{messageId:n}})})),I.main.bind(y.aq,(e=>{t({type:"UPDATE_SELECTED_OPTION",id:e.message_id,scheduleStatus:e.status})})),I.main.bind("predictive_suggestions_added",(e=>{t(M(e))})),I.main.bind("notification",(e=>{t((0,i.Gg)(e.notification_info))})),I.main.bind(y.Lw,(e=>{t({type:"SAML_GATE_TOGGLE_SUCCESS",saml:e.saml})})),I.main.bind(y.xm,(e=>{t((0,d.ZC)(e))})),I.main.bind("pusher:subscription_succeeded",(()=>{A.fc.postMessage("CHAT_WEBSOCKET_CONNECTED",{})})),I.main.bind("agent-joined",(e=>{A.fc.postMessage("PUBLISH_EVENT",{eventKey:"ada:agent:joined",data:{conversation_id:e.conversation_id}})})),I.main.bind("agent-left",(e=>{A.fc.postMessage("PUBLISH_EVENT",{eventKey:"ada:agent:left",data:{conversation_id:e.conversation_id}})}))};function F(e,t){const n={by:e.chatter.get("token"),type:t.messageType,temp_message_uuid:t.tempMessageUuid,external_chat_id:e.pageState.get("sessionID")};let a;switch(t.messageType){case"downloadable":case"picture":a={...n,mime_type:t.mimeType,url:t.url,name:t.name};break;default:a={...n,body:t.body,button_type:t.buttonType,data:t.data}}return a}var U={socket:null},z=n(60510),P=n(90438),G=n(35968),H=n(16711),B=n(86981);let Z=0;function W(e,t){return(n,a)=>{const{client:r,liveAgent:i,embedState:c,pageState:l,chatter:u}=a(),d=r.productType===y.Kj,{inState:g,stateType:p}=l,m=(0,H.Nj)(u.language);if(i.inLiveChat&&i.zendesk.disconnected)return n((0,o.k8)(!0)),n((0,o.in)(e)),Promise.resolve();const f=e.type===B.h5?3e4:b.MESSAGE_TIMEOUT_MS,h=!g&&!p&&navigator.onLine&&!i.adaGlassEnv&&!i.inLiveChat&&!t&&!c.testMode;return h&&(0,b.startMessageTimeout)((()=>{n((0,T.tk)(m("DEFAULT_PARTIAL_OUTAGE_MESSAGE"),"WARNING",!1));const e=(0,S.tZ)("RESPONSE_TIMEOUT");e.setLoggerReady(),e.info("partial outage toast shown")}),void 0,r.hasFeature(z.O.WS_CHAT_UI_IMPROVEMENTS_ROLLOUT_1)&&d?6e4:15e3),(0,C.HI)(),x.FH.post("message/chat/",{...e},{timeout:r.hasFeature(z.O.WS_CHAT_UI_IMPROVEMENTS_ROLLOUT_1)&&d?6e4:f}).then((t=>{const{message:i}=t.data;if((0,b.clearMessageTimeout)(),n((0,T.Ny)()),i.includes("Processing...")||(0,P.fV)("API","Chat message POST failed",{response_msg:i}),h){const t=(new Date).toTimeString();(0,b.startMessageTimeout)((()=>{n((0,w.handleResponseTimeoutAction)({...e,timestamp:t}))}),(()=>{n((0,T.tk)(m("DEFAULT_PARTIAL_OUTAGE_MESSAGE"),"WARNING",!1));const e=(0,S.tZ)("RESPONSE_TIMEOUT");e.setLoggerReady(),e.info("partial outage toast shown")}),r.hasFeature(z.O.WS_CHAT_UI_IMPROVEMENTS_ROLLOUT_1)&&d?6e4:f,r.hasFeature(z.O.WS_CHAT_UI_IMPROVEMENTS_ROLLOUT_1)&&d?6e4:void 0)}n((0,o.k8)(!1));const c=a().proactiveMessages.lastUnengagedCampaign;return c&&(n((0,G.gA)()),A.fc.postMessage(s.r6,{eventKey:"ada:campaigns:engaged",data:{campaignKey:c}})),n((0,o.tN)(e)),Z=0,t})).catch((t=>{var a,r;n((0,o.k8)(!0)),navigator.onLine&&(Z+=1),3!==Z&&e.type!==B.h5||n((0,T.ez)("CHAT_OUTAGE_FULL_PAGE")),n((0,o.in)(e)),(0,b.clearMessageTimeout)(),t.response&&("conversation_in_capture_or_handoff_state"!==(null===(a=t.response.data)||void 0===a?void 0:a.error_type)?(0,P.to)(new Error("Failed to send message. Error: ".concat(t.message,". Error data: ").concat(null===(r=t.response.data)||void 0===r?void 0:r.message))):console.warn(t.response.data.message))}))}}n(49715);var V=n(64467),K=n(71471),j=n(43219),q=n(52224),X=n(86226),Q=n(56211),Y=n.n(Q),J=n(83683),$=n.n(J),ee=n(64955),te=n(48350);const ne=(0,S.tZ)("pusher"),ae=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(t,n)=>{const a=n();return a.chatter.get("token")?t(W({type:"greeting",...e,language:a.chatter.language,by:a.chatter.token,external_chat_id:a.pageState.sessionID})):Promise.reject(new Error("Could not send greeting; no chatter token"))}},re=ae;var oe=n(26183),ie=n(82961),se=n(40622),ce=n(11021);function le(){return(e,t)=>{const{pageState:n}=t();"current"===n.get("initializationPhase")&&(e((0,T.FX)({initializationPhase:"post"})),e(((e,t)=>{const{chatter:n,client:a}=t();(0,se.Ay)(a)||(ce.I.store(ie.D_,n.get("created")),ce.I.store(ie.Oj,n.get("token")),a.hasFeature(z.O.ADA_GLASS_ZENDESK_MESSAGING)||ce.I.store(ie.Nl,n.get("sessionToken")))})),function(){try{oe.BB.removeItem("backoffTimeout")}catch(e){console.warn("Could not remove backoffTimeout from local storage")}}())}}var ue=n(78369);const de=(0,S.tZ)("helpers/bindAllEventHandlers");de.setLoggerReady();let ge=!1;class pe{constructor(e,t){(0,V.A)(this,"disconnectedStatuses",["connecting","unavailable","disconnected","failed"]),(0,V.A)(this,"connectedStatuses",["connected"]),this.socket=e,this.state=t()}isInDisconnectedState(){return this.disconnectedStatuses.includes(this.socket.connection.state)}isInConnectedState(){return this.connectedStatuses.includes(this.socket.connection.state)}checkStatus(){if(this.isInDisconnectedState()&&!this.disconnectionStart)(0,b.clearMessageTimeout)(),this.disconnectionStart=new Date;else if(this.isInConnectedState()&&this.disconnectionStart){const e=new Date;de.info("Websocket Disconnection Event",{disconnectionStart:this.disconnectionStart.toUTCString(),disconnectionEnd:e.toUTCString(),disconnectionDurationSeconds:(Number(e)-Number(this.disconnectionStart))/1e3}),this.chatterWebsocketDisconnect(),this.disconnectionStart=void 0}}async chatterWebsocketDisconnect(){const{chatter:e,liveAgent:t}=this.state;if(t.adaGlassEnv===j.Gh)try{await x.FH.post(y.wc,{type:"chatter_websocket_disconnect",by:e.get("token")})}catch(e){de.error("Error sending disconnection event to api.",{errorMessage:"".concat(e)})}}watch(){this.checkStatusInterval||(this.checkStatusInterval=window.setInterval(this.checkStatus.bind(this),1e3))}}const me=()=>(e,t)=>{var n;const{chatter:a}=t(),r=function(){if(!window.PUSHER_KEY)throw new Error('"PUSHER_KEY" is not defined');return new URL(location.href).searchParams.get("debug")&&($().logToConsole=!0),new($())(window.PUSHER_KEY,{cluster:window.PUSHER_CLUSTER,authorizer:Y(),authEndpoint:"".concat(x.JR,"auth/pusher/chatter/multi/"),activityTimeout:25e3,pongTimeout:1e4})}();U.socket=r,function(e){var t;I.setChannel("control",e.subscribe("control")),null===(t=I.control)||void 0===t||t.bind("refresh-requested",(()=>{window.location.reload()}))}(r),e(D(r)),e((e=>(t,n)=>{if(!I.main)throw t((0,T.ez)("CHAT_OUTAGE_FULL_PAGE_NO_BACKOFF")),new Error("Pusher main channel is undefined for chatter token: ".concat(n().chatter.get("token")));e.connection.bind("state_change",(e=>{["unavailable","failed","error"].includes(e.current)&&(ne.info("[PUSHER] - Channel returned ".concat(e.current," for chatter_id: ").concat(n().chatter.get("token"))),t((0,T.ez)("CHAT_OUTAGE_FULL_PAGE_NO_BACKOFF"))),"connected"===e.current&&(ne.info("[PUSHER] - Reloading after disconnection for chatter_id: ".concat(n().chatter.get("token"))),t((0,T.d2)())),"unavailable"===e.current&&ne.info("Pusher websocket connection could not be established",{client_handle:n().client.handle,chatter_id:n().chatter.id,pusher_cluster:window.PUSHER_CLUSTER,fallbackMessageShown:!0,reason:"pusher unavailable"})})),I.main.bind("pusher:subscription_error",(()=>{ne.info("[PUSHER] - Channel returned pusher:subscription_error for chatter_id: ".concat(n().chatter.get("token"))),t((0,T.ez)("CHAT_OUTAGE_FULL_PAGE_NO_BACKOFF"))}))})(r)),e(((e,t)=>{A.fc.addSingleEventListener("TRIGGER_ANSWER",(t=>{e(ae({response_id:t.answerId}))})),A.fc.addSingleEventListener("SEND_GREETING",(n=>{if(!t().proactiveMessages.wasQuickReplyClicked)try{e((a=null==n?void 0:n.responseId,(e,t)=>{const n=t();!n.embedState.proactiveCampaignHadMessages&&!n.embedState.wasIntroShown||n.embedState.wasCampaignShownButNowClosed?(e=>0===e.messages.filter((e=>"ignored"!==e.type)).size)(n)&&e(re({})):e(re({response_id:a}))}))}catch(e){}var a})),A.fc.addSingleEventListener("SET_LANGUAGE",(t=>{e((0,K.x)(t.language))})),A.fc.addSingleEventListener("CLOSE_CAMPAIGN",(()=>{t().proactiveMessages.currentProactiveMessages.length&&e((e=>{e((0,ue.i3)()),setTimeout((()=>{e((0,ue.LM)()),A.embedStore.dispatch("setState",{wasCampaignShownButNowClosed:!0})}),1e3)}))})),A.fc.addSingleEventListener("INJECT_PROACTIVE_CONVERSATION",(t=>{try{e((n=t.key,(e,t)=>{const a=t(),r=a.chatter.get("token");return r?x.FH.post("proactive_conversations/message",{chatter_token:r,proactive_conversation_key:n,platform:"chat",language:a.chatter.language,message_parameters:{}}):Promise.reject(new Error("Could not send proactive conversations; no chatter token"))}))}catch(e){}var n}))}));const i=new pe(U.socket,t);return r.connection.bind("state_change",(t=>{e((e=>(t,n)=>{if("connected"===e.previous){const e=n().chatter.language,a=(0,H.Nj)(e);ge=!0,t((0,T.tk)(a("NETWORK_OFFLINE"),"ERROR",!1))}if("connected"===e.current&&ge){const{chatter:e,pageState:a}=n(),r=e.language,o=(0,H.Nj)(r);if(t((0,T.tk)(o("NETWORK_ONLINE"),"SUCCESS",!0)),t((0,w.fetchRecentMessages)()),de.info("fetching recent messages after socket reconnection"),a.inState&&"live_chat_pending_error"===a.stateType){const e=q.ei;setTimeout((()=>t((0,f.zK)(e))),2e3),setTimeout((()=>t(re())),3e3)}ge=!1}(0,b.clearMessageTimeout)()})(t))})),null===(n=I.encrypted)||void 0===n||n.bind("pusher:subscription_succeeded",(()=>{de.info("[CHAT] - Pusher channel successfully subscribed for chatter: ".concat(a.get("token"))),e((0,w.setPusherMessageChannelSubscribed)()),e((async(e,t)=>{const n=t(),a=(0,X.o8)(n),r=n.messages.size;if("true"===(0,te.D)("skipGreeting")||a&&r>0)return void(0,b.clearMessageTimeout)();const i=await async function(){if((0,_.E)()===u.y.Embed2){const e=await A.embedStore.get("client");return null!=e&&e.intro?e.intro.response_id:null}return null}();if(i)return e((0,o.fh)()),void await e(re({response_id:i}));if(!n.chatter.isNew&&r>0)return void(0,b.clearMessageTimeout)();const s=(0,te.D)("greeting"),c=s?"response_id":"handle";e((0,o.fh)()),await e(re({[c]:s||n.pageState.greeting.get("val")}))}))})),r.connection.bind("connected",(()=>{i.watch(),e((0,w.setSocketConnected)()),e((e=>{const t=new ee.k;t.query.followUpResponseId&&(delete t.query.followUpResponseId,t.pushHistory()),e((0,v.uW)()),e(le())}))})),e(le()),window.addEventListener("offline",(()=>{const n=t().chatter.language,a=(0,H.Nj)(n);(0,b.clearMessageTimeout)(),e((0,T.tk)(a("NETWORK_OFFLINE"),"ERROR",!1))})),window.addEventListener("online",(()=>{const n=t().chatter.language,a=(0,H.Nj)(n);(0,b.clearMessageTimeout)(),e((0,T.tk)(a("NETWORK_ONLINE"),"SUCCESS",!0))})),r},fe=async e=>{const t=await R(e,s.Xg);A.fc.postMessage(s.Xg,t),A.fc.postMessage(s.r6,{eventKey:"ada:end_conversation",data:t})};n(24873)},49715:function(e,t,n){"use strict";n.d(t,{Y:function(){return o}});var a=n(6436),r=n(86981);function o(e,t){const n=[],o=function(e){return void 0!==e.type}(e)?e.type:e._type;return(0,a.y)(t)||n.push(r.U7),!n.includes(o)}},62396:function(e,t,n){"use strict";n.d(t,{l:function(){return o}});var a=n(96540),r=n(87904);function o(e){const t=(0,r.tn)(),n=(0,a.useRef)(t);(0,a.useEffect)((()=>{t!==n.current&&e(),n.current=t}),[t,e])}},62223:function(e,t,n){"use strict";n.d(t,{CONVERSATION_STATE_CAPTURE:function(){return R.CONVERSATION_STATE_CAPTURE},CONVERSATION_STATE_LIST_SELECTION:function(){return R.CONVERSATION_STATE_LIST_SELECTION},addMessageAction:function(){return R.addMessageAction},addMessageGenericAction:function(){return R.addMessageGenericAction},bindAllEventHandlers:function(){return I.kK},chatMiddleware:function(){return U},fetchMessages:function(){return R.fetchMessages},getConversations:function(){return R.getConversations},getLinkResponseRequest:function(){return R.getLinkResponseRequest},initializeChatter:function(){return F},retryChatConnection:function(){return P},sendCurrentMessageAction:function(){return R.sendCurrentMessageAction},sendEndConversationEvent:function(){return I.zd},sendMessage:function(){return I._z},teardownChat:function(){return z},updateChatterABTestStorage:function(){return L},updateSessionAuthHeader:function(){return D},useLanguageChangeEffect:function(){return k.l}});var a=n(26183),r=n(67129),o=n(74266),i=n(60510),s=n(3278),c=n(73346),l=n(43219),u=n(68291),d=n(87904),g=n(1217),p=n(21962),m=n(17936),f=n(90438),h=n(2622),E=n(52236),v=n(22854),y=n(4276),A=n(58541),_=n(40622),S=n(11021),b=n(64955),T=n(86471),C=n(13316),w=n(82961),I=n(83874),x=n(91052),R=n(7503);n.o(R,"bindAllEventHandlers")&&n.d(t,{bindAllEventHandlers:function(){return R.bindAllEventHandlers}}),n.o(R,"sendEndConversationEvent")&&n.d(t,{sendEndConversationEvent:function(){return R.sendEndConversationEvent}}),n.o(R,"sendMessage")&&n.d(t,{sendMessage:function(){return R.sendMessage}}),n.o(R,"useLanguageChangeEffect")&&n.d(t,{useLanguageChangeEffect:function(){return R.useLanguageChangeEffect}});var k=n(62396);const O=[],N=(0,y.tZ)("INIT_CHATTER");async function L(e,t){if(e!==s.y.Embed2)return;const{initialURL:n}=await p.embedStore.getState();if(null==n||!n.includes("variantIndex="))return;const a=new b.k(n),r={variantIndex:a.query.variantIndex,responseId:a.path.split("/").pop(),chatterToken:t};return E.FH.patch("/chatters/ab_test_storage/",r)}async function M(e){let{client:t,chatterToken:n,chatterCreated:a,sessionToken:r}=e;if(!n||!a)return!0;if(!t.hasFeature(i.O.ADA_GLASS_ZENDESK_MESSAGING)){const e=await async function(e,t){try{return 200===(await E.FH.get("/chatters/session?chatter_token=".concat(e),{headers:{"Session-Auth":t}})).status}catch(e){return console.warn("Unable to validate session ",e),!1}}(n,r||"");return!e}return!1}function D(e,t,n){t&&n&&(E.FH.defaults.headers.common["Session-Auth"]=t,E.FH.defaults.headers.common["Chatter-Token"]=n)}function F(){return async(e,t)=>{const{client:n}=t(),a=(new b.k).query.adaSMSToken;if(a)return e((0,d.Rm)(a)),null;const{zdSessionId:l}=await async function(){const e=S.I.retrieve(w.SB);let t=null;if(e)t=e;else try{if((0,m.E)()===s.y.Embed2){const e=await p.embedStore.get(w.SB);t="string"==typeof e?e:null}}catch(e){console.warn("".concat(e))}return{zdSessionId:t}}(),y=n.hasFeature(i.O.ADA_GLASS_ZENDESK_MESSAGING);let{chatterToken:A,chatterCreated:T,sessionToken:I}=await async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=null,a=null,r=null;try{const[t,o,i]=(0,x.y)(e);n=t,a=o,r=i}catch(e){console.warn("Unable to fetch token/created from chat's iframe - ".concat(e))}if(await M({client:t,chatterToken:n,chatterCreated:a,sessionToken:r}))try{const[t,o,i]=await(0,x.f)(e);n=t,a=o,r=i}catch(e){console.warn("Unable to fetch token/created from embedStore - ".concat(e))}return{chatterToken:n,chatterCreated:a,sessionToken:r}}(y,n);D(0,I,A);const R=S.I.retrieve("inLiveChat"),k=S.I.retrieve("liveChatPending"),O=n.hasFeature(i.O.ZENDESK_CHATTER_AUTH),{timeToExpiry:F}=n,U=!!(F>0&&T)&&(0,g.isExpired)(F,parseInt(T,10)),z=(0,_.Ay)(n),P=await M({client:n,chatterToken:A,chatterCreated:T,sessionToken:I}),G=k||R,H=U||P;if(N.debug("Initialize Chatter Debug Info:",{client_handle:n.handle,chatterToken:A,chatterCreated:T,isPrivateMode:z,liveChatPending:k,inLiveChat:R,tokenExpired:U,createNewChatter:P}),!A||!T||!G&&z||!G&&H||(0,_.wE)()){await(0,h.S)(),e((0,o.kE)());const t=await async function(){if((0,v.a)()){const e=await p.embedStore.getState(),{metaFields:t,sensitiveMetaFields:n,wasIntroShown:a,initialURL:r,language:o,testMode:i}=e;return{storage:{meta_variables:{...t,introShown:a,initialURL:r,language:o,test_user:i?1:void 0},sensitive_meta_variables:n||{}}}}const e=(new b.k).query;return e.introShown=Object.keys(e).includes("introShown"),e.initialURL=null,{storage:{meta_variables:e,sensitive_meta_variables:{}}}}(),n={};if(O)try{n.zendesk_chatter_auth_token=await(0,C.O4)()}catch(e){(0,f.to)(e)}const a=Object.assign(t,n),i=await async function(e){return E.FH.post("/chatters/",e).catch((e=>{throw Error("Failed to create a new chatter. Error: ".concat(e.message))}))}(a),s=(0,m.E)();await L(s,i.data.token);const{zendesk_chatter_auth_results:{expire_in:l},_id:u,client_id:g,play_alert_chime:y}=i.data,_=function(e){const{data:t}=e,{saml:n}=t;return n}(i);return T=function(e){const{data:t}=e,{created:n}=t;return(0,c.A)(n).format("x")}(i),A=function(e){const{data:t}=e,{token:n}=t;if(!n)throw new Error("API didn't return new chatter token");return n}(i),I=function(e){const{data:t}=e,n=t.session_token;if(!n)throw new Error("API didn't return new chatter sessionToken");return n}(i),D(0,I,A),e((0,r.y)({clientId:g,created:T,id:u,isNew:!0,token:A,sessionToken:I,playAlertChime:y})),e((0,d.f4)()),l&&(0,C.ll)(l,A),_&&e({type:"SAML_GATE_TOGGLE_SUCCESS",saml:_}),i}return l&&e((0,o.DT)({zdSessionId:l})),O&&(0,C.oW)(A),y&&(0,u.J)("",""),e((0,r.y)({token:A,created:T,isNew:!1,sessionToken:I})),null}}N.setLoggerReady();const U=e=>t=>async n=>{if("ADD_MESSAGE"===n.type){const t=S.I.retrieve(l.Zh);t&&(Date.now()>+t?S.I.destroy(l.Zh):await(0,T.u)(l.Y)),await e.dispatch((0,I._z)((0,I.WY)(e.getState(),n)))}return"RETRY_ADD_MESSAGE"===n.type&&((0,A.clearMessageTimeout)(),await e.dispatch((0,I._z)(n.payload.message,!0))),t(n)};function z(){I.BM.main&&I.BM.main.unbind(),I.nr.socket&&I.nr.socket.connection.unbind(),O.forEach((e=>clearTimeout(e)))}function P(){let e=0;a.BB.getItem("backoffTimeout")?e=a.BB.getItem("backoffTimeout")||0:(e=5e3,a.BB.setItem("backoffTimeout",e));const t=e>4e4;return t?setTimeout((()=>{window.location.reload()}),6e4):setTimeout((()=>{a.BB.setItem("backoffTimeout",2*e),window.location.reload()}),e),t}},87904:function(e,t,n){"use strict";n.d(t,{lX:function(){return x},ei:function(){return m},IZ:function(){return S},Rm:function(){return y},uW:function(){return v},f4:function(){return E},NC:function(){return b},tn:function(){return T},mR:function(){return C},He:function(){return w}});var a=n(74353),r=n.n(a),o=n(67129),i=n(24744),s=n(60510),c=n(53177),l=n(30924),u=n(21962),d=n(4276),g=n(16711),p=n(64955);const m="SET_CHATTER_LANGUAGE",f=(0,d.tZ)("ChatterActions");async function h(e){const t=new p.k;"en"!==e?await c.qG.importLanguages(["en",e]):await c.qG.importLanguages([e]),t.query.language&&(t.query.language=e,t.pushHistory()),r().locale(e)}function E(e){return async t=>{const n=c.qG.getCleanedLanguageCode(e)||c.qG.getCleanedLanguageCode(function(){const{query:{language:e}}=new p.k;return e&&Object.values(l.AT).includes(e)?e:e&&(0,c.On)(e)?(h(l.Pc[e]),e):(0,g.mf)()}());await h(n),t(function(e){return{type:m,language:e}}(n))}}f.setLoggerReady();const v=()=>(e,t)=>{const n={chatter:t().chatter.get("token"),created:t().chatter.get("created"),sessionToken:t().chatter.get("sessionToken")};u.fc.postMessage(i.HZ,n)},y=e=>(t,n)=>{const{client:a}=n();a.hasFeature(s.O.PUSH_NOTIFICATIONS)&&(f.info("Chat initialized from URL received via SMS",{chatterToken:e,clientHandle:a.handle}),t((0,o.y)({token:e,isNew:!1})))};var A=n(53058),_=n(68060);function S(e){return e.chatter}function b(){return{chatter:(0,A.d4)(S)}}function T(){return(0,A.d4)(S).language}function C(){return(0,g.Nj)(T())}function w(){const e=T();return{withChatterLanguage:t=>t.get(e)||t.get(_.P)}}var I=n(49568);class x extends(I.Ay.Record({id:null,token:null,sessionToken:null,clientId:null,isNew:!0,language:"en",created:null,canViewDemoContent:!1,displayName:null,email:null,emailSent:!1,playAlertChime:!1,deviceNotificationsEnabled:!1,smsNotificationsEnabled:!1,saml:I.Ay.Map()})){}},19262:function(e,t,n){"use strict";function a(e){return{type:"SET_CLIENT",response:e}}n.d(t,{i:function(){return a}})},20969:function(e,t,n){"use strict";n.d(t,{t:function(){return c}});var a=n(53058),r=n(87904),o=n(52236),i=n(19262),s=n(16307);function c(){const e=(0,a.wA)(),{withChatterLanguage:t}=(0,r.He)(),n=(0,a.d4)(s.K),c=n.get("productType");return{client:n,fetchClient:async()=>{const t=await o.FH.get("");e((0,i.i)(t.data))},botName:t(n.uiSettings.get("chat").get("botName"))||"",isGenerative:"generative"===c}}},1217:function(e,t,n){"use strict";n.d(t,{ClientRecord:function(){return c},Features:function(){return s.O},getAdaUrl:function(){return r},getClient:function(){return l.K},isExpired:function(){return l._},setClient:function(){return a.i},useClient:function(){return o.t}});var a=n(19262);function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=!t||t.endsWith("/")?t:"".concat(t,"/");return"https://ada.cx/".concat(n,"?utm_source=").concat(e,"&utm_medium=referral&ref=").concat(e)}var o=n(20969),i=n(49568),s=n(60510);class c extends(i.Ay.Record({productType:"declarative",agentAvatar:i.Ay.Map({default:!0,image:null}),avatar:i.Ay.Map({image:null,letter:null,useLetter:!0}),buttonLayoutMobile:"carousel",buttonLayoutDesktop:"stacked",chat:!0,features:i.Ay.Map({beta:!1,redactions:!1,adaGlassZendesk:!1}),handle:"",isFrench:!1,isMobile:!1,language:"en",name:"",rollout:1,persistence:"normal",privacy:!1,privacyLink:"",privateConfig:i.Ay.Map(),redactions:i.Ay.List(),customRedactions:i.Ay.List(),samlLoginButton:i.Ay.Map(),showLogo:!1,timeToExpiry:0,tint:"",translatedLanguages:i.Ay.List(),numPredictiveSuggestions:0,uiSettings:i.Ay.Map({chat:i.Ay.Map({theme:"light",style:"round",headerColorEnabled:!1,headerColor:null,advancedColorsEnabled:!1,textOverAccentColor:null,headerTextColor:null,textSize:"default",botName:i.Ay.Map(),botDescriptionEnabled:!1,botDescription:i.Ay.Map(),emailTranscriptSetting:!0,fallbackUiSettings:i.Ay.Map({default:!1,icon:i.Ay.Map({default:!1,image:""}),links:i.Ay.Map({en:i.Ay.List()}),message:i.Ay.Map()}),brandedCampaigns:"unbranded"})})})){get shouldShowBranding(){return this.showLogo}get hasLiveAgentFeature(){return[s.O.ADA_GLASS_NUANCE,s.O.ADA_GLASS_SALESFORCE,s.O.ADA_GLASS_ZENDESK].some((e=>this.hasFeature(e)))}get isCarouselQuickRepliesButtonLayout(){return!(!this.isMobile||"carousel"!==this.buttonLayoutMobile)||!this.isMobile&&"carousel"===this.buttonLayoutDesktop}get hasLoaded(){return Boolean(this.handle||this.name)}getAdaUrl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r(this.handle,e)}hasFeature(e){return Boolean(this.features.get(e))}getClientPartner(){return this.privateConfig.get("adaPartnerName")}}var l=n(16307)},16307:function(e,t,n){"use strict";function a(e){return e.client}function r(e,t){const n=new Date,a=new Date(n.getTime()+6e4*n.getTimezoneOffset()).getTime();return!(e<=0)&&t+e<a}n.d(t,{K:function(){return a},_:function(){return r}})},22635:function(e,t,n){"use strict";n.d(t,{Dl:function(){return i},EX:function(){return d},HJ:function(){return a},J7:function(){return s},Kj:function(){return g},Lw:function(){return l},aq:function(){return r},u7:function(){return c},wc:function(){return o},xm:function(){return u}});const a="scheduled_callback",r="booking_status",o="webhooks/live/",i="zendesk_messaging_glass/",s=1e3,c="zendeskSessionLock",l="saml_gate_toggle",u="agent_file_transfer",d="message/live_chat/jwt_token/",g="generative"},79673:function(e,t,n){"use strict";n.d(t,{bJ:function(){return s},i9:function(){return g},VC:function(){return p},LM:function(){return h},cf:function(){return f},Hm:function(){return m}});var a=n(50616),r=n(90438),o=n(52236),i=n(54251);function s(){return(e,t)=>{const n=(0,a.o8)(t()),{chatter:s}=t();return o.FH.get("/conversations/handoff_status/".concat(null==n?void 0:n.id),{headers:{"Chatter-Token":s.token}}).then((t=>{e((0,i.pushResource)(i.ResourceType.CONVERSATION,{data:{_type:i.ResourceType.CONVERSATION,_id:null==n?void 0:n.id,hadHandoff:t.data.had_handoff}}))}),(e=>{e.response&&(0,r.to)(new Error("Fetching handoff status failed. Error: ".concat(e.message)))}))}}var c=n(96540),l=n(53058),u=n(62223),d=n(87904);function g(e,t){return o.FH.post("/webhooks/chat/",{type:e,by:t})}function p(){const{chatter:e}=(0,d.NC)();return{activeConversation:(0,l.d4)(a.o8),endActiveConversation:()=>{g("chatter_closed",e.token),(0,u.sendEndConversationEvent)(e.token)}}}function m(){return(0,l.d4)(a.cz)}function f(){const e=(0,l.d4)(a.tM)||!1,[t,n]=(0,c.useState)(!1);return t!==e&&n(e),{shouldForceQuickReplies:t}}function h(e){return(0,l.d4)((t=>(0,i.getResource)(t,i.ResourceType.CONVERSATION,e)))}},53965:function(e,t,n){"use strict";n.d(t,{wI:function(){return at},mT:function(){return it},QB:function(){return Ue},cN:function(){return Vt},lQ:function(){return Ut},jK:function(){return le},$v:function(){return Qt},E9:function(){return Xt},m0:function(){return ce},hU:function(){return Yt},f4:function(){return p}});var a=n(54251),r=n(39904);function o(e,t){const n={...e.csat&&e.csat.serialize()};return n.originalScore&&(n.score=parseFloat(n.originalScore)),o=>o((0,a.postAction)(a.ResourceType.CONVERSATION,e.id,"set_csat",{...n,...r.CsatResult.createPatch(t),submit:t.submit}))}var i=n(96540),s=n(63823),c=n(87904),l=n(79673),u=n(64766),d=n(86471),g=n(53058);function p(){var e;const t=(0,g.wA)(),n=null!==(e=(0,g.d4)((e=>{var t;return null===(t=e.resources.csat_settings)||void 0===t?void 0:t.byId})))&&void 0!==e?e:{};return{csatSettings:(0,g.d4)((e=>(0,a.getResource)(e,a.ResourceType.CSAT_SETTINGS))),agentCsatSettings:Object.values(n).find((e=>"agent"===e.surveyType)),trackCsatShown:(e,n)=>t((0,a.postAction)(a.ResourceType.CONVERSATION,e,"track_csat_shown",{survey_type:n})),fetchCsatSettings:()=>t((0,a.fetchOne)(a.ResourceType.CSAT_SETTINGS)),fetchAgentCsatSettings:()=>t((0,a.fetchOne)(a.ResourceType.CSAT_SETTINGS,"agent")),postCsatResult:function(){return t(o(...arguments))}}}var m,f,h,E,v=n(84324),y=n(5056),A=n(49856),_=n(16711),S=n(57528),b=n(64612),T=n(92430);const C=b.Ay.section(m||(m=(0,S.A)([""]))),w=b.Ay.h2(f||(f=(0,S.A)(["\n  font-size: ",";\n  margin: 0 0 "," 0;\n  padding: 0;\n  text-align: center;\n  color: ",";\n  font-weight: ",";\n"])),(e=>e.theme.mainFontSize),T.v.space5,(e=>e.theme.colorTextDefault),T.v.heavyFontWeight),I=b.Ay.ul(h||(h=(0,S.A)(["\n  display: flex;\n  justify-content: center;\n  flex-wrap: wrap;\n  margin: 0 0 -"," 0;\n  list-style: none;\n  padding: 0;\n"])),T.v.space2),x=b.Ay.li(E||(E=(0,S.A)(["\n  padding: 0;\n  margin: 0 3px ",";\n"])),T.v.space2);function R(e){var t;let{conversation:n,selectedOptions:a,setSelectedOptions:r,useAgentCsat:o=!1}=e;const{csatSettings:s,agentCsatSettings:l}=p(),{withChatterLanguage:u}=(0,c.He)(),d=o?l:s;if(!d)return null;const g=null===n.csat||(null===(t=n.csat)||void 0===t?void 0:t.isPositive),m=u(g?d.followUpFeedbackPositiveLabel:d.followUpFeedbackNegativeLabel),f=(g?d.followUpPositiveFeedbackOptions:d.followUpNegativeFeedbackOptions).map((e=>i.createElement(x,{key:e.id},i.createElement(y.a,{onClick:()=>(e=>{let t;t=a.includes(e)?a.filter((t=>t!==e)):a.concat([e]),r(t)})(e.id),active:a.includes(e.id),text:u(e.label)||"",isToggle:!0}))));return i.createElement(C,null,i.createElement(w,null,m),i.createElement(I,null,f))}var k,O,N,L,M,D,F,U;const z=b.Ay.div(k||(k=(0,S.A)(["\n  margin-bottom: 24px;\n  text-align: center;\n  grid-row: ",";\n\n  ","\n"])),(e=>{let{row:t}=e;return t+1}),(e=>{let{row:t}=e;return 0!==t&&(0,b.AH)(O||(O=(0,S.A)(["\n      padding-top: 24px;\n      border-top: 1px solid ",";\n    "])),(e=>e.theme.colorOutline2))})),P=b.Ay.h2(N||(N=(0,S.A)(["\n  font-size: ",";\n  line-height: 24px;\n  margin: 0 0 16px 0;\n  padding: 0;\n  text-align: center;\n  font-weight: ",";\n  color: ",";\n\n  ","\n"])),T.L.mainFontSize,T.L.heavyFontWeight,(e=>e.theme.colorTextDefault),(e=>{let{extraMargin:t}=e;return t&&"\n    margin-bottom: 24px;\n  "})),G=b.Ay.div(L||(L=(0,S.A)(["\n  display: flex;\n  justify-content: center;\n  flex-wrap: wrap;\n  margin-bottom: -8px;\n"]))),H=(b.Ay.span(M||(M=(0,S.A)(["\n  cursor: pointer;\n  padding: 7px 11px;\n  border: 1px solid ",";\n  border-radius: 12px;\n  color: ",";\n  margin: 0 3px 8px;\n  user-select: none;\n  min-width: 76px;\n  box-sizing: border-box;\n\n  &:hover {\n    background-color: ",";\n    border-color: ",";\n  }\n\n  ","\n"])),T.W.colorGrey2Active,T.W.colorGrey4,T.W.colorGrey0,T.W.colorGrey0,(e=>{let{selected:t}=e;return t&&"\n    &, &:hover {\n      color: ".concat(T.W.colorUiPrimaryActive,";\n      background: ").concat(T.W.colorUiPrimaryLightHover,";\n      border-color: ").concat(T.W.colorUiPrimaryLightHover,";\n    }\n  ")})),b.Ay.div(D||(D=(0,S.A)(["\n  margin: 0 3px ",";\n"])),T.v.space2));function B(e){var t,n;const{clean:a,conversation:r,onAdditionalFeedbackTextChange:s,onIsResolvedChange:c,surveyType:l,questionsOrder:u=["satisfaction","follow_up_feedback","resolution","open_feedback"],selectedFeedbackOptions:d,setSelectedFeedbackOptions:m,useAgentCsat:f=!1}=e,h=(0,i.useRef)(null),E=(0,g.d4)((e=>(0,_.Nj)(e.chatter.language))),{csatSettings:S,agentCsatSettings:b}=p(),T=f?b:S,C=(0,g.d4)(A.Y),[w,I]=(0,i.useState)(a?null:null===(t=r.csat)||void 0===t?void 0:t.resolved),[x,k]=(0,i.useState)(a?null:(null===(n=r.csat)||void 0===n?void 0:n.comment)||null),O=(0,g.wA)(),N=e=>()=>{I(e),c(e),O(o(r,{surveyType:l,resolved:e}))};if(!T)return null;const L=C(T.openFeedbackLabel),M=C(T.openFeedbackHint);return i.createElement(i.Fragment,null,u.includes("follow_up_feedback")&&i.createElement(z,{row:u.indexOf("follow_up_feedback"),"data-testid":"follow_up_feedback-section"},i.createElement(R,{conversation:r,selectedOptions:d,setSelectedOptions:m,useAgentCsat:f})),u.includes("resolution")&&i.createElement(z,{row:u.indexOf("resolution"),"data-testid":"resolution-section","aria-labelledby":"resolution-label"},i.createElement(P,{id:"resolution-label"},C(T.resolutionLabel)),i.createElement(G,null,i.createElement(H,null,i.createElement(y.a,{active:!0===w,onClick:N(!0),text:E("YES"),isToggle:!0})),i.createElement(H,null,i.createElement(y.a,{active:!1===w,onClick:N(!1),text:E("NO"),isToggle:!0})))),u.includes("open_feedback")&&i.createElement(z,{ref:h,row:u.indexOf("open_feedback"),"data-testid":"open_feedback-section"},i.createElement(P,null,L),i.createElement(v.pd,{value:x||"",onChange:e=>{k(e),s(e)},maxLength:320,minRows:4,label:L||"",placeholder:M||""})))}var Z;function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},W.apply(this,arguments)}b.Ay.button(F||(F=(0,S.A)(["\n  margin: 0;\n  border: 0;\n  background: none;\n  font-size: ",";\n  cursor: pointer;\n  padding: 0 ",";\n\n  ","\n"])),T.L.mainFontSize,T.v.space1,(e=>(0,b.AH)(U||(U=(0,S.A)(["\n    color: ",";\n    border-radius: ",";\n\n    ","\n  "])),e.theme.themeOutlineColor,e.theme.mainBorderRadius,e.theme.focusStyle)));var V,K=e=>i.createElement("svg",W({xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",style:{enableBackground:"new 0 0 47.5 47.5"},viewBox:"0 0 47.5 47.5"},e),Z||(Z=i.createElement("defs",null,i.createElement("clipPath",{id:"CsatEmojiExcellent_svg__a",clipPathUnits:"userSpaceOnUse"},i.createElement("path",{d:"M0 38h38V0H0v38Z"})))),i.createElement("g",{clipPath:"url(#CsatEmojiExcellent_svg__a)",transform:"matrix(1.25 0 0 -1.25 0 47.5)"},i.createElement("path",{d:"M0 0c0-9.389-7.611-17-17-17S-34-9.389-34 0s7.611 17 17 17S0 9.389 0 0",style:{fill:"#ffcc4d",fillOpacity:1,fillRule:"nonzero",stroke:"none"},transform:"translate(36 19)"}),i.createElement("path",{d:"M0 0c-2.966 0-4.935.346-7.369.819-.557.107-1.638 0-1.638-1.637 0-3.276 3.763-7.37 9.007-7.37s9.007 4.094 9.007 7.37C9.007.819 7.925.927 7.369.819 4.936.346 2.967 0 0 0",style:{fill:"#664500",fillOpacity:1,fillRule:"nonzero",stroke:"none"},transform:"translate(19 15.151)"}),i.createElement("path",{d:"M0 0a4.67 4.67 0 0 1-5.956 2.85A4.667 4.667 0 0 1-8.884-.255a4.664 4.664 0 0 1-4.224.581 4.67 4.67 0 0 1-2.85-5.956 4.69 4.69 0 0 1 .472-.958c1.951-3.582 7.588-6.1 11.002-6.131C-1.848-10.552.962-5.055.233-1.042A4.712 4.712 0 0 1 0 0",style:{fill:"#e75a70",fillOpacity:1,fillRule:"nonzero",stroke:"none"},transform:"translate(17.65 33.72)"}),i.createElement("path",{d:"M0 0a4.67 4.67 0 0 0 5.956 2.85A4.669 4.669 0 0 0 8.885-.255a4.664 4.664 0 0 0 4.224.581 4.671 4.671 0 0 0 2.85-5.956 4.694 4.694 0 0 0-.473-.958c-1.951-3.582-7.588-6.1-11.002-6.131C1.848-10.552-.961-5.055-.232-1.042-.194-.694-.119-.344 0 0",style:{fill:"#e75a70",fillOpacity:1,fillRule:"nonzero",stroke:"none"},transform:"translate(20.35 33.72)"})));function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},j.apply(this,arguments)}var q,X=e=>i.createElement("svg",j({xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",style:{enableBackground:"new 0 0 47.5 47.5"},viewBox:"0 0 47.5 47.5"},e),V||(V=i.createElement("defs",null,i.createElement("clipPath",{id:"CsatEmojiGood_svg__a",clipPathUnits:"userSpaceOnUse"},i.createElement("path",{d:"M0 38h38V0H0v38Z"})))),i.createElement("g",{clipPath:"url(#CsatEmojiGood_svg__a)",transform:"matrix(1.25 0 0 -1.25 0 47.5)"},i.createElement("path",{d:"M0 0c0-9.389-7.611-17-17-17-9.388 0-17 7.611-17 17 0 9.388 7.612 17 17 17C-7.611 17 0 9.388 0 0",style:{fill:"#ffcc4d",fillOpacity:1,fillRule:"nonzero",stroke:"none"},transform:"translate(36 19)"}),i.createElement("path",{d:"M0 0s0 2 2 2 2-2 2-2v-2s0-2-2-2-2 2-2 2v2z",style:{fill:"#664500",fillOpacity:1,fillRule:"nonzero",stroke:"none"},transform:"translate(11 24)"}),i.createElement("path",{d:"M0 0s0 2 2 2 2-2 2-2v-2s0-2-2-2-2 2-2 2v2z",style:{fill:"#664500",fillOpacity:1,fillRule:"nonzero",stroke:"none"},transform:"translate(23 24)"}),i.createElement("path",{d:"M0 0a.501.501 0 0 1-.635.029c-.039-.029-3.922-2.9-8.7-2.9-4.766 0-8.662 2.871-8.7 2.9a.5.5 0 0 1-.729-.657c.129-.215 3.217-5.243 9.429-5.243S-.034-.843.094-.628A.499.499 0 0 1 0 0",style:{fill:"#664500",fillOpacity:1,fillRule:"nonzero",stroke:"none"},transform:"translate(28.335 14.371)"})));function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Q.apply(this,arguments)}var Y,J=e=>i.createElement("svg",Q({xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",style:{enableBackground:"new 0 0 47.5 47.5"},viewBox:"0 0 47.5 47.5"},e),q||(q=i.createElement("defs",null,i.createElement("clipPath",{id:"CsatEmojiOkay_svg__a",clipPathUnits:"userSpaceOnUse"},i.createElement("path",{d:"M0 38h38V0H0v38Z"})))),i.createElement("g",{clipPath:"url(#CsatEmojiOkay_svg__a)",transform:"matrix(1.25 0 0 -1.25 0 47.5)"},i.createElement("path",{d:"M0 0c0-9.389-7.611-17-17-17-9.388 0-17 7.611-17 17 0 9.388 7.612 17 17 17C-7.611 17 0 9.388 0 0",style:{fill:"#ffcc4d",fillOpacity:1,fillRule:"nonzero",stroke:"none"},transform:"translate(36 19)"}),i.createElement("path",{d:"M0 0c0-1.934-1.119-3.5-2.5-3.5S-5-1.934-5 0c0 1.933 1.119 3.5 2.5 3.5S0 1.933 0 0",style:{fill:"#664500",fillOpacity:1,fillRule:"nonzero",stroke:"none"},transform:"translate(15 20.5)"}),i.createElement("path",{d:"M0 0c0-1.934-1.119-3.5-2.5-3.5S-5-1.934-5 0c0 1.933 1.119 3.5 2.5 3.5S0 1.933 0 0",style:{fill:"#664500",fillOpacity:1,fillRule:"nonzero",stroke:"none"},transform:"translate(28 20.5)"}),i.createElement("path",{d:"M0 0h-14a1 1 0 1 0 0 2H0a1 1 0 1 0 0-2",style:{fill:"#664500",fillOpacity:1,fillRule:"nonzero",stroke:"none"},transform:"translate(26 11)"})));function $(){return $=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},$.apply(this,arguments)}var ee,te=e=>i.createElement("svg",$({xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",style:{enableBackground:"new 0 0 47.5 47.5"},viewBox:"0 0 47.5 47.5"},e),Y||(Y=i.createElement("defs",null,i.createElement("clipPath",{id:"CsatEmojiPoor_svg__a",clipPathUnits:"userSpaceOnUse"},i.createElement("path",{d:"M0 38h38V0H0v38Z"})))),i.createElement("g",{clipPath:"url(#CsatEmojiPoor_svg__a)",transform:"matrix(1.25 0 0 -1.25 0 47.5)"},i.createElement("path",{d:"M0 0c0-9.389-7.611-17-17-17-9.388 0-17 7.611-17 17 0 9.388 7.612 17 17 17C-7.611 17 0 9.388 0 0",style:{fill:"#ffcc4d",fillOpacity:1,fillRule:"nonzero",stroke:"none"},transform:"translate(36 19)"}),i.createElement("path",{d:"M0 0s0 2 2 2 2-2 2-2v-2s0-2-2-2-2 2-2 2v2z",style:{fill:"#664500",fillOpacity:1,fillRule:"nonzero",stroke:"none"},transform:"translate(11 24)"}),i.createElement("path",{d:"M0 0s0 2 2 2 2-2 2-2v-2s0-2-2-2-2 2-2 2v2z",style:{fill:"#664500",fillOpacity:1,fillRule:"nonzero",stroke:"none"},transform:"translate(23 24)"}),i.createElement("path",{d:"M0 0a.501.501 0 0 1 .635-.029c.039.029 3.922 2.9 8.7 2.9 4.766 0 8.662-2.871 8.7-2.9a.5.5 0 0 1 .729.657c-.129.215-3.217 5.243-9.429 5.243S.034.843-.094.628A.499.499 0 0 1 0 0",style:{fill:"#664500",fillOpacity:1,fillRule:"nonzero",stroke:"none"},transform:"translate(9.665 8.629)"})));function ne(){return ne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ne.apply(this,arguments)}var ae=e=>i.createElement("svg",ne({xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",style:{enableBackground:"new 0 0 47.5 47.5"},viewBox:"0 0 47.5 47.5"},e),ee||(ee=i.createElement("defs",null,i.createElement("clipPath",{id:"CsatEmojiTerrible_svg__a",clipPathUnits:"userSpaceOnUse"},i.createElement("path",{d:"M0 38h38V0H0v38Z"})))),i.createElement("g",{clipPath:"url(#CsatEmojiTerrible_svg__a)",transform:"matrix(1.25 0 0 -1.25 0 47.5)"},i.createElement("path",{d:"M0 0c0-9.389-7.611-17-17-17-9.388 0-17 7.611-17 17 0 9.388 7.612 17 17 17C-7.611 17 0 9.388 0 0",style:{fill:"#fdcb58",fillOpacity:1,fillRule:"nonzero",stroke:"none"},transform:"translate(36 19)"}),i.createElement("path",{d:"M0 0c-.045.179-1.168 4.379-7.485 4.379-6.318 0-7.441-4.2-7.485-4.379a.499.499 0 0 1 .836-.477c.019.019 1.954 1.856 6.649 1.856 4.694 0 6.63-1.837 6.648-1.856a.505.505 0 0 1 .598-.08A.5.5 0 0 1 0 0",style:{fill:"#664500",fillOpacity:1,fillRule:"nonzero",stroke:"none"},transform:"translate(26.485 7.121)"}),i.createElement("path",{d:"M0 0c-3.255 3.255-8.486 3.293-8.707 3.293a1 1 0 0 1-.001-2c.029 0 1.925-.022 3.983-.737-.593-.64-.982-1.634-.982-2.763 0-1.934 1.119-3.5 2.5-3.5s2.5 1.566 2.5 3.5c0 .174-.019.34-.037.507.013 0 .025-.007.037-.007A.999.999 0 0 1 0 0",style:{fill:"#664500",fillOpacity:1,fillRule:"nonzero",stroke:"none"},transform:"translate(16.707 19.707)"}),i.createElement("path",{d:"M0 0c-.221 0-5.451-.038-8.707-3.293A.999.999 0 0 1-8-5c.013 0 .024.007.036.007C-7.98-5.16-8-5.326-8-5.5-8-7.434-6.881-9-5.5-9S-3-7.434-3-5.5c0 1.129-.389 2.123-.982 2.763C-1.924-2.022-.028-2 .002-2A1 1 0 0 1 0 0",style:{fill:"#664500",fillOpacity:1,fillRule:"nonzero",stroke:"none"},transform:"translate(30 23)"}))),re=n(67871),oe=n(59649);const ie={[oe.P.THUMBS]:{1:i.createElement(re.ThumbsDownIcon,null),5:i.createElement(re.ThumbsUpIcon,null)},[oe.P.EMOJI]:{1:i.createElement(ae,null),2:i.createElement(te,null),3:i.createElement(J,null),4:i.createElement(X,null),5:i.createElement(K,null)},[oe.P.NUMERIC]:{1:"1",2:"2",3:"3",4:"4",5:"5"},[oe.P.NUMERIC_TEN]:{.5:"1",1:"2",1.5:"3",2:"4",2.5:"5",3:"6",3.5:"7",4:"8",4.5:"9",5:"10"}},se=[.5,1,1.5,2,2.5,3,3.5,4,4.5,5];function ce(e,t){const n=(0,_.Nj)(t);return{1:n("CSAT_TERRIBLE",void 0,{lowercase:!0}),2:n("CSAT_BAD",void 0,{lowercase:!0}),3:n("CSAT_OKAY",void 0,{lowercase:!0}),4:n("CSAT_GOOD",void 0,{lowercase:!0}),5:n("CSAT_EXCELLENT",void 0,{lowercase:!0})}[e]}function le(e,t){const n=(0,_.Nj)(t);return{1:n("CSAT_BAD",void 0,{lowercase:!0}),5:n("CSAT_GOOD",void 0,{lowercase:!0})}[e]}var ue,de,ge,pe,me,fe,he,Ee,ve,ye,Ae,_e,Se,be,Te,Ce=n(15841);const we=b.Ay.section(ue||(ue=(0,S.A)(["\n  transform: translate3d(0, 0, 0);\n  display: flex;\n  flex-direction: column;\n\n  ","\n"])),(e=>{let{addScoreMargin:t}=e;return t&&"margin-bottom: 21px;"})),Ie=b.Ay.span(de||(de=(0,S.A)(["\n  position: absolute;\n  top: 100%;\n  left: 50%;\n  transform: translateX(-50%);\n  padding-top: 6px;\n  font-size: ",";\n  font-weight: normal;\n  color: ",";\n  text-transform: capitalize;\n\n  ","\n"])),T.L.xSmallFontSize,(e=>e.theme.colorTextSubdued),(e=>{let{hidden:t}=e;return t&&"\n    visibility: hidden;\n  "})),xe=b.Ay.span(ge||(ge=(0,S.A)(["\n  flex: 1 1 0;\n"]))),Re=b.Ay.span(pe||(pe=(0,S.A)(["\n  font-size: ",";\n  border: none;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  flex: 0 0 auto;\n  width: ","px;\n  height: ","px;\n  outline: none;\n  padding: 0;\n  background-color: transparent;\n  box-sizing: border-box;\n  position: relative;\n\n  &:last-child {\n    margin-right: 0;\n  }\n\n  & > svg {\n    width: ",";\n    height: ",";\n    vertical-align: middle;\n  }\n"])),T.L.mainFontSize,(e=>{let{small:t}=e;return t?36:48}),(e=>{let{small:t}=e;return t?36:48}),(e=>{let{small:t}=e;return t?T.L.smallIconWidth:T.L.mediumIconWidth}),(e=>{let{small:t}=e;return t?T.L.smallIconHeight:T.L.mediumIconHeight})),ke=(0,b.Ay)(Re)(me||(me=(0,S.A)(["\n  border-radius: 50%;\n  width: ","px;\n  height: ","px;\n\n  ","\n\n  ","\n  \n  ","\n  \n  & > svg {\n    width: ",";\n    height: ",";\n  }\n"])),(e=>{let{small:t}=e;return t?40:48}),(e=>{let{small:t}=e;return t?40:48}),(e=>(0,b.AH)(fe||(fe=(0,S.A)(["\n    border: 1px solid ",";\n  "])),e.theme.colorOutline2)),(e=>{let{small:t}=e;return t&&"\n    margin-bottom: 0;\n  "}),(e=>{let{muted:t}=e;return t&&"\n    &:not(:hover):not(:focus-visible) {\n      filter: grayscale(1);\n      border-color: transparent;\n    }\n    \n    &:not(:hover):not(.focus-visible) {\n      filter: grayscale(1);\n      border-color: transparent;\n    }\n  "}),(e=>{let{small:t}=e;return t?"26px":"34px"}),(e=>{let{small:t}=e;return t?"26px":"34px"})),Oe=(0,b.Ay)(Re)(he||(he=(0,S.A)(["\n  border-radius: 12px;\n  font-size: ",";\n  font-weight: ",";\n  background-color: ",";\n"])),(e=>{let{small:t}=e;return t?T.L.mainFontSize:T.L.xLargeFontSize}),T.L.mediumFontWeight,(e=>e.theme.colorSolid1)),Ne=(0,b.Ay)(Oe)(Ee||(Ee=(0,S.A)(["\n  width: ","px;\n  height: ","px;\n  color: ",";\n  border-radius: 16px;\n  background-color: ",";\n\n  & > svg {\n    height: ",";\n    width: ",";\n  }\n"])),(e=>{let{small:t}=e;return t?48:52}),(e=>{let{small:t}=e;return t?48:52}),(e=>e.theme.colorIconDefault),(e=>e.theme.colorSolid1),T.L.smallIconHeight,T.L.smallIconWidth),Le=b.Ay.div(ve||(ve=(0,S.A)(["\n  display: flex;\n  flex-direction: column;\n  margin: 0 auto;\n  width: 100%;\n  max-width: 304px;\n"]))),Me=b.Ay.div.attrs((()=>({className:Ce.NC})))(ye||(ye=(0,S.A)(["\n  display: grid;\n  grid-template-columns: ",";\n  grid-column-gap: ",";\n  grid-row-gap: ",";\n  justify-content: center;\n  text-align: left;\n  text-transform: capitalize;\n\n  ","\n\n  ","\n\n  ","\n    \n  ","\n"])),(e=>{let{csatStyle:t}=e;return"repeat(".concat(t===oe.P.THUMBS?2:5,", 48px)")}),T.L.space2,T.L.space2,(e=>{let{csatStyle:t}=e;return t===oe.P.THUMBS&&"\n    grid-column-gap: 24px;\n  "}),(e=>{let{small:t}=e;return t&&"\n    grid-column-gap: 14px;\n  "}),(e=>{let{small:t,csatStyle:n}=e;return t&&n===oe.P.EMOJI&&"\n    grid-column-gap: 11px;\n  "}),(e=>{let{csatStyle:t}=e;return t===oe.P.THUMBS&&"\n    justify-content: center;\n  "})),De=b.Ay.div(Ae||(Ae=(0,S.A)(["\n  padding-top: 6px;\n  display: flex;\n  justify-content: space-between;\n  font-size: ",";\n  color: ",";\n  font-weight: normal;\n  text-transform: capitalize;\n\n  ","\n"])),T.L.xSmallFontSize,(e=>e.theme.colorTextSubdued),(e=>{let{hidden:t}=e;return t&&"\n    visibility: hidden;\n  "})),Fe=b.Ay.span.attrs((()=>({className:Ce.o_})))(_e||(_e=(0,S.A)(["\n  position: relative;\n  transition: all 150ms ease, color 0ms;\n\n  &:first-child "," {\n    left: 0;\n    transform: translateX(0);\n  }\n\n  &:last-child "," {\n    right: 0;\n    left: auto;\n    transform: translateX(0);\n  }\n\n  &:last-child ",' {\n    display: none;\n  }\n\n  & input[name="csat-rating"] {\n    position: absolute;\n    height: 100%;\n    width: 100%;\n    margin: 0;\n    z-index: 100;\n    opacity: 0;\n    cursor: ',';\n  }\n\n  // when navigating with the keyboard, show the focus ring around the rating element\n  & input[name="csat-rating"].focus-visible + '," {\n    ","\n  }\n\n  &:hover "," {\n    // undo muted styling when the rating is hovered\n    filter: none;\n    ","\n  }\n\n  &:hover {\n    transform: scale(1.09);\n  }\n\n  &:hover "," {\n    ",";\n  }\n\n  ","\n"])),Ie,Ie,xe,(e=>e.active?"default":"pointer"),Re,(e=>(0,b.AH)(Se||(Se=(0,S.A)(["\n      ",";\n    "])),e.theme.focusRingStyle)),ke,(e=>(0,b.AH)(be||(be=(0,S.A)(["\n      border: 1px solid ",";\n    "])),e.theme.colorOutline2)),Oe,(e=>e.theme.hoverOverlayStyle),(e=>{let{active:t,theme:n}=e;return t&&(0,b.AH)(Te||(Te=(0,S.A)(["\n      &,\n      &:hover {\n        transition: all 50ms ease, color 0ms;\n      }\n\n      &:focus-visible {\n        transform: scale(1.09);\n        transition: all 50ms ease, color 0ms;\n      }\n\n      & ",", & "," {\n        background-color: ",";\n        color: ",";\n      }\n    "])),Oe,Ne,n.themeColor,n.themeFgColor)}));function Ue(e){var t,n;let{conversationId:r,small:o,onScoreChange:s,useAgentCsat:l=!1}=e;const{chatter:u}=(0,c.NC)(),{csatSettings:d,agentCsatSettings:m}=p(),f=u.language,h=(0,g.d4)((e=>r?(0,a.getResource)(e,a.ResourceType.CONVERSATION,r):null)),[E]=(0,i.useState)((null==h||null===(t=h.csat)||void 0===t?void 0:t.style)===oe.P.NUMERIC_TEN?parseFloat(h.csat.originalScore):(null==h||null===(n=h.csat)||void 0===n?void 0:n.score)||null),[v,y]=(0,i.useState)({selectedScore:E}),A=l?m:d;if(null===A)return null;const _=e=>{const{selectedScore:t}=v,n=t||E,a=n===e,r=A.satisfactionStyle===oe.P.THUMBS;let c;const l="".concat(r?"":e," ").concat(ce(e,f));switch(A.satisfactionStyle){case oe.P.EMOJI:c=ke;break;case oe.P.NUMERIC:case oe.P.NUMERIC_TEN:c=Oe;break;case oe.P.THUMBS:default:c=Ne}return i.createElement(Fe,{key:e,active:a},i.createElement("input",{type:"radio",name:"csat-rating","data-testid":"CSATOption","aria-label":l,value:e,onChange:()=>{y({selectedScore:e}),s(e)}}),i.createElement(c,{small:o,csatStyle:A.satisfactionStyle,muted:!a&&null!==n},ie[A.satisfactionStyle][e],a&&(A.satisfactionStyle===oe.P.NUMERIC||A.satisfactionStyle===oe.P.EMOJI&&!o)&&i.createElement(Ie,null,ce(e,f))),i.createElement(xe,null))},S=A.satisfactionStyle===oe.P.EMOJI;return i.createElement(we,{addScoreMargin:Boolean(E)&&S},(()=>{const{selectedScore:e}=v;let t,n=null;const a=[1,2,3,4,5];switch(A.satisfactionStyle){case oe.P.THUMBS:t=[5,1].map((e=>_(e)));break;case oe.P.NUMERIC:t=a.map((e=>_(e))),n=i.createElement(De,{hidden:null!==e},i.createElement("div",null,ce(1,f)),i.createElement("div",null,ce(5,f)));break;case oe.P.NUMERIC_TEN:t=se.map((e=>_(e)));break;case oe.P.EMOJI:t=a.map((e=>_(e)));break;default:t=null}return i.createElement(Le,{"aria-labelledby":"csat-dialog-title"},i.createElement(Me,{csatStyle:A.satisfactionStyle,small:o,role:"radiogroup"},t),n)})())}var ze,Pe,Ge,He,Be,Ze,We,Ve,Ke,je,qe;const Xe=b.Ay.div(ze||(ze=(0,S.A)(["\n  margin: 0 auto;\n  max-height: 285px;\n  box-sizing: border-box;\n  transition: all 500ms ease-in-out;\n\n  ","\n"])),(e=>e.isExpanded&&(0,b.AH)(Pe||(Pe=(0,S.A)(["\n      height: 100vh;\n      max-height: 100vh;\n    "]))))),Qe=b.Ay.div(Ge||(Ge=(0,S.A)(["\n  box-sizing: border-box;\n  padding: "," "," ",";\n  display: grid;\n  grid-auto-rows: min-content;\n  max-width: 500px;\n  margin: 0 auto;\n  min-height: 100%;\n"])),T.v.space7,T.v.space5,T.v.space5),Ye=Xe,Je=b.Ay.section(He||(He=(0,S.A)(["\n  display: ",";\n  margin-bottom: ",";\n  grid-row: ",";\n\n  ","\n"])),(e=>{let{isExpanded:t,row:n}=e;return t||0===n?"block":"none"}),T.v.space6,(e=>{let{row:t}=e;return t+1}),(e=>{let{row:t}=e;return 0!==t&&(0,b.AH)(Be||(Be=(0,S.A)(["\n      padding-top: 24px;\n      border-top: 1px solid ",";\n    "])),(e=>e.theme.colorOutline2))})),$e=b.Ay.h2(Ze||(Ze=(0,S.A)(["\n  font-size: ",";\n  line-height: 1.5;\n  margin: 0 0 "," 0;\n  padding: 0;\n  text-align: center;\n  font-weight: ",";\n  color: ",";\n  letter-spacing: 0.1px;\n\n  ","\n"])),T.v.mainFontSize,T.v.space6,T.v.heavyFontWeight,(e=>e.theme.colorTextDefault),(e=>e.extraMargin&&(0,b.AH)(We||(We=(0,S.A)(["\n      margin-bottom: ",";\n    "])),T.v.space6))),et=b.Ay.div(Ve||(Ve=(0,S.A)(["\n  display: flex;\n  height: 40px;\n  align-items: center;\n  justify-content: center;\n"]))),tt=b.Ay.div(Ke||(Ke=(0,S.A)(["\n  margin-top: ",";\n  ",";\n"])),T.v.space2,(e=>{let{isExpanded:t}=e;return t&&(0,b.AH)(je||(je=(0,S.A)(["\n      margin-bottom: ",";\n    "])),T.v.space5)})),nt=b.Ay.div(qe||(qe=(0,S.A)(["\n  &:not(:last-child) {\n    margin-bottom: ",";\n  }\n"])),T.v.space1);function at(e){var t,n,a,r;let{onClose:o,onSubmit:g,surveyType:m,clean:f=!1,useAgentCsat:h=!1}=e;const{setSheetStyle:E}=(0,u.ZJ)(),{csatSettings:v,agentCsatSettings:y,fetchAgentCsatSettings:A,fetchCsatSettings:_,postCsatResult:S}=p(),b=(0,l.Hm)(),T=(0,c.mR)(),{withChatterLanguage:C}=(0,c.He)(),[w,I]=(0,i.useState)(!1),[x,R]=(0,i.useState)(f?[]:(null==b||null===(t=b.csat)||void 0===t?void 0:t.feedback)||[]),[k,O]=(0,i.useState)(f?null:(null==b||null===(n=b.csat)||void 0===n?void 0:n.resolved)||null),[N,L]=(0,i.useState)(f?null:(null==b||null===(a=b.csat)||void 0===a?void 0:a.comment)||null);(0,i.useEffect)((()=>{v||_(),h&&!y&&A()}),[]);const M=h?y:v,D={satisfaction:Boolean(null==b?void 0:b.csat),follow_up_feedback:!(null!=M&&M.followUpFeedbackIsEnabled)||Boolean(x.length),resolution:!(null!=M&&M.resolutionIsEnabled)||null!==k,open_feedback:!(null!=M&&M.openFeedbackIsEnabled)||(N||"").length<=320&&""!==(N||"")},F=(e=>{if(!M)return!1;const t=(null===(e=M.order)||void 0===e?void 0:e.first())||"satisfaction";return Boolean(!M.hasSurveyQuestionOnly&&D[t])})();if((0,i.useEffect)((()=>{E(F?"fullscreen":"default")}),[F,E]),!b)return null;if(!M)return i.createElement(i.Fragment,null,"Loading...");const U=async()=>{await S(b,{surveyType:m}),o()},z=async()=>{await S(b,{surveyType:m,comment:N,resolved:k,feedback:x,submit:!0}),I(!0),await(0,d.u)(1e3),g()},P=(e=>{const t=((null===(e=M.required)||void 0===e?void 0:e.toJS())||[]).some((e=>Boolean(!D[e])));return F?i.createElement(i.Fragment,null,i.createElement(nt,null,w?i.createElement(s.X,{block:!0,size:"large",onClick:o,text:T("THANKS!")}):i.createElement(s.X,{block:!0,size:"large",onClick:z,text:T("SUBMIT"),disabled:t})),i.createElement(nt,null,i.createElement(s.X,{block:!0,size:"large",buttonType:"link",onClick:o,text:T("CLOSE")}))):w?i.createElement(et,null,T("THANKS!")):b.csat?i.createElement(nt,null,i.createElement(s.X,{block:!0,size:"large",onClick:U,text:T("SUBMIT")})):i.createElement(nt,null,i.createElement(s.X,{block:!0,size:"large",buttonType:"link",onClick:o,text:T("SKIP_AND_CLOSE")}))})(),G=(null===(r=M.order)||void 0===r?void 0:r.toJS())||["satisfaction","follow_up_feedback","resolution","open_feedback"],H=G.reduce(((e,t)=>"follow_up_feedback"===t?M.followUpFeedbackIsEnabled&&(F||0===G.indexOf("follow_up_feedback"))?[...e,t]:e:"resolution"===t?M.resolutionIsEnabled&&(F||0===G.indexOf("resolution"))?[...e,t]:e:"open_feedback"===t?M.openFeedbackIsEnabled&&(F||0===G.indexOf("open_feedback"))?[...e,t]:e:[...e,t]),[]);return i.createElement(Ye,{isExpanded:F,role:"dialog","aria-labelledby":"csat-dialog-title"},i.createElement(Qe,null,i.createElement(Je,{row:H.indexOf("satisfaction"),isExpanded:F},i.createElement($e,{id:"csat-dialog-title"},C(M.satisfactionLabel)),i.createElement(Ue,{conversationId:b.id,onScoreChange:async e=>{await S(b,{surveyType:m,score:e}),M.hasSurveyQuestionOnly&&(I(!0),await(0,d.u)(1e3),g())},useAgentCsat:h})),i.createElement(B,{clean:f,conversation:b,surveyType:m,onAdditionalFeedbackTextChange:e=>L(e),onIsResolvedChange:e=>O(e),questionsOrder:H,selectedFeedbackOptions:x,setSelectedFeedbackOptions:R,useAgentCsat:h}),i.createElement(tt,{isExpanded:F},P)))}var rt;const ot=b.Ay.div(rt||(rt=(0,S.A)(["\n  color: ",";\n  font-size: ",";\n  text-align: center;\n  margin-top: ",";\n  margin-bottom: ",";\n"])),(e=>e.theme.colorTextSubdued),(e=>e.theme.smallFontSize),T.v.space4,T.v.space4);function it(e){let{csatResult:t}=e;const{csatSettings:n,fetchCsatSettings:a}=p(),r=(0,c.mR)(),o=(0,c.tn)();if((0,i.useEffect)((()=>{n||a()}),[]),null===t.score)return null;const s=t.style===oe.P.THUMBS?le(t.score,o):ce(t.score,o);return i.createElement(ot,null,r("YOU_RATED_CHAT_AS_",{label:s}))}var st,ct=n(55373),lt=n.n(ct),ut=n(88603),dt=n(31904);function gt(){return gt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},gt.apply(this,arguments)}var pt,mt=e=>i.createElement("svg",gt({xmlns:"http://www.w3.org/2000/svg",width:43,height:43,fill:"none"},e),st||(st=i.createElement("path",{fill:"evenodd",fillRule:"evenodd",d:"M21.009 42.018a21 21 0 1 1 0-42 21 21 0 0 1 0 42Zm11.725-30.991a1.752 1.752 0 0 0-2.668.243L18.828 27.36l-5.14-7.36a1.752 1.752 0 0 0-2.668-.242 1.824 1.824 0 0 0-.15 2.336l5.796 8.3a2.637 2.637 0 0 0 4.323 0l11.895-17.032a1.824 1.824 0 0 0-.15-2.336Z",clipRule:"evenodd"})));function ft(){return ft=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ft.apply(this,arguments)}var ht,Et,vt,yt,At,_t=e=>i.createElement("svg",ft({xmlns:"http://www.w3.org/2000/svg",width:43,height:43,fill:"none"},e),pt||(pt=i.createElement("path",{fill:"evenodd",fillRule:"evenodd",d:"M21.002 42.986a21 21 0 1 1 0-42 21 21 0 0 1 0 42Zm.943-16.625h-1.88a.886.886 0 0 1-.894-.829l-.8-14.875a.884.884 0 0 1 .893-.92h3.482a.884.884 0 0 1 .893.92l-.8 14.875a.887.887 0 0 1-.894.83Zm-.948 2.625a2.625 2.625 0 1 1 0 5.251 2.625 2.625 0 0 1 0-5.25Z",clipRule:"evenodd"}))),St=n(1217),bt=n(64467),Tt=n(86226),Ct=n(58743);const wt=b.Ay.section(ht||(ht=(0,S.A)([""]))),It=b.Ay.div(Et||(Et=(0,S.A)(["\n  padding: ",";\n  box-shadow: ",";\n  border-radius: ",";\n  max-width: 400px;\n  margin: 0 auto;\n\n  ","\n"])),T.L.gUnitDouble,T.v.boxShadow2,T.L.messageBorderRadius,(e=>(0,b.AH)(vt||(vt=(0,S.A)(["\n    border: 1px solid ",";\n    background-color: ",";\n  "])),e.theme.colorOutline2,e.theme.colorSurfaceCardElevated))),xt=b.Ay.h1.attrs((()=>({className:Ce.Nn})))(yt||(yt=(0,S.A)(["\n  font-size: ",";\n  line-height: 20px;\n  margin: 0 0 "," 0;\n  padding: 0;\n  text-align: center;\n  font-weight: ",";\n\n  ","\n"])),T.L.mainFontSize,T.L.gUnitDouble,T.L.mediumFontWeight,(e=>(0,b.AH)(At||(At=(0,S.A)(["\n    color: ",";\n  "])),e.theme.colorTextEmphasized)));class Rt extends i.Component{componentDidMount(){const{fetchCsatSettingsIfNeeded:e}=this.props;e()}componentDidUpdate(e){const{providedCsatSettings:t,csatSettingsState:n}=this.props;!t&&!n||e.providedCsatSettings||e.csatSettingsState||window.dispatchEvent(Ct.VR.SCROLL_MESSAGE_LIST_TO_BOTTOM)}render(){var e;const{withChatterLanguage:t,providedCsatSettings:n,csatSettingsState:a,onScoreChange:r,conversationId:o,clean:s,withContainer:c,conversation:l,onAdditionalFeedbackTextChange:u,onIsResolvedChange:d,setSelectedFeedbackOptions:g,selectedFeedbackOptions:p}=this.props,m=n||a;if(!m)return null;const f=(null===(e=m.order)||void 0===e?void 0:e.toJS())||["satisfaction","follow_up_feedback","resolution","open_feedback"],h=f.reduce(((e,t)=>"follow_up_feedback"===t?m.followUpFeedbackIsEnabled&&0===f.indexOf("follow_up_feedback")?[...e,t]:e:"resolution"===t?m.resolutionIsEnabled&&0===f.indexOf("resolution")?[...e,t]:e:"open_feedback"===t?m.openFeedbackIsEnabled&&0===f.indexOf("open_feedback")?[...e,t]:e:[...e,t]),[]);let E=i.createElement(i.Fragment,null,i.createElement(xt,null,t(m.satisfactionLabel)),i.createElement(Ue,{conversationId:s?void 0:o,onScoreChange:r,useAgentCsat:Boolean(n)}));return l&&"satisfaction"!==h.at(0)&&u&&d&&g&&(E=i.createElement(i.Fragment,null,i.createElement(xt,null),i.createElement(B,{clean:Boolean(s),conversation:l,surveyType:n?oe.C.POST_AGENT:oe.C.ANSWER_FLOW,onAdditionalFeedbackTextChange:u,onIsResolvedChange:d,questionsOrder:h,selectedFeedbackOptions:p,setSelectedFeedbackOptions:g,useAgentCsat:Boolean(n)}))),c?i.createElement(wt,null,i.createElement(It,null,E)):E}}(0,bt.A)(Rt,"defaultProps",{clean:!0,withContainer:!0});var kt,Ot,Nt,Lt,Mt,Dt,Ft,Ut=(0,g.Ng)((e=>({csatSettingsState:(0,a.getResource)(e,a.ResourceType.CSAT_SETTINGS),withChatterLanguage:(0,Tt.YC)(e)})),(e=>({fetchCsatSettingsIfNeeded:()=>e((0,a.fetchOneIfNeeded)(a.ResourceType.CSAT_SETTINGS))})))(Rt);const zt=b.Ay.div(kt||(kt=(0,S.A)(["\n  background: ",";\n  min-height: 100vh;\n  box-sizing: border-box;\n  padding: 48px 8px;\n  min-width: ",";\n"])),T.c.colorGrey0,T.v.minScreenSize),Pt=b.Ay.div(Ot||(Ot=(0,S.A)(["\n  background: ",";\n  width: 100%;\n  box-sizing: border-box;\n  max-width: 390px;\n  min-height: 168px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  border-radius: 12px;\n  box-shadow: 0 4px 24px rgba(0, 0, 0, 0.04);\n  margin: 0 auto;\n  padding: 30px 16px 26px;\n  transition: transform 400ms cubic-bezier(0.34, 1.56, 0.64, 1);\n  transform: ",";\n"])),T.c.colorWhite,(e=>{let{state:t}=e;return"entered"===t?"scale(1)":"scale(0.94)"})),Gt=b.Ay.section(Nt||(Nt=(0,S.A)(["\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]))),Ht=b.Ay.div(Lt||(Lt=(0,S.A)(["\n  margin-bottom: ",";\n\n  > svg {\n    width: 42px;\n    height: 42px;\n    fill: ",";\n  }\n"])),T.v.gUnitDouble,(e=>{let{color:t}=e;return t})),Bt=b.Ay.h1(Mt||(Mt=(0,S.A)(["\n  font-size: ",";\n  font-weight: ",";\n  margin: 0 0 10px 0;\n"])),T.v.xLargeFontSize,T.v.mediumFontWeight),Zt=b.Ay.p(Dt||(Dt=(0,S.A)(["\n  padding: 0;\n  margin: 0;\n  font-size: ",";\n  color: ",";\n"])),T.v.smallFontSize,T.c.colorGrey4),Wt=b.Ay.div(Ft||(Ft=(0,S.A)(["\n  margin-top: 24px;\n  padding-top: 24px;\n  border-top: 1px solid ",";\n\n  opacity: ",";\n  transition: all 400ms cubic-bezier(0.34, 1.56, 0.64, 1);\n  transform: ",";\n"])),T.c.colorGrey0,(e=>{let{state:t}=e;return"entered"===t?1:0}),(e=>{let{state:t}=e;return"entered"===t?"scale(1)":"scale(0.94)"}));function Vt(e){const{conversation:t}=e,{client:n,fetchClient:r}=(0,St.useClient)(),s=(0,ut.zy)(),c=lt().parse(s.search,{ignoreQueryPrefix:!0}),l=(u=c.s,Object.values(oe.C).includes(u)?c.s:oe.C.ANSWER_FLOW);var u;const p="email"===c.o,m=(0,g.wA)(),[f,h]=(0,i.useState)(!1),[E,y]=(0,i.useState)(!1),[A,S]=(0,i.useState)(!1),[b,C]=(0,i.useState)(null),[w,I]=(0,i.useState)(null),[x,R]=(0,i.useState)(!1),[k,O]=(0,i.useState)([]),N=(0,g.d4)((e=>(0,a.getResource)(e,a.ResourceType.CSAT_SETTINGS))),L=(0,g.d4)((e=>(0,_.Nj)(e.chatter.language)));(0,i.useEffect)((()=>{(async()=>{n.hasLoaded||await r(),await m((0,a.fetchOneIfNeeded)(a.ResourceType.CSAT_SETTINGS)),S(!0)})()}),[]);const M=async()=>{S(!1),h(!0),await(0,d.u)(100),S(!0)},D=async e=>{const{hasSurveyQuestionOnly:n}=N;R(!t.csat||t.csat.score>3&&e<=3||t.csat.score<=3&&e>3),n||y(!0),await m(o(t,{surveyType:l,score:e,submit:n})),n&&await M()},F=async()=>{await M(),await m(o(t,{resolved:b,comment:w,feedback:k,submit:!0}))};let U;return U=A?t.active||p?f?i.createElement(dt.Ay,{in:!0,appear:!0,timeout:0},(e=>i.createElement(Pt,{state:e},i.createElement(Gt,null,i.createElement(Ht,{color:T.c.colorUIGood},i.createElement(mt,null)),i.createElement(Bt,null,L("FEEDBACK_SUBMITTED")),i.createElement(Zt,null,L("THANKS_FOR_FEEDBACK.")))))):i.createElement(dt.Ay,{in:!0,appear:!0,timeout:0},(e=>i.createElement(Pt,{state:e},i.createElement(Ut,{clean:!0,withContainer:!1,conversationId:t.id,onScoreChange:D}),E&&i.createElement(dt.Ay,{in:!0,appear:!0,timeout:0},(e=>i.createElement(Wt,{state:e},i.createElement(B,{clean:x,conversation:t,onAdditionalFeedbackTextChange:I,onIsResolvedChange:C,surveyType:l,selectedFeedbackOptions:k,setSelectedFeedbackOptions:O}),i.createElement(v.$n,{block:!0,size:"large",onClick:F,text:L("SUBMIT"),disabled:(null==w?void 0:w.length)>320}))))))):i.createElement(Pt,{state:"entered"},i.createElement(Gt,null,i.createElement(Ht,{color:T.c.colorWarn},i.createElement(_t,null)),i.createElement(Bt,null,L("SURVEY_EXPIRED")),i.createElement(Zt,null,L("PAGE_DOESNT_EXIST.")))):"",i.createElement(zt,null,U)}var Kt=n(97132),jt=n(58541);const qt=(0,Kt.Mz)(jt.getConversationMessages,(e=>e.filter((e=>e instanceof jt.CsatMessage)).sort(((e,t)=>e.created-t.created)))),Xt=(0,Kt.Mz)(qt,(e=>e.filter((e=>e.surveyType===oe.C.POST_AGENT)).last())),Qt=(0,Kt.Mz)(qt,(e=>e.filter((e=>e.surveyType===oe.C.ANSWER_FLOW)).last())),Yt=(0,Kt.Mz)(jt.getConversationMessages,(e=>e.filter(((t,n)=>{const a=e.get(n+1);return t instanceof jt.CsatMessage&&!(a instanceof jt.CsatMessage)})).filter(((e,t,n)=>{const a=n.get(t+1);return!a||a.score!==e.score}))))},54673:function(){},58743:function(e,t,n){"use strict";let a;n.d(t,{B1:function(){return o},VR:function(){return r},al:function(){return i},hZ:function(){return s},og:function(){return a}}),function(e){e.CONVERSATION_NOT_FOUND_ERROR="CONVERSATION_NOT_FOUND_ERROR",e.CHATTER_NOT_FOUND_ERROR="CHATTER_NOT_FOUND_ERROR",e.FOCUS_MESSAGE_INPUT="FOCUS_MESSAGE_INPUT",e.FOCUS_NEW_CONVERSATION_BUTTON="FOCUS_NEW_CONVERSATION_BUTTON",e.SCROLL_MESSAGE_LIST_TO_BOTTOM="SCROLL_MESSAGE_LIST_TO_BOTTOM",e.SESSION_UNAUTHORIZED="SESSION_UNAUTHORIZED"}(a||(a={}));const r={CONVERSATION_NOT_FOUND_ERROR:new CustomEvent("CONVERSATION_NOT_FOUND_ERROR"),CHATTER_NOT_FOUND_ERROR:new CustomEvent("CHATTER_NOT_FOUND_ERROR"),FOCUS_MESSAGE_INPUT:new CustomEvent("FOCUS_MESSAGE_INPUT"),FOCUS_NEW_CONVERSATION_BUTTON:new CustomEvent("FOCUS_NEW_CONVERSATION_BUTTON"),SCROLL_MESSAGE_LIST_TO_BOTTOM:new CustomEvent("SCROLL_MESSAGE_LIST_TO_BOTTOM"),SESSION_UNAUTHORIZED:new CustomEvent("SESSION_UNAUTHORIZED")},o=(e,t)=>{window.addEventListener(e,t)},i=(e,t)=>{window.removeEventListener(e,t)},s=e=>{window.dispatchEvent(new CustomEvent(e))}},25054:function(e,t,n){"use strict";n.d(t,{$H:function(){return g},AA:function(){return d},TH:function(){return h},bj:function(){return u},xr:function(){return l}});var a=n(64467),r=n(93086),o=n(26326),i=n(22854),s=n(48350);const c={"ada-dev.support":"dev","ada-dev2.support":"dev2","ada-stage.support":"stage","ada.support":"production","att.ada.support":"production_att","eu.ada.support":"production_eu","maple.ada.support":"production_maple","ficanex.ada.support":"production_ficanex"};function l(e){r.yf.setLoggerGlobalContext(e)}function u(){window.__env.DATADOG_RUM_TOKEN&&(o.L.init({applicationId:"f01d9831-0bfd-4812-942f-4fb337f6164b",clientToken:window.__env.DATADOG_RUM_TOKEN,site:"datadoghq.com",service:"chat",env:window.__env.SENTRY_ENVIRONMENT,version:"288e726f8129316b92a6d71dfccab98716d7b461",sampleRate:10,trackInteractions:!0,allowedTracingOrigins:[/https:\/\/(?!static).+\.ada.*\.support.*/]}),o.L.setRumGlobalContext({handle:window.location.hostname.split(".")[0],embed_version:(0,s.D)("embedVersion")||"unknown",no_iframe:!(0,i.a)()}))}function d(e){o.L.addAction(e)}function g(e,t){o.L.addAction(e,t)}function p(){return!!window.__env.DATADOG_TOKEN&&(r.yf.init({clientToken:window.__env.DATADOG_TOKEN,datacenter:"us",env:c[window.__env.SENTRY_ENVIRONMENT],sampleRate:100,service:"chat",beforeSend:e=>{const{http:t,view:n}=e;if(n.url){const e=["embed","embed2","introShown","language","skipGreeting","initialURL","followUpResponseId"],t=new URL(n.url).searchParams.toString();t&&t.split("&").forEach((t=>{const[a,r]=t.split("=");e.includes(a)||(n.url.match("".concat(a,"=").concat(decodeURIComponent(r)))?n.url=n.url.replace("".concat(a,"=").concat(decodeURIComponent(r)),"".concat(a,"=[REDACTED]")):n.url=n.url.replace("".concat(a,"=").concat(r),"".concat(a,"=[REDACTED]")))}))}if(t){const{status:e,status_code:n}=t;if(0===e||0===n)return!1}return!0}}),r.yf.logger.setHandler(r.Z1.http),!0)}let m=p();function f(){return!!m||(m=p(),m)}class h{constructor(){(0,a.A)(this,"logger",r.yf.logger)}setLevel(e){f();const t=r.XU[e];this.logger.setLevel(t)}setContext(e){f(),this.logger.setContext(e)}addContext(e,t){f(),this.logger.addContext(e,t)}log(e,t,n){f();const a=n?r.XU[n]:void 0;this.logger.log(e,t,a)}}},24938:function(e,t,n){"use strict";n.d(t,{Cj:function(){return i},Yq:function(){return r}});var a=n(73346);function r(e){return(0,a.A)(e).calendar(null)}function o(e){return(Math.abs(e)<10?"0":"")+Math.abs(e)}function i(){const e=(new Date).getTimezoneOffset(),t=e>0?"-":"+",n=Math.floor(e/60),a=e%60;return"".concat(t).concat(o(n),":").concat(o(a))}},12917:function(e,t,n){"use strict";n.d(t,{M:function(){return r}});var a=void 0;const r=(e,t)=>{const n=new Set;return function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];const s=JSON.stringify(o);n.has(s)||(setTimeout((()=>{n.delete(s)}),t),n.add(s),e.apply(a,o))}}},17936:function(e,t,n){"use strict";n.d(t,{E:function(){return i},P:function(){return s}});var a=n(3278),r=n(22854),o=n(64955);function i(){const{query:{embed:e,embed2:t}}=new o.k;return(0,r.a)()?Number(e)?a.y.Embed1:Number(t)?a.y.Embed2:a.y.Chaperone:null}function s(){try{return"/mobile-sdk-webview/"===window.parent.location.pathname}catch(e){return!1}}},45290:function(e,t,n){"use strict";n.d(t,{initializeEmbedStateAction:function(){return u}});var a=n(3278),r=n(17936),o=n(69734),i=n(72552),s=n(2870),c=n(9903);function l(e){return{type:"SET_EMBED_STATE",payload:e}}function u(){return async(e,t)=>{if((0,r.E)()===a.y.Embed2){const n=await s.t.getState();e(l(n));const{preload:a,parentElement:r}=t().embedState;await new Promise((n=>{const o=()=>{const{isDrawerOpen:e}=t().embedState;(e||r||!a)&&n()};o(),s.t.subscribe((async n=>{e(l(n)),o(),t().embedState.testMode&&t().pageState.socketConnected&&i.fc.postMessage("PUBLISH_EVENT",{eventKey:"ada:test_bot:ready"})}))})),e((0,o.to)(!r))}}}n.o(c,"embedStateReducer")&&n.d(t,{embedStateReducer:function(){return c.embedStateReducer}}),n.o(c,"embedStore")&&n.d(t,{embedStore:function(){return c.embedStore}}),n.o(c,"fc")&&n.d(t,{fc:function(){return c.fc}}),n.o(c,"useEmbedState")&&n.d(t,{useEmbedState:function(){return c.useEmbedState}})},9903:function(){},72552:function(e,t,n){"use strict";n.d(t,{fc:function(){return m}});var a=n(26183),r=n(64251),o=n(68414),i=n.n(o),s=n(24744),c=n(3278),l=n(17936),u=n(90438),d=n(22854);const g=(0,n(4276).tZ)();let p=!1;const m={name:"chat",targetWindow:window.parent,targetOrigin:"*",eventListeners:[],embedVersion:(0,l.E)(),getParentOrigin(e){const t=[s.Zj,s.XI],n=(0,a.oJ)()?a.ad.getItem("parentOrigin"):window.PARENT_ORIGIN;return n||t.includes(e)||p||(g.info("Target origin missing for postMessage - requests defaulting to *"),p=!0),n||this.targetOrigin},embed1PostMessage(e,t,n){this.embedVersion===c.y.Embed1&&window.parent.postMessage(JSON.parse(this.constructObjectToSend(e,t,n)),this.getParentOrigin(e))},postMessage(e,t,n){(0,l.E)()===c.y.Embed2&&this.targetWindow.postMessage(this.constructObjectToSend(e,t,n),this.getParentOrigin(e))},constructObjectToSend(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return JSON.stringify({name:this.name,type:e,payload:t,id:n})},isMessageEvent(e){return void 0!==e.data},addSingleEventListener(e,t){window.addEventListener("message",(n=>{let a;if(this.targetOrigin.includes(n.origin)||"*"===this.targetOrigin){try{this.isMessageEvent(n)&&(a=JSON.parse(n.data))}catch{return}a.type===e&&"chat"===a.name&&t(a.payload)}}))},addEventListener(e){const t=t=>{let n;if(!this.targetOrigin.includes(t.origin)&&"*"!==this.targetOrigin)return;try{this.isMessageEvent(t)&&(n=JSON.parse(t.data))}catch{return}const{name:a,type:r,payload:o,id:i}=n;a===this.name&&e(r,o,i)};return window.addEventListener("message",t),this.registerEventListener(t),t},embedFetch(e,t,n,a){var o=this;const s=i().v4(),l=a||3e4;return new Promise(((a,i)=>{let g,p;(0,d.a)()||i(new Error("Embed missing - skipping embedFetch")),g=window.setTimeout((()=>{this.removeEventListener(p),r.NA("postMessage Requested Event",e),r.NA("postMessage Response Event",t),i(new Error("Could not connect to Embed."))}),l),p=this.addEventListener((function(e,n,r){let c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"SUCCESS";e===t&&s===r&&(o.removeEventListener(p),clearTimeout(g),"SUCCESS"===c?a(n):((0,u.to)(new Error("Status is ".concat(c," for response event ").concat(t))),i(n)))})),this.embedVersion===c.y.Embed1?this.embed1PostMessage(e,n,s):this.postMessage(e,n,s)}))},removeEventListener(e){window.removeEventListener("message",e)},registerEventListener(e){this.eventListeners.push(e)}}},10055:function(e,t,n){"use strict";n.d(t,{Q:function(){return o}});var a=n(53058);function r(e){return e.embedState}function o(){return{embedState:(0,a.d4)(r)}}},21962:function(e,t,n){"use strict";n.d(t,{embedStateReducer:function(){return i.X},embedStore:function(){return s.t},fc:function(){return r.fc},initializeEmbedStateAction:function(){return a.initializeEmbedStateAction},useEmbedState:function(){return c.Q}});var a=n(45290);n.o(a,"embedStateReducer")&&n.d(t,{embedStateReducer:function(){return a.embedStateReducer}}),n.o(a,"embedStore")&&n.d(t,{embedStore:function(){return a.embedStore}}),n.o(a,"fc")&&n.d(t,{fc:function(){return a.fc}}),n.o(a,"useEmbedState")&&n.d(t,{useEmbedState:function(){return a.useEmbedState}});var r=n(72552),o=n(80923);n.o(o,"embedStateReducer")&&n.d(t,{embedStateReducer:function(){return o.embedStateReducer}}),n.o(o,"embedStore")&&n.d(t,{embedStore:function(){return o.embedStore}}),n.o(o,"useEmbedState")&&n.d(t,{useEmbedState:function(){return o.useEmbedState}});var i=n(36078),s=n(2870),c=n(10055)},2870:function(e,t,n){"use strict";n.d(t,{t:function(){return r}});var a=n(72552);const r={get(e){return a.fc.embedFetch("GET","GET_RESPONSE",{key:e})},getState(){return a.fc.embedFetch("GET_STATE","GET_STATE_RESPONSE")},dispatch(e,t){return a.fc.embedFetch("DISPATCH","DISPATCH_RESPONSE",{actionKey:e,payload:t})},subscribe(e){a.fc.addEventListener(((t,n)=>{"STATE_CHANGE"===t&&e(n)}))}}},36078:function(e,t,n){"use strict";n.d(t,{X:function(){return o}});var a=n(3278);const r={chatterCreated:null,chatterToken:null,sessionToken:null,adaSettings:{handle:""},metaFields:{},sensitiveMetaFields:{},notificationsPermission:"default",browserHasNotificationSupport:!1,embed2Enabled:(0,n(17936).E)()===a.y.Embed2,isDrawerOpen:!1,preload:!1,parentElement:null,styles:null,language:null,enabledLanguages:null,client:null,wasIntroShown:!1,initialURL:null,testMode:!1,drawerHasBeenOpened:!1,wasCampaignShownButNowClosed:!1,isChatEmpty:!1,proactiveCampaignHadMessages:!1,deviceToken:null},o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,t=arguments.length>1?arguments[1]:void 0;return"SET_EMBED_STATE"===t.type?{...e,...t.payload}:e}},80923:function(){},90438:function(e,t,n){"use strict";n.d(t,{WF:function(){return s},eZ:function(){return c},fV:function(){return d},JE:function(){return g},to:function(){return l},Up:function(){return u}});var a=n(64251),r=n(41186),o=n(6810),i=n(74262);class s extends Error{constructor(e,t){super(t),this.name=e}}class c extends Error{constructor(e){super(e),this.name="AdaRequestError"}}function l(e){console.warn("An error occurred",e),a.Cp(e)}function u(e,t){r.v4((n=>{Object.entries(t).forEach((e=>{let[t,a]=e;n.setExtra(t,a)})),l(e)}))}function d(e,t,n){o.Z({category:e,message:t,data:n})}function g(e){return e instanceof Error&&Boolean(e.isAxiosError)&&e.message===i.b$}},2622:function(e,t,n){"use strict";n.d(t,{S:function(){return s}});var a=n(3278),r=n(21962),o=n(17936),i=n(11021);async function s(){if(i.I.destroy("history2"),i.I.destroy("history"),i.I.destroy("chatter"),i.I.destroy("created"),i.I.destroy("agentsHistory"),i.I.destroy("liveChatPending"),i.I.destroy("inLiveChat"),i.I.destroy("zd_isChatterAuthenticated"),i.I.destroy("zdAuthChatPending"),i.I.destroy("chatterTranscript"),i.I.destroy("zendeskLastMessageHash"),(0,o.E)()===a.y.Embed2)try{await r.embedStore.dispatch("setState",{chatterToken:null,chatterCreated:null})}catch(e){console.warn("".concat(e))}}},52236:function(e,t,n){"use strict";n.d(t,{JR:function(){return o},FH:function(){return s},aT:function(){return c},TL:function(){return l}});var a=n(71083),r=n(24938);const o=function(){const e=window.location.host;return"production"!==window.__env.NODE_ENV||window.__env.API_ROOT?window.__env.API_ROOT?window.__env.API_ROOT:"//".concat(e,"/api"):"https://".concat(e,"/api")}(),i={baseURL:o,headers:{"Content-Type":"application/json",Pragma:"no-cache","X-Ada-Request-Origin":"chat","X-Client-GMT-Offset":(0,r.Cj)()}},s=a.A.create(i),c=e=>{const t=e&&"att"!==e?".".concat(e):"";return a.A.create({baseURL:"https://previews".concat(t,".ada.support/"),headers:{"Content-Type":"application/json",Pragma:"no-cache"}})},l=a.A.create({baseURL:"https://vimeo.com/api/oembed.json",headers:{"Content-Type":"application/json"}})},22854:function(e,t,n){"use strict";function a(){try{return window.self!==window.top}catch(e){return!0}}n.d(t,{a:function(){return a}})},66507:function(e,t){"use strict";let n=!1;try{n=void 0!==process.env.JEST_WORKER_ID}catch(e){}const a=n;t.A=a},12178:function(e,t,n){"use strict";function a(e,t,n){const r={...e};return Object.keys(r).forEach((o=>{!function(e,t,n,a){let r;"underscore"===n?(r=t.replace(/([A-Z])/g,(e=>"_".concat(e.toLowerCase()))),"_"===r[0]&&(r=r.substring(1)),["type","id","with"].includes(t.toLowerCase())&&(r="_".concat(r))):r=t.replace(/_([a-z])/g,(e=>"camel"===n?e[1].toUpperCase():" ".concat(e[1].toUpperCase()))),r=a?r.substring(0,1).toUpperCase()+r.substring(1):r.substring(0,1).toLowerCase()+r.substring(1),Object.prototype.hasOwnProperty.call(e,r)||(e[r]=e[t],delete e[t])}(e,o,t,n),"object"==typeof r[o]&&a(r[o],t,n)})),e}function r(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"camel",r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t=Array.isArray(e)?e.slice(0):JSON.parse(JSON.stringify(e)),a(t,n,r),t}function o(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object.assign({},...t)}n.d(t,{o:function(){return r},y:function(){return o}})},90880:function(e,t,n){"use strict";n.d(t,{Jt:function(){return l},Wz:function(){return u},xe:function(){return d}});var a=n(55373),r=n.n(a),o=n(53058),i=n(87904),s=n(1217);function c(e){return e.languages}function l(){return(0,o.d4)(c)}function u(){const{client:e}=(0,s.useClient)(),{chatter:t}=(0,i.NC)();return{isRTL:(n=t.language,["ar","he"].includes(n))};var n}function d(e){return"left"===r().parse(e,{ignoreQueryPrefix:!0}).align}},4276:function(e,t,n){"use strict";n.d(t,{tZ:function(){return p},zm:function(){return u}});var a=n(64467),r=n(25054),o=n(66507);let i,s={env:window.__env.SENTRY_ENVIRONMENT,version:"288e726f8129316b92a6d71dfccab98716d7b461"};!function(e){e.debug="debug",e.info="info",e.warn="warn",e.error="error"}(i||(i={}));class c{constructor(e){(0,a.A)(this,"context",{}),(0,a.A)(this,"backend",null),(0,a.A)(this,"level",i.info),(0,a.A)(this,"isReady",!1),(0,a.A)(this,"queuedLogs",[]),this.backend=e}setLoggerReady(){if(!this.isReady)for(this.isReady=!0;this.queuedLogs.length>0;){const e=this.queuedLogs.shift();e&&this.log(e.message,e.extra,e.level)}}setContext(e){var t;this.context=e,null===(t=this.backend)||void 0===t||t.setContext(e)}addContext(e,t){var n;this.context[e]=t,null===(n=this.backend)||void 0===n||n.addContext(e,t)}mergeContext(e){var t;this.context={...this.context,...e},null===(t=this.backend)||void 0===t||t.setContext(this.context)}setLogLevel(e){var t;this.level=e,null===(t=this.backend)||void 0===t||t.setLevel(e)}log(e,t,n){const a=n||this.level;var r;if("development"===window.__env.NODE_ENV&&console.info(' DD "'.concat(n,'" log, message: "').concat(e,'"'),t),this.isReady)return void(null===(r=this.backend)||void 0===r||r.log(e,t,a));const o=(new Date).getTime(),i={message:e,extra:{...t,timestamp:o},level:a};this.queuedLogs.push(i)}debug(e,t){this.log(e,t,i.debug)}info(e,t){this.log(e,t,i.info)}warn(e,t){this.log(e,t,i.warn)}error(e,t){this.log(e,t,i.error)}getBackend(){return this.backend}}const l={datadog:r.TH,local:class{constructor(){(0,a.A)(this,"logs",[]),(0,a.A)(this,"context",{}),(0,a.A)(this,"level",i.info)}setContext(e){this.context=e}addContext(e,t){this.context[e]=t}getContext(){return this.context}setLevel(e){this.level=e}getLogLevel(){return this.level}log(e,t,n){this.logs.push({message:e,extra:t,level:n})}getLogs(){return this.logs}clearLogs(){this.logs=[]}resetContext(){this.context=s}}};function u(e){return s={...s,...e},o.A||(0,r.xr)(s),s}function d(e,t){const n=new(0,l[t]),a=new c(n);return a.setContext({...s,loggerName:e}),a}const g={};function p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";if(o.A||!window.__env.DATADOG_TOKEN){const t=g[e];if(t)return t.setLoggerReady(),t;const n=d(e,"local");return n.setLoggerReady(),g[e]=n,n}const t=d(e,"datadog");return t.setLoggerReady(),t}},80959:function(e,t,n){"use strict";n.d(t,{jT:function(){return S},vX:function(){return _}});var a=n(66067),r=n.n(a),o=n(49568),i=n(78953),s=n.n(i),c=n(9246),l=n(43219),u=n(1217),d=n(76736),g=n(22635);const p=/[^\d]*(\d[\d.\- ]{11,23}\d)(?!\d)/gm,m={VISA:/^4[0-9]{12}(?:[0-9]{3})?$/,Mastercard:/^5[1-5][0-9]{14}|^(222[1-9]|2[3-6]\d{2}|27[0-1]\d|2720)[0-9]{12}$/,VisaMasterCard:/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14})$/,AMEX:/^3[47][0-9]{13}$/,MAESTRO:/^(5018|5020|5038|6304|6759|6761|6763)[0-9]{8,15}$/,DISCOVER:/^(?:6011\d{12,13})|(?:65\d{14})$/,JCB:/^(?:2131|1800|35\d{3})\d{11}$/,DINERS2:/^3(0[0-5]|[68]\d)\d{11}$/,DINERS:/^3(?:0[0-5]|[68][0-9])[0-9]{11}$/,Aura:/^(5078\d{2})(\d{2})(\d{11})$/,AustralianBankCard:/^5610\d{12}$/,BCGlobal:/^(6541|6556)[0-9]{12}$/,CUP:/^(62|81)\d+$/,CarteBlancheCard:/^389[0-9]{11}$/,DANKORT:/^(5019|4571)\d+$/,ELECTRON:/^(4026|417500|4405|4508|4844|4913|4917)\d+$/,ELO:/^((((636368)|(438935)|(504175)|(451416)|(636297))\d{0,10})|((5067)|(4576)|(4011))\d{0,12})$/,Hipercard:/^(606282\d{10}(\d{3})?)|(3841\d{15})$/,INTERPAY:/^(636)\d+$/,InstaPaymentCard:/^63[7-9][0-9]{13}$/,KOREAN:/^9[0-9]{15}$/,MIR:/^(?:220[0-4])\d+$/,RupayDebitCard:/^6[0-9]{15}$/,SoloCard:/^(6334|6767)[0-9]{12}|(6334|6767)[0-9]{14}|(6334|6767)[0-9]{15}$/,SwitchCard:/^(4903|4905|4911|4936|6333|6759)[0-9]{12}|(4903|4905|4911|4936|6333|6759)[0-9]{14}|(4903|4905|4911|4936|6333|6759)[0-9]{15}|564182[0-9]{10}|564182[0-9]{12}|564182[0-9]{13}|633110[0-9]{10}|633110[0-9]{12}|633110[0-9]{13}$/,UNION_PAY:/^(62[0-9]{14,17})$/};function f(e){const t=e.slice(-1),n=[...e.slice(0,-1)].reverse();let a=0;return n.forEach(((e,t)=>{if(t%2==0){const t=2*parseInt(e,10);a+=t<10?t:t-9}else a+=parseInt(e,10)})),(a+parseInt(t,10))%10==0}function h(e){const t=function(e){const t=[];let n;for(;n=p.exec(e);){const e=n[1],a=e.replace(/[.\- ]/g,"");a.length>=13&&a.length<=19&&f(a)&&Object.values(m).some((n=>{if(n.test(a))return t.push(e),!0}))}return t}(e);let n=e;return t.forEach((e=>{n=n.replace(e,"".repeat(8))})),n}function E(e,t){let n=t;return e.forEach((e=>{if(e.get("active"))if("credit_card_number"===e.get("key"))n=h(n);else{const t=new RegExp(e.get("regex"),"gim");n=n.replace(t,(e=>"".repeat(e.length)))}})),n}const v='<span class="g-redacted">',y="</span>";function A(e,t,n,a){const r=function(e,t,n,a){let r=t.productType===g.Kj?o.Ay.List([]):t.get("redactions");t.get("customRedactions").count()>0&&(r=r.concat(t.get("customRedactions")));let i=e;return r.size&&!a&&(n.get("inState")?"pin_capture"===n.get("stateType")?i=i.replace(i,"".repeat(8)):l.W.includes(n.get("stateType"))?i=E(r,i):"capture"!==n.get("stateType")&&(i=h(i)):i=E(r,i)),i}(e,t,n,a),i=/{3,}/g,p=i.test(r),m=t.hasFeature(u.Features.WS_CHAT_UI_IMPROVEMENTS_ROLLOUT_1);if(p)return r.replace(i,(e=>s()("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e.length).map((e=>"".concat(v).concat(e).concat(y))).join("")));let f=e.replace(/</g,"&lt;").replace(/>/g,"&gt;");f=f.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>");const A=f.match(/&lt;a .+&gt;.+&lt;\/a&gt;/g)||[];for(let e=0;e<A.length;e+=1){const t=A[e]||"",n=t.replace(/&lt;/g,"<").replace(/&gt;/g,">")||"";f=f.replace(t,n)}return f=m?f:function(e){return(0,d.A)(e,{className:"",defaultProtocol:"https",attributes:{style:"color: inherit;"},target:"_blank"})}(f),m&&(f=(0,c.n2)(f).updatedString),f}function _(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("string"!=typeof e)return e;let r=e;return r=A(r,t,n,a),r=r.replace(/\s+$/g,""),r}function S(e){return t=r().decode(function(e){return e.replace(new RegExp("".concat(v,"(.)").concat(y),"g"),"").replace(/+/g,"")}(e)),t.replace(/<\/?[^>]+(>|$)/g,"");var t}},23930:function(e,t,n){"use strict";function a(e,t){return{type:"UPDATE_RESPONSE",message:e,client:t}}n.d(t,{r:function(){return a}})},98437:function(){},73111:function(e,t,n){"use strict";var a,r,o,i=n(64467),s=n(96540),c=n(96162),l=n(53058),u=n(16711),d=n(57528),g=n(67207),p=n(64612),m=n(92430);const f=p.Ay.div(a||(a=(0,d.A)(["\n  margin-right: -6px;\n  margin-bottom: -8px;\n  outline: none;\n"]))),h=p.Ay.div(r||(r=(0,d.A)(["\n  display: flex;\n  flex-wrap: wrap;\n\n  ","\n"])),(e=>{let{isCarousel:t}=e;return t&&'\n    -webkit-overflow-scrolling: touch;\n    overflow-x: scroll;\n    flex-wrap: nowrap;\n    margin: 0 0 0 -8px;\n    width: 100vw;\n    padding: 0 10px;\n    box-sizing: border-box;\n    \n    &::-webkit-scrollbar {\n      display: none\n    }\n    \n    &::before {\n      content: "";\n      position: absolute;\n      top: 0;\n      right: -8px;\n      bottom: 0;\n      width: 16px;\n      background: linear-gradient(to right, '.concat(m.c.colorWhiteTransparent,", ").concat(m.c.colorWhite," 80%, ").concat(m.c.colorWhite,' 100%);\n    }\n    \n    &::after {\n      content: "";\n      width: 4px;\n      flex-shrink: 0;\n    }\n  ')})),E=.7,v=p.Ay.button(o||(o=(0,d.A)(["\n  display: block;\n  padding: 7px 12px;\n  margin-right: 6px;\n  border-radius: ",";\n  cursor: pointer;\n  border-width: 1px;\n  border-style: solid;\n  margin-bottom: 6px;\n  text-align: left;\n  user-select: none;\n  font-size: ",";\n\n  color: ",";\n  border-color: ",";\n  background-color: ",";\n\n  ","\n\n  "," {\n    color: ",";\n    background-color: ",";\n    border-color: ",";\n\n    svg {\n      fill: ",";\n    }\n  }\n\n  &:active {\n    background-color: ",";\n    outline: none;\n  }\n"])),m.v.messageBorderRadius,(e=>{let{theme:t}=e;return t.mainFontSize}),(e=>{let{color:t}=e;return(0,g.J1)(t)>E?m.c.colorBlack:t}),(e=>{let{color:t}=e;return t}),(e=>(0,g.J1)(e.color)>E?e.color:m.c.colorWhite),(e=>{let{isCarousel:t}=e;return t&&"\n    white-space: nowrap;\n  "}),(e=>{let{isCarousel:t}=e;return t?"&:active":"&:hover, &:active"}),(e=>(0,g.J1)(e.color)>E?m.c.colorBlack:m.c.colorWhite),(e=>(0,g.J1)(e.color)>E?(0,g.e$)(.05,e.color):(0,g.a)(.12,e.color)),(e=>{let{color:t}=e;return(0,g.a)(.12,t)}),m.c.colorWhite,(e=>{let{color:t}=e;return t}));class y extends s.PureComponent{constructor(){super(...arguments),(0,i.A)(this,"tabbableRef",s.createRef())}componentDidMount(){const{message:e}=this.props;var t;e.hasForcedQuickReplies&&(null===(t=this.tabbableRef.current)||void 0===t||t.focus())}render(){const{clientTint:e,isCarousel:t,message:n,onQuickReplySelect:a,t:r,disabled:o,setDisabled:i}=this.props;return s.createElement(f,{isCarousel:t,tabIndex:0,ref:this.tabbableRef},s.createElement(h,{isCarousel:t},s.createElement(c.Iu,{message:r("QUICK_REPLIES",{actions:n.quickReplies.map(((e,t)=>{const n=t<9?t+1:null;return"".concat(e.label," (").concat(r("ACCESS_KEY_HINTS",{key:n}),")")})).join(", ")}),"aria-live":"polite"}),n.quickReplies.map((n=>s.createElement(v,{key:n.target,type:"button",disabled:o,onClick:()=>{a(n),i(!0)},color:e,isCarousel:t},n.label)))))}}(0,l.Ng)((e=>({clientTint:e.client.tint,isCarousel:e.client.isCarouselQuickRepliesButtonLayout,t:(0,u.Nj)(e.chatter.language)})))(y)},10543:function(e,t,n){"use strict";n.d(t,{$Y:function(){return l},Bk:function(){return a},Q_:function(){return u},bz:function(){return i},gb:function(){return s},nv:function(){return c}});const a=7e4;let r=null,o=null;function i(e,t){const n=e[0],a=e.slice(-1)[0];return e.map((e=>({...e,conversation_id:t.conversation_id,is_first_in_response:e===n,is_last_in_response:e===a,source:t.source})))}function s(){"number"==typeof r&&(clearTimeout(r),r=null),"number"==typeof o&&(clearTimeout(o),o=null)}function c(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3e4;null===r&&(r=window.setTimeout((()=>{e&&e(),r=null}),n)),null===o&&(o=window.setTimeout((()=>{t&&t(),o=null}),i))}function l(e){return{type:e.message._type,id:e._id,isNew:!1,created:e.created,isOwnedByUser:"user"===e.source,source:e.source,conversationId:e.conversation_id,hasForcedQuickReplies:e.message.has_forced_quick_replies,reviewableMessage:e.message.reviewable_message,review:e.review||0,isLastInResponse:!0,responseId:e.response_id,isRenderable:!0,tempMessageUuid:null}}function u(e){return{type:e.type,id:e.id,isNew:!0,created:e.created,isOwnedByUser:"user"===e.source,source:e.source||"bot",conversationId:e.conversation_id,hasForcedQuickReplies:e.has_forced_quick_replies||!1,reviewableMessage:e.reviewable_message||!1,review:0,isLastInResponse:e.is_last_in_response||!1,isRenderable:!0,tempMessageUuid:null}}},92510:function(e,t,n){"use strict";n.d(t,{D_:function(){return s},JR:function(){return g},JX:function(){return l},Kp:function(){return c},Oe:function(){return o},PI:function(){return i},rM:function(){return d},y4:function(){return u}});var a=n(53058),r=n(86260);function o(){return(0,a.d4)((e=>e.messageLoader))}function i(){return(0,a.d4)(r.VL).map((e=>e.conversationId)).filter(((e,t,n)=>n.indexOf(e)===t))}function s(){return(0,a.d4)(r.ww)}function c(e){return(0,a.d4)(r.ww).filter((t=>t.conversationId===e))}function l(e){return(0,a.d4)(r.VL).find((t=>t.id===e))}function u(){return(0,a.d4)(r.LC)}function d(){return{allMessages:(0,a.d4)(r.VL)}}function g(e){const t=s().find((t=>t.get("ids").includes(e)));return!!t&&0===t.get("ids").indexOf(e)}},58541:function(e,t,n){"use strict";n.d(t,{CsatMessage:function(){return i.CsatMessage},DownloadableMessage:function(){return i.DownloadableMessage},IgnoredMessage:function(){return i.IgnoredMessage},LinkMessage:function(){return i.LinkMessage},ListSelectionMessage:function(){return i.ListSelectionMessage},MESSAGE_TIMEOUT_MS:function(){return r.Bk},NotificationsPermissionMessage:function(){return i.NotificationsPermissionMessage},OptionsMessageRecord:function(){return i.OptionsMessageRecord},PictureMessage:function(){return i.PictureMessage},PresenceMessage:function(){return i.PresenceMessage},SeamlessOAuthMessage:function(){return i.SeamlessOAuthMessage},SelectablesMessage:function(){return i.SelectablesMessage},SignInMessage:function(){return i.SignInMessage},SurveyMessage:function(){return i.SurveyMessage},TextMessage:function(){return i.TextMessage},UserMessage:function(){return i.UserMessage},VideoMessage:function(){return i.VideoMessage},WebWindowMessage:function(){return i.WebWindowMessage},WidgetMessage:function(){return i.WidgetMessage},clearMessageTimeout:function(){return r.gb},getConversationMessages:function(){return s.Ev},getMessages:function(){return s.VL},getRenderableMessages:function(){return s.LC},processResponseMessages:function(){return r.bz},startMessageTimeout:function(){return r.nv},updateResponse:function(){return a.r},useAllMessages:function(){return o.rM},useConversationIds:function(){return o.PI},useConversationMessageGroups:function(){return o.Kp},useIsMessageFirstInGroup:function(){return o.JR},useMessage:function(){return o.JX},useMessageGroups:function(){return o.D_},useMessageLoader:function(){return o.Oe},useRenderableMessages:function(){return o.y4}});var a=n(23930),r=(n(73111),n(10543)),o=n(92510),i=n(68716);n.o(i,"QuickRepliesMessage")&&n.d(t,{QuickRepliesMessage:function(){return i.QuickRepliesMessage}}),n.o(i,"getConversationMessages")&&n.d(t,{getConversationMessages:function(){return i.getConversationMessages}}),n.o(i,"getMessages")&&n.d(t,{getMessages:function(){return i.getMessages}}),n.o(i,"getRenderableMessages")&&n.d(t,{getRenderableMessages:function(){return i.getRenderableMessages}});var s=n(86260),c=n(17864);n.o(c,"QuickRepliesMessage")&&n.d(t,{QuickRepliesMessage:function(){return c.QuickRepliesMessage}})},21133:function(e,t,n){"use strict";n.d(t,{A:function(){return c}});var a=n(64467),r=n(49568),o=n(59649),i=n(86981),s=n(87803);class c extends(r.Ay.Record({...s.g,type:i.R7,score:null,feedback:[],resolved:null,comment:null,style:null,surveyType:o.C.PROACTIVE,isPositive:null})){constructor(){super(...arguments),(0,a.A)(this,"reviewableMessage",!1)}static fromLog(e){return new c({id:e._id,conversationId:e.conversation_id,created:e.created,score:e.message.score,feedback:e.message.feedback,resolved:e.message.resolved,comment:e.message.comment,isPositive:e.message.is_positive,style:e.message.style,surveyType:e.message.survey_type})}get isRenderable(){return this.surveyType!==o.C.END_CHAT}}},92552:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var a=n(49568),r=n(87803);class o extends(a.Ay.Record({...r.g,type:"downloadable",url:null,name:null,isTransferingFile:!1})){}},18268:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var a=n(49568),r=n(87803);class o extends(a.Ay.Record({...r.g,isRenderable:!1,type:"ignored"})){static fromSocket(e){return new o({id:e.id,conversationId:e.conversation_id,created:e.created})}static fromLog(e){return new o({id:e._id,conversationId:e.conversation_id,created:e.created})}}},8892:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var a=n(49568),r=n(87803);class o extends(a.Ay.Record({...r.g,type:"link",altText:null,url:null,isLinkLoading:!1,linkDescription:null,linkIcon:null,linkText:null,title:null,newWindow:!0,isHandoff:!1,articleId:null,generateLinkPreview:!1,successBusinessEvent:null})){}},82988:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var a=n(49568),r=n(87803);class o extends(a.Ay.Record({...r.g,type:"list_selection",body:"",scheduleStatus:"pending"})){}},95003:function(e,t,n){"use strict";n.d(t,{A:function(){return i}});var a=n(49568),r=n(86981),o=n(87803);class i extends(a.Ay.Record({...o.g,type:r.U7,body:null})){}},49349:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var a=n(49568),r=n(87803);class o extends(a.Ay.Record({...r.g,type:"options_message",dialogMessage:null,optionsList:[],optionsExpired:!1,optionsProcessor:null})){}},49384:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var a=n(49568),r=n(87803);class o extends(a.Ay.Record({...r.g,type:"picture",picUrl:"unknown",altText:""})){}},17651:function(e,t,n){"use strict";n.d(t,{B:function(){return c}});var a=n(49568),r=n(24744),o=n(95774),i=n(86981),s=n(87803);class c extends(a.Ay.Record({...s.g,type:i.p0,event:null,body:null})){get isRenderable(){return(e=>{const t=this.get("event");return!!t&&["signed_in","signed_out","agent_arrival","agent_snoozed","agent_depart","live_chat_end","generic",o.SU,o.fG,o.dP,o.by,o.n$,o.gA,o.p$,o.qG,o.YM,o.mF,o.TE,r.Yt,o.jx,o.b].includes(t)})()}}},54747:function(e,t,n){"use strict";n.d(t,{QuickRepliesMessage:function(){return i}});var a=n(49568),r=n(87803),o=n(3294);n.o(o,"UserMessage")&&n.d(t,{UserMessage:function(){return o.UserMessage}}),n.o(o,"VideoMessage")&&n.d(t,{VideoMessage:function(){return o.VideoMessage}}),n.o(o,"WebWindowMessage")&&n.d(t,{WebWindowMessage:function(){return o.WebWindowMessage}}),n.o(o,"getConversationMessages")&&n.d(t,{getConversationMessages:function(){return o.getConversationMessages}}),n.o(o,"getMessages")&&n.d(t,{getMessages:function(){return o.getMessages}}),n.o(o,"getRenderableMessages")&&n.d(t,{getRenderableMessages:function(){return o.getRenderableMessages}});class i extends(a.Ay.Record({...r.g,type:"quick_replies",quickReplies:[],source:"bot",reviewableMessage:!1,shouldAnimate:!0})){static fromSocket(e){var t;return new i({id:e.id,conversationId:e.conversation_id,created:e.created,isNew:!0,hasForcedQuickReplies:e.has_forced_quick_replies,quickReplies:(null===(t=e.quick_replies)||void 0===t?void 0:t.map((e=>({buttonType:e.button_type,label:e.label,target:e.target}))))||[]})}static fromLog(e){var t;return new i({id:e._id,conversationId:e.conversation_id,created:e.created,hasForcedQuickReplies:e.message.has_forced_quick_replies,quickReplies:(null===(t=e.message.quick_replies)||void 0===t?void 0:t.map((e=>({buttonType:e.button_type,label:e.label,target:e.target}))))||[]})}}},3294:function(){},98740:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var a=n(49568),r=n(87803);class o extends(a.Ay.Record({...r.g,type:"seamless_oauth",authLink:null,authProvider:null,authLinkExpired:null})){}},8989:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var a=n(49568),r=n(87803);class o extends(a.Ay.Record({...r.g,type:"surfaceable_list_selection",errorResponseId:"",isExpired:!1,multiple:!1,prompt:"",selectables:[],variableId:""})){}},11246:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var a=n(49568),r=n(87803);class o extends(a.Ay.Record({...r.g,type:"sign_in",authButtonLabel:null,authLink:null,authProvider:null,authLinkExpired:null,messageLead:null})){}},87022:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var a=n(49568),r=n(87803);class o extends(a.Ay.Record({...r.g,type:"survey",scale:null,startScaleAtOne:null,likertScaleQuestionLabel:"",yesNoQuestionLabel:"",additionalCommentsLabel:"",likertScaleLabelLow:"",likertScaleLabelHigh:"",hasQuestionSection:null,hasCommentSection:null,likertScore:null,resolved:0,comment:"",isSubmitted:!1})){get scaleItems(){return this.startScaleAtOne?Array(+this.scale).fill(0).map(((e,t)=>t+1)):Array(+this.scale+1).fill(0).map(((e,t)=>t))}}},57453:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var a=n(49568),r=n(87803);class o extends(a.Ay.Record({...r.g,type:"text",body:null,shouldAnimate:!0})){}},29545:function(e,t,n){"use strict";n.d(t,{R:function(){return o}});var a=n(49568),r=n(87803);class o extends(a.Ay.Record({...r.g,body:void 0,data:void 0,scheduleStatus:"pending",type:"text",buttonType:void 0})){get isRenderable(){return"greeting"!==this.type&&"incoming_app_data"!==this.type}}},89935:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var a=n(10543);const r={fromLog:e=>({...(0,a.$Y)(e),type:"video",altText:e.message.alt_text,vidUrl:e.message.vid_url}),fromSocket:e=>({...(0,a.Q_)(e),type:"video",altText:e.alt_text,vidUrl:e.vid_url})}},95232:function(e,t,n){"use strict";n.d(t,{U:function(){return o}});var a=n(16750),r=n(10543);const o={fromLog:e=>({...(0,r.$Y)(e),type:"web_window",windowButtonLabel:e.message.window_button_label,windowHeight:e.message.window_height,windowWidth:e.message.window_width,windowUrl:(0,a.J)(e.message.window_url),windowTitle:e.message.window_title,isHandoff:e.message.is_handoff}),fromSocket:e=>({...(0,r.Q_)(e),type:"web_window",windowButtonLabel:e.window_button_label,windowHeight:e.window_height,windowWidth:e.window_width,windowUrl:(0,a.J)(e.window_url),windowTitle:e.window_title,isHandoff:e.is_handoff})}},22280:function(e,t,n){"use strict";n.d(t,{C:function(){return i}});var a=n(49568),r=n(86981),o=n(87803);class i extends(a.Ay.Record({...o.g,type:r.u1,widgetName:"",widgetUrl:"unknown",ariaLabel:"",linkText:"",linkSubtext:"",inlineInChat:!1})){}},87803:function(e,t,n){"use strict";n.d(t,{g:function(){return a}});const a={type:null,id:null,hasForcedQuickReplies:!1,isLastInResponse:!0,responseId:null,tempMessageUuid:null,body:null,created:null,data:null,isOwnedByUser:null,source:null,reviewableMessage:null,conversationId:null,review:null,isNew:null,agentInfo:null,isRenderable:!0,a11yMessage:null}},68716:function(e,t,n){"use strict";n.d(t,{CsatMessage:function(){return a.A},DownloadableMessage:function(){return r.A},IgnoredMessage:function(){return o.A},LinkMessage:function(){return i.A},ListSelectionMessage:function(){return s.A},NotificationsPermissionMessage:function(){return c.A},OptionsMessageRecord:function(){return l.A},PictureMessage:function(){return u.A},PresenceMessage:function(){return d.B},QuickRepliesMessage:function(){return v.QuickRepliesMessage},SeamlessOAuthMessage:function(){return g.A},SelectablesMessage:function(){return p.A},SignInMessage:function(){return m.A},SurveyMessage:function(){return f.A},TextMessage:function(){return h.A},UserMessage:function(){return y.R},VideoMessage:function(){return A.Z},WebWindowMessage:function(){return _.U},WidgetMessage:function(){return E.C}});var a=n(21133),r=n(92552),o=n(18268),i=n(8892),s=n(82988),c=n(95003),l=n(49349),u=n(49384),d=n(17651),g=n(98740),p=n(8989),m=n(11246),f=n(87022),h=n(57453),E=n(22280),v=(n(87803),n(54747));n.o(v,"UserMessage")&&n.d(t,{UserMessage:function(){return v.UserMessage}}),n.o(v,"VideoMessage")&&n.d(t,{VideoMessage:function(){return v.VideoMessage}}),n.o(v,"WebWindowMessage")&&n.d(t,{WebWindowMessage:function(){return v.WebWindowMessage}}),n.o(v,"getConversationMessages")&&n.d(t,{getConversationMessages:function(){return v.getConversationMessages}}),n.o(v,"getMessages")&&n.d(t,{getMessages:function(){return v.getMessages}}),n.o(v,"getRenderableMessages")&&n.d(t,{getRenderableMessages:function(){return v.getRenderableMessages}});var y=n(29545),A=n(89935),_=n(95232)},86260:function(e,t,n){"use strict";n.d(t,{Ev:function(){return d},LC:function(){return c},VL:function(){return s},ww:function(){return u}});var a=n(49568),r=n(97132),o=n(70215),i=n(68716);function s(e){return e.messages}const c=(0,r.Mz)(s,(function(e){const t=e.messages.filter((e=>!(!e.isRenderable&&"incoming_app_data"!==e.type||e instanceof i.CsatMessage))).last();return t instanceof i.QuickRepliesMessage?t:null}),((e,t)=>{const n=e.filter((e=>e.isRenderable));return n.filter(((e,a)=>{if(e instanceof i.QuickRepliesMessage)return e===t;const r=n.get(a+1);return!(e instanceof i.CsatMessage&&r instanceof i.CsatMessage)}))}));class l extends(a.Ay.Record({type:"unknown",messageTypes:[],isReviewable:!1,isOwnedByUser:!1,isPresenceGroup:!1,source:null,agentInfo:null,ids:a.Ay.List(),responseId:null,conversationId:null,created:0,isNew:!1,widgetInline:!1})){get key(){return this.ids.first()}}const u=(0,r.Mz)(c,(e=>{let t=a.Ay.List();return e.forEach(((n,r)=>{const s=e.getIn([r-1]),c=n instanceof i.WidgetMessage&&n.inlineInChat;let u;(function(e,t){if(e.source!==t.source)return!1;if(e.isOwnedByUser!==t.isOwnedByUser)return!1;if(e.conversationId!==t.conversationId)return!1;if(Boolean(e.isNew)!==Boolean(t.isNew))return!1;if(t.reviewableMessage)return!1;const n=["presence","status","survey","quick_replies"].includes(e.type),a=["presence","status","survey"].includes(t.type);if(n||a)return!1;const r=e instanceof i.WidgetMessage&&e.inlineInChat,o=t instanceof i.WidgetMessage&&t.inlineInChat;return!r&&!o})(n,s)&&t.size?(u=t.size-1,t=t.updateIn([u,"ids"],(e=>e.push(n.id))),t=t.updateIn([u,"messageTypes"],(e=>[...e,n.type])),n.reviewableMessage&&(t=t.setIn([u,"isReviewable"],!0)),n.type!==s.type&&(t=t.setIn([u,"type"],"mixed")),c&&(t=t.setIn([u,"widgetInline"],!0))):t=t.push(new l({type:n.type,messageTypes:[n.type],isReviewable:n.reviewableMessage||void 0,isOwnedByUser:n.isOwnedByUser||void 0,isPresenceGroup:"presence"===n.type,source:n.source,agentInfo:n.agentInfo?(0,o.SO)(n.agentInfo):null,ids:a.Ay.List([n.id]),responseId:n.responseId,conversationId:n.conversationId,created:n.created||void 0,isNew:Boolean(n.isNew),widgetInline:c}))})),t}));function d(e,t){return e.messages.filter((e=>e.conversationId===t.conversationId&&"ignored"!==e.type))}},17864:function(e,t,n){"use strict";var a=n(98437);n.o(a,"QuickRepliesMessage")&&n.d(t,{QuickRepliesMessage:function(){return a.QuickRepliesMessage}})},74187:function(e,t,n){"use strict";n.d(t,{S:function(){return d}});var a=n(53110),r=n(34851),o=n.n(r),i=n(70182),s=n.n(i),c=n(90438),l=n(52236);let u={};async function d(e,t){if(o()(u,t))return Promise.resolve();u=s()(u,t);const n={};if("metaFields"in t&&t.metaFields&&Object.keys(t.metaFields).length&&(n.meta_variables=t.metaFields),"sensitiveMetaFields"in t&&t.sensitiveMetaFields&&Object.keys(t.sensitiveMetaFields).length&&(n.sensitive_meta_variables=t.sensitiveMetaFields),!Object.keys(n).length)return Promise.resolve();try{return await l.FH.patch("/chatters/data_storage/",n,{headers:{"Chatter-Token":e}})}catch(e){if(!(e instanceof a.pe))throw new c.eZ('Failed to make PATCH request to "/chatters/data_storage/". Error: '.concat(e));if(!e.response||e.response.status>=500)throw new c.eZ('Failed to make PATCH request to "/chatters/data_storage/". Error: '.concat(e));return Promise.resolve()}}},40622:function(e,t,n){"use strict";n.d(t,{Ay:function(){return r},Is:function(){return o},wE:function(){return i}});var a=n(64955);function r(e){const t=(new a.k).query.private;return"true"===t||parseInt(t,10)||"private"===window.location.hash.replace(/#/,"")||"private"===e.persistence}function o(e){return"normal"===e.persistence}function i(){const e=(new a.k).query.reset,t="true"===e||parseInt(e,10);return Boolean(t)}},83822:function(e,t,n){"use strict";function a(){return((new Date).getTime()/1e3|0).toString(16)+"xxxxxxxxxxxxxxxx".replace(/[x]/g,(()=>(16*Math.random()|0).toString(16))).toLowerCase()}n.d(t,{X:function(){return a}})},78369:function(e,t,n){"use strict";function a(){return{type:"CLEAR_PROACTIVE_MESSAGES"}}function r(){return{type:"HIDE_PROACTIVE_MESSAGES"}}function o(){return{type:"SET_CAMPAIGN_ENGAGED"}}function i(){return{type:"SET_CAMPAIGN_QUICK_REPLY_CLICKED"}}n.d(t,{LM:function(){return a},gA:function(){return o},i3:function(){return r},v5:function(){return i}})},35968:function(e,t,n){"use strict";n.d(t,{En:function(){return s},U0:function(){return p},gA:function(){return a.gA},v5:function(){return a.v5},jN:function(){return c}});var a=n(78369),r=n(53058),o=n(97132),i=n(95774);const s=(0,o.Mz)((function(e){return e.proactiveMessages}),(e=>e.currentProactiveMessages.filter((e=>i.H4.includes(e.type)))));function c(){const{currentProactiveMessages:e,isHidden:t,currentCampaignMessageDuration:n}=(0,r.d4)((e=>e.proactiveMessages)),o=(0,r.wA)();return{outboundMessages:(0,r.d4)(s),outboundQuickRepliesMessage:e.filter((e=>"quick_replies"===e.type)).slice(-1)[0],isHidden:t,currentCampaignMessageDuration:n,hideAndClearProactiveMessages:()=>{o((0,a.i3)()),setTimeout((()=>{o((0,a.LM)())}),1e3)}}}var l=n(34282),u=n(58541);const d={currentCampaignMessageDuration:null,currentProactiveMessages:[],lastUnengagedCampaign:null,isHidden:!1,wasQuickReplyClicked:!1};function g(e){return{...e,currentProactiveMessages:[]}}const p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_RESPONSE_MESSAGE":{var n;const{message:a}=t,{currentProactiveMessages:r}=e;if(!a.campaign_key)return e;const o=null===(n=r[r.length-1])||void 0===n?void 0:n.isLastInResponse,i=(0,l.I4)(t);return o?{...e,currentCampaignMessageDuration:a.campaign_message_duration,currentProactiveMessages:[i],lastUnengagedCampaign:a.campaign_key,isHidden:!1,wasQuickReplyClicked:!1}:{...e,currentProactiveMessages:r.concat(i),currentCampaignMessageDuration:a.campaign_message_duration,isHidden:!1,wasQuickReplyClicked:!1}}case"SET_CAMPAIGN_ENGAGED":return{...e,lastUnengagedCampaign:null};case"CLEAR_PROACTIVE_MESSAGES":return g(e);case"HIDE_PROACTIVE_MESSAGES":return{...e,isHidden:!0};case"SET_EMBED_STATE":return t.payload.isDrawerOpen?g(e):e;case"UPDATE_RESPONSE":if(t.message.type===i.U0){const n=e.currentProactiveMessages.map((e=>e.id===t.message.id?new u.LinkMessage({...t,isLastInResponse:e.isLastInResponse,...t.message,isNew:!0,isOwnedByUser:!1}):e));return{...e,currentProactiveMessages:n}}return e;case"SET_CAMPAIGN_QUICK_REPLY_CLICKED":return{...e,wasQuickReplyClicked:!0};default:return e}}},69734:function(e,t,n){"use strict";n.d(t,{yp:function(){return w},dE:function(){return o},gN:function(){return r},SS:function(){return i},jK:function(){return N},mv:function(){return O},VB:function(){return k},d2:function(){return c},Ny:function(){return h},tk:function(){return E},Yz:function(){return m},Nj:function(){return p},eL:function(){return d},Cd:function(){return l},VV:function(){return g},to:function(){return v},Dq:function(){return y},ez:function(){return s},FX:function(){return f},Af:function(){return u},Wr:function(){return T},Sw:function(){return S},dj:function(){return b}});var a=n(71934);const r="INCREMENT_PAGE_NUMBER",o="INCREMENT_CURRENT_CONVERSATION_INDEX",i="PREVENT_LOADING_MORE_LOGS";function s(e){return{type:"SET_PAGE_ERROR",error:e}}function c(){return{type:"CLEAR_PAGE_ERROR"}}function l(){return{type:"INCREMENT_PAGE_NUMBER"}}function u(e){return{type:"SET_SECRET_MESSAGE",open:e}}function d(){return{type:"INCREMENT_CURRENT_CONVERSATION_INDEX"}}function g(){return{type:"PREVENT_LOADING_MORE_LOGS"}}function p(){return{type:"GET_LOGS_REQUEST"}}function m(){return{type:"GET_LOGS_ERROR"}}function f(e){return{type:"SET_PAGE_STATE",payload:e}}function h(){return e=>{e((0,a.enqueue)(f({toastMessage:"",isToastMessageVisible:!1,toastType:"SUCCESS"}),0,0,"toastNotifications"))}}function E(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SUCCESS",n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return r=>{r((0,a.enqueue)(f({toastMessage:e,isToastMessageVisible:!0,toastType:t}),0,0,"toastNotifications")),n&&r((0,a.enqueue)(f({toastMessage:e,isToastMessageVisible:!1,toastType:t}),4e3,1e3,"toastNotifications"))}}function v(e){return{type:"SET_CLOSE_BUTTON",showCloseButton:e}}function y(e){return{type:"SET_LIVE_CHAT_ENDED_BY_USER",conversationId:e}}var A=n(96540),_=n(53058);function S(){const e=(0,_.wA)();return{pageState:(0,_.d4)((e=>e.pageState)),setPageState:function(){return e(f(...arguments))}}}function b(){const e=(0,_.wA)(),{pageState:t}=S(),{toastMessage:n,isToastMessageVisible:a,toastType:r}=t;return{toast:{toastMessage:n,isToastMessageVisible:a,toastType:r},showToast:t=>{const{toastMessage:n,toastType:a,autoHide:r}=t;e(E(n,a,r))}}}function T(e,t){(0,A.useEffect)((()=>{const n=n=>{e.current&&!e.current.contains(n.target)&&t(n)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),()=>{document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}),[e,t])}var C=n(49568);class w extends(C.Ay.Record({type:"file_upload",errorKey:null,translationOptions:null})){}var I=n(68414),x=n.n(I),R=n(11021);const k="adaWebChat",O="voice";class N extends(C.Ay.Record({didSurfaceCsatTooltip:!1,didFailFetchingLogs:!1,loading:!0,hasErrors:!1,chatEnabled:!0,errorType:null,lastMessageHasError:!1,messagesWithError:C.Ay.List(),pageNumber:1,currentConversationIndex:0,canLoadMore:!0,loadingMessages:!1,socketConnected:!1,pusherMessageChannelConnected:!1,greetingHandle:"",greeting:C.Ay.Map({val:null,isFollowUpResponseId:!1}),inState:!1,stateType:null,stateData:{},showCloseButton:!1,showNavBar:!1,responseLoading:!1,notification:!1,notificationInfo:C.Ay.Map(),initializationPhase:"pre",predictiveSuggestionsVisible:!0,animateMessageListUp:!0,animatePredictiveSuggestionsOffstage:!1,sessionID:x().v4(),lightBoxMessage:null,isFileUploading:!1,isTestBot:!1,toastMessage:null,isToastMessageVisible:!1,toastType:null,fileUploadError:null,openSecretMessage:!1,secretButtonEnabled:"true"===R.I.retrieve("secretButton"),keyboardNavigation:!1,hasActiveConversationLiveChatBeenEndedByUser:!1,showRetryDialog:!1,testBotModality:k})){}},55017:function(e,t,n){"use strict";n.d(t,{Bw:function(){return p},HI:function(){return m},WF:function(){return u},XG:function(){return f},hr:function(){return g},uG:function(){return d}});var a=n(25054);const r=(0,n(4276).tZ)("performance");let o;r.setLoggerReady();let i,s=!1,c=!1,l=!1;const u=()=>{o||(o=performance.now())},d=()=>{if(s)return;const e=((performance.now()-o)/1e3).toFixed(4);r.info("Chat start up time: ".concat(e,"s"),{startUpTime:e}),s=!0};function g(){"hidden"!==document.visibilityState?document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&(c=!0)})):c=!0}const p=()=>{l||c||((0,a.$H)("chat_ui_rendered_while_being_visible",{timeMS:performance.now()}),l=!0)},m=()=>{i||(i=performance.now())},f=()=>{if(!i)return 0;const e=performance.now()-i;return i=null,e}},54251:function(e,t,n){"use strict";n.d(t,{ResourceType:function(){return s},fetchMany:function(){return L},fetchOne:function(){return k},fetchOneIfNeeded:function(){return O},getResource:function(){return b},getResources:function(){return T},postAction:function(){return M},pushResource:function(){return w},pushResources:function(){return I},resourcesReducer:function(){return B}});var a=n(25473),r=n.n(a),o=n(90438),i=n(52236);let s;!function(e){e.CONVERSATION="conversation",e.CSAT_SETTINGS="csat_settings"}(s||(s={}));var c=n(39904),l=n(59649),u=n(64467),d=n(49568),g=n(55127),p=n.n(g),m=n(12178);function f(e){const{type:t}=e,n={...e,id:"unknown"};class a extends(d.Ay.Record(n)){constructor(e){super(e),this.attributes=e}static getAttributesFromResponseData(e){return d.Ay.fromJS((0,m.o)(e)).toObject()}static fromResponse(e){return new this(this.getAttributesFromResponseData(e))}static getFetchManyUrl(){return"/".concat(p()(t),"/")}static getFetchOneUrl(e){return e?"/".concat(t,"/").concat(e,"/"):"/".concat(t,"/")}static getPostActionUrl(e,n){return"/".concat(p()(t),"/").concat(e,"/actions/").concat(n,"/")}static normalizeFetchManyPayload(e){return e}mergeFromResponse(e){const t=this.constructor,n=t.getAttributesFromResponseData(e);return new t({...this.attributes,...n})}}return(0,u.A)(a,"type",t),a}class h extends(f({type:s.CONVERSATION,active:!1,csat:null,channelExternalConversationId:null,created:null,endedBy:null,hadHandoff:!1})){static getAttributesFromResponseData(e){const t=super.getAttributesFromResponseData(e);return{...t,csat:t.csat?new c.CsatResult(t.csat.toJS()):null}}static getFetchManyUrl(e){return e.filter&&e.filter.recent&&e.filter.chatterId?"/conversations/recent/chat/".concat(e.filter.chatterId,"/"):"/conversations/"}static getFetchOneUrl(e){return"/conversations/".concat(e,"/")}static normalizeFetchManyPayload(e){return{data:e.conversations}}get hasPostAgentCsatResult(){return Boolean(this.csat&&this.csat.surveyType===l.C.POST_AGENT)}get hasAnswerFlowCsatResult(){return Boolean(this.csat&&this.csat.surveyType===l.C.ANSWER_FLOW)}}var E=n(1217);class v extends(f({type:s.CSAT_SETTINGS,satisfactionStyle:l.P.EMOJI,satisfactionRange:5,satisfactionLabel:d.Ay.Map(),followUpFeedbackIsEnabled:!1,followUpFeedbackNegativeLabel:d.Ay.Map(),followUpNegativeFeedbackOptions:d.Ay.List(),followUpPositiveFeedbackOptions:d.Ay.List(),followUpFeedbackPositiveLabel:d.Ay.Map(),resolutionIsEnabled:!1,resolutionLabel:d.Ay.Map(),openFeedbackIsEnabled:!1,openFeedbackLabel:d.Ay.Map(),openFeedbackHint:d.Ay.Map(),postChatSurveyIsEnabled:!1,respondToNegativeFeedback:!1,anytimeSurveyIsEnabled:!1,order:d.Ay.List(),required:d.Ay.List(),surveyType:"bot"})){static getAttributesFromResponseData(e){const t=super.getAttributesFromResponseData(e);return{...t,followUpNegativeFeedbackOptions:t.followUpNegativeFeedbackOptions.map((e=>({id:e.get("id"),label:d.Ay.Map(e.get("label"))}))),followUpPositiveFeedbackOptions:t.followUpPositiveFeedbackOptions.map((e=>({id:e.get("id"),label:d.Ay.Map(e.get("label"))})))}}static getFetchOneUrl(){return"/csat_settings?survey_type=".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bot")}get hasSurveyQuestionOnly(){return!this.followUpFeedbackIsEnabled&&!this.openFeedbackIsEnabled&&!this.resolutionIsEnabled}get hasSurveyAndTextFeedbackOnly(){return Boolean(this.openFeedbackIsEnabled&&!this.followUpFeedbackIsEnabled&&!this.resolutionIsEnabled)}hasPostChatSurvey(e){return!!e.hasFeature(E.Features.CSAT_V2)&&!!e.hasFeature(E.Features.CSAT_PRO_POST_CHAT)&&this.postChatSurveyIsEnabled}}const y={[s.CONVERSATION]:h,[s.CSAT_SETTINGS]:v};function A(e){if(!(e in y))throw new Error('"'.concat(e,'" is not a valid resource type'));return y[e]}const _="fetch-many-default";function S(e,t){return e.resources[t]}function b(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const a=S(e,t);if(!a)return null;if(n)return a.byId[n];const r=a.requests["fetch-one-default"];if(!r)return null;const o=r.result;return o&&"string"==typeof o?a.byId[o]:null}function T(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{filter:a}=n,o=a?r()({filter:a}):_,i=S(e,t);if(!i)return null;const s=i.requests[o];if(!s)return null;const c=s.result;return c&&Array.isArray(c)?c.map((e=>i.byId[e])):null}function C(e,t){return{type:"FETCH_MANY_RESOURCES_REQUEST",resourceType:e,requestKey:t}}function w(e,t){return{type:"PUSH_RESOURCE",resourceType:e,responseData:t}}function I(e){return{type:"PUSH_RESOURCES",responseData:e}}function x(e,t,n){return{type:"FETCH_MANY_RESOURCES_SUCCESS",resourceType:e,responseData:n,requestKey:t}}const R={};function k(e,t){const n=void 0===t?"fetch-one-default":"fetch-one-".concat(t),a=A(e).getFetchOneUrl(t),r="".concat(e,"-").concat(n);return async t=>{if(r in R)return;t(function(e,t){return{type:"FETCH_ONE_RESOURCE_REQUEST",resourceType:e,requestKey:t}}(e,n)),R[r]=i.FH.get(a);const o=await R[r];t(function(e,t,n){return{type:"FETCH_ONE_RESOURCE_SUCCESS",resourceType:e,responseData:n,requestKey:t}}(e,n,o.data)),delete R[r]}}function O(e,t){return async(n,a)=>b(a(),e,t)?null:n(k(e,t))}const N={};function L(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{filter:n}=t,a=n?r()({filter:n}):_,o=A(e),s=o.getFetchManyUrl(t),c="".concat(e,"-").concat(a);return async t=>{if(c in N)return N[c];t(C(e,a)),N[c]=i.FH.get(s);const n=await N[c],r=o.normalizeFetchManyPayload(n.data);return t(x(e,a,r)),delete N[c],n}}function M(e,t,n,a){const r=A(e).getPostActionUrl(t,n);return async t=>{let s;try{s=await i.FH.post(r,a)}catch(t){throw new o.eZ('POST request failed for "resourceType": '.concat(e,', "action": ').concat(n,'. Reason: "').concat(t,'"'))}"data"in s.data&&t(w(e,s.data))}}n(41444);const D={};function F(e,t){const{resourceType:n,requestKey:a}=t,r=e[n]||{byId:{},requests:{}},o=r.requests[a]||{isResolved:!1,result:null};return{...e,[n]:{...r,requests:{...r.requests,[a]:{...o,isResolved:!1}}}}}function U(e,t,n){const a=A(t),r=e[t]||{byId:{},requests:{}},o={};return n.forEach((e=>{const t=r.byId[e._id],n=t?t.mergeFromResponse(e):a.fromResponse(e);o[n.id]=n})),{...e,[t]:{...r,byId:{...r.byId,...o}}}}function z(e,t){const{resourceType:n,responseData:a}=t;return U(e,n,[a.data])}function P(e,t){let n=e;return t.responseData.forEach((e=>{n=U(n,e._type,[e])})),n}function G(e,t){var n;const{resourceType:a,requestKey:r,responseData:o}=t,i=U(e,a,[o.data]);return{...i,[a]:{...i[a],requests:{...null===(n=i[a])||void 0===n?void 0:n.requests,[r]:{isResolved:!0,result:o.data._id}}}}}function H(e,t){var n;const{resourceType:a,requestKey:r,responseData:o}=t,i=U(e,a,o.data);return{...i,[a]:{...i[a],requests:{...null===(n=i[a])||void 0===n?void 0:n.requests,[r]:{isResolved:!0,result:o.data.map((e=>e._id))}}}}}function B(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_ONE_RESOURCE_REQUEST":case"FETCH_MANY_RESOURCES_REQUEST":return F(e,t);case"FETCH_ONE_RESOURCE_SUCCESS":return G(e,t);case"FETCH_MANY_RESOURCES_SUCCESS":return H(e,t);case"PUSH_RESOURCE":return z(e,t);case"PUSH_RESOURCES":return P(e,t);default:return e}}},41444:function(){},39904:function(e,t,n){"use strict";n.d(t,{CsatResult:function(){return a.CsatResult}});var a=n(70213)},70213:function(e,t,n){"use strict";n.d(t,{CsatResult:function(){return r}});var a=n(49568);class r extends(a.Ay.Record({score:null,originalScore:null,feedback:[],resolved:null,comment:null,style:null,surveyType:null,isPositive:null})){static createPatch(e){const t={};return"score"in e&&(t.score=e.score||void 0),"originalScore"in e&&(t.originalScore=e.originalScore||void 0),"feedback"in e&&(t.feedback=e.feedback),"resolved"in e&&(t.resolved=e.resolved),"comment"in e&&(t.comment=e.comment||void 0),"surveyType"in e&&(t.survey_type=e.surveyType||void 0),t}serialize(){return{score:this.score,originalScore:this.originalScore,feedback:this.feedback,resolved:this.resolved,comment:this.comment,survey_type:this.surveyType}}}},64766:function(e,t,n){"use strict";n.d(t,{cB:function(){return l},ZJ:function(){return s}});var a=n(96540),r=n(53058);function o(e,t,n,a){return{type:"SET_SHEET_CONTENT",content:e,name:null!==e?t:void 0,sheetStyle:n,initialFocusId:(null==a?void 0:a.focusTrapParams.initialFocusId)||void 0,returnFocusId:(null==a?void 0:a.focusTrapParams.returnFocusId)||void 0,useFocusTrap:(null==a?void 0:a.useFocusTrap)||!1}}function i(e){return{type:"SET_SHEET_STYLE",sheetStyle:e}}function s(){const e=(0,r.wA)(),t=(0,a.useCallback)((function(){return e(o(...arguments))}),[e]),n=(0,a.useCallback)((()=>e(o(null))),[e]),s=(0,a.useCallback)((()=>e(o(null,void 0,void 0,{focusTrapParams:{initialFocusId:void 0,returnFocusId:void 0},useFocusTrap:!0}))),[e]),c=(0,a.useCallback)((function(){return e(i(...arguments))}),[e]);return{sheet:(0,r.d4)((e=>e.sheet)),setSheetContent:t,closeSheet:n,setSheetStyle:c,closeSheetWithFocusTrap:s}}const c={content:null,name:void 0,style:"default",initialFocusId:void 0,returnFocusId:void 0,useFocusTrap:!1};function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SHEET_CONTENT":return{...e,content:t.content,name:t.name,style:t.sheetStyle||"default",initialFocusId:t.initialFocusId,returnFocusId:t.returnFocusId,useFocusTrap:t.useFocusTrap};case"SET_SHEET_STYLE":return{...e,style:t.sheetStyle};default:return e}}},11021:function(e,t,n){"use strict";n.d(t,{A:function(){return r},I:function(){return o}});var a=n(26183);const r=a.BB,o={storageType:a.BB,updateSession(e){this.storageType="session"===e?a.ad:a.BB},retrieve(e){return this.storageType.getItem(e)},store(e,t){return this.storageType.setItem(e,t)},setItem(e,t){return this.storageType.setItem(e,t)},destroy(e){return this.storageType.removeItem(e)}}},16711:function(e,t,n){"use strict";n.d(t,{Nj:function(){return m},mf:function(){return f}});var a=n(25473),r=n.n(a),o=n(16762),i=n.n(o),s=n(47654),c=n.n(s),l=n(68060),u=n(53177);function d(e){return e.replace(/\w\S*/g,(e=>e.charAt(0).toUpperCase()+e.slice(1)))}const g=e=>t=>{if(!t)return e;let n=e;return Object.keys(t).forEach((e=>{const a=new RegExp("<%= ".concat(e," %>"),"g"),r=t[e]||"";n=n.replace(a,r)})),n};function p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.P;const t={};return function(n){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=n,s=o in t?t[o]:null;let c=e=>e;if(r.capitalize&&(c=d),r.lowercase&&(c=e=>e.toLocaleLowerCase()),s)return c(s(a));const m=i()(p.globalTranslations,o),f=u.qG.getCleanedLanguageCode(e);if(m){const e=m[f];return e?t[o]=g(e):(window.console.warn("Translation `".concat(o,"` not found for language `").concat(f,"`")),t[o]=g(m[l.P]||"")),c(t[o](a))}return""}}p.globalTranslations=u.qG.translations;const m=c()(p,(e=>r()({l:e})));function f(){const e=(navigator.language||navigator.userLanguage||navigator.browserLanguage||navigator.systemLanguage||l.P).toLowerCase();if((0,u.wo)(e))return e;if(e.includes("-")){const t=e.split("-")[0];if((0,u.wo)(t))return t}return e}},67871:function(e,t,n){"use strict";n.d(t,{AngleLeftIcon:function(){return j.A},AngleRightIcon:function(){return q.A},ArrowUpIcon:function(){return O.A},BellIcon:function(){return U.A},BellSlashIcon:function(){return z.A},BrokenImageIcon:function(){return V.A},CheckIcon:function(){return Z.A},CloseIcon:function(){return M.A},CommentIcon:function(){return Q.A},CommentInfoAlt:function(){return X.A},CommentSlashIcon:function(){return Y.A},DownloadIcon:function(){return K.A},EnvelopeIcon:function(){return G.A},MIN_UI_WIDTH:function(){return y},MenuIcon:function(){return N.A},MinimizeIcon:function(){return L.A},Space5:function(){return d},Space6:function(){return g},SyncErrorIcon:function(){return W.A},ThumbsDownIcon:function(){return B.A},ThumbsUpIcon:function(){return H.A},TranslateIcon:function(){return P.A},VolumeIcon:function(){return F.A},VolumeMuteIcon:function(){return D.A},getThemeParams:function(){return T},getUiTheme:function(){return b},getUiThemeSelector:function(){return I},useRefHeight:function(){return k},useTheme:function(){return R}});const a={overlayColor:"rgba(0, 0, 0, 0.4)",messageBgColor:"#292929",bgMessageLoader:"linear-gradient(to right, rgba(255,255,255,0) 0%, rgba(255,255,255,0.08) 25%, rgba(255,255,255,0) 55%)",colorTextDefault:"rgba(255, 255, 255, 0.85)",colorTextEmphasized:"rgba(255, 255, 255, 0.98)",colorTextSubdued:"rgba(255, 255, 255, 0.6)",colorTextSuccess:"#007335",colorTextWarning:"#A35F00",colorTextError:"#E71D45",colorTextInverted:"rgba(0, 0, 0, 0.98)",colorTextDisabled:"rgba(255, 255, 255, 0.32)",colorTextInfo:"#99A5FF",colorTextLoadingWords:"rgba(255, 255, 255, 0.95)",colorIconDisabled:"rgba(255, 255, 255, 0.38)",colorIconInverted:"rgba(0, 0, 0, 0.98)",colorIconDefault:"rgba(255, 255, 255, 0.6)",colorOverlayHover:"rgba(255, 255, 255, 0.1)",colorSurfaceDefault:"#121212",colorSurfaceSheet:"#2A2A2A",colorSurfaceCardElevated:"#2A2A2A",colorSurfaceCardDepressed:"#121212",colorSurfaceSuccess:"#E0F4E9",colorSurfaceWarning:"#FFF8D6",colorSurfaceError:"#FCE0E6",colorSurfaceTooltip:"#545454",colorDockedSheetBorder:"#121212",colorEmbellishmentInfo:"#7A88FF",colorSurfaceMessagePrimary:"#2A2A2A",colorSurfaceMessageSecondary:"#3D3D3D",colorSolid1:"#363636",colorSolid2:"#4D4D4D",colorSolid3:"#656565",colorSolid4:"#7D7D7D",colorSolidInverted:"#FFFFFF",colorOutline1:"rgba(255, 255, 255, 0.06)",colorOutline2:"rgba(255, 255, 255, 0.1)",colorOutline3:"rgba(255, 255, 255, 0.42)",colorOutline4:"rgba(255, 255, 255, 0.6)",colorOutlineError:"#FF738E",colorEmbellishmentSuccess:"#5DDB98",colorEmbellishmentError:"#FF738E"},r={bgMessageLoader:"linear-gradient(to right, rgba(0,0,0,0.0) 0%, rgba(0,0,0,0.08) 25%, rgba(0,0,0,0) 55%)",overlayColor:"rgba(0, 0, 0, 0.25)",messageBgColor:"#F3F3F3",colorTextDefault:"rgba(0, 0, 0, 0.85)",colorTextEmphasized:"rgba(0, 0, 0, 0.98)",colorTextSubdued:"rgba(0, 0, 0, 0.6)",colorTextSuccess:"#007335",colorTextWarning:"#A35F00",colorTextError:"#E71D45",colorTextInverted:"rgba(255, 255, 255, 0.98)",colorTextDisabled:"rgba(0, 0, 0, 0.32)",colorTextInfo:"#293FFF",colorTextLoadingWords:"rgba(0, 0, 0, 0.95)",colorOverlayHover:"rgba(0, 0, 0, 0.06)",colorSurfaceSheet:"#FFFFFF",colorSurfaceCardElevated:"#FFFFFF",colorSurfaceCardDepressed:"#FFFFFF",colorSurfaceSuccess:"#E0F4E9",colorSurfaceWarning:"#FFF8D6",colorSurfaceError:"#FCE0E6",colorSurfaceTooltip:"#121212",colorSurfaceDefault:"#FFFFFF",colorDockedSheetBorder:"#E8E8EB",colorSurfaceMessagePrimary:"#F3F3F3",colorSurfaceMessageSecondary:"#FFFFFF",colorSolid1:"#F3F3F3",colorSolid2:"#E7E7E7",colorSolid3:"#CFCFCF",colorSolid4:"#B6B6B6",colorSolidInverted:"#121212",colorOutline1:"rgba(0, 0, 0, 0.06)",colorOutline2:"rgba(0, 0, 0, 0.1)",colorOutline3:"rgba(0, 0, 0, 0.42)",colorOutline4:"rgba(0, 0, 0, 0.6)",colorOutlineError:"#E71D45",colorEmbellishmentInfo:"#293FFF",colorEmbellishmentSuccess:"#09C360",colorEmbellishmentError:"#DE1B42",colorIconDefault:"rgba(0, 0, 0, 0.6)",colorIconDisabled:"rgba(0, 0, 0, 0.38)",colorIconInverted:"rgba(255, 255, 255, 0.98)"};var o,i,s,c=n(57528),l=n(64612),u=n(92430);l.Ay.div(o||(o=(0,c.A)(["\n  height: ",";\n"])),u.v.space4);const d=l.Ay.div(i||(i=(0,c.A)(["\n  height: ",";\n"])),u.v.space5),g=l.Ay.div(s||(s=(0,c.A)(["\n  height: ",";\n"])),u.v.space6);var p=n(96540),m=n(53058),f=n(47654),h=n.n(f),E=n(67207),v=n(1217);const y=320,A=4.5;var _,S;function b(){let{tint:e,scale:t="default",style:n="round",darkMode:o=!1,headerColor:i=null,colorSurfaceDefault:s,themeFgColor:d=null,isMobile:g=!1,baseTextColor:p=null,campaignColor:m=u.c.colorTextWhite,campaignFontColor:f=u.c.colorTextBlack}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},h=e||u.c.themeDefault,v=r;o&&(v={...r,...a});const y=s||v.colorSurfaceDefault;(0,E.bJ)(h,y)<1.1&&(h=v.colorTextDefault);const b=(0,E.bJ)(h,u.c.colorTextWhite)>=A?(0,E.No)(.4,(0,E.a)(.159,h)):(0,E.No)(.4,(0,E.e$)(.159,h)),T="box-shadow: 0 0 0 4px ".concat(b),C={};return p&&(C.colorTextDefault=(0,E.No)(.15,p),C.colorTextEmphasized=(0,E.No)(.05,p),C.colorIconDefault=(0,E.No)(.4,p)),{...v,...C,themeColor:h,themeFgColor:d||((0,E.bJ)(h,u.c.colorTextWhite)>=A?u.c.colorTextWhite:u.c.colorTextBlack),themeOutlineColor:C.colorTextDefault||((0,E.bJ)(h,y)>=A?h:v.colorTextDefault),mainBorderRadius:"8px",messageBorderRadius:"rectangular"===n?"8px":"20px",hoverOverlayStyle:(0,l.AH)(_||(_=(0,c.A)(["\n      background-image: linear-gradient(",", ",");\n    "])),v.colorOverlayHover,v.colorOverlayHover),focusRingColor:b,focusRingStyle:T,focusStyle:(0,l.AH)(S||(S=(0,c.A)(["\n      &:focus {\n        outline: none;\n\n        &:not(:active) {\n          ",";\n        }\n      }\n\n      &:focus-visible {\n        outline: none;\n\n        &:not(:active) {\n          ",";\n        }\n      }\n\n      &:focus:not(.focus-visible) {\n        box-shadow: none;\n      }\n    "])),T,T),mainFontSize:{small:u.v.smallFontSize,default:u.v.mainFontSize,large:u.v.largeFontSize}[t],smallFontSize:{small:u.v.xSmallFontSize,default:u.v.smallFontSize,large:u.v.smallFontSize}[t],headerColor:i||y,style:n,xSmallFontSize:u.v.xSmallFontSize,scale:t,isMobile:g,campaignColor:m,campaignFontColor:f}}const T=e=>{const t=e.uiSettings.get("chat"),n=Boolean(window.matchMedia("(prefers-color-scheme: dark)").matches),a="dark"===t.get("theme")||"auto"===t.get("theme")&&n,r=function(e){const t=e.uiSettings.get("chat"),n="branded"===t.get("brandedCampaigns")?e.tint:u.c.colorTextWhite;return{campaignColor:n,fontColor:("branded"===t.get("brandedCampaigns")&&t.get("advancedColorsEnabled")?t.get("textOverAccentColor"):null)||((0,E.bJ)(n,u.c.colorTextWhite)>=A?u.c.colorTextWhite:u.c.colorTextBlack)}}(e);return{tint:e.tint,style:t.get("style"),scale:t.get("textSize"),darkMode:a,isMobile:e.isMobile,headerColor:t.get("headerColorEnabled")?t.get("headerColor"):null,themeFgColor:t.get("advancedColorsEnabled")?t.get("textOverAccentColor"):null,campaignColor:r.campaignColor,campaignFontColor:r.fontColor}},C=h()((e=>b(T(e)))),w=h()((e=>{const t=e.uiSettings.get("chat"),n=t.get("headerColorEnabled")&&t.get("headerColor");if(!n)return C(e);const a=(0,E.bJ)(n,u.c.colorTextWhite)>=A;return b({...T(e),colorSurfaceDefault:n,darkMode:a,baseTextColor:t.get("advancedColorsEnabled")?t.get("headerTextColor"):null})}));function I(e){const t=(0,v.getClient)(e);return C(t)}function x(e){const t=(0,v.getClient)(e);return w(t)}function R(){return{theme:(0,m.d4)(I),headerTheme:(0,m.d4)(x)}}function k(){const[e,t]=(0,p.useState)(0),n=(0,p.useRef)(null);return(0,p.useLayoutEffect)((()=>{const e=n.current;e&&t(e.scrollHeight)}),[]),{height:e,rootRef:n}}var O=n(47340),N=n(63889),L=n(76261),M=n(89553),D=n(27793),F=n(75911),U=n(91512),z=n(37260),P=n(62949),G=n(8769),H=n(8064),B=n(71553),Z=n(19329),W=n(87874),V=n(18500),K=n(79896),j=n(4741),q=n(27734),X=n(75147),Q=n(62488),Y=n(62604)},48350:function(e,t,n){"use strict";n.d(t,{D:function(){return a}});const a=e=>{const t=new RegExp("[?&]".concat(e,"=([^&#]*)")).exec(window.location.href);return t?decodeURI(t[1]):null}},64955:function(e,t,n){"use strict";n.d(t,{k:function(){return o}});var a=n(17999),r=n.n(a);n(55373);class o extends(r()){pushHistory(){const e=this.toString();window.history.pushState({path:e},"",e)}toString(){const{host:e,path:t}=this,n=this.protocol?"".concat(this.protocol,"://"):"",a=this.port?":".concat(this.port):"";let r=Object.keys(this.query).map((e=>"".concat(e,"=").concat(this.query[e]))).join("&");return r=this.query?"?".concat(r):"","".concat(n).concat(e).concat(a).concat(t).concat(r)}}},19574:function(e,t,n){"use strict";n.d(t,{vt:function(){return l},l$:function(){return c},Tf:function(){return s}});var a=n(26183),r=n(21962),o=n(52236),i=n(69734);const s=e=>e.includes(i.mv)?{type:"SET_PAGE_STATE",payload:{testBotModality:i.mv}}:{type:"SET_PAGE_STATE",payload:{testBotModality:i.VB}},c=(e,t)=>async(n,i)=>{const s=i().chatter.get("canViewDemoContent"),c=await r.embedStore.getState().then((e=>e.greeting));a.BB.setItem("testBotPhoneNumber",e);const l={can_view_demo_content:s,phone_number:e,language_code_override:t,initial_response_id:c};o.FH.post("/voice/call",l)},l=()=>a.BB.getItem("testBotPhoneNumber")},86471:function(e,t,n){"use strict";function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((t=>{setTimeout(t,e)}))}n.d(t,{u:function(){return a}})},13316:function(e,t,n){"use strict";n.d(t,{O4:function(){return m},ll:function(){return h},oW:function(){return f}});var a=n(16762),r=n.n(a),o=n(74262),i=n(3278),s=n(21962),c=n(17936),l=n(90438),u=n(52236),d=n(22854),g=n(86471),p=n(99651);async function m(){if(!(0,d.a)())return Promise.reject(new Error(o.l2));if((0,c.E)()===i.y.Embed2)try{const{token:e}=await s.fc.embedFetch("JWT_AUTH","JWT_AUTH_RESPONSE");if(!e)throw o.cg;return e}catch(e){return(0,l.to)(e),Promise.reject(new Error("".concat(e)))}return new Promise(((e,t)=>{const n=a=>{const i=r()(a,"data.ada");if(a.source===window.parent&&i&&"object"==typeof i&&"token"in i){const{token:a}=i;window.removeEventListener("message",n,!0),a?e(a):t(new Error(o.cg))}};window.addEventListener("message",n,!0),setTimeout((()=>{window.removeEventListener("message",n,!0),t(new Error(o.XM))}),1e4),window.parent.postMessage({authEvent:null},(0,p.Bq)())}))}async function f(e){let t,n;try{t=await m()}catch(e){return void(0,l.to)(e)}try{n=await u.FH.patch("/chatters/".concat(e,"/zendesk_chatter_auth/"),{zendesk_chatter_auth_token:t})}catch(e){return void(0,l.to)(e)}const{zendesk_chatter_auth_results:{expire_in:a}}=n.data;a&&(await(0,g.u)(a),f(e))}async function h(e,t){return await(0,g.u)(e),f(t)}},59649:function(e,t,n){"use strict";let a,r;n.d(t,{C:function(){return a},P:function(){return r}}),function(e){e.ANSWER_FLOW="answer_flow",e.PROACTIVE="proactive",e.END_CHAT="end_chat",e.POST_AGENT="live_chat"}(a||(a={})),function(e){e.THUMBS="THUMBS",e.NUMERIC="NUMERIC",e.NUMERIC_TEN="NUMERIC_TEN",e.EMOJI="EMOJI"}(r||(r={}))},86981:function(e,t,n){"use strict";n.d(t,{R7:function(){return a},U7:function(){return s},h5:function(){return r},p0:function(){return o},u1:function(){return i}});const a="csat",r="greeting",o="presence",i="widget",s="local_notification_permission"}},function(e){e.O(0,[8096],(function(){return 32035,e(e.s=32035)})),e.O()}]);